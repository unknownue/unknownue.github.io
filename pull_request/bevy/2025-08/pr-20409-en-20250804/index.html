<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20409 Make WgpuWrapper public again
        
    </title><meta content="#20409 Make WgpuWrapper public again" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-08/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-08-04</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-08/pr-20409-zh-cn-20250804>中文</a></div></div><div class=pr-content><h2 id=make-wgpuwrapper-public-again>Make WgpuWrapper public again</h2><h3 id=basic-information>Basic Information</h3><ul><li><strong>Title</strong>: Make WgpuWrapper public again<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20409<li><strong>Author</strong>: tronical<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Rendering, S-Ready-For-Final-Review, P-Regression<li><strong>Created</strong>: 2025-08-04T07:17:03Z<li><strong>Merged</strong>: 2025-08-04T17:59:45Z<li><strong>Merged By</strong>: james7132</ul><h3 id=description-translation>Description Translation</h3><h1 id=objective>Objective</h1><ul><li>WgpuWrapper was public in 0.16 and is needed to be able to call RenderCreation::manual.</ul><h2 id=solution>Solution</h2><ul><li>Make it public again after the revert #20220</ul><h2 id=testing>Testing</h2><ul><li>cargo build</ul><h3 id=the-story-of-this-pull-request>The Story of This Pull Request</h3><p>This PR addresses a regression in Bevy’s public API surface. The <code>WgpuWrapper</code> type, which was publicly accessible in version 0.16, became inaccessible after a previous change. This broke existing functionality for users who relied on <code>RenderCreation::manual</code>, a public API method that requires access to <code>WgpuWrapper</code> in its implementation.<p>The core issue stemmed from PR #20220, which inadvertently changed the visibility of <code>WgpuWrapper</code> from public to private. This broke the public contract of <code>RenderCreation::manual</code> since its implementation depends on this type. Users attempting to use this API method would encounter compilation errors due to the now-private type.<p>The solution is straightforward: restore the public visibility of <code>WgpuWrapper</code> by changing its import statement to use <code>pub use</code> instead of a regular <code>use</code>. This maintains API consistency with Bevy 0.16 and ensures downstream consumers can continue using <code>RenderCreation::manual</code> without modification. The change is minimal but crucial for maintaining backward compatibility.<p>The implementation required modifying just one line in the render crate’s root module. By making <code>WgpuWrapper</code> publicly accessible again, we restore the required visibility for <code>RenderCreation::manual</code> to function properly. This approach preserves the existing architecture while fixing the regression.<p>The impact is significant for users who depend on <code>RenderCreation::manual</code> for advanced rendering setup scenarios. Without this fix, their code would fail to compile when upgrading Bevy versions. The change demonstrates the importance of carefully considering visibility changes in public APIs, especially for types used in public method signatures.<h3 id=visual-representation>Visual Representation</h3><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph LR
</span><span>    UserCode["User Code"] -->|calls| RenderCreationManual["RenderCreation::manual()"]
</span><span>    RenderCreationManual -->|requires| WgpuWrapper
</span><span>    BevyRender["bevy_render (lib.rs)"] -->|exports| WgpuWrapper
</span></code></pre><h3 id=key-files-changed>Key Files Changed</h3><ol><li><strong>crates/bevy_render/src/lib.rs</strong><br> Changed the import visibility to restore public access to <code>WgpuWrapper</code></ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>use </span><span>wgpu_wrapper</span><span style=color:#ed9366>::</span><span>WgpuWrapper</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub use </span><span>wgpu_wrapper</span><span style=color:#ed9366>::</span><span>WgpuWrapper</span><span style=color:#61676ccc>;
</span></code></pre><p>This change makes <code>WgpuWrapper</code> publicly accessible again, allowing <code>RenderCreation::manual</code> to function as intended. The single-character change (+ “pub “) fixes the regression while maintaining all existing functionality.<h3 id=further-reading>Further Reading</h3><ol><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/getting-started/rendering/ target=_blank>Bevy Render Architecture</a> - Official documentation on Bevy’s rendering system<li><a rel="noopener nofollow noreferrer" href=https://docs.rs/wgpu target=_blank>wgpu Documentation</a> - Underlying graphics API used by Bevy<li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/book/ch07-03-paths-for-referring-to-an-item-in-the-module-tree.html target=_blank>Rust Visibility Rules</a> - Understanding pub/private modifiers in Rust</ol><h3 id=full-code-diff>Full Code Diff</h3><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_render/src/lib.rs b/crates/bevy_render/src/lib.rs
</span><span>index 5c55bd7193b5f..bf13c491ea96d 100644
</span><span style=color:#c594c5>--- a/crates/bevy_render/src/lib.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_render/src/lib.rs
</span><span style=color:#c594c5>@@ -123,7 +123,7 @@ </span><span style=color:#399ee6>use bitflags::bitflags;
</span><span> use core::ops::{Deref, DerefMut};
</span><span> use std::sync::Mutex;
</span><span> use tracing::debug;
</span><span style=color:#f07171>-use wgpu_wrapper::WgpuWrapper;
</span><span style=color:#86b300>+pub use wgpu_wrapper::WgpuWrapper;
</span><span> 
</span><span> /// Inline shader as an `embedded_asset` and load it permanently.
</span><span> ///
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-08/pr_20409.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>