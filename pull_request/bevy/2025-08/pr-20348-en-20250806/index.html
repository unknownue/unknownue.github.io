<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20348 `spec_v2` style and patterns
        
    </title><meta content="#20348 `spec_v2` style and patterns" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-08/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-08-06</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-08/pr-20348-zh-cn-20250806>中文</a></div></div><div class=pr-content><h1 id=analysis-of-pr-20348-spec-v2-style-and-patterns>Analysis of PR #20348: <code>spec_v2</code> style and patterns</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: <code>spec_v2</code> style and patterns<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20348<li><strong>Author</strong>: ecoskey<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Rendering, C-Usability, S-Ready-For-Final-Review, D-Modest<li><strong>Created</strong>: 2025-07-31T06:49:31Z<li><strong>Merged</strong>: 2025-08-06T17:36:55Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description>Description</h2><ul><li>Adds some util methods to remove some boilerplate from specializers. More will probably be added later but <code>set_target</code> and <code>set_layout</code> will be the most used I think. <ul><li>Note: Specializers can’t rely on their input descriptor having a certain shape, so instead of just <code>push</code>ing to each vec, the methods pad the length of the vec if necessary and set the value directly.</ul><li>After migrating a few engine <code>Specializer</code>s, <code>GetBaseDescriptor</code> & <code>SpecializedCache: Resource</code> both seem like anti-patterns, especially with dynamic materials on the horizon<li>Also removes <code>user_specializer</code>s. If anyone needs that functionality they can easily make a wrapper for it.</ul><h2 id=solution>Solution</h2><ul><li>Add the things<li>Nuke the stuff<li>update the migration guide</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><h3 id=the-problem-and-context>The Problem and Context</h3><p>The existing pipeline specialization system in Bevy had several pain points that complicated specialization logic. Specializers often needed to modify specific indices in vectors within pipeline descriptors, but couldn’t assume those vectors had sufficient length. This led to repetitive boilerplate code for bounds-checking and padding. Additionally, the <code>SpecializedCache</code> implementation was showing limitations: it required implementing <code>GetBaseDescriptor</code> and was automatically registered as a resource, which constrained how specializers could be composed and used. The <code>user_specializer</code> mechanism added unnecessary complexity when simpler composition patterns could achieve the same results.<h3 id=the-solution-approach>The Solution Approach</h3><p>The solution focuses on two main improvements: adding utility methods to simplify common specialization patterns, and refactoring the specialization architecture to remove anti-patterns. For the utilities, new methods were added to directly modify pipeline descriptors at specific indices while handling padding automatically. For the architecture, <code>SpecializedCache</code> was replaced with <code>Variants</code>, which no longer requires <code>GetBaseDescriptor</code> or automatic resource registration. The <code>user_specializer</code> mechanism was removed entirely since its functionality can be achieved through simple wrapper patterns.<h3 id=the-implementation>The Implementation</h3><p>The implementation introduces utility methods for pipeline descriptor modification:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// In RenderPipelineDescriptor
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>set_layout</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>index</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>usize</span><span>, </span><span style=color:#ff8f40>layout</span><span style=color:#61676ccc>:</span><span> BindGroupLayout) {
</span><span>    </span><span style=color:#f07171>filling_set_at</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>layout</span><span style=color:#61676ccc>,</span><span> index</span><span style=color:#61676ccc>, </span><span style=color:#f07171>empty_bind_group_layout</span><span>()</span><span style=color:#61676ccc>,</span><span> layout)</span><span style=color:#61676ccc>;
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// In FragmentState
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>set_target</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>index</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>usize</span><span>, </span><span style=color:#ff8f40>target</span><span style=color:#61676ccc>:</span><span> ColorTargetState) {
</span><span>    </span><span style=color:#f07171>filling_set_at</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>targets</span><span style=color:#61676ccc>,</span><span> index</span><span style=color:#61676ccc>, </span><span style=color:#55b4d4;font-style:italic>None</span><span style=color:#61676ccc>, </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(target))</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><p>These methods use a helper function that handles index validation and padding:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>fn </span><span style=color:#f29718>filling_set_at</span><span>&LTT</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Clone</span><span>>(</span><span style=color:#ff8f40>vec</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#55b4d4;font-style:italic>Vec</span><span>&LTT>, </span><span style=color:#ff8f40>index</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>usize</span><span>, </span><span style=color:#ff8f40>filler</span><span style=color:#61676ccc>:</span><span> T, </span><span style=color:#ff8f40>value</span><span style=color:#61676ccc>:</span><span> T) {
</span><span>    </span><span style=color:#fa6e32>let</span><span> num_to_fill </span><span style=color:#ed9366>= </span><span>(index </span><span style=color:#ed9366>+ </span><span style=color:#ff8f40>1</span><span>)</span><span style=color:#ed9366>.</span><span style=color:#f07171>saturating_sub</span><span>(vec</span><span style=color:#ed9366>.</span><span style=color:#f07171>len</span><span>())</span><span style=color:#61676ccc>;
</span><span>    vec</span><span style=color:#ed9366>.</span><span style=color:#f07171>extend</span><span>(iter</span><span style=color:#ed9366>::</span><span>repeat_n(filler</span><span style=color:#61676ccc>,</span><span> num_to_fill))</span><span style=color:#61676ccc>;
</span><span>    vec[index] </span><span style=color:#ed9366>=</span><span> value</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><p>The architecture changes include replacing <code>SpecializedCache</code> with <code>Variants</code>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Variants</span><span>&LTT</span><span style=color:#61676ccc>:</span><span> Specializable, S</span><span style=color:#61676ccc>: </span><span>Specializer&LTT>> {
</span><span>    specializer</span><span style=color:#61676ccc>:</span><span> S,
</span><span>    base_descriptor</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>T</span><span style=color:#ed9366>::</span><span>Descriptor,
</span><span>    primary_cache</span><span style=color:#61676ccc>: </span><span>HashMap<</span><span style=color:#fa6e32>S</span><span style=color:#ed9366>::</span><span>Key, </span><span style=color:#fa6e32>T</span><span style=color:#ed9366>::</span><span>CachedId>,
</span><span>    secondary_cache</span><span style=color:#61676ccc>: </span><span>HashMap&LTCanonical<</span><span style=color:#fa6e32>S</span><span style=color:#ed9366>::</span><span>Key>, </span><span style=color:#fa6e32>T</span><span style=color:#ed9366>::</span><span>CachedId>,
</span><span>}
</span></code></pre><p>Key differences from the old <code>SpecializedCache</code>:<ul><li>No longer implements <code>Resource</code><li>Doesn’t require <code>GetBaseDescriptor</code><li>Removes <code>user_specializer</code> functionality<li>Simplified initialization through direct constructor</ul><p>The macro system was updated to remove <code>#[base_descriptor]</code> attribute and related code generation:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before: FieldInfo contained use_base_descriptor flag
</span><span style=color:#fa6e32>struct </span><span style=color:#399ee6>FieldInfo </span><span>{
</span><span>    ty</span><span style=color:#61676ccc>:</span><span> Type,
</span><span>    member</span><span style=color:#61676ccc>:</span><span> Member,
</span><span>    key</span><span style=color:#61676ccc>:</span><span> Key,
</span><span>    use_base_descriptor</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>bool</span><span>,  </span><span style=color:#abb0b6;font-style:italic>// Removed
</span><span>}
</span></code></pre><h3 id=technical-insights>Technical Insights</h3><p>The <code>filling_set_at</code> utility abstracts a common pattern where specializers need to modify elements at specific indices in variably-sized vectors. This eliminates repetitive bounds-checking code while ensuring descriptors maintain valid structures. The <code>empty_bind_group_layout()</code> singleton serves as a safe filler value for layout vectors.<p>The transition from <code>SpecializedCache</code> to <code>Variants</code> reflects a shift from resource-oriented to data-oriented design. By removing the automatic resource registration, specializers gain flexibility in how they’re stored and composed. The elimination of <code>GetBaseDescriptor</code> simplifies the trait hierarchy and reduces implementation burden.<p>The migration guide was comprehensively updated to demonstrate how to transition existing code to the new patterns, including full before/after examples of pipeline specialization implementations.<h3 id=the-impact>The Impact</h3><p>These changes significantly reduce boilerplate in specializer implementations while making the specialization system more flexible and composable. The utility methods eliminate common error-prone vector index operations. The architectural changes remove unnecessary traits and constraints, paving the way for more dynamic material systems. The updated examples and migration guide ensure existing codebases can smoothly transition to the improved patterns.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Specializer] -->|Mutates| B[PipelineDescriptor]
</span><span>    C[Variants] -->|Holds| A
</span><span>    C -->|Caches| D[Pipeline IDs]
</span><span>    E[Utility Methods] -->|Simplify| B
</span><span>    F[Migration Guide] -->|Documents| G[Transition Path]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-render-src-render-resource-specializer-rs-8-126><code>crates/bevy_render/src/render_resource/specializer.rs</code> (+8/-126)</h3><p>Refactored the specialization cache system. Replaced <code>SpecializedCache</code> with <code>Variants</code> and removed <code>GetBaseDescriptor</code> trait.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>SpecializedCache</span><span>&LTT</span><span style=color:#61676ccc>:</span><span> Specializable, S</span><span style=color:#61676ccc>: </span><span>Specializer&LTT>> {
</span><span>    specializer</span><span style=color:#61676ccc>:</span><span> S,
</span><span>    user_specializer</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTSpecializerFn&LTT, S>>,
</span><span>    ...
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Variants</span><span>&LTT</span><span style=color:#61676ccc>:</span><span> Specializable, S</span><span style=color:#61676ccc>: </span><span>Specializer&LTT>> {
</span><span>    specializer</span><span style=color:#61676ccc>:</span><span> S,
</span><span>    base_descriptor</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>T</span><span style=color:#ed9366>::</span><span>Descriptor,
</span><span>    ...
</span><span>}
</span></code></pre><h3 id=crates-bevy-render-macros-src-specializer-rs-13-109><code>crates/bevy_render/macros/src/specializer.rs</code> (+13/-109)</h3><p>Removed <code>#[base_descriptor]</code> attribute and related code generation.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>enum </span><span style=color:#399ee6>FieldInfo </span><span>{
</span><span>    </span><span style=color:#ed9366>...
</span><span>    use_base_descriptor</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>bool</span><span style=color:#61676ccc>,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>enum </span><span style=color:#399ee6>FieldInfo </span><span>{
</span><span>    </span><span style=color:#ed9366>...
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// use_base_descriptor removed
</span><span>}
</span></code></pre><h3 id=release-content-migration-guides-composable-specialization-md-144-71><code>release-content/migration-guides/composable_specialization.md</code> (+144/-71)</h3><p>Completely updated migration guide with detailed before/after examples.<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span>// Before section showing old SpecializedRenderPipeline
</span><span>impl SpecializedRenderPipeline for MySpecializer {
</span><span>    type Key = MyKey;
</span><span>    fn specialize(&self, key: Self::Key) -> RenderPipelineDescriptor {
</span><span>        ...
</span><span>    }
</span><span>}
</span><span>
</span><span>// After section showing new Variants approach
</span><span>impl Specializer</span><span style=color:#55b4d490><</span><span style=color:#399ee6>RenderPipeline</span><span style=color:#55b4d490>></span><span> for MySpecializer {
</span><span>    type Key = MyKey;
</span><span>    fn specialize(
</span><span>        &self,
</span><span>        key: Self::Key,
</span><span>        descriptor: &mut RenderPipelineDescriptor,
</span><span>    ) -> Result</span><span style=color:#55b4d490><</span><span style=color:#399ee6>Canonical</span><span style=color:#f51818><</span><span style=color:#f29718>Self::Key</span><span style=color:#55b4d490>></span><span>, BevyError> {
</span><span>        ...
</span><span>    }
</span><span>}
</span></code></pre><h3 id=examples-shader-advanced-custom-phase-item-rs-42-42><code>examples/shader_advanced/custom_phase_item.rs</code> (+42/-42)</h3><p>Updated example to use new <code>Variants</code> pattern.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>init_resource</span><span style=color:#ed9366>::</span><span>&LTSpecializedCache&LTRenderPipeline, CustomPhaseSpecializer>>()
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Resource)]
</span><span style=color:#fa6e32>struct </span><span style=color:#399ee6>CustomPhasePipeline </span><span>{
</span><span>    variants</span><span style=color:#61676ccc>: </span><span>Variants&LTRenderPipeline, CustomPhaseSpecializer>,
</span><span>}
</span></code></pre><h3 id=crates-bevy-render-src-render-resource-pipeline-rs-31-1><code>crates/bevy_render/src/render_resource/pipeline.rs</code> (+31/-1)</h3><p>Added utility methods for pipeline descriptor modification.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// New methods:
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>RenderPipelineDescriptor </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>set_layout</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>index</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>usize</span><span>, </span><span style=color:#ff8f40>layout</span><span style=color:#61676ccc>:</span><span> BindGroupLayout) { </span><span style=color:#ed9366>... </span><span>}
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>FragmentState </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>set_target</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>index</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>usize</span><span>, </span><span style=color:#ff8f40>target</span><span style=color:#61676ccc>:</span><span> ColorTargetState) { </span><span style=color:#ed9366>... </span><span>}
</span><span>}
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_render/latest/bevy_render/render_resource/index.html target=_blank>Bevy Render Pipeline Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://gpuweb.github.io/gpuweb/wgsl/ target=_blank>WGSL Shader Language Specification</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/dbartolini/data-oriented-design target=_blank>Data-Oriented Design Resources</a><li><a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Composition_over_inheritance target=_blank>Composition Over Inheritance Patterns</a></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-08/pr_20348.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>