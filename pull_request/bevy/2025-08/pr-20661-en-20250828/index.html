<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20661 0.17 migration guide tune up
        
    </title><meta content="#20661 0.17 migration guide tune up" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-08/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-08-28</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-08/pr-20661-zh-cn-20250828>中文</a></div></div><div class=pr-content><h1 id=0-17-migration-guide-tune-up>0.17 migration guide tune up</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: 0.17 migration guide tune up<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20661<li><strong>Author</strong>: alice-i-cecile<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, S-Ready-For-Final-Review, A-Cross-Cutting, D-Straightforward<li><strong>Created</strong>: 2025-08-19T23:45:17Z<li><strong>Merged</strong>: 2025-08-28T17:20:52Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>The release candidate draws near!<h2 id=solution>Solution</h2><p>Polish the migration guides.<p>This is mostly uncontroversial copy-editing, but I’ve made more substantive changes in a handful of places to better contextualize controversial or complex changes.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>As Bevy approached its 0.17 release candidate, the engineering team recognized the need to refine the migration guides to ensure developers could smoothly transition between versions. This PR represents a comprehensive polish of existing documentation, focusing on clarity, accuracy, and better contextualization of complex changes.<p>The core problem was straightforward: migration guides needed refinement to effectively communicate breaking changes to developers. While many changes were minor copy edits, several required more substantive rewrites to properly explain the rationale behind architectural decisions and provide practical migration strategies.<p>The solution approach involved systematic review and improvement of all migration guides. For most files, this meant grammatical corrections, clearer phrasing, and better formatting. However, in key areas, the author made more significant changes:<ol><li>Replaced the outdated <code>remove_archetypecomponentid.md</code> with a new, more comprehensive <code>parallelism_strategy_changes.md</code> that better explained the scheduler changes<li>Enhanced explanations for the removal of deprecated batch spawning functions with clearer rationale and alternative approaches<li>Improved documentation around NonSend resource changes with better context about the long-term direction</ol><p>The implementation shows careful attention to technical communication. For example, the parallelism strategy changes now include concrete code examples showing both the problematic pattern and the solution using <code>Without</code> filters. The batch spawning removal guide now explains the performance implications and privacy violations that motivated the deprecation.<p>Technical insights from this work include:<ul><li>Migration guides should explain not just what changed, but why it changed<li>Concrete code examples are essential for understanding migration paths<li>Complex architectural decisions require clear rationale explanations<li>Documentation should anticipate developer questions and address them proactively</ul><p>The impact of these changes is significant for the developer experience. Well-polished migration guides reduce upgrade friction, prevent common mistakes, and help developers understand the architectural direction of the framework. The improvements particularly help with controversial changes like the parallelism strategy modification, where understanding the performance trade-offs is crucial.<pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Migration Guide Improvements] --> B[Copy Editing]
</span><span>    A --> C[Substantive Rewrites]
</span><span>    B --> D[Grammar Corrections]
</span><span>    B --> E[Clarity Improvements]
</span><span>    C --> F[Parallelism Strategy]
</span><span>    C --> G[Batch Spawning Removal]
</span><span>    C --> H[NonSend Resources]
</span><span>    F --> I[New Guide Created]
</span><span>    G --> J[Enhanced Rationale]
</span><span>    H --> K[Better Context]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=release-content-migration-guides-parallelism-strategy-changes-md-30-0><code>release-content/migration-guides/parallelism_strategy_changes.md</code> (+30/-0)</h3><p><strong>What changed</strong>: Created a new migration guide to replace the removed <code>remove_archetypecomponentid.md</code> with more comprehensive explanation of scheduler parallelism changes.<p><strong>Code snippets</strong>:<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span>The scheduler will now prevent systems from running in parallel if there </span><span style=color:#f07171;font-style:italic>*could*</span><span> be an archetype that they conflict on, even if there aren't actually any.
</span><span>To expand on this, previously, the scheduler would look at the entities that exist to determine if there's any overlap.
</span><span>Now, it determines it solely on the basis of the function signatures of the systems that are run.
</span></code></pre><h3 id=release-content-migration-guides-remove-archetypecomponentid-md-0-19><code>release-content/migration-guides/remove_archetypecomponentid.md</code> (+0/-19)</h3><p><strong>What changed</strong>: Removed this outdated guide as its content was superseded by the more comprehensive <code>parallelism_strategy_changes.md</code>.<h3 id=release-content-migration-guides-replace-non-send-resources-md-12-4><code>release-content/migration-guides/replace_non_send_resources.md</code> (+12/-4)</h3><p><strong>What changed</strong>: Enhanced explanation of NonSend resource changes with better context about long-term direction and implementation details.<p><strong>Code snippets</strong>:<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span>We are [working](</span><span style=color:#4cbf99;font-style:italic;text-decoration:underline>https://discord.com/channels/691052431525675048/1332109626962874468</span><span>) to move </span><span style=color:#ed9366;background-color:#61676c10>`!Send`</span><span> data out of the ECS, in order to simplify internal implementation,
</span><span>reduce the risk of soundness problems and unblock features such as resources-as-entities and improved scheduling.
</span></code></pre><h3 id=release-content-migration-guides-remove-deprecated-batch-spawning-md-8-5><code>release-content/migration-guides/remove_deprecated_batch_spawning.md</code> (+8/-5)</h3><p><strong>What changed</strong>: Improved explanation of why batch spawning functions were removed, with clearer rationale and better migration alternatives.<p><strong>Code snippets</strong>:<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span>These functions, when used incorrectly, could cause major performance problems and generally violated the privacy of the ECS internals in ways
</span><span>that the Bevy maintainers were not prepared to support long-term.
</span></code></pre><h3 id=release-content-migration-guides-dragenter-includes-dragged-entity-md-2-2><code>release-content/migration-guides/dragenter_includes_dragged_entity.md</code> (+2/-2)</h3><p><strong>What changed</strong>: Minor copy editing for consistency and clarity.<p><strong>Code snippets</strong>:<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span style=color:#fa6e32;font-weight:700># </span><span style=color:#399ee6;font-weight:700>Before:
</span><span>DragEnter events are now triggered when entering any entity...
</span><span>
</span><span style=color:#fa6e32;font-weight:700># </span><span style=color:#399ee6;font-weight:700>After:
</span><span style=color:#ed9366;background-color:#61676c10>`DragEnter`</span><span> events are now triggered when entering any entity...
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/ecs/ target=_blank>Bevy ECS Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/scheduling/ target=_blank>System Scheduling in Bevy</a><li><a rel="noopener nofollow noreferrer" href=https://diataxis.fr/how-to-guides/ target=_blank>Migration Guide Best Practices</a><li><a rel="noopener nofollow noreferrer" href=https://rust-lang.github.io/api-guidelines/documentation.html target=_blank>Rust API Guidelines</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-08/pr_20661.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>