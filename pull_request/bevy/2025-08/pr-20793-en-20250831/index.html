<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20793 Demote OpenGL to optional feature
        
    </title><meta content="#20793 Demote OpenGL to optional feature" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-08/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-08-31</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-08/pr-20793-zh-cn-20250831>中文</a></div></div><div class=pr-content><h1 id=demote-opengl-to-optional-feature>Demote OpenGL to optional feature</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Demote OpenGL to optional feature<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20793<li><strong>Author</strong>: tychedelia<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Rendering, S-Ready-For-Final-Review, X-Contentious<li><strong>Created</strong>: 2025-08-30T04:04:29Z<li><strong>Merged</strong>: 2025-08-31T08:19:42Z<li><strong>Merged By</strong>: mockersf</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>In practice, we don’t test OpenGL support and it’s been reported broken for several releases.<h2 id=solution>Solution</h2><p>Make the <code>gles</code> feature for <code>wgpu</code> optional, reflecting our level of support.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a practical maintenance issue with Bevy’s OpenGL support. The core problem was straightforward: OpenGL ES support through wgpu’s <code>gles</code> feature had been consistently broken across multiple releases, and the Bevy team wasn’t actively testing or maintaining it. Rather than continuing to include it as a default feature that users might rely on without realizing its unstable state, the decision was made to demote it to an optional feature.<p>The solution approach was pragmatic - instead of investing significant effort into fixing and maintaining OpenGL support (which would require ongoing testing resources), the team chose to accurately reflect the current level of support through feature flags. This aligns with common practice in Rust ecosystems where unstable or untested functionality is gated behind optional features.<p>The implementation involved several coordinated changes. First, the <code>gles</code> feature was removed from wgpu’s default features in Cargo.toml, making it opt-in rather than opt-out. This was the primary technical change:<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># Before:
</span><span style=color:#399ee6>wgpu </span><span>= { </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"26"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>default-features </span><span>= </span><span style=color:#ff8f40>false</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>features </span><span>= [
</span><span>  </span><span style=color:#86b300>"dx12"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"metal"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"vulkan"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"gles"</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic># This was included by default
</span><span>  </span><span style=color:#86b300>"naga-ir"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"fragile-send-sync-non-atomic-wasm"</span><span style=color:#61676ccc>,
</span><span>] }
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span style=color:#399ee6>wgpu </span><span>= { </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"26"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>default-features </span><span>= </span><span style=color:#ff8f40>false</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>features </span><span>= [
</span><span>  </span><span style=color:#86b300>"dx12"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"metal"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"vulkan"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#abb0b6;font-style:italic># "gles" removed from default features
</span><span>  </span><span style=color:#86b300>"naga-ir"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"fragile-send-sync-non-atomic-wasm"</span><span style=color:#61676ccc>,
</span><span>] }
</span></code></pre><p>Simultaneously, a new optional feature was added to allow users who specifically need OpenGL support to enable it:<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># New optional feature added
</span><span style=color:#399ee6>gles </span><span>= [</span><span style=color:#86b300>"wgpu/gles"</span><span>]
</span></code></pre><p>The changes also included important documentation updates to clarify the new requirements for OpenGL usage. The comments in <code>settings.rs</code> and <code>window/mod.rs</code> were updated to explicitly mention that the <code>gles</code> feature must now be enabled for ANGLE/OpenGL support:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// In settings.rs - updated documentation
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>// NOTE: If you want to use [`Backends::GL`] in a native app on `Windows` and/or `macOS`, you must
</span><span style=color:#abb0b6;font-style:italic>// use [`ANGLE`]. This is because wgpu requires EGL to create a GL context without a window...
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>// NOTE: If you want to use [`Backends::GL`] in a native app on `Windows` and/or `macOS`, you must
</span><span style=color:#abb0b6;font-style:italic>// use [`ANGLE`] and enable the `gles` feature. This is because wgpu requires EGL to create...
</span></code></pre><p>A comprehensive migration guide was added to help users understand this change and how to adapt their projects if they still require OpenGL support:<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span style=color:#abb0b6;background-color:#61676c10;font-weight:700>---
</span><span>title: "OpenGL ES </span><span style=color:#ed9366;background-color:#61676c10>`wgpu`</span><span> backend is no longer supported by default"
</span><span>pull_requests: [ 20793 ]
</span><span style=color:#fa6e32;font-weight:700>---
</span><span>
</span><span>The </span><span style=color:#ed9366;background-color:#61676c10>`gles`</span><span> backend for </span><span style=color:#ed9366;background-color:#61676c10>`wgpu`</span><span> is no longer included as a default feature of </span><span style=color:#ed9366;background-color:#61676c10>`bevy_render`</span><span>. OpenGL support is still
</span><span>available, but must be explicitly enabled by adding the </span><span style=color:#ed9366;background-color:#61676c10>`bevy_render/gles`</span><span> feature to your app. This change reflects the
</span><span>fact that OpenGL support is not tested and that some features may not work as expected or at all. We welcome
</span><span>contributions to improve OpenGL support in the future.
</span></code></pre><p>The technical impact of this change is significant for maintenance burden reduction. By making OpenGL support optional, the Bevy team no longer has to worry about breaking OpenGL functionality with every change, as users who need it must explicitly opt into the potentially unstable feature. This follows the principle of making common cases easy and edge cases possible.<p>For users, the change is transparent unless they specifically need OpenGL support. Those users can simply add the <code>gles</code> feature to their Cargo.toml:<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span>[</span><span style=color:#399ee6>dependencies</span><span>]
</span><span style=color:#399ee6>bevy </span><span>= { </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"0.14"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>features </span><span>= [</span><span style=color:#86b300>"bevy_render/gles"</span><span>] }
</span></code></pre><p>This approach demonstrates good software engineering practices around feature management and honest communication about support levels. Rather than silently providing broken functionality, the team is explicit about what works well and what doesn’t, allowing users to make informed decisions about their rendering backend choices.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[User Application] --> B[bevy_render Cargo.toml]
</span><span>    B --> C[wgpu dependency]
</span><span>    C --> D{Default Features}
</span><span>    D --> E[dx12]
</span><span>    D --> F[metal]
</span><span>    D --> G[vulkan]
</span><span>    C --> H[Optional Features]
</span><span>    H --> I[gles - requires explicit enable]
</span><span>    
</span><span>    J[Migration Guide] --> K[Documents change]
</span><span>    K --> L[Provides upgrade path]
</span><span>    
</span><span>    M[Documentation Updates] --> N[settings.rs]
</span><span>    M --> O[window/mod.rs]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-render-cargo-toml-1-1><code>crates/bevy_render/Cargo.toml</code> (+1/-1)</h3><p><strong>Purpose</strong>: Remove gles from default features and make it optional<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># Key change: removed "gles" from default wgpu features
</span><span style=color:#399ee6>wgpu </span><span>= { </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"26"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>default-features </span><span>= </span><span style=color:#ff8f40>false</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>features </span><span>= [
</span><span>  </span><span style=color:#86b300>"dx12"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"metal"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"vulkan"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#abb0b6;font-style:italic># "gles" removed here
</span><span>  </span><span style=color:#86b300>"naga-ir"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"fragile-send-sync-non-atomic-wasm"</span><span style=color:#61676ccc>,
</span><span>] }
</span><span>
</span><span style=color:#abb0b6;font-style:italic># Added optional feature
</span><span style=color:#399ee6>gles </span><span>= [</span><span style=color:#86b300>"wgpu/gles"</span><span>]
</span></code></pre><h3 id=release-content-migration-guides-gles-optional-md-9-0><code>release-content/migration-guides/gles_optional.md</code> (+9/-0)</h3><p><strong>Purpose</strong>: Document the change and provide migration guidance<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span>The </span><span style=color:#ed9366;background-color:#61676c10>`gles`</span><span> backend for </span><span style=color:#ed9366;background-color:#61676c10>`wgpu`</span><span> is no longer included as a default feature of </span><span style=color:#ed9366;background-color:#61676c10>`bevy_render`</span><span>. OpenGL support is still
</span><span>available, but must be explicitly enabled by adding the </span><span style=color:#ed9366;background-color:#61676c10>`bevy_render/gles`</span><span> feature to your app.
</span></code></pre><h3 id=crates-bevy-render-src-settings-rs-2-2><code>crates/bevy_render/src/settings.rs</code> (+2/-2)</h3><p><strong>Purpose</strong>: Update documentation to mention the new feature requirement<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Updated comment to include gles feature requirement
</span><span style=color:#abb0b6;font-style:italic>// NOTE: If you want to use [`Backends::GL`] in a native app on `Windows` and/or `macOS`, you must
</span><span style=color:#abb0b6;font-style:italic>// use [`ANGLE`] and enable the `gles` feature. This is because wgpu requires EGL to create...
</span></code></pre><h3 id=crates-bevy-render-src-view-window-mod-rs-4-4><code>crates/bevy_render/src/view/window/mod.rs</code> (+4/-4)</h3><p><strong>Purpose</strong>: Update documentation to reflect the new OpenGL support requirements<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Updated comment to include gles feature requirement
</span><span style=color:#abb0b6;font-style:italic>// Another alternative is to try to use [`ANGLE`] and
</span><span style=color:#abb0b6;font-style:italic>// [`Backends::GL`] with the `gles` feature enabled if your
</span><span style=color:#abb0b6;font-style:italic>// GPU/drivers support `OpenGL 4.3` / `OpenGL ES 3.0` or later.
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://wgpu.rs/#supported-backends target=_blank>wgpu Backends documentation</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/cargo/reference/features.html target=_blank>Cargo Features guide</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/introduction/3-rendering/3-1-render-architecture/ target=_blank>Bevy Renderer documentation</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/google/angle target=_blank>ANGLE project</a> - OpenGL ES implementation for Windows/macOS</ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-08/pr_20793.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>