<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20551 Add a new trait to accept more types in the `Val`-helper functions
        
    </title><meta content="#20551 Add a new trait to accept more types in the `Val`-helper functions" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-08/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-08-29</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-08/pr-20551-zh-cn-20250829>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><p>Add a new trait to accept more types in the <code>Val</code>-helper functions<h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Add a new trait to accept more types in the <code>Val</code>-helper functions<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20551<li><strong>Author</strong>: TheBlckbird<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-UI, C-Usability, X-Controversial, S-Needs-SME<li><strong>Created</strong>: 2025-08-13T10:13:22Z<li><strong>Merged</strong>: 2025-08-29T20:45:20Z<li><strong>Merged By</strong>: cart</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Allow the <code>Val</code>-helper functions to accept more types besides just <code>f32</code></ul><p>Fixes #20549<h2 id=solution>Solution</h2><ul><li>Adds a new trait that can be implemented for numbers<li>That trait has a method that converts <code>self</code> to <code>f32</code></ul><h2 id=testing>Testing</h2><ul><li>I tested it using Rust’s testing framework (although I didn’t leave the tests in, as I don’t deem them important enough)</ul><details><summary>Rust test</summary> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>cfg</span><span>(test)]
</span><span style=color:#fa6e32>mod </span><span style=color:#399ee6>tests </span><span>{
</span><span>    </span><span style=color:#fa6e32>use super</span><span style=color:#ed9366>::*</span><span style=color:#61676ccc>;
</span><span>
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>test</span><span>]
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>test_val_helpers_work</span><span>() {
</span><span>        </span><span style=color:#fa6e32>let</span><span> p </span><span style=color:#ed9366>= </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10_</span><span style=color:#fa6e32>u8</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#f07171>assert_eq!</span><span>(p</span><span style=color:#61676ccc>, </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>10.0</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>let</span><span> p </span><span style=color:#ed9366>= </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10_</span><span style=color:#fa6e32>u16</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#f07171>assert_eq!</span><span>(p</span><span style=color:#61676ccc>, </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>10.0</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>let</span><span> p </span><span style=color:#ed9366>= </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10_</span><span style=color:#fa6e32>u32</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#f07171>assert_eq!</span><span>(p</span><span style=color:#61676ccc>, </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>10.0</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>let</span><span> p </span><span style=color:#ed9366>= </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10_</span><span style=color:#fa6e32>u64</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#f07171>assert_eq!</span><span>(p</span><span style=color:#61676ccc>, </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>10.0</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>let</span><span> p </span><span style=color:#ed9366>= </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10_</span><span style=color:#fa6e32>u128</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#f07171>assert_eq!</span><span>(p</span><span style=color:#61676ccc>, </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>10.0</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>let</span><span> p </span><span style=color:#ed9366>= </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10_</span><span style=color:#fa6e32>i8</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#f07171>assert_eq!</span><span>(p</span><span style=color:#61676ccc>, </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>10.0</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>let</span><span> p </span><span style=color:#ed9366>= </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10_</span><span style=color:#fa6e32>i16</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#f07171>assert_eq!</span><span>(p</span><span style=color:#61676ccc>, </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>10.0</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>let</span><span> p </span><span style=color:#ed9366>= </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10_</span><span style=color:#fa6e32>i32</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#f07171>assert_eq!</span><span>(p</span><span style=color:#61676ccc>, </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>10.0</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>let</span><span> p </span><span style=color:#ed9366>= </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10_</span><span style=color:#fa6e32>i64</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#f07171>assert_eq!</span><span>(p</span><span style=color:#61676ccc>, </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>10.0</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>let</span><span> p </span><span style=color:#ed9366>= </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10_</span><span style=color:#fa6e32>i128</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#f07171>assert_eq!</span><span>(p</span><span style=color:#61676ccc>, </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>10.0</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>let</span><span> p </span><span style=color:#ed9366>= </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10.3_</span><span style=color:#fa6e32>f32</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#f07171>assert_eq!</span><span>(p</span><span style=color:#61676ccc>, </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>10.3</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>let</span><span> p </span><span style=color:#ed9366>= </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10.6_</span><span style=color:#fa6e32>f64</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#f07171>assert_eq!</span><span>(p</span><span style=color:#61676ccc>, </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>10.6</span><span>))</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>}
</span></code></pre></details><hr><h2 id=showcase>Showcase</h2><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Same as Val::Px(10.)
</span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10</span><span>)</span><span style=color:#61676ccc>;
</span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10_</span><span style=color:#fa6e32>u8</span><span>)</span><span style=color:#61676ccc>;
</span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10.0</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a common usability issue in Bevy’s UI system where the <code>Val</code> helper functions only accepted <code>f32</code> values. This limitation forced developers to explicitly specify floating-point values even when working with integer types, creating unnecessary friction in UI code.<p>The core problem was identified in issue #20549, where users wanted to pass integer types to functions like <code>px()</code>, <code>percent()</code>, and other unit helpers without manual conversion to <code>f32</code>. The existing API required explicit type conversion, making code less readable and more verbose than necessary.<p>The solution introduces a new <code>ValNum</code> trait that defines a conversion method from various numeric types to <code>f32</code>. This approach was chosen over simply implementing <code>Into&LTVal></code> to avoid defining a default unit, which could lead to confusion, especially for newcomers. The trait-based approach provides explicit control over which types can be used with the helper functions.<p>The implementation uses a macro to efficiently implement the <code>ValNum</code> trait for multiple numeric types, including:<ul><li>Floating-point types: <code>f32</code>, <code>f64</code><li>Signed integers: <code>i8</code>, <code>i16</code>, <code>i32</code>, <code>i64</code>, <code>isize</code><li>Unsigned integers: <code>u8</code>, <code>u16</code>, <code>u32</code>, <code>u64</code>, <code>usize</code></ul><p>Each implementation simply converts the value to <code>f32</code> using Rust’s <code>as</code> operator, which handles the numeric conversion safely for the supported types.<p>The key changes modify the helper functions from being <code>const fn</code> that accept <code>f32</code> to generic functions that accept any type implementing <code>ValNum</code>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub const fn </span><span style=color:#f29718>px</span><span>(</span><span style=color:#ff8f40>value</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>) </span><span style=color:#61676ccc>-></span><span> Val {
</span><span>    Val</span><span style=color:#ed9366>::</span><span>Px(value)
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>px</span><span>&LTT</span><span style=color:#61676ccc>:</span><span> ValNum>(</span><span style=color:#ff8f40>value</span><span style=color:#61676ccc>:</span><span> T) </span><span style=color:#61676ccc>-></span><span> Val {
</span><span>    Val</span><span style=color:#ed9366>::</span><span>Px(value</span><span style=color:#ed9366>.</span><span style=color:#f07171>val_num_f32</span><span>())
</span><span>}
</span></code></pre><p>This change affects all unit helper functions: <code>px</code>, <code>percent</code>, <code>vw</code>, <code>vh</code>, <code>vmin</code>, and <code>vmax</code>. The <code>auto</code> function remains unchanged as it doesn’t take any parameters.<p>The PR includes extensive updates to 99 example files, demonstrating the improved API usage. Instead of writing <code>Val::Px(12.0)</code>, examples now use <code>px(12)</code>, making the code more concise and readable. These changes show the practical benefits of the new API across various UI scenarios.<p>From a technical perspective, the conversion from <code>const fn</code> to generic functions means they can no longer be compile-time constants. However, this trade-off is acceptable given the significant usability improvement. The conversion operations are trivial and will likely be inlined by the compiler.<p>The implementation maintains backward compatibility - all existing code using <code>f32</code> values continues to work unchanged. The new functionality is purely additive, allowing developers to use integer types where they previously had to use floating-point literals.<p>This change aligns Bevy’s UI API with common expectations in game development and web design, where numeric values for dimensions and positions are often expressed as integers while still needing floating-point precision for calculations.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Val Helper Functions] --> B[ValNum Trait]
</span><span>    B --> C[f32 implementation]
</span><span>    B --> D[f64 implementation]
</span><span>    B --> E[i8 implementation]
</span><span>    B --> F[i16 implementation]
</span><span>    B --> G[i32 implementation]
</span><span>    B --> H[i64 implementation]
</span><span>    B --> I[u8 implementation]
</span><span>    B --> J[u16 implementation]
</span><span>    B --> K[u32 implementation]
</span><span>    B --> L[u64 implementation]
</span><span>    B --> M[usize implementation]
</span><span>    B --> N[isize implementation]
</span><span>    
</span><span>    O[px function] --> P[Uses ValNum]
</span><span>    Q[percent function] --> P
</span><span>    R[vw function] --> P
</span><span>    S[vh function] --> P
</span><span>    T[vmin function] --> P
</span><span>    U[vmax function] --> P
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-ui-src-geometry-rs-36-12><code>crates/bevy_ui/src/geometry.rs</code> (+36/-12)</h3><p>This is the core implementation file where the <code>ValNum</code> trait and updated helper functions are defined.<p><strong>Key changes:</strong><ol><li>Added the <code>ValNum</code> trait and macro implementations:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub trait </span><span style=color:#399ee6>ValNum </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>val_num_f32</span><span>(</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>f32</span><span style=color:#61676ccc>;
</span><span>}
</span><span>
</span><span style=color:#f07171>macro_rules! </span><span style=color:#399ee6>impl_to_val_num </span><span>{
</span><span>    (</span><span style=color:#ed9366>$</span><span>(</span><span style=color:#ff8f40>$impl_type</span><span style=color:#61676ccc>:</span><span style=color:#fa6e32>ty</span><span>),</span><span style=color:#ed9366>*$</span><span>(,)?) </span><span style=color:#ed9366>=> </span><span>{
</span><span>        </span><span style=color:#ed9366>$</span><span>(
</span><span>            </span><span style=color:#fa6e32>impl </span><span>ValNum </span><span style=color:#fa6e32>for </span><span>$impl_type {
</span><span>                </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>val_num_f32</span><span>(</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>f32 </span><span>{
</span><span>                    </span><span style=color:#55b4d4;font-style:italic>self </span><span style=color:#ed9366>as </span><span style=color:#fa6e32>f32
</span><span>                }
</span><span>            }
</span><span>        )</span><span style=color:#ed9366>*
</span><span>    }</span><span style=color:#61676ccc>;
</span><span>}
</span><span>
</span><span style=color:#f07171>impl_to_val_num!</span><span>(</span><span style=color:#fa6e32>f32</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>f64</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>i8</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>i16</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>i32</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>i64</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>u8</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>u16</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>u32</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>u64</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>usize</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>isize</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><ol start=2><li>Updated all helper functions to use the trait:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub const fn </span><span style=color:#f29718>px</span><span>(</span><span style=color:#ff8f40>value</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>) </span><span style=color:#61676ccc>-></span><span> Val {
</span><span>    Val</span><span style=color:#ed9366>::</span><span>Px(value)
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>px</span><span>&LTT</span><span style=color:#61676ccc>:</span><span> ValNum>(</span><span style=color:#ff8f40>value</span><span style=color:#61676ccc>:</span><span> T) </span><span style=color:#61676ccc>-></span><span> Val {
</span><span>    Val</span><span style=color:#ed9366>::</span><span>Px(value</span><span style=color:#ed9366>.</span><span style=color:#f07171>val_num_f32</span><span>())
</span><span>}
</span></code></pre><h3 id=examples-games-game-menu-rs-34-34><code>examples/games/game_menu.rs</code> (+34/-34)</h3><p>This file demonstrates the improved API usage in a game menu UI. The changes replace explicit <code>f32</code> literals with integer values using the helper functions.<p><strong>Example changes:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>width</span><span style=color:#61676ccc>: </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>200.0</span><span>)</span><span style=color:#61676ccc>,
</span><span>height</span><span style=color:#61676ccc>: </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>65.0</span><span>)</span><span style=color:#61676ccc>,
</span><span>margin</span><span style=color:#61676ccc>: </span><span>UiRect</span><span style=color:#ed9366>::</span><span>all(Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>20.0</span><span>))</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>width</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>200</span><span>)</span><span style=color:#61676ccc>,
</span><span>height</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>65</span><span>)</span><span style=color:#61676ccc>,
</span><span>margin</span><span style=color:#61676ccc>: </span><span>UiRect</span><span style=color:#ed9366>::</span><span>all(</span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>20</span><span>))</span><span style=color:#61676ccc>,
</span></code></pre><h3 id=examples-animation-animation-graph-rs-22-23><code>examples/animation/animation_graph.rs</code> (+22/-23)</h3><p>This file shows the updated API in animation-related UI components.<p><strong>Example changes:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>bottom</span><span style=color:#61676ccc>: </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(node_rect</span><span style=color:#ed9366>.</span><span>bottom)</span><span style=color:#61676ccc>,
</span><span>left</span><span style=color:#61676ccc>: </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(node_rect</span><span style=color:#ed9366>.</span><span>left)</span><span style=color:#61676ccc>,
</span><span>height</span><span style=color:#61676ccc>: </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(node_rect</span><span style=color:#ed9366>.</span><span>height)</span><span style=color:#61676ccc>,
</span><span>width</span><span style=color:#61676ccc>: </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(node_rect</span><span style=color:#ed9366>.</span><span>width)</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>bottom</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(node_rect</span><span style=color:#ed9366>.</span><span>bottom)</span><span style=color:#61676ccc>,
</span><span>left</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(node_rect</span><span style=color:#ed9366>.</span><span>left)</span><span style=color:#61676ccc>,
</span><span>height</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(node_rect</span><span style=color:#ed9366>.</span><span>height)</span><span style=color:#61676ccc>,
</span><span>width</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(node_rect</span><span style=color:#ed9366>.</span><span>width)</span><span style=color:#61676ccc>,
</span></code></pre><h3 id=examples-state-computed-states-rs-21-21><code>examples/state/computed_states.rs</code> (+21/-21)</h3><p>This file demonstrates the changes in state management UI examples.<p><strong>Example changes:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>width</span><span style=color:#61676ccc>: </span><span>Val</span><span style=color:#ed9366>::</span><span>Percent(</span><span style=color:#ff8f40>100.</span><span>)</span><span style=color:#61676ccc>,
</span><span>height</span><span style=color:#61676ccc>: </span><span>Val</span><span style=color:#ed9366>::</span><span>Percent(</span><span style=color:#ff8f40>100.</span><span>)</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>width</span><span style=color:#61676ccc>: </span><span style=color:#f07171>percent</span><span>(</span><span style=color:#ff8f40>100</span><span>)</span><span style=color:#61676ccc>,
</span><span>height</span><span style=color:#61676ccc>: </span><span style=color:#f07171>percent</span><span>(</span><span style=color:#ff8f40>100</span><span>)</span><span style=color:#61676ccc>,
</span></code></pre><h3 id=examples-animation-animation-masks-rs-20-20><code>examples/animation/animation_masks.rs</code> (+20/-20)</h3><p>This file shows the updated API in animation masking UI.<p><strong>Example changes:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>left</span><span style=color:#61676ccc>: </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>12.0</span><span>)</span><span style=color:#61676ccc>,
</span><span>top</span><span style=color:#61676ccc>: </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>12.0</span><span>)</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>left</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>12</span><span>)</span><span style=color:#61676ccc>,
</span><span>top</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>12</span><span>)</span><span style=color:#61676ccc>,
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/book/ch10-02-traits.html target=_blank>Rust Traits Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/introduction/3-ui/ target=_blank>Bevy UI System</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/book/ch10-01-syntax.html target=_blank>Generic Functions in Rust</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/rust-by-example/types/cast.html target=_blank>Type Conversions in Rust</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-08/pr_20551.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>