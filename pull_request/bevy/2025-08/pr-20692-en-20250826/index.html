<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20692 Improve tracing level docs in profiling.md
        
    </title><meta content="#20692 Improve tracing level docs in profiling.md" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-08/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-08-26</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-08/pr-20692-zh-cn-20250826>中文</a></div></div><div class=pr-content><h1 id=improve-tracing-level-docs-in-profiling-md>Improve tracing level docs in profiling.md</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Improve tracing level docs in profiling.md<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20692<li><strong>Author</strong>: Weihnachtsbaum<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, S-Ready-For-Final-Review, C-Testing, D-Straightforward<li><strong>Created</strong>: 2025-08-21T12:37:29Z<li><strong>Merged</strong>: 2025-08-26T21:16:14Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>If you have <code>tracing</code>’s <code>max_level(_release)_[warn/error]</code> features enabled, it can be confusing that profiling doesn’t work properly (or at least it confused me for a bit…)<li>The <code>LogSettings</code> resource <a rel="noopener nofollow noreferrer" href=https://bevy.org/learn/migration-guides/0-8-to-0-9/#use-plugin-setup-for-resource-only-used-at-setup-time target=_blank>doesn’t exist anymore</a>, but is still mentioned in the docs</ul><h2 id=solution>Solution</h2><ul><li>Update profiling.md to be as clear as possible</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a documentation issue that was causing confusion for developers trying to use Bevy’s profiling capabilities. The problem stemmed from two specific areas in the existing documentation that were either outdated or unclear.<p>The core issue was that when developers enabled certain <code>tracing</code> crate features like <code>max_level_warn</code> or <code>max_level_error</code>, their profiling spans wouldn’t work as expected. This created a confusing debugging experience where developers might think their profiling setup was broken, when in reality it was just being filtered out by the tracing level configuration.<p>Additionally, the documentation still referenced the <code>LogSettings</code> resource, which had been removed in the Bevy 0.8 to 0.9 migration. The resource was replaced by the <code>LogPlugin</code>’s <code>filter</code> member, but the documentation hadn’t been updated to reflect this change.<p>The solution approach was straightforward but important: update the documentation to provide clear, accurate guidance. The developer replaced the outdated information with comprehensive instructions that cover both the tracing level requirements and the proper way to configure logging filters in the current Bevy version.<p>The implementation involved replacing a single paragraph in <code>docs/profiling.md</code> with more detailed and accurate information. The new documentation explains that:<ol><li>The tracing level needs to be at least <code>info</code> for profiling to work<li>Developers should avoid using the <code>max_level(_release)_[warn/error]</code> features of the tracing crate<li>They shouldn’t filter out profiling spans using <code>LogPlugin</code>’s <code>filter</code> member<li><code>wgpu</code> and <code>naga</code> spans are filtered out by default, but can be included by adjusting the filter or using <code>RUST_LOG=info</code></ol><p>This change is particularly valuable because it addresses a pain point that the author themselves experienced - the confusion when profiling doesn’t work due to tracing level configuration. By documenting this clearly, future developers will save time debugging what would otherwise be a non-obvious configuration issue.<p>The technical insight here is that documentation quality directly impacts developer productivity. Clear, accurate documentation about configuration requirements and potential pitfalls helps developers avoid common mistakes and reduces support burden on the project maintainers.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph LR
</span><span>    A[Developer Enables Profiling] --> B{Tracing Level Configured Correctly?}
</span><span>    B -->|Yes| C[Profiling Works]
</span><span>    B -->|No| D[Profiling Fails Silently]
</span><span>    D --> E[Reads Updated Documentation]
</span><span>    E --> F[Adjusts Tracing Level/Filter]
</span><span>    F --> C
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><p><strong>File: <code>docs/profiling.md</code></strong><p>This file received a single but significant change to improve clarity around tracing level requirements for profiling.<p><strong>Before:</strong><pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span>If you also want to include </span><span style=color:#ed9366;background-color:#61676c10>`wgpu`</span><span> tracing spans when profiling, they are emitted at the </span><span style=color:#ed9366;background-color:#61676c10>`tracing`</span><span> </span><span style=color:#ed9366;background-color:#61676c10>`info`</span><span> level so you will need to make sure they are not filtered out by the </span><span style=color:#ed9366;background-color:#61676c10>`LogSettings`</span><span> resource's </span><span style=color:#ed9366;background-color:#61676c10>`filter`</span><span> member which defaults to </span><span style=color:#ed9366;background-color:#61676c10>`wgpu=error`</span><span>. You can do this by setting the </span><span style=color:#ed9366;background-color:#61676c10>`RUST_LOG=info`</span><span> environment variable when running your application.
</span></code></pre><p><strong>After:</strong><pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span>Your tracing level needs to be at least </span><span style=color:#ed9366;background-color:#61676c10>`info`</span><span> for this to work, so make sure that you don't set the </span><span style=color:#ed9366;background-color:#61676c10>`max_level(_release)_[warn/error]`</span><span> features of the </span><span style=color:#ed9366;background-color:#61676c10>`tracing`</span><span> crate nor filter it out using </span><span style=color:#ed9366;background-color:#61676c10>`LogPlugin`</span><span>'s </span><span style=color:#ed9366;background-color:#61676c10>`filter`</span><span> member. Note that </span><span style=color:#ed9366;background-color:#61676c10>`wgpu`</span><span> and </span><span style=color:#ed9366;background-color:#61676c10>`naga`</span><span> spans are filtered out by default. If you want to include them, you can either change your </span><span style=color:#ed9366;background-color:#61676c10>`LogPlugin`</span><span>'s </span><span style=color:#ed9366;background-color:#61676c10>`filter`</span><span> member or override it by setting the </span><span style=color:#ed9366;background-color:#61676c10>`RUST_LOG=info`</span><span> environment variable when running your application.
</span></code></pre><p>The changes address both issues mentioned in the PR:<ol><li>Replaced the outdated reference to <code>LogSettings</code> with the correct <code>LogPlugin</code><li>Added explicit warning about the <code>max_level</code> features that can silently disable profiling<li>Made the instructions more comprehensive by covering both <code>wgpu</code> and <code>naga</code> spans<li>Provided clear alternatives for including these spans when needed</ol><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/blob/main/docs/profiling.md target=_blank>Bevy Tracing Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/tracing/latest/tracing/ target=_blank>Tracing Crate Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://bevy.org/learn/migration-guides/0-8-to-0-9/#use-plugin-setup-for-resource-only-used-at-setup-time target=_blank>Bevy 0.8 to 0.9 Migration Guide</a><li><a rel="noopener nofollow noreferrer" href=https://rust-lang-nursery.github.io/rust-cookbook/development_tools/debugging/config_log.html target=_blank>Rust Logging and Tracing Best Practices</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-08/pr_20692.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>