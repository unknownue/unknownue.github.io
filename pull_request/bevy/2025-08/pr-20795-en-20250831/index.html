<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20795 Use web assets for meshlet example
        
    </title><meta content="#20795 Use web assets for meshlet example" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-08/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-08-31</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-08/pr-20795-zh-cn-20250831>中文</a></div></div><div class=pr-content><h1 id=use-web-assets-for-meshlet-example>Use web assets for meshlet example</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Use web assets for meshlet example<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20795<li><strong>Author</strong>: tychedelia<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Rendering, C-Examples, S-Needs-Review<li><strong>Created</strong>: 2025-08-30T04:24:12Z<li><strong>Merged</strong>: 2025-08-31T08:00:20Z<li><strong>Merged By</strong>: mockersf</ul><h2 id=description-translation>Description Translation</h2><p>We have web assets now, let’s use them!<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The meshlet example in Bevy previously required users to manually download external assets before running the example. This created a suboptimal developer experience where users had to either run setup commands or manually download files from external URLs. The example used a complex setup process involving curl commands and local file checks that could fail and return error codes.<p>The core problem was that the meshlet example relied on a large 3D model asset (bunny.meshlet_mesh) that wasn’t included in the main repository due to size constraints. Previously, this required a multi-step setup process:<ol><li>Create directory structure for external assets<li>Download the file using curl from a GitHub repository<li>Check for file existence at runtime<li>Return error codes if the file was missing</ol><p>The solution approach was straightforward: leverage Bevy’s existing web asset capabilities to load the asset directly from a URL at runtime. This eliminated the need for pre-download steps and simplified the user experience. The implementation required:<ol><li>Adding the “https” feature requirement to the example<li>Updating the asset URL to point to Bevy’s official asset repository<li>Removing all the setup and file existence checking code<li>Updating the asset server to load from the URL directly</ol><p>The technical implementation shows a clean simplification. The main function was transformed from a complex setup with error handling to a simple App initialization:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>main</span><span>() </span><span style=color:#61676ccc>-></span><span> ExitCode {
</span><span>    </span><span style=color:#fa6e32>if </span><span style=color:#ed9366>!</span><span>Path</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#86b300>"./assets/external/models/bunny.meshlet_mesh"</span><span>)</span><span style=color:#ed9366>.</span><span style=color:#f07171>exists</span><span>() {
</span><span>        </span><span style=color:#f07171>eprintln!</span><span>(</span><span style=color:#86b300>"ERROR: Asset at path &LTbevy>/assets/external/models/bunny.meshlet_mesh is missing. Please download it from </span><span style=color:#ff8f40>{ASSET_URL}</span><span style=color:#86b300>"</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#fa6e32>return </span><span>ExitCode</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>FAILURE</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... app setup
</span><span>    ExitCode</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>SUCCESS
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>main</span><span>() {
</span><span>    App</span><span style=color:#ed9366>::</span><span>new()
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ... app setup
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>run</span><span>()</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><p>The asset loading was also simplified from using a local path to a direct URL:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>let</span><span> meshlet_mesh_handle </span><span style=color:#ed9366>=</span><span> asset_server</span><span style=color:#ed9366>.</span><span style=color:#f07171>load</span><span>(</span><span style=color:#86b300>"external/models/bunny.meshlet_mesh"</span><span>)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>let</span><span> meshlet_mesh_handle </span><span style=color:#ed9366>=</span><span> asset_server</span><span style=color:#ed9366>.</span><span style=color:#f07171>load</span><span>(</span><span style=color:#ff8f40>ASSET_URL</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><p>The impact of these changes is significant for developer experience. Users can now run the meshlet example with a simple <code>cargo run --example meshlet</code> without any setup steps. The example will automatically download the required assets at runtime using Bevy’s asset system.<p>This change also required updates to the example showcase tool, which previously executed setup commands. Since the setup is no longer needed, the tool was simplified by removing the setup command execution and parsing logic.<p>From an architectural perspective, this change demonstrates Bevy’s capability to handle web assets seamlessly and aligns with modern development practices where external resources are loaded on-demand rather than requiring manual setup steps.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph LR
</span><span>    A[Meshlet Example] --> B[Asset Server]
</span><span>    B --> C[Web Asset]
</span><span>    A --> D[Example Showcase Tool]
</span><span>    D --> E[Simplified Setup]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=cargo-toml><code>Cargo.toml</code></h3><p><strong>Changes</strong>: Updated meshlet example requirements and removed setup commands<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># Before:
</span><span style=color:#399ee6>required-features </span><span>= [</span><span style=color:#86b300>"meshlet"</span><span>]
</span><span style=color:#399ee6>setup </span><span>= [
</span><span>  [
</span><span>    </span><span style=color:#86b300>"mkdir"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"-p"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"assets/external/models"</span><span style=color:#61676ccc>,
</span><span>  ]</span><span style=color:#61676ccc>,
</span><span>  [
</span><span>    </span><span style=color:#86b300>"curl"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"-o"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"assets/external/models/bunny.meshlet_mesh"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"https://raw.githubusercontent.com/JMS55/bevy_meshlet_asset/7a7c14138021f63904b584d5f7b73b695c7f4bbf/bunny.meshlet_mesh"</span><span style=color:#61676ccc>,
</span><span>  ]</span><span style=color:#61676ccc>,
</span><span>]
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span style=color:#399ee6>required-features </span><span>= [</span><span style=color:#86b300>"meshlet"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"https"</span><span>]
</span></code></pre><h3 id=examples-3d-meshlet-rs><code>examples/3d/meshlet.rs</code></h3><p><strong>Changes</strong>: Simplified main function and switched to web asset loading<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>const </span><span style=color:#ff8f40>ASSET_URL</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str </span><span style=color:#ed9366>= </span><span style=color:#86b300>"https://raw.githubusercontent.com/atlv24/assets/69bb39164fd35aadf863f6009520d4981eafcea0/bunny.meshlet_mesh"</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>main</span><span>() </span><span style=color:#61676ccc>-></span><span> ExitCode {
</span><span>    </span><span style=color:#fa6e32>if </span><span style=color:#ed9366>!</span><span>Path</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#86b300>"./assets/external/models/bunny.meshlet_mesh"</span><span>)</span><span style=color:#ed9366>.</span><span style=color:#f07171>exists</span><span>() {
</span><span>        </span><span style=color:#f07171>eprintln!</span><span>(</span><span style=color:#86b300>"ERROR: Asset at path &LTbevy>/assets/external/models/bunny.meshlet_mesh is missing. Please download it from </span><span style=color:#ff8f40>{ASSET_URL}</span><span style=color:#86b300>"</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#fa6e32>return </span><span>ExitCode</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>FAILURE</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... app setup
</span><span>    ExitCode</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>SUCCESS
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>const </span><span style=color:#ff8f40>ASSET_URL</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str </span><span style=color:#ed9366>= </span><span style=color:#86b300>"https://github.com/bevyengine/bevy_asset_files/raw/9bf88c42b9d06a3634eed633d90ce5fab02c31da/meshlet/bunny.meshlet_mesh"</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>main</span><span>() {
</span><span>    App</span><span style=color:#ed9366>::</span><span>new()
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ... app setup
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>run</span><span>()</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><h3 id=tools-example-showcase-src-main-rs><code>tools/example-showcase/src/main.rs</code></h3><p><strong>Changes</strong>: Removed setup command execution and parsing logic<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>for</span><span> command </span><span style=color:#ed9366>in &</span><span>to_run</span><span style=color:#ed9366>.</span><span>setup {
</span><span>    </span><span style=color:#fa6e32>let</span><span> exe </span><span style=color:#ed9366>= &</span><span>command[</span><span style=color:#ff8f40>0</span><span>]</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let</span><span> args </span><span style=color:#ed9366>= &</span><span>command[</span><span style=color:#ff8f40>1</span><span style=color:#ed9366>..</span><span>]</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#f07171>cmd!</span><span>(sh</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"{exe} {args...}"</span><span>)</span><span style=color:#ed9366>.</span><span style=color:#f07171>run</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap</span><span>()</span><span style=color:#61676ccc>;
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>// Setup command execution completely removed
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/introduction/assets/ target=_blank>Bevy Asset System Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/news/bevy-0-13/#web-asset-loading target=_blank>Bevy Web Asset Loading</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/news/bevy-0-13/#meshlet-rendering-experimental target=_blank>Meshlet Rendering in Bevy</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-08/pr_20795.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>