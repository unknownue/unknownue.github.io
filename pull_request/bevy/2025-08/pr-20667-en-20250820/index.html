<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20667 Fix documentation for `Rot2`
        
    </title><meta content="#20667 Fix documentation for `Rot2`" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-08/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-08-20</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-08/pr-20667-zh-cn-20250820>中文</a></div></div><div class=pr-content><h1 id=fix-documentation-for-rot2>Fix documentation for <code>Rot2</code></h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Fix documentation for <code>Rot2</code><li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20667<li><strong>Author</strong>: IQuick143<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, S-Ready-For-Final-Review, A-Math, D-Straightforward<li><strong>Created</strong>: 2025-08-20T09:24:59Z<li><strong>Merged</strong>: 2025-08-20T17:09:03Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Certain pieces of documentation on <code>Rot2</code> are imprecise or misleading<li>Try to make docs more comprehensive</ul><h2 id=solution>Solution</h2><ul><li>Rewrite a bunch of doc comment, dropping <code>in radians</code> where there’s no values in radians,<li>Clear up comments about “clamping” input angles by a hopefully more accurate and clear explanation.</ul><h2 id=testing>Testing</h2><ul><li>CI</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The PR addresses a documentation issue in Bevy’s 2D rotation implementation. The <code>Rot2</code> struct, which represents 2D rotations, had several documentation problems that could mislead developers about its behavior.<p>The core issue was with terminology around angle handling. The original documentation incorrectly described angle inputs as being “clamped” to specific ranges, when in reality the implementation uses modular arithmetic to handle angles outside the typical ranges. This is a critical distinction because clamping would truncate values, while modular arithmetic preserves the rotational equivalence of angles that differ by full rotations.<p>For example, the documentation claimed that angles were clamped to <code>(-π, π]</code> for radians or <code>(-180°, 180°]</code> for degrees, but the actual implementation uses trigonometric functions that naturally handle angle wrapping through periodicity. A rotation of 3π radians is equivalent to π radians, not clamped to π.<p>The solution involved systematically reviewing and rewriting the documentation to:<ol><li>Remove incorrect “clamping” descriptions and replace them with accurate explanations of angle wrapping behavior<li>Eliminate unnecessary “in radians” qualifiers where they didn’t apply (like in the <code>sin</code> and <code>cos</code> field descriptions)<li>Add concrete examples demonstrating the actual behavior, including cases that show angle equivalence through full rotations<li>Improve consistency and clarity across all documentation comments</ol><p>The changes ensure that developers understand that rotations are periodic and that angles larger than a full rotation wrap around correctly, rather than being clamped or truncated. This is particularly important for animation systems, physics simulations, and any code that accumulates rotations over time.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Rot2 Struct] --> B[Field Documentation]
</span><span>    A --> C[Constructor Methods]
</span><span>    A --> D[Conversion Methods]
</span><span>    
</span><span>    B --> B1[sin/cos fields]
</span><span>    B --> B2[Constant rotations]
</span><span>    
</span><span>    C --> C1[radians()]
</span><span>    C --> C2[degrees()]
</span><span>    C --> C3[turn_fraction()]
</span><span>    C --> C4[from_sin_cos()]
</span><span>    
</span><span>    D --> D1[as_radians()]
</span><span>    D --> D2[as_degrees()]
</span><span>    D --> D3[as_turn_fraction()]
</span><span>    D --> D4[sin_cos()]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-math-src-rotation2d-rs-41-13><code>crates/bevy_math/src/rotation2d.rs</code> (+41/-13)</h3><p>This file contains the implementation of the <code>Rot2</code> struct for 2D rotations. The changes focused entirely on documentation improvements without modifying any functional code.<p><strong>Key changes:</strong><ol><li><strong>Struct-level documentation</strong> - Updated to clarify that rotations can be created from counterclockwise angles<li><strong>Field documentation</strong> - Removed unnecessary “in radians” qualifiers since the values are trigonometric results, not angle measurements<li><strong>Constant documentation</strong> - Added explanations of what each constant rotation represents in terms of turns<li><strong>Method documentation</strong> - Completely rewrote the angle input methods to correctly explain the wrapping behavior instead of incorrect clamping</ol><p><strong>Before (incorrect clamping description):</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// Creates a [`Rot2`] from a counterclockwise angle in radians.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// # Note
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// The input rotation will always be clamped to the range `(-π, π]` by design.
</span></code></pre><p><strong>After (correct wrapping behavior):</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// Creates a [`Rot2`] from a counterclockwise angle in radians.
</span><span style=color:#abb0b6;font-style:italic>/// A negative argument corresponds to a clockwise rotation.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// # Note
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// Angles larger than or equal to 2π (in either direction) loop around to smaller rotations, since a full rotation returns an object to its starting orientation.
</span></code></pre><p><strong>Added examples demonstrating wrapping behavior:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// A rotation by 3π and 1π are the same
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>cfg</span><span>(feature </span><span style=color:#ed9366>= </span><span style=color:#86b300>"approx"</span><span>)]
</span><span style=color:#f07171>assert_relative_eq!</span><span>(Rot2</span><span style=color:#ed9366>::</span><span>radians(</span><span style=color:#ff8f40>3.0 </span><span style=color:#ed9366>* </span><span style=color:#ff8f40>PI</span><span>)</span><span style=color:#61676ccc>, </span><span>Rot2</span><span style=color:#ed9366>::</span><span>radians(</span><span style=color:#ff8f40>PI</span><span>))</span><span style=color:#61676ccc>;
</span></code></pre><p>The documentation now correctly explains that rotations use modular arithmetic rather than clamping, and provides clear examples showing that angles wrap around full rotations.<h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_math/latest/bevy_math/ target=_blank>Bevy Math Documentation</a> - Official Bevy math module documentation<li><a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Complex_number#Unit_complex_numbers target=_blank>Unit Complex Numbers</a> - Wikipedia article on the mathematical representation used by Rot2<li><a rel="noopener nofollow noreferrer" href=https://stackoverflow.com/questions/2320986/easy-way-to-keeping-angles-between-179-and-180-degrees target=_blank>Angle Wrapping vs Clamping</a> - Discussion of angle handling techniques in game development<li><a rel="noopener nofollow noreferrer" href=https://bevy-cheatbook.github.io/ target=_blank>Bevy Cheatbook</a> - Community-maintained Bevy reference with math section</ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-08/pr_20667.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>