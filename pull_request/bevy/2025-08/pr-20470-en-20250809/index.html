<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20470 stop re-exporting RenderAssetUsages from bevy_render
        
    </title><meta content="#20470 stop re-exporting RenderAssetUsages from bevy_render" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-08/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-08-09</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-08/pr-20470-zh-cn-20250809>中文</a></div></div><div class=pr-content><h2 id=stop-re-exporting-renderassetusages-from-bevy-render>stop re-exporting RenderAssetUsages from bevy_render</h2><h3 id=basic-information>Basic Information</h3><ul><li><strong>Title</strong>: stop re-exporting RenderAssetUsages from bevy_render<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20470<li><strong>Author</strong>: atlv24<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, A-Rendering, A-Assets, C-Code-Quality, S-Ready-For-Final-Review, M-Needs-Migration-Guide<li><strong>Created</strong>: 2025-08-09T06:39:55Z<li><strong>Merged</strong>: 2025-08-09T07:54:02Z<li><strong>Merged By</strong>: james7132</ul><h3 id=description-translation>Description Translation</h3><h1 id=objective>Objective</h1><ul><li>I believe I left this here to ease migration in the previous release, but shouldn’t be re-exported long-term.</ul><h2 id=solution>Solution</h2><ul><li>yeet</ul><h2 id=testing>Testing</h2><ul><li>ci</ul><h3 id=the-story-of-this-pull-request>The Story of This Pull Request</h3><h4 id=the-problem-and-context>The Problem and Context</h4><p>During a previous Bevy release cycle, <code>RenderAssetUsages</code> was temporarily re-exported from <code>bevy_render</code> to simplify migration for users. This type actually belongs in the <code>bevy_asset</code> crate where it’s defined. Long-term re-exports create maintenance overhead and violate API boundaries. They can cause confusion about where functionality originates and create implicit dependencies between crates. The core issue was that this temporary convenience measure needed removal to maintain clean crate boundaries.<h4 id=the-solution-approach>The Solution Approach</h4><p>The solution was straightforward: remove the re-export while preserving internal functionality. Since <code>bevy_render</code> still uses <code>RenderAssetUsages</code> internally, we needed to:<ol><li>Convert the public re-export to a private import<li>Update documentation to guide users to the correct import location<li>Add migration notes since this breaks existing import paths</ol><p>No alternatives were considered since the re-export was explicitly temporary. The engineering decision prioritized API cleanliness over short-term convenience.<h4 id=the-implementation>The Implementation</h4><p>The implementation consisted of two coordinated changes:<ol><li>In <code>erased_render_asset.rs</code>, the public re-export was converted to a private import:</ol><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span style=color:#f07171>- pub use bevy_asset::RenderAssetUsages;
</span><span style=color:#86b300>+ use bevy_asset::RenderAssetUsages;
</span></code></pre><p>This maintains internal usage while removing it from <code>bevy_render</code>’s public API.<ol start=2><li>The migration guide was updated to explicitly document the change:</ol><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span style=color:#86b300>+ RenderAssetUsages is no longer re-exported by `bevy_render`. Import it from `bevy_asset` instead.
</span></code></pre><p>This provides immediate visibility for users migrating between versions.<h4 id=technical-insights>Technical Insights</h4><p>This change demonstrates proper management of public API surfaces. Key technical points:<ul><li><strong>Crate boundaries</strong>: Each crate should only expose its own core functionality<li><strong>Deprecation strategy</strong>: Temporary re-exports can ease transitions but must be removed<li><strong>Documentation</strong>: Breaking changes require clear migration paths<li><strong>Minimal impact</strong>: Internal usage patterns remain unchanged</ul><p>The change affects import paths but not runtime behavior. Compile-time checks ensure all internal references remain valid.<h4 id=the-impact>The Impact</h4><ul><li><strong>Code quality</strong>: Reduces public API surface area of <code>bevy_render</code><li><strong>Maintainability</strong>: Eliminates an unnecessary cross-crate dependency<li><strong>User impact</strong>: Breaking change mitigated by clear documentation<li><strong>Technical debt</strong>: Addresses temporary migration code that outlived its purpose</ul><p>The CI pipeline validated that all internal usage remained functional after the change.<h3 id=visual-representation>Visual Representation</h3><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph LR
</span><span>    A[bevy_asset] -- defines --> B[RenderAssetUsages]
</span><span>    C[bevy_render] -- previously re-exported --> B
</span><span>    D[User Code] -. previously imported .-> C
</span><span>    D -- now imports directly --> A
</span></code></pre><h3 id=key-files-changed>Key Files Changed</h3><h4 id=crates-bevy-render-src-erased-render-asset-rs><code>crates/bevy_render/src/erased_render_asset.rs</code></h4><p><strong>Change</strong>: Converted public re-export to private import<br> <strong>Purpose</strong>: Remove type from public API while maintaining internal usage<br> <strong>Diff</strong>:<pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span style=color:#f07171>- pub use bevy_asset::RenderAssetUsages;
</span><span style=color:#86b300>+ use bevy_asset::RenderAssetUsages;
</span></code></pre><h4 id=release-content-migration-guides-bevy-render-reorganization-md><code>release-content/migration-guides/bevy_render_reorganization.md</code></h4><p><strong>Change</strong>: Added migration note about removed re-export<br> <strong>Purpose</strong>: Document breaking change for users<br> <strong>Diff</strong>:<pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span style=color:#c594c5>@@ -20,3 +20,5 @@ </span><span style=color:#399ee6>Import them directly or from `bevy::mesh` now, as the re-exports will be removed
</span><span> 
</span><span> Image types have been moved to a new crate, `bevy_image`, but continue to be re-exported by `bevy_render` for now.
</span><span> Import them directly or from `bevy::image` now, as the re-exports will be removed.
</span><span style=color:#86b300>+
</span><span style=color:#86b300>+RenderAssetUsages is no longer re-exported by `bevy_render`. Import it from `bevy_asset` instead.
</span></code></pre><h3 id=further-reading>Further Reading</h3><ol><li><a rel="noopener nofollow noreferrer" href=https://rust-lang.github.io/api-guidelines/ target=_blank>Rust API Guidelines on Re-exports</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/ target=_blank>Bevy Engine API Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://semver.org/ target=_blank>Semantic Versioning and Breaking Changes</a></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-08/pr_20470.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>