<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20648 Improve `On` Terminology
        
    </title><meta content="#20648 Improve `On` Terminology" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-08/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-08-21</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-08/pr-20648-zh-cn-20250821>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Improve <code>On</code> Terminology<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20648<li><strong>Author</strong>: cart<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-ECS, C-Code-Quality, C-Usability, S-Ready-For-Final-Review, M-Needs-Migration-Guide<li><strong>Created</strong>: 2025-08-19T02:09:02Z<li><strong>Merged</strong>: 2025-08-21T09:19:10Z<li><strong>Merged By</strong>: cart</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Fixes #19263 (and expands on it)<p>Within <code>Observers</code>, we have started to distance ourselves from the “trigger” terminology. Specifically, we have renamed <code>Trigger</code> to <code>On</code>. I think this was a very good move, but we’re currently in an awkward middle ground state. Users interact with <code>On</code> as if it were an event: <code>On&LTE></code> exposes the event and derefs directly to it. I think we should embrace this mindset fully, in the interest of clarity.<h2 id=solution>Solution</h2><ul><li>Rename all <code>trigger: On&LTSomeEvent></code> cases to <code>event: On&LTSomeEvent></code>.<li>Rename <code>On::target</code> to <code>On::entity</code>. This reads much better when writing <code>query.get(event.entity())</code> and pairs more effectively with the <code>EntityEvent</code> terminology.<li>Rename <code>On::original_target</code> to <code>On::original_entity</code>, for the same reasons.<li>Take advantage of the <code>Deref</code> behavior where appropriate</ul><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before
</span><span>entity</span><span style=color:#ed9366>.</span><span style=color:#f07171>observe</span><span>(|</span><span style=color:#ff8f40>trigger</span><span style=color:#61676ccc>: </span><span>On&LTExplode>| {
</span><span>  </span><span style=color:#f07171>println!</span><span>(</span><span style=color:#86b300>"</span><span style=color:#ff8f40>{}</span><span style=color:#86b300> exploded!"</span><span style=color:#61676ccc>,</span><span> trigger</span><span style=color:#ed9366>.</span><span style=color:#f07171>target</span><span>())</span><span style=color:#61676ccc>;
</span><span>})
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After
</span><span>entity</span><span style=color:#ed9366>.</span><span style=color:#f07171>observe</span><span>(|</span><span style=color:#ff8f40>event</span><span style=color:#61676ccc>: </span><span>On&LTExplode>| {
</span><span>  </span><span style=color:#f07171>println!</span><span>(</span><span style=color:#86b300>"</span><span style=color:#ff8f40>{}</span><span style=color:#86b300> exploded!"</span><span style=color:#61676ccc>,</span><span> event</span><span style=color:#ed9366>.</span><span style=color:#f07171>entity</span><span>())</span><span style=color:#61676ccc>;
</span><span>})
</span></code></pre><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses terminology inconsistencies in Bevy’s observer system that were creating cognitive friction for developers. The core issue was that while the system had moved from “trigger” to “On” terminology, the parameter names and method names still reflected the old mental model, creating a disconnect between how developers interacted with the API and how it was conceptually designed.<p>The problem emerged from the evolution of Bevy’s observer system. Initially designed around “triggers,” the system was later refactored to use <code>On&LTE></code> types that dereference directly to the underlying event. This created a situation where developers were working with what felt like event objects, but the parameter names (<code>trigger</code>) and method names (<code>target()</code>) didn’t align with this mental model.<p>The solution approach was straightforward but comprehensive: align all terminology with the event-centric mental model. This involved renaming callback parameters from <code>trigger</code> to <code>event</code>, and method names from <code>target()</code> to <code>entity()</code> and <code>original_target()</code> to <code>original_entity()</code>. These changes make the code more intuitive - when developers see <code>event: On&LTExplode></code>, they naturally expect to access <code>event.entity()</code> rather than <code>event.target()</code>.<p>The implementation required changes across 66 files in the codebase, demonstrating how foundational this terminology is to Bevy’s ECS system. The changes were mostly mechanical but carefully executed to maintain consistency. Key technical aspects included:<ol><li><strong>Parameter Renaming</strong>: All observer callback parameters were renamed from <code>trigger</code> to <code>event</code><li><strong>Method Renaming</strong>: The <code>target()</code> method became <code>entity()</code>, and <code>original_target()</code> became <code>original_entity()</code><li><strong>Deref Utilization</strong>: The PR encouraged using the <code>Deref</code> behavior of <code>On&LTE></code> to directly access event fields</ol><p>The technical insights reveal that this change wasn’t just about naming - it was about embracing the event-like nature of the <code>On</code> type. Since <code>On&LTE></code> dereferences to <code>E</code>, it makes sense to treat it as the event itself rather than a “trigger” container. This alignment reduces cognitive load and makes code more readable.<p>The impact of these changes is significant for code clarity and developer experience. The new terminology:<ul><li>Makes observer callbacks more intuitive to read and write<li>Better aligns with Entity-Component-System patterns where entities are central<li>Reduces mental context switching between different naming conventions<li>Provides more semantic meaning to method calls (<code>entity()</code> clearly indicates an Entity)</ul><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before: Confusing terminology mismatch
</span><span>entity</span><span style=color:#ed9366>.</span><span style=color:#f07171>observe</span><span>(|</span><span style=color:#ff8f40>trigger</span><span style=color:#61676ccc>: </span><span>On&LTExplode>| {
</span><span>  </span><span style=color:#f07171>println!</span><span>(</span><span style=color:#86b300>"</span><span style=color:#ff8f40>{}</span><span style=color:#86b300> exploded!"</span><span style=color:#61676ccc>,</span><span> trigger</span><span style=color:#ed9366>.</span><span style=color:#f07171>target</span><span>())</span><span style=color:#61676ccc>;
</span><span>})
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After: Consistent event-centric terminology
</span><span>entity</span><span style=color:#ed9366>.</span><span style=color:#f07171>observe</span><span>(|</span><span style=color:#ff8f40>event</span><span style=color:#61676ccc>: </span><span>On&LTExplode>| {
</span><span>  </span><span style=color:#f07171>println!</span><span>(</span><span style=color:#86b300>"</span><span style=color:#ff8f40>{}</span><span style=color:#86b300> exploded!"</span><span style=color:#61676ccc>,</span><span> event</span><span style=color:#ed9366>.</span><span style=color:#f07171>entity</span><span>())</span><span style=color:#61676ccc>;
</span><span>})
</span></code></pre><p>These changes also future-proof the API by establishing a consistent pattern that can be extended as the observer system evolves.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TB
</span><span>    A[Observer Callbacks] --> B[On&amplt;E&ampgt; Parameter]
</span><span>    B --> C[Access Event Data]
</span><span>    B --> D[Access Entity Information]
</span><span>    C --> E[Direct Dereference]
</span><span>    D --> F[entity() method]
</span><span>    D --> G[original_entity() method]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><ol><li><strong><code>crates/bevy_ecs/src/observer/mod.rs</code></strong> (+44/-50) <ul><li>Updated internal terminology in observer system tests and documentation<li>Changed method names from <code>target()</code> to <code>entity()</code> and <code>original_target()</code> to <code>original_entity()</code></ul></ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#f07171>assert_eq!</span><span>(obs</span><span style=color:#ed9366>.</span><span style=color:#f07171>target</span><span>()</span><span style=color:#61676ccc>, </span><span>Entity</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>PLACEHOLDER</span><span>)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#f07171>assert_eq!</span><span>(obs</span><span style=color:#ed9366>.</span><span style=color:#f07171>entity</span><span>()</span><span style=color:#61676ccc>, </span><span>Entity</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>PLACEHOLDER</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><ol start=2><li><strong><code>crates/bevy_core_widgets/src/core_button.rs</code></strong> (+44/-44) <ul><li>Updated button interaction observers to use <code>event</code> parameter name<li>Changed from <code>trigger.target()</code> to <code>event.entity()</code></ul></ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>button_on_key_event</span><span>(</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>trigger</span><span style=color:#61676ccc>: </span><span>On&LTFocusedInput&LTKeyboardInput>>) {
</span><span>    </span><span style=color:#fa6e32>if let </span><span style=color:#55b4d4;font-style:italic>Ok</span><span>((bstate</span><span style=color:#61676ccc>,</span><span> disabled)) </span><span style=color:#ed9366>=</span><span> q_state</span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(trigger</span><span style=color:#ed9366>.</span><span style=color:#f07171>target</span><span>())
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>button_on_key_event</span><span>(</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>event</span><span style=color:#61676ccc>: </span><span>On&LTFocusedInput&LTKeyboardInput>>) {
</span><span>    </span><span style=color:#fa6e32>if let </span><span style=color:#55b4d4;font-style:italic>Ok</span><span>((bstate</span><span style=color:#61676ccc>,</span><span> disabled)) </span><span style=color:#ed9366>=</span><span> q_state</span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(event</span><span style=color:#ed9366>.</span><span style=color:#f07171>entity</span><span>())
</span></code></pre><ol start=3><li><strong><code>examples/ui/core_widgets_observers.rs</code></strong> (+30/-30) <ul><li>Updated UI widget examples to use new terminology<li>Changed all observer parameters from <code>trigger</code> to <code>event</code></ul></ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>button_on_add_pressed</span><span>(</span><span style=color:#ff8f40>trigger</span><span style=color:#61676ccc>: </span><span>On&LTAdd, Pressed>, ...)
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>button_on_add_pressed</span><span>(</span><span style=color:#ff8f40>event</span><span style=color:#61676ccc>: </span><span>On&LTAdd, Pressed>, ...)
</span></code></pre><ol start=4><li><strong><code>crates/bevy_ecs/src/observer/system_param.rs</code></strong> (+14/-14) <ul><li>Updated the core <code>On</code> type method names and documentation<li>Changed <code>target()</code> to <code>entity()</code> and <code>original_target()</code> to <code>original_entity()</code></ul></ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>target</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-></span><span> Entity {
</span><span>    </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>trigger</span><span style=color:#ed9366>.</span><span>current_target</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap_or</span><span>(Entity</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>PLACEHOLDER</span><span>)
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>entity</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-></span><span> Entity {
</span><span>    </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>trigger</span><span style=color:#ed9366>.</span><span>entity</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap_or</span><span>(Entity</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>PLACEHOLDER</span><span>)
</span><span>}
</span></code></pre><ol start=5><li><strong><code>crates/bevy_ecs/src/observer/distributed_storage.rs</code></strong> (+14/-14) <ul><li>Updated documentation examples to use new terminology<li>Changed examples from <code>trigger</code> to <code>event</code> parameter names</ul></ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>world</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_observer</span><span>(|</span><span style=color:#ff8f40>trigger</span><span style=color:#61676ccc>: </span><span>On&LTSpeak>| {
</span><span>    </span><span style=color:#f07171>println!</span><span>(</span><span style=color:#86b300>"</span><span style=color:#ff8f40>{}</span><span style=color:#86b300>"</span><span style=color:#61676ccc>,</span><span> trigger</span><span style=color:#ed9366>.</span><span style=color:#f07171>event</span><span>()</span><span style=color:#ed9366>.</span><span>message)</span><span style=color:#61676ccc>;
</span><span>})</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>world</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_observer</span><span>(|</span><span style=color:#ff8f40>event</span><span style=color:#61676ccc>: </span><span>On&LTSpeak>| {
</span><span>    </span><span style=color:#f07171>println!</span><span>(</span><span style=color:#86b300>"</span><span style=color:#ff8f40>{}</span><span style=color:#86b300>"</span><span style=color:#61676ccc>,</span><span> event</span><span style=color:#ed9366>.</span><span>message)</span><span style=color:#61676ccc>;
</span><span>})</span><span style=color:#61676ccc>;
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/observer-system/ target=_blank>Bevy Observer System Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Entity_component_system target=_blank>Entity-Component-System Pattern</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/std/ops/trait.Deref.html target=_blank>Rust Deref Trait</a><li><a rel="noopener nofollow noreferrer" href=https://rust-lang.github.io/api-guidelines/naming.html target=_blank>API Design Guidelines</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-08/pr_20648.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>