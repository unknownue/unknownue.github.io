<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #18288 Add `examples/helpers/*` as library examples
        
    </title><meta content="#18288 Add `examples/helpers/*` as library examples" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-03/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-03-13</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-03/pr-18288-zh-cn-20250313>中文</a></div></div><div class=pr-content><h1 id=18288-add-examples-helpers-as-library-examples>#18288 Add <code>examples/helpers/*</code> as library examples</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Add <code>examples/helpers/*</code> as library examples<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/18288<li><strong>Author</strong>: bushrat011899<li><strong>Status</strong>: MERGED<li><strong>Created</strong>: 2025-03-13T00:48:17Z<li><strong>Merged</strong>: Not merged<li><strong>Merged By</strong>: N/A</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Some of Bevy’s examples contain boilerplate which is split out into the <code>helpers</code> folder. This allows examples to have access to common functionality without building into Bevy directly. However, these helpers are themselves quite high-quality code, and we do intend for users to read them and even use them. But, we don’t list them in the examples document, and they aren’t explicitly checked in CI, only transitively through examples which import them.<h2 id=solution>Solution</h2><ul><li>Added <code>camera_controller</code> and <code>widgets</code> as library examples.</ul><h2 id=testing>Testing</h2><ul><li>CI</ul><hr><h2 id=notes>Notes</h2><ul><li>Library examples are identical to any other example, just with <code>crate-type = ["lib"]</code> in the <code>Cargo.toml</code>. Since they are marked as libraries, they don’t require a <code>main</code> function but do require public items to be documented.<li>Library examples opens the possibility of creating examples which don’t need to be actual runnable applications. This may be more appropriate for certain ECS examples, and allows for adding helpers which (currently) don’t have an example that needs them without them going stale.<li>I learned about this as a concept during research for <code>no_std</code> examples, but believe it has value for Bevy outside that specific niche.</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The PR addresses a visibility and maintenance gap in Bevy’s example ecosystem. While Bevy’s example system effectively demonstrates engine capabilities, helper modules in the <code>examples/helpers</code> directory served as hidden infrastructure. These utilities provided common functionality (like camera controls and UI widgets) to multiple examples but weren’t themselves treated as first-class examples.<p>The core problem was two-fold:<ol><li><strong>Discoverability</strong>: Developers exploring Bevy’s examples wouldn’t naturally find these helpers despite their utility<li><strong>Maintenance Safety</strong>: CI only verified helpers indirectly through parent examples that imported them</ol><p>The solution leverages Rust’s crate type system by converting these helpers into library examples. By adding <code>crate-type = ["lib"]</code> to their Cargo.toml entries, these modules gain:<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># In examples/helpers/camera_controller/Cargo.toml
</span><span>[</span><span style=color:#399ee6>package</span><span>]
</span><span style=color:#399ee6>name </span><span>= </span><span style=color:#86b300>"camera_controller"
</span><span style=color:#399ee6>crate-type </span><span>= [</span><span style=color:#86b300>"lib"</span><span>]
</span></code></pre><p>This approach provides three key benefits:<ol><li>Explicit inclusion in example documentation<li>Direct CI validation through <code>cargo test --examples</code><li>Enforcement of documentation standards through Rust’s lib crate requirements</ol><p>The implementation required targeted changes:<ol><li><strong>Structural Updates</strong>: Each helper became a proper example subproject<li><strong>Documentation Integration</strong>: Adding entries to examples/README.md<li><strong>CI Alignment</strong>: Ensuring cargo commands would detect and verify these lib examples</ol><p>An important technical consideration was maintaining helper functionality while converting them to libraries. Since library crates don’t require main functions, the implementation needed to ensure all public items were properly documented:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// System set containing all systems of the camera controller
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(SystemSet</span><span style=color:#61676ccc>,</span><span> Debug</span><span style=color:#61676ccc>,</span><span> Hash</span><span style=color:#61676ccc>,</span><span> PartialEq</span><span style=color:#61676ccc>,</span><span> Eq</span><span style=color:#61676ccc>,</span><span> Clone)]
</span><span style=color:#fa6e32>pub enum </span><span style=color:#399ee6>CameraControllerSet </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Variants omitted
</span><span>}
</span></code></pre><p>This change establishes a pattern for future helper development. By treating reusable components as library examples, Bevy can:<ul><li>Reduce example boilerplate through verified shared modules<li>Improve code health through direct CI validation<li>Enhance discoverability of architectural patterns</ul><p>The impact manifests in two primary areas:<ol><li><strong>Developer Experience</strong>: New users can now find camera/widget helpers through standard example listings<li><strong>Code Quality</strong>: Changes to helpers will be validated even if no parent example breaks</ol><h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Example Helpers] --> B[CI Validation]
</span><span>    A --> C[Documentation]
</span><span>    B --> D[Direct Testing]
</span><span>    C --> E[Developer Discovery]
</span><span>    D --> F[Code Health]
</span><span>    E --> G[Reduced Boilerplate]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><ol><li><strong>examples/helpers/camera_controller/Cargo.toml</strong></ol><pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span>[</span><span style=color:#399ee6>package</span><span>]
</span><span style=color:#399ee6>name </span><span>= </span><span style=color:#86b300>"camera_controller"
</span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"0.1.0"
</span><span style=color:#399ee6>edition </span><span>= </span><span style=color:#86b300>"2021"
</span><span style=color:#399ee6>crate-type </span><span>= [</span><span style=color:#86b300>"lib"</span><span>]
</span></code></pre><ul><li>Establishes the helper as a library example<li>Enables inclusion in example documentation and direct testing</ul><ol start=2><li><strong>examples/README.md</strong></ol><pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span style=color:#4cbf99>- </span><span>[</span><span style=color:#ed9366;background-color:#61676c10>`camera_controller`</span><span>][</span><span style=color:#ff8f40>camera_controller</span><span>] - Shows how to implement a first-person camera controller
</span><span style=color:#4cbf99>- </span><span>[</span><span style=color:#ed9366;background-color:#61676c10>`widgets`</span><span>][</span><span style=color:#ff8f40>widgets</span><span>] - Demonstrates custom UI widget creation
</span></code></pre><ul><li>Makes helpers discoverable in main examples documentation<li>Provides explicit documentation links</ul><ol start=3><li><strong>examples/helpers/widgets/Cargo.toml</strong></ol><pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span>[</span><span style=color:#399ee6>package</span><span>]
</span><span style=color:#399ee6>name </span><span>= </span><span style=color:#86b300>"widgets"
</span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"0.1.0"
</span><span style=color:#399ee6>edition </span><span>= </span><span style=color:#86b300>"2021"
</span><span style=color:#399ee6>crate-type </span><span>= [</span><span style=color:#86b300>"lib"</span><span>]
</span></code></pre><ul><li>Parallel structure to camera controller<li>Creates consistent pattern for helper examples</ul><h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/cargo/reference/cargo-targets.html#the-crate-type-field target=_blank>Rust Cargo Documentation on crate-type</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/getting-started/examples/ target=_blank>Bevy Examples Guide</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/book/ch07-00-managing-growing-projects-with-packages-crates-and-modules.html target=_blank>Rust Library Development Patterns</a></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-03/pr_18288.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>