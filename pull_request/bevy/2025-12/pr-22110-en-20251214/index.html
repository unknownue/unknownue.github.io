<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22110 Bump tracy-client version
        
    </title><meta content="#22110 Bump tracy-client version" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-12/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-12-14</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-12/pr-22110-zh-cn-20251214>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Bump tracy-client version<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22110<li><strong>Author</strong>: Lampan-git<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Dependencies, S-Ready-For-Final-Review, A-Diagnostics<li><strong>Created</strong>: 2025-12-14T12:21:28Z<li><strong>Merged</strong>: 2025-12-14T21:40:22Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Latest tracy version 0.13 doesn’t work with tracy-client 0.18.0</ul><h2 id=solution>Solution</h2><ul><li>Bump tracy-client to 0.18.3 per https://github.com/nagisa/rust_tracy_client?tab=readme-ov-file#version-support-table</ul><h2 id=testing>Testing</h2><ul><li>Tested with tracy version 13.1<li>I have not tested with tracy version 12</ul><hr><details><summary>Click to view showcase</summary> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#f07171>println!</span><span>(</span><span style=color:#86b300>"My super cool code."</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre></details><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a dependency version mismatch between the Tracy profiler and its Rust client library within the Bevy game engine. Tracy is a real-time, frame-level performance profiler widely used in game development to identify performance bottlenecks. Bevy integrates Tracy for detailed performance analysis, but this integration broke when users upgraded to the latest Tracy version.<p>The problem was straightforward: Tracy version 0.13 introduced changes that made it incompatible with the <code>tracy-client</code> Rust crate at version 0.18.0. This is a common issue in software dependency management where upstream libraries evolve and client libraries must follow to maintain compatibility. The <code>rust_tracy_client</code> project maintains a version support table that clearly documents which versions of the client work with which versions of the Tracy profiler. According to this table, Tracy 0.13 requires <code>tracy-client</code> 0.18.3 or later.<p>The solution implemented in this PR is minimal and surgical: update the <code>tracy-client</code> dependency version in two Cargo.toml files from 0.18.0 to 0.18.3. This change aligns Bevy with the officially supported version pairing. The approach follows standard dependency management practices: when a dependency update is required for compatibility, update to the minimum compatible version that resolves the issue. In this case, 0.18.3 is specified because it’s the version confirmed to work with Tracy 0.13 according to the compatibility table.<p>The implementation touches only dependency declarations, leaving all actual profiling code unchanged. This is a safe change because it doesn’t modify any functional code—it simply allows the existing code to work with newer versions of the underlying profiling system. The changes are isolated to two crates: <code>bevy_log</code> and <code>bevy_render</code>. Both crates use Tracy for different aspects of profiling—<code>bevy_log</code> for logging integration and <code>bevy_render</code> for GPU and rendering performance analysis.<p>From a technical perspective, this PR demonstrates the importance of maintaining dependency version compatibility in large projects. When external tools like profilers are involved, breaking changes can directly impact developers’ ability to analyze and optimize their games. The fix ensures that Bevy users can leverage the latest Tracy features and fixes without sacrificing profiling capabilities.<p>The impact is immediate: developers using Tracy 0.13 can now profile their Bevy applications without encountering compatibility errors. The change is backward compatible for users who haven’t updated Tracy, as the new client version maintains compatibility with older Tracy versions according to the support table. This makes the update low-risk while providing necessary forward compatibility.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Tracy Profiler 0.13] --> B[tracy-client 0.18.3]
</span><span>    B --> C[bevy_log]
</span><span>    B --> D[bevy_render]
</span><span>    C --> E[Bevy Application]
</span><span>    D --> E
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><ol><li><p><strong>File:</strong> <code>crates/bevy_log/Cargo.toml</code></p> <p><strong>Change:</strong> Updated <code>tracy-client</code> dependency from version 0.18.0 to 0.18.3.</p> <p><strong>Code Snippet:</strong></p> <pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># Before:
</span><span style=color:#399ee6>tracy-client </span><span>= { </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"0.18.0"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>optional </span><span>= </span><span style=color:#ff8f40>true </span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span style=color:#399ee6>tracy-client </span><span>= { </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"0.18.3"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>optional </span><span>= </span><span style=color:#ff8f40>true </span><span>}
</span></code></pre> <p><strong>Why:</strong> The <code>bevy_log</code> crate uses Tracy for logging and diagnostic profiling. This update ensures compatibility when the <code>trace</code> feature is enabled with Tracy 0.13.</p><li><p><strong>File:</strong> <code>crates/bevy_render/Cargo.toml</code></p> <p><strong>Change:</strong> Updated <code>tracy-client</code> dependency from version 0.18.0 to 0.18.3.</p> <p><strong>Code Snippet:</strong></p> <pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># Before:
</span><span style=color:#399ee6>tracy-client </span><span>= { </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"0.18.0"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>optional </span><span>= </span><span style=color:#ff8f40>true </span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span style=color:#399ee6>tracy-client </span><span>= { </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"0.18.3"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>optional </span><span>= </span><span style=color:#ff8f40>true </span><span>}
</span></code></pre> <p><strong>Why:</strong> The <code>bevy_render</code> crate uses Tracy for GPU and rendering performance profiling. This update ensures render profiling works correctly with Tracy 0.13.</p></ol><h2 id=further-reading>Further Reading</h2><ol><li><strong>Tracy Profiler Documentation:</strong> https://github.com/wolfpld/tracy<li><strong>rust_tracy_client Compatibility Table:</strong> https://github.com/nagisa/rust_tracy_client?tab=readme-ov-file#version-support-table<li><strong>Bevy Diagnostics Documentation:</strong> https://bevyengine.org/learn/quick-start/performance/diagnostics/<li><strong>Cargo Dependency Management:</strong> https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html</ol><h1 id=full-code-diff>Full Code Diff</h1><p>diff –git a/crates/bevy_log/Cargo.toml b/crates/bevy_log/Cargo.toml index f8dbdf683c3f5..eccc424242ec4 100644 — a/crates/bevy_log/Cargo.toml +++ b/crates/bevy_log/Cargo.toml @@ -32,7 +32,7 @@ tracing = { version = “0.1”, default-features = false, features = [“std”] }<h1 id=tracy-dependency-compatibility-table>Tracy dependency compatibility table:</h1><h1 id=https-github-com-nagisa-rust-tracy-client>https://github.com/nagisa/rust_tracy_client</h1><p>tracing-tracy = { version = “0.11.4”, optional = true } -tracy-client = { version = “0.18.0”, optional = true } +tracy-client = { version = “0.18.3”, optional = true }<p>[target.‘cfg(target_os = “android”)’.dependencies] android_log-sys = “0.3.0” diff –git a/crates/bevy_render/Cargo.toml b/crates/bevy_render/Cargo.toml index 69cdc5cd93c81..278ae95b8fef7 100644 — a/crates/bevy_render/Cargo.toml +++ b/crates/bevy_render/Cargo.toml @@ -113,7 +113,7 @@ smallvec = { version = “1”, default-features = false, features = [“const_new”] } offset-allocator = “0.2” variadics_please = “1.1” tracing = { version = “0.1”, default-features = false, features = [“std”] } -tracy-client = { version = “0.18.0”, optional = true } +tracy-client = { version = “0.18.3”, optional = true } indexmap = { version = “2” } fixedbitset = { version = “0.5” } bitflags = “2”</div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-12/pr_22110.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>