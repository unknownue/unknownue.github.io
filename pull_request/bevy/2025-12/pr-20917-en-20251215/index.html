<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20917 Convert RenderTarget to `Component`
        
    </title><meta content="#20917 Convert RenderTarget to `Component`" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-12/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-12-15</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-12/pr-20917-zh-cn-20251215>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Convert RenderTarget to <code>Component</code><li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20917<li><strong>Author</strong>: tychedelia<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Feature, A-Rendering, S-Ready-For-Final-Review, M-Migration-Guide<li><strong>Created</strong>: 2025-09-07T06:54:01Z<li><strong>Merged</strong>: 2025-12-14T22:57:12Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>#20830 created the possibility that we may want to have render targets that produce a number of outputs, e.g. depth and normals. This is a first step towards something like that (e.g. a <code>RendersTo</code> relation) by converting <code>RenderTarget</code> to be a component. This is also useful for out-of-tree render targets that may want to do something like <code>#[require(RenderTarget::Image)]</code> once BSN lands.<h2 id=solution>Solution</h2><p>Make it a component.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a structural limitation in Bevy’s rendering architecture. Previously, the <code>RenderTarget</code> was stored as a field within the <code>Camera</code> component. While functional for basic use cases, this design constrained future development where cameras might need to render to multiple outputs or where render targets might need to be shared or referenced independently.<p>The core problem was that embedding <code>RenderTarget</code> within <code>Camera</code> made it difficult to extend the system. For instance, PR #20830 explored the possibility of cameras producing multiple outputs (like depth and normals simultaneously). With the old design, supporting such features would require significant refactoring. Additionally, for developers building custom render pipelines outside the main Bevy repository, the ability to query for or require specific types of render targets as components would be valuable once Bevy’s scene system (BSN) is implemented.<p>The solution approach was straightforward but had widespread implications: extract <code>RenderTarget</code> from being a field of <code>Camera</code> and make it a standalone ECS component. This required modifying all systems that accessed a camera’s render target to now query for both the <code>Camera</code> and <code>RenderTarget</code> components.<p>The implementation involved several key changes. First, in <code>crates/bevy_camera/src/camera.rs</code>, the <code>RenderTarget</code> enum was updated to derive <code>Component</code>, and the <code>target</code> field was removed from the <code>Camera</code> struct:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before in Camera struct:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Camera </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    </span><span style=color:#fa6e32>pub </span><span>target</span><span style=color:#61676ccc>:</span><span> RenderTarget,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After in Camera struct:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Camera </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... (target field removed)
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// RenderTarget definition:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Debug</span><span style=color:#61676ccc>,</span><span> Clone</span><span style=color:#61676ccc>,</span><span> Reflect</span><span style=color:#61676ccc>,</span><span> From)] </span><span style=color:#abb0b6;font-style:italic>// Added Component
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>reflect</span><span>(Clone)]
</span><span style=color:#fa6e32>pub enum </span><span style=color:#399ee6>RenderTarget </span><span>{
</span><span>    Window(WindowRef)</span><span style=color:#61676ccc>,
</span><span>    Image(Handle&LTImage>)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#55b4d4;font-style:italic>None </span><span>{ size</span><span style=color:#61676ccc>:</span><span> UVec2 }</span><span style=color:#61676ccc>,
</span><span>}
</span></code></pre><p>This structural change necessitated updates across 13 crates and 10 examples. Systems that previously accessed <code>camera.target</code> now needed to query for the separate <code>RenderTarget</code> component. For example, in <code>crates/bevy_render/src/camera.rs</code>, the <code>camera_system</code> function was updated:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>for </span><span>(</span><span style=color:#fa6e32>mut</span><span> camera</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>mut</span><span> camera_projection) </span><span style=color:#ed9366>in &</span><span style=color:#fa6e32>mut</span><span> cameras {
</span><span>    </span><span style=color:#fa6e32>if let </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(normalized_target) </span><span style=color:#ed9366>= &</span><span>camera</span><span style=color:#ed9366>.</span><span>target</span><span style=color:#ed9366>.</span><span style=color:#f07171>normalize</span><span>(primary_window) {
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>for </span><span>(</span><span style=color:#fa6e32>mut</span><span> camera</span><span style=color:#61676ccc>,</span><span> render_target</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>mut</span><span> camera_projection) </span><span style=color:#ed9366>in &</span><span style=color:#fa6e32>mut</span><span> cameras {
</span><span>    </span><span style=color:#fa6e32>if let </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(normalized_target) </span><span style=color:#ed9366>=</span><span> render_target</span><span style=color:#ed9366>.</span><span style=color:#f07171>normalize</span><span>(primary_window) {
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    }
</span><span>}
</span></code></pre><p>Similarly, in <code>crates/bevy_picking/src/backend.rs</code>, the <code>make_ray</code> function signature changed to accept both <code>Camera</code> and <code>RenderTarget</code>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>make_ray</span><span>(
</span><span>    </span><span style=color:#ff8f40>primary_window_entity</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Query&LTEntity, With&LTPrimaryWindow>>,
</span><span>    </span><span style=color:#ff8f40>camera</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Camera,
</span><span>    </span><span style=color:#ff8f40>camera_tfm</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>GlobalTransform,
</span><span>    </span><span style=color:#ff8f40>pointer_loc</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>PointerLocation,
</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTRay3d>
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>make_ray</span><span>(
</span><span>    </span><span style=color:#ff8f40>primary_window_entity</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Query&LTEntity, With&LTPrimaryWindow>>,
</span><span>    </span><span style=color:#ff8f40>camera</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Camera,
</span><span>    </span><span style=color:#ff8f40>render_target</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>RenderTarget, </span><span style=color:#abb0b6;font-style:italic>// Added parameter
</span><span>    </span><span style=color:#ff8f40>camera_tfm</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>GlobalTransform,
</span><span>    </span><span style=color:#ff8f40>pointer_loc</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>PointerLocation,
</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTRay3d>
</span></code></pre><p>These changes propagated through UI systems, sprite picking, OIT (Order Independent Transparency) systems, and more. The migration was comprehensive but followed a consistent pattern: wherever a system needed render target information, it now had to query for the <code>RenderTarget</code> component alongside the <code>Camera</code>.<p>From a technical perspective, this refactoring demonstrates several important principles. First, it shows the value of component composition in ECS architectures - by separating concerns into distinct components, systems can query only what they need, and the data model becomes more flexible for future extensions. Second, the change enables potential future features like cameras with multiple render targets or shared render targets between cameras without requiring further breaking changes to the API.<p>The impact of this change is primarily architectural. Functionally, rendering behavior remains the same, but the data model is now more extensible. Developers spawning cameras must now include <code>RenderTarget</code> as a separate component rather than setting <code>camera.target</code>. The migration guide provides clear examples of this change:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>    Camera3d</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>,
</span><span>    Camera {
</span><span>        target</span><span style=color:#61676ccc>: </span><span>RenderTarget</span><span style=color:#ed9366>::</span><span>Image(image_handle</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>())</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>    }</span><span style=color:#61676ccc>,
</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>    Camera3d</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>,
</span><span>    RenderTarget</span><span style=color:#ed9366>::</span><span>Image(image_handle</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>())</span><span style=color:#61676ccc>,
</span><span>))</span><span style=color:#61676ccc>;
</span></code></pre><p>This change also has performance implications: systems that don’t need render target information can continue querying only for <code>Camera</code>, avoiding unnecessary component access. Conversely, systems that do need render targets must now query for an additional component, which adds some overhead but is minimal in practice.<p>The PR successfully lays groundwork for future rendering enhancements while maintaining backward compatibility through a clear migration path. The widespread but mechanical nature of the changes suggests good test coverage and careful implementation to ensure no regressions in rendering behavior.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    Camera[Camera Component] -->|Queried with| CameraSystem[Camera Systems]
</span><span>    RenderTarget[RenderTarget Component] -->|Queried with| CameraSystem
</span><span>    CameraSystem -->|Updates| ExtractedCamera[ExtractedCamera]
</span><span>    
</span><span>    UI[UI Systems] -->|Query| Camera
</span><span>    UI -->|Query| RenderTarget
</span><span>    Picking[Picking Systems] -->|Query| Camera
</span><span>    Picking -->|Query| RenderTarget
</span><span>    Rendering[Rendering Systems] -->|Query| Camera
</span><span>    Rendering -->|Query| RenderTarget
</span><span>    
</span><span>    Entity[Camera Entity] -->|Has| Camera
</span><span>    Entity -->|Has| RenderTarget
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><ol><li><strong><code>crates/bevy_camera/src/camera.rs</code></strong> (+27/-21) <ul><li>Removed <code>target</code> field from <code>Camera</code> struct<li>Added <code>Component</code> derive to <code>RenderTarget</code> enum<li>Updated <code>Default</code> implementation for <code>Camera</code> to not initialize <code>target</code></ul></ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Key change in Camera struct:
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Camera </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    </span><span style=color:#fa6e32>pub </span><span>target</span><span style=color:#61676ccc>:</span><span> RenderTarget,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Camera </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... (target field removed)
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// todo: reflect this when #6042 lands
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// RenderTarget now a component:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Debug</span><span style=color:#61676ccc>,</span><span> Clone</span><span style=color:#61676ccc>,</span><span> Reflect</span><span style=color:#61676ccc>,</span><span> From)] </span><span style=color:#abb0b6;font-style:italic>// Added Component
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>reflect</span><span>(Clone)]
</span><span style=color:#fa6e32>pub enum </span><span style=color:#399ee6>RenderTarget </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... variants unchanged
</span><span>}
</span></code></pre><ol start=2><li><strong><code>crates/bevy_render/src/camera.rs</code></strong> (+24/-19) <ul><li>Updated <code>camera_system</code> to query for <code>RenderTarget</code> alongside <code>Camera</code><li>Updated <code>extract_cameras</code> to include <code>RenderTarget</code> in query<li>Changed how render target normalization is accessed</ul></ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before in camera_system:
</span><span style=color:#fa6e32>for </span><span>(</span><span style=color:#fa6e32>mut</span><span> camera</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>mut</span><span> camera_projection) </span><span style=color:#ed9366>in &</span><span style=color:#fa6e32>mut</span><span> cameras {
</span><span>    </span><span style=color:#fa6e32>if let </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(normalized_target) </span><span style=color:#ed9366>= &</span><span>camera</span><span style=color:#ed9366>.</span><span>target</span><span style=color:#ed9366>.</span><span style=color:#f07171>normalize</span><span>(primary_window) {
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After in camera_system:
</span><span style=color:#fa6e32>for </span><span>(</span><span style=color:#fa6e32>mut</span><span> camera</span><span style=color:#61676ccc>,</span><span> render_target</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>mut</span><span> camera_projection) </span><span style=color:#ed9366>in &</span><span style=color:#fa6e32>mut</span><span> cameras {
</span><span>    </span><span style=color:#fa6e32>if let </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(normalized_target) </span><span style=color:#ed9366>=</span><span> render_target</span><span style=color:#ed9366>.</span><span style=color:#f07171>normalize</span><span>(primary_window) {
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    }
</span><span>}
</span></code></pre><ol start=3><li><p><strong><code>release-content/migration-guides/render_target_component.md</code></strong> (+25/-0)</p> <ul><li>Created new migration guide for the breaking change<li>Provides clear before/after examples for spawning cameras with render targets</ul><li><p><strong><code>crates/bevy_ui/src/update.rs</code></strong> (+6/-26)</p> <ul><li>Updated camera queries to include <code>RenderTarget</code><li>Simplified test code by removing unnecessary <code>Camera</code> configuration</ul></ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Test code simplification example:
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>let</span><span> camera2 </span><span style=color:#ed9366>=</span><span> world</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>    Camera2d</span><span style=color:#61676ccc>,
</span><span>    Camera {
</span><span>        target</span><span style=color:#61676ccc>: </span><span>RenderTarget</span><span style=color:#ed9366>::</span><span>Window(WindowRef</span><span style=color:#ed9366>::</span><span>Entity(window_2))</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>    }</span><span style=color:#61676ccc>,
</span><span>))</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>let</span><span> camera2 </span><span style=color:#ed9366>=</span><span> world</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>    Camera2d</span><span style=color:#61676ccc>,
</span><span>    RenderTarget</span><span style=color:#ed9366>::</span><span>Window(WindowRef</span><span style=color:#ed9366>::</span><span>Entity(window_2))</span><span style=color:#61676ccc>,
</span><span>))</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()</span><span style=color:#61676ccc>;
</span></code></pre><ol start=5><li><strong><code>crates/bevy_picking/src/backend.rs</code></strong> (+12/-7) <ul><li>Updated ray casting systems to accept <code>RenderTarget</code> parameter<li>Modified <code>make_ray</code> function signature and implementation</ul></ol><h2 id=further-reading>Further Reading</h2><ul><li>PR #20830: The original PR that explored multiple output render targets, providing context for why this change was made<li>Bevy ECS documentation: For understanding component composition and query patterns<li>Bevy Render Graph documentation: For understanding how cameras and render targets interact in the rendering pipeline<li>Entity Component System patterns: For broader context on data-oriented design principles demonstrated in this refactoring</ul><h1 id=full-code-diff>Full Code Diff</h1><p><em>(Included as provided)</em></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-12/pr_20917.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>