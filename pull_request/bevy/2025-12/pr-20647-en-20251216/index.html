<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20647 Optimize BundleInserter::insert compile time
        
    </title><meta content="#20647 Optimize BundleInserter::insert compile time" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-12/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-12-16</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-12/pr-20647-zh-cn-20251216>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Optimize BundleInserter::insert compile time<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20647<li><strong>Author</strong>: atlv24<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-ECS, C-Performance, S-Needs-Benchmarking, D-Unsafe, S-Needs-Review<li><strong>Created</strong>: 2025-08-19T00:57:46Z<li><strong>Merged</strong>: 2025-12-16T02:11:04Z<li><strong>Merged By</strong>: cart</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Optimize clean compile time by 10%</ul><h2 id=solution>Solution</h2><ul><li>Factor out non-generic code from generic function that is called a lot</ul><p>Main: (92s total) <img alt=image height=988 src=https://github.com/user-attachments/assets/3faaa4bc-bd0c-4664-a9e2-9c14a5156a97 width=769><p>This PR: (82s total) <img alt=image height=951 src=https://github.com/user-attachments/assets/1797e26a-9516-4180-af2a-3671ed908ee3 width=694><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a common performance issue in Rust projects that make heavy use of generics: compile time bloat due to excessive monomorphization. The problem was observed in Bevy’s ECS system, specifically in the <code>BundleInserter::insert</code> method, which is a critical path for entity component manipulation.<p>The core issue was straightforward but had significant impact. The <code>BundleInserter::insert</code> method is generic over the type of bundle being inserted (<code>T: DynamicBundle</code>). Every time this method is called with a different bundle type, the Rust compiler generates a separate copy (monomorphizes) of the entire function body. While this generic implementation is necessary for type safety and performance at runtime, it creates compile time overhead because much of the function’s logic doesn’t actually depend on the specific bundle type <code>T</code>.<p>The developer measured compile times before and after the change, showing a reduction from 92 seconds to 82 seconds for a clean build—a 10% improvement. This is significant in a large codebase like Bevy where compile times directly impact developer productivity.<p>The solution approach was to identify and extract the non-generic portions of the <code>insert</code> method into separate helper functions. By doing this, only the parts that truly depend on the generic type parameter <code>T</code> remain in the monomorphized code, while the common logic is compiled only once. This is a standard technique in Rust optimization known as “extracting non-generic code from generic functions.”<p>The implementation involved creating two new helper methods: <code>before_insert</code> and <code>after_insert</code>. The <code>before_insert</code> method handles all the preparation work that doesn’t depend on the specific bundle type, including:<ul><li>Triggering replace observers when in <code>InsertMode::Replace</code><li>Determining whether the entity stays in the same archetype, moves to a new archetype in the same table, or moves to a new archetype in a new table<li>Allocating space in tables and updating entity locations</ul><p>The <code>after_insert</code> method handles post-insertion logic that also doesn’t depend on the bundle type, including:<ul><li>Triggering add observers<li>Triggering remove observers for components that were replaced<li>Handling relationship hooks</ul><p>The core generic operation—writing the actual component data into storage—remains in the main <code>insert</code> method via the <code>write_components</code> call, which must be monomorphized for each bundle type since it handles the actual component data.<p>A key technical detail in the implementation is the use of <code>#[cfg_attr(not(debug_assertions), inline(always))]</code> on the helper functions. This ensures that in release builds, these functions are always inlined to avoid any runtime performance penalty from the additional function calls. In debug builds, they’re not forced to inline, which helps with compile time and debugging. This demonstrates a careful balance between compile time optimization and runtime performance.<p>The refactoring also required careful handling of unsafe code. The original <code>insert</code> method had multiple safety requirements documented, and these were preserved and properly distributed between the new helper functions. The <code>before_insert</code> method returns several values needed by the generic <code>write_components</code> call, including references to the sparse sets, table, and the computed table row.<p>From an architectural perspective, this change doesn’t alter the behavior of the ECS system—it only changes how the code is organized for compilation. The runtime behavior remains identical, which is verified by existing tests. The main benefit is reduced binary size (due to less duplicated code) and faster compilation times.<p>The impact of this change extends beyond just the immediate compile time improvement. It also sets a precedent for similar optimizations elsewhere in the codebase. Other generic functions that have significant non-generic portions could benefit from the same pattern. Additionally, the cleaner separation of concerns makes the code slightly more maintainable, with the generic and non-generic logic more clearly separated.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Original insert method] --> B[Fully monomorphized&LTbr>for each bundle type]
</span><span>    A --> C[New approach]
</span><span>    C --> D[before_insert (non-generic)]
</span><span>    C --> E[write_components (generic)]
</span><span>    C --> F[after_insert (non-generic)]
</span><span>    
</span><span>    B --> G[92s compile time]
</span><span>    D --> H[Compiled once]
</span><span>    E --> I[Compiled per bundle type]
</span><span>    F --> J[Compiled once]
</span><span>    H --> K[82s compile time]
</span><span>    I --> K
</span><span>    J --> K
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-ecs-src-bundle-insert-rs-124-67><code>crates/bevy_ecs/src/bundle/insert.rs</code> (+124/-67)</h3><p>This file contains the <code>BundleInserter</code> implementation, which handles inserting bundles (groups of components) into entities. The main change refactors the <code>insert</code> method to extract non-generic code into separate helper functions.<p><strong>Key modifications:</strong><ol><li><strong>Extracted <code>before_insert</code> method</strong>: This non-generic method handles the preparatory work before writing component data.</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// New helper method
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>cfg_attr</span><span>(</span><span style=color:#f29718>not</span><span>(debug_assertions)</span><span style=color:#61676ccc>, </span><span style=color:#f29718>inline</span><span>(always))]
</span><span style=color:#fa6e32>unsafe fn </span><span style=color:#f29718>before_insert</span><span><</span><span style=color:#fa6e32>'a</span><span>>(
</span><span>    </span><span style=color:#ff8f40>entity</span><span style=color:#61676ccc>:</span><span> Entity,
</span><span>    </span><span style=color:#ff8f40>location</span><span style=color:#61676ccc>:</span><span> EntityLocation,
</span><span>    </span><span style=color:#ff8f40>insert_mode</span><span style=color:#61676ccc>:</span><span> InsertMode,
</span><span>    </span><span style=color:#ff8f40>caller</span><span style=color:#61676ccc>:</span><span> MaybeLocation,
</span><span>    </span><span style=color:#ff8f40>relationship_hook_mode</span><span style=color:#61676ccc>:</span><span> RelationshipHookMode,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>table</span><span style=color:#61676ccc>: </span><span>NonNull&LTTable>,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>archetype</span><span style=color:#61676ccc>: </span><span>NonNull&LTArchetype>,
</span><span>    </span><span style=color:#ff8f40>archetype_after_insert</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>ArchetypeAfterBundleInsert,
</span><span>    </span><span style=color:#ff8f40>world</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>'a </span><span>UnsafeWorldCell<</span><span style=color:#fa6e32>'w</span><span>>,
</span><span>    </span><span style=color:#ff8f40>archetype_move_type</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>'a mut</span><span> ArchetypeMoveType,
</span><span>) </span><span style=color:#61676ccc>-> </span><span>(
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>'a</span><span> Archetype,
</span><span>    EntityLocation,
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>'a mut</span><span> SparseSets,
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>'a mut</span><span> Table,
</span><span>    TableRow,
</span><span>) {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... non-generic preparation code ...
</span><span>}
</span></code></pre><ol start=2><li><strong>Extracted <code>after_insert</code> method</strong>: This non-generic method handles cleanup and observer triggering after component data is written.</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// New helper method
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>cfg_attr</span><span>(</span><span style=color:#f29718>not</span><span>(debug_assertions)</span><span style=color:#61676ccc>, </span><span style=color:#f29718>inline</span><span>(always))]
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>after_insert</span><span>(
</span><span>    </span><span style=color:#ff8f40>entity</span><span style=color:#61676ccc>:</span><span> Entity,
</span><span>    </span><span style=color:#ff8f40>insert_mode</span><span style=color:#61676ccc>:</span><span> InsertMode,
</span><span>    </span><span style=color:#ff8f40>caller</span><span style=color:#61676ccc>:</span><span> MaybeLocation,
</span><span>    </span><span style=color:#ff8f40>relationship_hook_mode</span><span style=color:#61676ccc>:</span><span> RelationshipHookMode,
</span><span>    </span><span style=color:#ff8f40>archetype_after_insert</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>ArchetypeAfterBundleInsert,
</span><span>    </span><span style=color:#ff8f40>new_archetype</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Archetype,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>deferred_world</span><span style=color:#61676ccc>: </span><span>crate</span><span style=color:#ed9366>::</span><span>world</span><span style=color:#ed9366>::</span><span>DeferredWorld<'</span><span style=color:#ed9366>_</span><span>>,
</span><span>) {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... non-generic cleanup code ...
</span><span>}
</span></code></pre><ol start=3><li><strong>Refactored <code>insert</code> method</strong>: The main method now orchestrates the two helper methods and the generic <code>write_components</code> call.</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Refactored insert method
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>inline</span><span>]
</span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) </span><span style=color:#fa6e32>unsafe fn </span><span style=color:#f29718>insert</span><span>&LTT</span><span style=color:#61676ccc>:</span><span> DynamicBundle>(
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>,
</span><span>    </span><span style=color:#ff8f40>entity</span><span style=color:#61676ccc>:</span><span> Entity,
</span><span>    </span><span style=color:#ff8f40>location</span><span style=color:#61676ccc>:</span><span> EntityLocation,
</span><span>    </span><span style=color:#ff8f40>bundle</span><span style=color:#61676ccc>: </span><span>MovingPtr<'</span><span style=color:#ed9366>_</span><span>, T>,
</span><span>    </span><span style=color:#ff8f40>insert_mode</span><span style=color:#61676ccc>:</span><span> InsertMode,
</span><span>    </span><span style=color:#ff8f40>caller</span><span style=color:#61676ccc>:</span><span> MaybeLocation,
</span><span>    </span><span style=color:#ff8f40>relationship_hook_mode</span><span style=color:#61676ccc>:</span><span> RelationshipHookMode,
</span><span>) </span><span style=color:#61676ccc>-></span><span> EntityLocation {
</span><span>    </span><span style=color:#fa6e32>let</span><span> archetype_after_insert </span><span style=color:#ed9366>= </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>archetype_after_insert</span><span style=color:#ed9366>.</span><span style=color:#f07171>as_ref</span><span>()</span><span style=color:#61676ccc>;
</span><span>
</span><span>    </span><span style=color:#fa6e32>let </span><span>(new_archetype</span><span style=color:#61676ccc>,</span><span> new_location) </span><span style=color:#ed9366>= </span><span>{
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// Non-generic prelude extracted to improve compile time
</span><span>        </span><span style=color:#fa6e32>let </span><span>(new_archetype</span><span style=color:#61676ccc>,</span><span> new_location</span><span style=color:#61676ccc>,</span><span> sparse_sets</span><span style=color:#61676ccc>,</span><span> table</span><span style=color:#61676ccc>,</span><span> table_row) </span><span style=color:#ed9366>= </span><span style=color:#fa6e32>Self</span><span style=color:#ed9366>::</span><span>before_insert(
</span><span>            entity</span><span style=color:#61676ccc>,
</span><span>            location</span><span style=color:#61676ccc>,
</span><span>            insert_mode</span><span style=color:#61676ccc>,
</span><span>            caller</span><span style=color:#61676ccc>,
</span><span>            relationship_hook_mode</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>table</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>archetype</span><span style=color:#61676ccc>,
</span><span>            archetype_after_insert</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#ed9366>&</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>world</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>archetype_move_type</span><span style=color:#61676ccc>,
</span><span>        )</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// Generic part remains here
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>bundle_info</span><span style=color:#ed9366>.</span><span style=color:#f07171>as_ref</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>write_components</span><span>(
</span><span>            table</span><span style=color:#61676ccc>,
</span><span>            sparse_sets</span><span style=color:#61676ccc>,
</span><span>            archetype_after_insert</span><span style=color:#61676ccc>,
</span><span>            archetype_after_insert</span><span style=color:#ed9366>.</span><span>required_components</span><span style=color:#ed9366>.</span><span style=color:#f07171>iter</span><span>()</span><span style=color:#61676ccc>,
</span><span>            entity</span><span style=color:#61676ccc>,
</span><span>            table_row</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>change_tick</span><span style=color:#61676ccc>,
</span><span>            bundle</span><span style=color:#61676ccc>,
</span><span>            insert_mode</span><span style=color:#61676ccc>,
</span><span>            caller</span><span style=color:#61676ccc>,
</span><span>        )</span><span style=color:#61676ccc>;
</span><span>
</span><span>        (new_archetype</span><span style=color:#61676ccc>,</span><span> new_location)
</span><span>    }</span><span style=color:#61676ccc>;
</span><span>
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Non-generic postlude extracted to improve compile time
</span><span>    </span><span style=color:#fa6e32>Self</span><span style=color:#ed9366>::</span><span>after_insert(
</span><span>        entity</span><span style=color:#61676ccc>,
</span><span>        insert_mode</span><span style=color:#61676ccc>,
</span><span>        caller</span><span style=color:#61676ccc>,
</span><span>        relationship_hook_mode</span><span style=color:#61676ccc>,
</span><span>        archetype_after_insert</span><span style=color:#61676ccc>,
</span><span>        new_archetype</span><span style=color:#61676ccc>,
</span><span>        deferred_world</span><span style=color:#61676ccc>,
</span><span>    )</span><span style=color:#61676ccc>;
</span><span>
</span><span>    new_location
</span><span>}
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><strong>Rust Performance Book - Compile Times</strong>: Official documentation on optimizing Rust compile times<li><strong>Monomorphization in Rust</strong>: Understanding how Rust handles generics at compile time<li><strong>Bevy ECS Architecture</strong>: Documentation on Bevy’s Entity Component System design<li><strong>Inline Attributes in Rust</strong>: When and how to use inline attributes for performance optimization</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-12/pr_20647.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>