<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22227 Make `LoadContext::finish` add all dependencies, and avoid a second texture load in GltfLoader.
        
    </title><meta content="#22227 Make `LoadContext::finish` add all dependencies, and avoid a second texture load in GltfLoader." property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-12/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-12-30</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-12/pr-22227-zh-cn-20251230>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><p>Make <code>LoadContext::finish</code> add all dependencies, and avoid a second texture load in GltfLoader.<h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Make <code>LoadContext::finish</code> add all dependencies, and avoid a second texture load in GltfLoader.<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22227<li><strong>Author</strong>: andriyDev<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Assets, S-Ready-For-Final-Review, D-Modest, A-glTF, C-Refinement<li><strong>Created</strong>: 2025-12-22T05:17:19Z<li><strong>Merged</strong>: 2025-12-30T01:09:24Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>The glTF loader previously did two loads for textures: the first did all the expected parsing and loading. The second would <strong>intentionally</strong> try to perform the same load to A) avoid doing a second load, and B) to add the handle as a dependency specifically for the material - so that the material would not be “loaded with dependencies” until all its textures were loaded.<li>In general, it’s possible for an asset to have a handle to another asset, without that handle being considered a dependency according to the <code>LoadContext</code>.<li>Also, some handles in the <code>StandardMaterial</code> were missing the <code>#[dependency]</code> attribute.</ul><h2 id=solution>Solution</h2><ul><li>Add the dependency attribute to all handles in <code>StandardMaterial</code>.<li>Make the gltf anisotropy extension also use the <code>parse_material_extension_texture</code> function like all the other extensions (the existing implementation matched exactly).<li>Made <code>LoadContext::finish</code> update the list of dependencies with <code>VisitDependencies</code>.<li>Propagate the list of texture handles through the <code>GltfLoader</code> and clone the handle out when necessary.</ul><h2 id=testing>Testing</h2><ul><li>Added tests to <code>bevy_asset</code> to verify tracking dependencies works - this also fails before the rest of this PR.<li>Ran the <code>load_gltf</code> example and it still works. This won’t show whether the dependency tracking works correctly though.</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a subtle but important issue in Bevy’s asset loading system, specifically around dependency tracking in the glTF loader. The problem originated from how texture handles were being processed when loading materials from glTF files.<p>Before this change, the glTF loader had an unusual pattern for handling texture dependencies. When loading a material, it would first parse and load textures normally. Then, to ensure proper dependency tracking, it would intentionally attempt a second load of the same texture. This second load wasn’t meant to actually load the texture again (the asset system would return the existing handle), but rather to add the texture handle to the material’s dependency list through the <code>LoadContext</code>. This ensured that materials wouldn’t be marked as “loaded with all dependencies” until their textures were ready.<p>This approach had several issues. First, it was inefficient - even though the actual texture data wasn’t loaded twice, the loader still performed unnecessary work. Second, it revealed a broader problem: in Bevy’s asset system, an asset could contain handles to other assets without those handles being tracked as dependencies if they weren’t loaded through the same <code>LoadContext</code>.<p>The core insight behind this fix is that dependency tracking should be automatic and reliable. The solution takes two complementary approaches:<ol><li><p><strong>Fix the underlying dependency tracking mechanism</strong>: The PR modifies <code>LoadContext::finish</code> to automatically collect all dependencies from an asset by using the <code>VisitDependencies</code> trait. This ensures that any handle marked with <code>#[dependency]</code> attribute will be included in the dependency list, regardless of how it was obtained.</p><li><p><strong>Refactor the glTF loader to avoid redundant loads</strong>: Instead of performing two loads for each texture, the loader now loads all textures once upfront and passes them as a pre-loaded array to material and extension parsing functions. This eliminates the need for the second “dependency-adding” load while maintaining correct dependency tracking.</p></ol><p>The implementation demonstrates good software engineering practices. By separating concerns - loading textures once and then reusing handles - the code becomes more efficient and easier to reason about. The changes to the glTF loader are extensive but follow a consistent pattern: instead of each material parsing function loading textures individually, they now receive pre-loaded texture handles and simply look them up by index.<p>This refactoring also revealed that some texture handles in <code>StandardMaterial</code> were missing the <code>#[dependency]</code> attribute, which would have prevented proper dependency tracking even with the improved <code>LoadContext::finish</code>. The PR fixes these missing attributes to ensure complete coverage.<p>The test added in <code>bevy_asset</code> is particularly important because it verifies the core dependency tracking behavior works correctly. It creates a scenario where an asset contains a handle to another asset that wasn’t loaded through the same <code>LoadContext</code>, and ensures that the dependency is still properly tracked. This test would fail without the changes to <code>LoadContext::finish</code>.<p>From an architectural perspective, this PR moves Bevy’s asset system toward a more robust and predictable model. Assets with dependencies will now reliably wait for those dependencies to load, preventing subtle bugs where assets might be used before their dependencies are ready. The elimination of redundant texture loads in the glTF loader also provides a small performance improvement, particularly for complex scenes with many materials.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[GltfLoader starts] --> B[Load all textures once]
</span><span>    B --> C[Store in texture_handles array]
</span><span>    C --> D[Pass to material loading]
</span><span>    D --> E[Material parser looks up textures by index]
</span><span>    E --> F[Create StandardMaterial with handles]
</span><span>    F --> G[LoadContext::finish called]
</span><span>    G --> H[VisitDependencies collects all texture handles]
</span><span>    H --> I[Dependencies tracked correctly]
</span><span>    I --> J[Material waits for textures before being fully loaded]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-asset-src-loader-rs-80-0><code>crates/bevy_asset/src/loader.rs</code> (+80/-0)</h3><p>This file contains the most fundamental change to the asset system. The <code>LoadContext::finish</code> method now automatically collects dependencies from assets using the <code>VisitDependencies</code> trait.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>finish</span><span>&LTA</span><span style=color:#61676ccc>:</span><span> Asset>(</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>value</span><span style=color:#61676ccc>:</span><span> A) </span><span style=color:#61676ccc>-> </span><span>LoadedAsset&LTA> {
</span><span>    LoadedAsset {
</span><span>        value</span><span style=color:#61676ccc>,
</span><span>        dependencies</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>dependencies</span><span style=color:#61676ccc>,
</span><span>        version</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>version</span><span style=color:#61676ccc>,
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>finish</span><span>&LTA</span><span style=color:#61676ccc>:</span><span> Asset>(</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>value</span><span style=color:#61676ccc>:</span><span> A) </span><span style=color:#61676ccc>-> </span><span>LoadedAsset&LTA> {
</span><span>    value</span><span style=color:#ed9366>.</span><span style=color:#f07171>visit_dependencies</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ed9366>|</span><span>asset_id</span><span style=color:#ed9366>| </span><span>{
</span><span>        </span><span style=color:#fa6e32>let </span><span>(type_id</span><span style=color:#61676ccc>,</span><span> index) </span><span style=color:#ed9366>= </span><span style=color:#fa6e32>match</span><span> asset_id {
</span><span>            UntypedAssetId</span><span style=color:#ed9366>::</span><span>Index { type_id</span><span style=color:#61676ccc>,</span><span> index } </span><span style=color:#ed9366>=> </span><span>(type_id</span><span style=color:#61676ccc>,</span><span> index)</span><span style=color:#61676ccc>,
</span><span>            UntypedAssetId</span><span style=color:#ed9366>::</span><span>Uuid { </span><span style=color:#ed9366>.. </span><span>} </span><span style=color:#ed9366>=> </span><span style=color:#fa6e32>return</span><span style=color:#61676ccc>,
</span><span>        }</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>dependencies
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>(ErasedAssetIndex { index</span><span style=color:#61676ccc>,</span><span> type_id })</span><span style=color:#61676ccc>;
</span><span>    })</span><span style=color:#61676ccc>;
</span><span>    LoadedAsset {
</span><span>        value</span><span style=color:#61676ccc>,
</span><span>        dependencies</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>dependencies</span><span style=color:#61676ccc>,
</span><span>        version</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>version</span><span style=color:#61676ccc>,
</span><span>    }
</span><span>}
</span></code></pre><h3 id=crates-bevy-gltf-src-loader-mod-rs-263-241><code>crates/bevy_gltf/src/loader/mod.rs</code> (+263/-241)</h3><p>This is the main file for the glTF loader refactoring. The key change is how textures are loaded and passed to material parsing functions.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before (simplified):
</span><span style=color:#fa6e32>let</span><span> handle </span><span style=color:#ed9366>= </span><span style=color:#f07171>load_material</span><span>(</span><span style=color:#ed9366>&</span><span>material</span><span style=color:#61676ccc>,</span><span> load_context</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>&</span><span>gltf</span><span style=color:#ed9366>.</span><span>document</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>false</span><span>)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>let</span><span> handle </span><span style=color:#ed9366>= </span><span>{
</span><span>    </span><span style=color:#fa6e32>let </span><span>(label</span><span style=color:#61676ccc>,</span><span> material) </span><span style=color:#ed9366>= </span><span style=color:#f07171>load_material</span><span>(
</span><span>        </span><span style=color:#ed9366>&</span><span>material</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#ed9366>&</span><span>texture_handles</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#ff8f40>false</span><span style=color:#61676ccc>,
</span><span>        load_context</span><span style=color:#ed9366>.</span><span style=color:#f07171>path</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>,
</span><span>    )</span><span style=color:#61676ccc>;
</span><span>    load_context</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_labeled_asset</span><span>(label</span><span style=color:#61676ccc>,</span><span> material)
</span><span>}</span><span style=color:#61676ccc>;
</span></code></pre><p>The <code>load_material</code> function signature changed from taking a <code>LoadContext</code> and <code>Document</code> to taking pre-loaded texture handles and an asset path:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>load_material</span><span>(</span><span style=color:#ff8f40>material</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Material, </span><span style=color:#ff8f40>load_context</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> LoadContext, </span><span style=color:#ff8f40>document</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Document) </span><span style=color:#61676ccc>-> </span><span>Handle&LTStandardMaterial>
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>load_material</span><span>(</span><span style=color:#ff8f40>material</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Material, </span><span style=color:#ff8f40>textures</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>[Handle&LTImage>], </span><span style=color:#ff8f40>asset_path</span><span style=color:#61676ccc>: </span><span>AssetPath<'</span><span style=color:#ed9366>_</span><span>>) </span><span style=color:#61676ccc>-> </span><span>(String, StandardMaterial)
</span></code></pre><h3 id=crates-bevy-gltf-src-loader-gltf-ext-texture-rs-2-65><code>crates/bevy_gltf/src/loader/gltf_ext/texture.rs</code> (+2/-65)</h3><p>This file was simplified by removing texture loading functions that are no longer needed since textures are now loaded upfront in the main loader.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Removed functions:
</span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>texture_handle</span><span>(</span><span style=color:#ff8f40>texture</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Texture<'</span><span style=color:#ed9366>_</span><span>>, </span><span style=color:#ff8f40>load_context</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> LoadContext) </span><span style=color:#61676ccc>-> </span><span>Handle&LTImage>
</span><span>pub(crate) fn texture_handle_from_info(info: </span><span style=color:#ed9366>&</span><span>Info, document: </span><span style=color:#ed9366>&</span><span>Document, load_context: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> LoadContext) </span><span style=color:#61676ccc>-> </span><span>Handle&LTImage>
</span></code></pre><h3 id=crates-bevy-gltf-src-loader-extensions-khr-materials-anisotropy-rs-15-23><code>crates/bevy_gltf/src/loader/extensions/khr_materials_anisotropy.rs</code> (+15/-23)</h3><p>This extension was refactored to use the shared <code>parse_material_extension_texture</code> function and work with pre-loaded texture handles.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>parse</span><span>(</span><span style=color:#ff8f40>load_context</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> LoadContext, </span><span style=color:#ff8f40>document</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Document, </span><span style=color:#ff8f40>material</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Material)
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>parse</span><span>(</span><span style=color:#ff8f40>material</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Material, </span><span style=color:#ff8f40>textures</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>[Handle&LTImage>], </span><span style=color:#ff8f40>asset_path</span><span style=color:#61676ccc>: </span><span>AssetPath<'</span><span style=color:#ed9366>_</span><span>>)
</span></code></pre><h3 id=crates-bevy-pbr-src-pbr-material-rs><code>crates/bevy_pbr/src/pbr_material.rs</code></h3><p>Multiple texture handle fields in <code>StandardMaterial</code> now have the <code>#[dependency]</code> attribute added to ensure they’re included in dependency tracking:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Examples of added #[dependency] attributes:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>dependency</span><span>]
</span><span style=color:#fa6e32>pub</span><span> diffuse_transmission_texture</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTHandle&LTImage>></span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>dependency</span><span>]
</span><span style=color:#fa6e32>pub</span><span> specular_transmission_texture</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTHandle&LTImage>></span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>dependency</span><span>]
</span><span style=color:#fa6e32>pub</span><span> thickness_texture</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTHandle&LTImage>></span><span style=color:#61676ccc>,
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/features/assets/ target=_blank>Bevy Asset System Documentation</a> - Official documentation on Bevy’s asset system<li><a rel="noopener nofollow noreferrer" href=https://www.khronos.org/gltf/ target=_blank>glTF 2.0 Specification</a> - The official glTF specification<li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/tree/main/crates/bevy_gltf target=_blank>Bevy glTF Loader Source</a> - The source code for Bevy’s glTF implementation<li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/reference/attributes.html target=_blank>Rust Attribute Macros</a> - Understanding how attributes like <code>#[dependency]</code> work in Rust</ul><h1 id=full-code-diff>Full Code Diff</h1><p><em>(The full code diff is included in the original query)</em></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-12/pr_22227.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>