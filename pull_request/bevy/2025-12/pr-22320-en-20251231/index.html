<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22320 add gamepad to bevy_gilrs feature flag
        
    </title><meta content="#22320 add gamepad to bevy_gilrs feature flag" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-12/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-12-31</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-12/pr-22320-zh-cn-20251231>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><p>add gamepad to bevy_gilrs feature flag<h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: add gamepad to bevy_gilrs feature flag<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22320<li><strong>Author</strong>: it-me-joda<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, D-Trivial, S-Ready-For-Final-Review<li><strong>Created</strong>: 2025-12-31T00:56:41Z<li><strong>Merged</strong>: 2025-12-31T22:28:50Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p><strong>Objective</strong><ul><li>Resolve discrepancy between documentation and implementation of the <code>bevy_gilrs</code> and <code>gamepad</code> feature flag<li>Fixes #22319</ul><p><strong>Solution</strong><ul><li>Added <code>gamepad</code> to <code>bevy_gilrs</code> per the documentation</ul><p><strong>Testing</strong><ul><li>I recompiled Bevy with and without this change and ensured no failure to compile</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This pull request addresses a straightforward but important discrepancy in Bevy’s feature flag configuration. The issue was discovered in the build system where the <code>bevy_gilrs</code> feature flag wasn’t properly enabling the dependent <code>gamepad</code> feature as documented. This kind of inconsistency can cause confusion for developers who rely on feature flags to manage their project dependencies.<p>The problem surfaced in issue #22319, which reported that the <code>bevy_gilrs</code> feature wasn’t working as expected according to the documentation. In Bevy’s feature system, feature flags can depend on other features to ensure that when a user enables a high-level feature like <code>bevy_gilrs</code>, all necessary lower-level components are also enabled automatically. This prevents users from having to manually enable multiple related features and reduces configuration errors.<p>The developer took a direct approach to fix this by modifying the feature definition in <code>Cargo.toml</code>. The change ensures that when someone enables <code>bevy_gilrs</code>, the <code>gamepad</code> feature is automatically enabled as well. This aligns the implementation with what was already documented, maintaining consistency between the code and its documentation.<p>From a technical perspective, this is a simple dependency declaration in Cargo’s feature system. Features in Rust’s Cargo build system can include other features or optional dependencies. When a user adds <code>features = ["bevy_gilrs"]</code> to their dependency declaration, Cargo will automatically enable any features listed in that feature’s definition. The fix ensures the transitive dependency works correctly.<p>The developer validated the fix with a practical testing approach: compiling Bevy both with and without the change to ensure no compilation failures. This verification step is important even for small changes because it confirms that the modification doesn’t break existing functionality and that the dependency chain works as intended.<p>This change has minimal impact on performance or architecture but significant impact on developer experience. It ensures that developers who enable gamepad support through the <code>bevy_gilrs</code> feature get the complete gamepad functionality without needing to understand the internal dependency structure. The fix also maintains the principle that documentation should accurately reflect implementation, which is crucial for open-source projects where users rely on accurate documentation to use the library effectively.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[User enables bevy_gilrs feature] --> B[bevy_gilrs feature flag]
</span><span>    B --> C[gamepad feature]
</span><span>    B --> D[bevy_internal/bevy_gilrs]
</span><span>    C --> E[Gamepad functionality]
</span><span>    D --> F[GILRS library integration]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><p><strong>File: <code>Cargo.toml</code></strong><ol><li><p><strong>Change Description</strong>: Modified the <code>bevy_gilrs</code> feature definition to include the <code>gamepad</code> feature as a dependency, fixing the discrepancy between documentation and implementation.</p><li><p><strong>Code Change</strong>:</p></ol><pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># Before:
</span><span style=color:#399ee6>bevy_gilrs </span><span>= [</span><span style=color:#86b300>"bevy_internal/bevy_gilrs"</span><span>]
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span style=color:#399ee6>bevy_gilrs </span><span>= [</span><span style=color:#86b300>"gamepad"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"bevy_internal/bevy_gilrs"</span><span>]
</span></code></pre><ol start=3><li><strong>Relationship to PR Purpose</strong>: This single-line change directly addresses the core issue by ensuring that when the <code>bevy_gilrs</code> feature is enabled, it automatically enables both the internal GILRS integration and the public <code>gamepad</code> feature that provides the gamepad API to users.</ol><h2 id=further-reading>Further Reading</h2><ol><li><strong>Rust Cargo Features Documentation</strong>: <a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/cargo/reference/features.html target=_blank>The Cargo Book - Features</a> - Comprehensive guide to how features work in Rust’s build system<li><strong>Bevy Feature Flags</strong>: <a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/getting-started/features/ target=_blank>Bevy Engine Features Documentation</a> - Official documentation on using feature flags in Bevy<li><strong>GILRS Library</strong>: <a rel="noopener nofollow noreferrer" href=https://github.com/gilrs-project/gilrs target=_blank>GILRS GitHub Repository</a> - The gamepad input library that Bevy integrates through the <code>bevy_gilrs</code> feature<li><strong>Semantic Versioning and Features</strong>: <a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/cargo/reference/semver.html#cargo target=_blank>SemVer Compatibility with Features</a> - How features affect API stability and versioning</ol><h2 id=full-code-diff>Full Code Diff</h2><pre style=color:#61676c;background-color:#fafafa><code><span>diff --git a/Cargo.toml b/Cargo.toml
</span><span>index 72f417c75d52a..a455c173da68f 100644
</span><span>--- a/Cargo.toml
</span><span>+++ b/Cargo.toml
</span><span>@@ -310,7 +310,7 @@ bevy_post_process = ["bevy_internal/bevy_post_process"]
</span><span> bevy_anti_alias = ["bevy_internal/bevy_anti_alias"]
</span><span> 
</span><span> # Adds gamepad support
</span><span>-bevy_gilrs = ["bevy_internal/bevy_gilrs"]
</span><span>+bevy_gilrs = ["gamepad", "bevy_internal/bevy_gilrs"]
</span><span> 
</span><span> # [glTF](https://www.khronos.org/gltf/) support
</span><span> bevy_gltf = ["bevy_internal/bevy_gltf"]
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-12/pr_22320.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>