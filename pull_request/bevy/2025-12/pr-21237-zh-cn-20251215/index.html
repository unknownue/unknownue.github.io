<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #21237 Easy screenrecording plugin
        
    </title><meta content="#21237 Easy screenrecording plugin" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-12/>â† Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-12-15</span><div class=language-switcher><a class=lang-link data-lang=en href=/pull_request/bevy/2025-12/pr-21237-en-20251215>English</a> / <span class="lang-link active" data-lang=zh-cn>ä¸­æ–‡</span></div></div><div class=pr-content><h1 id=easy-screenrecording-plugin>Easy screenrecording plugin</h1><h2 id=ji-ben-xin-xi>åŸºæœ¬ä¿¡æ¯</h2><ul><li><strong>æ ‡é¢˜</strong>: Easy screenrecording plugin<li><strong>PRé“¾æ¥</strong>: https://github.com/bevyengine/bevy/pull/21237<li><strong>ä½œè€…</strong>: mockersf<li><strong>çŠ¶æ€</strong>: å·²åˆå¹¶<li><strong>æ ‡ç­¾</strong>: C-Feature, S-Ready-For-Final-Review, M-Release-Note, A-Dev-Tools<li><strong>åˆ›å»ºæ—¶é—´</strong>: 2025-09-27T01:53:38Z<li><strong>åˆå¹¶æ—¶é—´</strong>: 2025-12-15T01:23:05Z<li><strong>åˆå¹¶è€…</strong>: alice-i-cecile</ul><h2 id=miao-shu-fan-yi>æè¿°ç¿»è¯‘</h2><h1 id=mu-biao>ç›®æ ‡</h1><ul><li>#21235çš„åç»­å·¥ä½œ<li>æŸ¥çœ‹ https://github.com/mockersf/bevy/compare/easy-screenshotsâ€¦mockersf:bevy:easy-screenrecording äº†è§£æ–°å¢å†…å®¹<li>èƒ½å¤Ÿä»¥ä¸€è‡´çš„æ–¹å¼ä»Bevyå½•åˆ¶è§†é¢‘</ul><h2 id=jie-jue-fang-an>è§£å†³æ–¹æ¡ˆ</h2><ul><li>åœ¨å¼€å‘å·¥å…·ä¸­åˆ›å»ºä¸€ä¸ªæ–°çš„ <code>EasyScreenRecordPlugin</code></ul><h2 id=ce-shi>æµ‹è¯•</h2><ul><li>æ·»åŠ åˆ°ä»»ä½•ç¤ºä¾‹ä¸­</ul><pre style=color:#61676c;background-color:#fafafa><code><span>        .add_plugins(bevy::dev_tools::EasyScreenRecordPlugin::default())
</span></code></pre><ul><li>å¯ç”¨ <code>bevy_internal/screenrecording</code> åŠŸèƒ½è¿è¡Œç¤ºä¾‹<li>æŒ‰ä¸‹ç©ºæ ¼é”®<li>ç­‰å¾…â€¦<li>å†æ¬¡æŒ‰ä¸‹ç©ºæ ¼é”®<li>å±å¹•å½•åˆ¶å®Œæˆï¼ğŸ‰<li>å·®ä¸å¤šâ€¦ ä½ ç°åœ¨æœ‰äº†ä¸€ä¸ªh264æ–‡ä»¶ã€‚VLCå¯ä»¥è¯»å–å®ƒä»¬ï¼Œä½†è¿™ä¸æ˜¯æœ€å‹å¥½çš„æ ¼å¼<li><code>ffmpeg</code> æ˜¯æˆ‘ä»¬çš„æœ‹å‹ï¼<code>for file in *.h264; do ffmpeg -i $file $file.mp4; done</code><li>ä½ ç°åœ¨æœ‰äº†ä¸€ä¸ªå¯ä»¥åˆ†äº«åˆ°ä»»ä½•åœ°æ–¹çš„.mp4æ–‡ä»¶ï¼</ul><hr><h2 id=zhan-shi>å±•ç¤º</h2><p>ç”±Bevyç›´æ¥å½•åˆ¶<p>https://github.com/user-attachments/assets/217f5093-9443-40e5-b2ce-33f65f6a56c6<h2 id=zhe-ge-pull-requestde-gu-shi>è¿™ä¸ªPull Requestçš„æ•…äº‹</h2><p>è¿™ä¸ªPRè§£å†³äº†Bevyæ¸¸æˆä¸­éœ€è¦ç®€ä¾¿å½•åˆ¶è§†é¢‘çš„é—®é¢˜ã€‚å¼€å‘è€…ç»å¸¸éœ€è¦åˆ›å»ºæ¼”ç¤ºè§†é¢‘æˆ–è¥é”€ææ–™ï¼Œä½†ä¹‹å‰Bevyåªæä¾›äº†æˆªå›¾åŠŸèƒ½ï¼Œå½•åˆ¶è§†é¢‘éœ€è¦å¤–éƒ¨å·¥å…·æˆ–å¤æ‚çš„é›†æˆã€‚<h3 id=wen-ti-yu-bei-jing>é—®é¢˜ä¸èƒŒæ™¯</h3><p>Bevyä»0.11ç‰ˆæœ¬å¼€å§‹æ”¯æŒæˆªå›¾åŠŸèƒ½ï¼Œä½†è§†é¢‘å½•åˆ¶ä¸€ç›´æ˜¯ä¸€ä¸ªç¼ºå¤±çš„åŠŸèƒ½ã€‚ç”¨æˆ·éœ€è¦ä¾èµ–å¤–éƒ¨å±å¹•å½•åˆ¶è½¯ä»¶ï¼Œè¿™ä¼šå¯¼è‡´å‡ ä¸ªé—®é¢˜ï¼šå½•åˆ¶è´¨é‡ä¸ä¸€è‡´ã€å¯èƒ½å½±å“æ€§èƒ½ã€éœ€è¦é¢å¤–çš„é…ç½®æ­¥éª¤ï¼Œå¹¶ä¸”åœ¨ä¸åŒçš„å¼€å‘ç¯å¢ƒä¸­å¯èƒ½æœ‰å…¼å®¹æ€§é—®é¢˜ã€‚<p>PR #21235 ä¸ºæˆªå›¾åŠŸèƒ½æ·»åŠ äº†<code>EasyScreenshotPlugin</code>ï¼Œä¸ºè§†é¢‘å½•åˆ¶åŠŸèƒ½é“ºå¹³äº†é“è·¯ã€‚è¿™ä¸ªPRåœ¨æ­¤åŸºç¡€ä¸Šæ‰©å±•ï¼Œæä¾›ç±»ä¼¼çš„æ˜“ç”¨æ€§æ¥å½•åˆ¶è§†é¢‘ã€‚<h3 id=jie-jue-fang-an-si-lu>è§£å†³æ–¹æ¡ˆæ€è·¯</h3><p>ä½œè€…é‡‡ç”¨äº†ä»¥ä¸‹æŠ€æœ¯æ–¹æ¡ˆï¼š<ol><li>ä½¿ç”¨Bevyç°æœ‰çš„æˆªå›¾ç³»ç»Ÿä½œä¸ºè§†é¢‘å¸§çš„æ¥æº<li>ä½¿ç”¨x264ç¼–ç å™¨è¿›è¡Œé«˜æ•ˆçš„è§†é¢‘ç¼–ç <li>å°†ç¼–ç æ“ä½œæ”¾åœ¨å•ç‹¬çº¿ç¨‹ä¸­ï¼Œé¿å…é˜»å¡æ¸¸æˆä¸»å¾ªç¯<li>æä¾›ç®€å•çš„APIï¼šæŒ‰ä¸‹ç©ºæ ¼é”®å¼€å§‹/åœæ­¢å½•åˆ¶</ol><p>å…³é”®çš„å·¥ç¨‹å†³ç­–åŒ…æ‹¬ï¼š<ul><li>é€‰æ‹©h.264ä½œä¸ºç¼–ç æ ¼å¼ï¼Œå› ä¸ºå®ƒå…·æœ‰å¹¿æ³›çš„æ”¯æŒå’Œè‰¯å¥½çš„å‹ç¼©ç‡<li>å°†ç¼–ç çº¿ç¨‹ä¸æ¸¸æˆçº¿ç¨‹åˆ†ç¦»ï¼Œç¡®ä¿å½•åˆ¶ä¸å½±å“æ¸¸æˆæ€§èƒ½<li>ä½¿ç”¨æ¡ä»¶ç¼–è¯‘ï¼ˆ<code>#[cfg(feature = "screenrecording")]</code>ï¼‰å°†åŠŸèƒ½è®¾ä¸ºå¯é€‰ï¼Œé¿å…ä¸éœ€è¦æ­¤åŠŸèƒ½çš„ç”¨æˆ·å¢åŠ ä¾èµ–</ul><h3 id=shi-xian-xi-jie>å®ç°ç»†èŠ‚</h3><p>æ ¸å¿ƒå®ç°åœ¨<code>easy_screenshot.rs</code>æ–‡ä»¶ä¸­ï¼Œæ·»åŠ äº†<code>EasyScreenRecordPlugin</code>ç»“æ„ä½“ã€‚è¿™ä¸ªæ’ä»¶çš„ä¸»è¦å·¥ä½œæµç¨‹æ˜¯ï¼š<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// å½“ç”¨æˆ·æŒ‰ä¸‹ç©ºæ ¼é”®æ—¶ï¼Œè§¦å‘å½•åˆ¶å¼€å§‹/åœæ­¢
</span><span style=color:#ed9366>.</span><span style=color:#f07171>run_if</span><span>(</span><span style=color:#f07171>input_just_pressed</span><span>(</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>toggle))
</span></code></pre><p>å½•åˆ¶è¿‡ç¨‹ä½¿ç”¨å•ç‹¬çš„çº¿ç¨‹å¤„ç†ç¼–ç ï¼š<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span>std</span><span style=color:#ed9366>::</span><span>thread</span><span style=color:#ed9366>::</span><span>spawn(</span><span style=color:#fa6e32>move </span><span style=color:#ed9366>|| </span><span>{
</span><span>    </span><span style=color:#fa6e32>let mut</span><span> encoder</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTEncoder> </span><span style=color:#ed9366>= </span><span style=color:#55b4d4;font-style:italic>None</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let mut</span><span> setup </span><span style=color:#ed9366>= </span><span style=color:#55b4d4;font-style:italic>None</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let mut</span><span> file</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTFile> </span><span style=color:#ed9366>= </span><span style=color:#55b4d4;font-style:italic>None</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... ç¼–ç é€»è¾‘
</span><span>})</span><span style=color:#61676ccc>;
</span></code></pre><p>æ’ä»¶ä½¿ç”¨Bevyçš„æ¶ˆæ¯ç³»ç»Ÿï¼ˆ<code>MessageWriter</code>å’Œ<code>MessageReader</code>ï¼‰æ¥æ§åˆ¶å½•åˆ¶çŠ¶æ€ï¼š<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>enum </span><span style=color:#399ee6>RecordScreen </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Starts screen recording
</span><span>    Start</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Stops screen recording
</span><span>    Stop</span><span style=color:#61676ccc>,
</span><span>}
</span></code></pre><p>å¯¹äºæ¯ä¸€å¸§ï¼Œæ’ä»¶é€šè¿‡æˆªå›¾ç³»ç»Ÿè·å–å½“å‰å±å¹•å›¾åƒï¼Œç„¶åå‘é€åˆ°ç¼–ç çº¿ç¨‹ï¼š<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span>commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>(Screenshot</span><span style=color:#ed9366>::</span><span>primary_window())</span><span style=color:#ed9366>.</span><span style=color:#f07171>observe</span><span>(
</span><span>    </span><span style=color:#fa6e32>move </span><span style=color:#ed9366>|</span><span>screenshot_captured</span><span style=color:#61676ccc>: </span><span>On&LTScreenshotCaptured></span><span style=color:#61676ccc>,
</span><span>          </span><span style=color:#fa6e32>mut</span><span> virtual_time</span><span style=color:#61676ccc>: </span><span>ResMut&LTTime&LTbevy_time</span><span style=color:#ed9366>::</span><span>Virtual>></span><span style=color:#61676ccc>,
</span><span>          </span><span style=color:#fa6e32>mut</span><span> time</span><span style=color:#61676ccc>: </span><span>ResMut&LTTime<()>></span><span style=color:#ed9366>| </span><span>{
</span><span>        </span><span style=color:#fa6e32>let</span><span> img </span><span style=color:#ed9366>=</span><span> screenshot_captured</span><span style=color:#ed9366>.</span><span>image</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>;
</span><span>        tx</span><span style=color:#ed9366>.</span><span style=color:#f07171>send</span><span>(RecordCommand</span><span style=color:#ed9366>::</span><span>Frame(img))</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap</span><span>()</span><span style=color:#61676ccc>;
</span><span>        virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>advance_by</span><span>(frame_time)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#ed9366>*</span><span>time </span><span style=color:#ed9366>=</span><span> virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>as_generic</span><span>()</span><span style=color:#61676ccc>;
</span><span>    }</span><span style=color:#61676ccc>,
</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><p>ä¸€ä¸ªé‡è¦çš„æŠ€æœ¯ç»†èŠ‚æ˜¯æ—¶é—´æ§åˆ¶ï¼šå½•åˆ¶æ—¶éœ€è¦ç²¾ç¡®æ§åˆ¶å¸§ç‡ã€‚æ’ä»¶ä½¿ç”¨è™šæ‹Ÿæ—¶é—´ï¼ˆ<code>Virtual</code> timeï¼‰æ¥ç¡®ä¿å½•åˆ¶çš„å¸§ç‡ä¸€è‡´ï¼š<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span>virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>advance_by</span><span>(frame_time)</span><span style=color:#61676ccc>;
</span><span style=color:#ed9366>*</span><span>time </span><span style=color:#ed9366>=</span><span> virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>as_generic</span><span>()</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=ji-shu-dong-cha>æŠ€æœ¯æ´å¯Ÿ</h3><p>è¿™ä¸ªå®ç°æœ‰å‡ ä¸ªå€¼å¾—æ³¨æ„çš„æŠ€æœ¯ç‚¹ï¼š<ol><li><p><strong>çº¿ç¨‹å®‰å…¨çš„è®¾è®¡</strong>ï¼šç¼–ç æ“ä½œåœ¨å•ç‹¬çº¿ç¨‹ä¸­è¿›è¡Œï¼Œé€šè¿‡channelï¼ˆé€šé“ï¼‰åœ¨ä¸»çº¿ç¨‹å’Œç¼–ç çº¿ç¨‹ä¹‹é—´é€šä¿¡ã€‚è¿™é¿å…äº†é˜»å¡æ¸¸æˆå¾ªç¯ã€‚</p><li><p><strong>æ¡ä»¶ç¼–è¯‘</strong>ï¼šæ•´ä¸ªåŠŸèƒ½é€šè¿‡<code>#[cfg(feature = "screenrecording")]</code>å±æ€§ä¿æŠ¤ï¼Œç”¨æˆ·å¯ä»¥é€‰æ‹©æ˜¯å¦åŒ…å«æ­¤åŠŸèƒ½ï¼Œé¿å…ä¸å¿…è¦çš„ä¾èµ–ã€‚</p><li><p><strong>çµæ´»çš„é…ç½®</strong>ï¼šæ’ä»¶æä¾›äº†å¤šä¸ªå¯é…ç½®é€‰é¡¹ï¼š</p> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>EasyScreenRecordPlugin </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>toggle</span><span style=color:#61676ccc>:</span><span> KeyCode,      </span><span style=color:#abb0b6;font-style:italic>// è§¦å‘é”®
</span><span>    </span><span style=color:#fa6e32>pub </span><span>preset</span><span style=color:#61676ccc>:</span><span> Preset,       </span><span style=color:#abb0b6;font-style:italic>// h264ç¼–ç é¢„è®¾
</span><span>    </span><span style=color:#fa6e32>pub </span><span>tune</span><span style=color:#61676ccc>:</span><span> Tune,           </span><span style=color:#abb0b6;font-style:italic>// h264è°ƒä¼˜å‚æ•°
</span><span>    </span><span style=color:#fa6e32>pub </span><span>frame_time</span><span style=color:#61676ccc>:</span><span> Duration, </span><span style=color:#abb0b6;font-style:italic>// ç›®æ ‡å¸§æ—¶é—´
</span><span>}
</span></code></pre><li><p><strong>ä¸ç°æœ‰ç³»ç»Ÿçš„é›†æˆ</strong>ï¼šæ’ä»¶é‡ç”¨Bevyçš„æˆªå›¾ç³»ç»Ÿï¼ˆ<code>Screenshot</code>ç»„ä»¶å’Œ<code>ScreenshotCaptured</code>äº‹ä»¶ï¼‰ï¼Œè¿™å‡å°‘äº†ä»£ç é‡å¤å¹¶ç¡®ä¿ä¸ç°æœ‰åŠŸèƒ½çš„å…¼å®¹æ€§ã€‚</p></ol><h3 id=ying-xiang>å½±å“</h3><p>è¿™ä¸ªPRä¸ºBevyç”Ÿæ€ç³»ç»Ÿå¸¦æ¥äº†å‡ ä¸ªé‡è¦æ”¹è¿›ï¼š<ol><li><strong>å¼€å‘è€…ä½“éªŒæå‡</strong>ï¼šå¼€å‘è€…ç°åœ¨å¯ä»¥è½»æ¾å½•åˆ¶é«˜è´¨é‡çš„æ¸¸æˆè§†é¢‘ï¼Œæ— éœ€å¤–éƒ¨å·¥å…·ã€‚<li><strong>ä¸€è‡´æ€§ä¿è¯</strong>ï¼šç”±äºå½•åˆ¶ç›´æ¥åœ¨æ¸¸æˆå¼•æ“å†…éƒ¨è¿›è¡Œï¼Œå¯ä»¥ç¡®ä¿è§†é¢‘è´¨é‡çš„ä¸€è‡´æ€§å’Œå¯é‡å¤æ€§ã€‚<li><strong>æ€§èƒ½è€ƒè™‘</strong>ï¼šç¼–ç åœ¨å•ç‹¬çº¿ç¨‹ä¸­è¿›è¡Œï¼Œæœ€å°åŒ–äº†å¯¹æ¸¸æˆæ€§èƒ½çš„å½±å“ã€‚<li><strong>æ‰©å±•æ€§</strong>ï¼šè¿™ä¸ªå®ç°ä¸ºæœªæ¥çš„è§†é¢‘å½•åˆ¶åŠŸèƒ½æ‰©å±•å¥ å®šäº†åŸºç¡€ï¼Œå¦‚æ·»åŠ éŸ³é¢‘å½•åˆ¶ã€ä¸åŒç¼–ç æ ¼å¼æ”¯æŒç­‰ã€‚</ol><p>è¿™ä¸ªPRæ˜¯Bevyå¼€å‘å·¥å…·é›†çš„é‡è¦è¡¥å……ï¼Œç‰¹åˆ«æ˜¯å¯¹äºé‚£äº›éœ€è¦åˆ›å»ºæ¼”ç¤ºã€æ•™ç¨‹æˆ–è¥é”€ææ–™çš„å¼€å‘è€…æ¥è¯´éå¸¸æœ‰ç”¨ã€‚<h2 id=ke-shi-hua-biao-shi>å¯è§†åŒ–è¡¨ç¤º</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TB
</span><span>    A[EasyScreenRecordPlugin] --> B[æˆªå›¾ç³»ç»Ÿ]
</span><span>    A --> C[ç¼–ç çº¿ç¨‹]
</span><span>    A --> D[æ—¶é—´æ§åˆ¶ç³»ç»Ÿ]
</span><span>    B --> E[è·å–å±å¹•å›¾åƒ]
</span><span>    C --> F[x264ç¼–ç å™¨]
</span><span>    C --> G[å†™å…¥H264æ–‡ä»¶]
</span><span>    E --> C
</span><span>    D --> H[æ§åˆ¶å¸§ç‡]
</span><span>    F --> G
</span></code></pre><h2 id=guan-jian-wen-jian-bian-geng>å…³é”®æ–‡ä»¶å˜æ›´</h2><h3 id=crates-bevy-dev-tools-src-easy-screenshot-rs-192-0><code>crates/bevy_dev_tools/src/easy_screenshot.rs</code> (+192/-0)</h3><p>è¿™ä¸ªæ–‡ä»¶æ·»åŠ äº†<code>EasyScreenRecordPlugin</code>çš„å®ç°ã€‚å…³é”®å˜åŒ–åŒ…æ‹¬ï¼š<ol><li>æ–°çš„<code>EasyScreenRecordPlugin</code>ç»“æ„ä½“å’Œç›¸å…³ç±»å‹å®šä¹‰<li>ç¼–ç çº¿ç¨‹çš„å®ç°<li>ä¸Bevyç”Ÿæ€ç³»ç»Ÿçš„é›†æˆé€»è¾‘</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// æ–°å¢ï¼šEasyScreenRecordPlugin ç»“æ„ä½“å®šä¹‰
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>EasyScreenRecordPlugin </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>toggle</span><span style=color:#61676ccc>:</span><span> KeyCode,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>preset</span><span style=color:#61676ccc>:</span><span> Preset,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>tune</span><span style=color:#61676ccc>:</span><span> Tune,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>frame_time</span><span style=color:#61676ccc>:</span><span> Duration,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// æ–°å¢ï¼šç¼–ç çº¿ç¨‹çš„æ ¸å¿ƒé€»è¾‘
</span><span>std</span><span style=color:#ed9366>::</span><span>thread</span><span style=color:#ed9366>::</span><span>spawn(</span><span style=color:#fa6e32>move </span><span style=color:#ed9366>|| </span><span>{
</span><span>    </span><span style=color:#fa6e32>let mut</span><span> encoder</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTEncoder> </span><span style=color:#ed9366>= </span><span style=color:#55b4d4;font-style:italic>None</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let mut</span><span> setup </span><span style=color:#ed9366>= </span><span style=color:#55b4d4;font-style:italic>None</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let mut</span><span> file</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTFile> </span><span style=color:#ed9366>= </span><span style=color:#55b4d4;font-style:italic>None</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let mut</span><span> frame </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>0</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>loop </span><span>{
</span><span>        </span><span style=color:#fa6e32>let </span><span style=color:#55b4d4;font-style:italic>Ok</span><span>(next) </span><span style=color:#ed9366>=</span><span> rx</span><span style=color:#ed9366>.</span><span style=color:#f07171>recv</span><span>() </span><span style=color:#fa6e32>else </span><span>{
</span><span>            </span><span style=color:#fa6e32>break</span><span style=color:#61676ccc>;
</span><span>        }</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#fa6e32>match</span><span> next {
</span><span>            RecordCommand</span><span style=color:#ed9366>::</span><span>Start(name</span><span style=color:#61676ccc>,</span><span> preset</span><span style=color:#61676ccc>,</span><span> tune) </span><span style=color:#ed9366>=> </span><span>{
</span><span>                </span><span style=color:#abb0b6;font-style:italic>// å¼€å§‹å½•åˆ¶
</span><span>            }
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// ... å…¶ä»–å‘½ä»¤å¤„ç†
</span><span>        }
</span><span>    }
</span><span>})</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=release-content-release-notes-easy-marketing-material-md-9-0><code>release-content/release-notes/easy_marketing_material.md</code> (+9/-0)</h3><p>æ–°å¢çš„å‘å¸ƒè¯´æ˜æ–‡æ¡£ï¼Œè¯´æ˜äº†è¿™ä¸ªåŠŸèƒ½çš„ä½¿ç”¨æ–¹æ³•å’Œç›®çš„ã€‚<h3 id=github-actions-install-linux-deps-action-yml-5-0><code>.github/actions/install-linux-deps/action.yml</code> (+5/-0)</h3><p>æ›´æ–°äº†CIé…ç½®ï¼Œæ·»åŠ x264ä¾èµ–å®‰è£…ï¼š<pre class=language-yaml data-lang=yaml style=color:#61676c;background-color:#fafafa><code class=language-yaml data-lang=yaml><span style=color:#399ee6>x264</span><span style=color:#61676ccc>:
</span><span>  </span><span style=color:#399ee6>description</span><span style=color:#61676ccc>: </span><span style=color:#86b300>Install x264 (libx264-dev)
</span><span>  </span><span style=color:#399ee6>required</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>false
</span><span>  </span><span style=color:#399ee6>default</span><span style=color:#61676ccc>: </span><span style=color:#86b300>"false"
</span></code></pre><h3 id=crates-bevy-dev-tools-cargo-toml-3-0><code>crates/bevy_dev_tools/Cargo.toml</code> (+3/-0)</h3><p>æ·»åŠ äº†x264ä¾èµ–å’Œscreenrecordingç‰¹æ€§ï¼š<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span>[</span><span style=color:#399ee6>features</span><span>]
</span><span style=color:#399ee6>bevy_ci_testing </span><span>= [</span><span style=color:#86b300>"serde"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"ron"</span><span>]
</span><span style=color:#f51818>+screenrecording = ["x264"]
</span><span>
</span><span>[</span><span style=color:#399ee6>dependencies</span><span>]
</span><span style=color:#f51818>+x264 = { version = "0.5.0", optional = true }
</span></code></pre><h3 id=github-workflows-ci-yml-2-0><code>.github/workflows/ci.yml</code> (+2/-0)</h3><p>åœ¨CIå·¥ä½œä¸­å¯ç”¨äº†x264ä¾èµ–ï¼š<pre class=language-yaml data-lang=yaml style=color:#61676c;background-color:#fafafa><code class=language-yaml data-lang=yaml><span>- </span><span style=color:#399ee6>name</span><span style=color:#61676ccc>: </span><span style=color:#86b300>Install dependencies (Linux)
</span><span>  </span><span style=color:#399ee6>uses</span><span style=color:#61676ccc>: </span><span style=color:#86b300>./.github/actions/install-linux-deps
</span><span>  </span><span style=color:#399ee6>with</span><span style=color:#61676ccc>:
</span><span>    </span><span style=color:#399ee6>wayland</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>true
</span><span>    </span><span style=color:#399ee6>xkb</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>true
</span><span style=color:#399ee6>+   x264</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>true
</span></code></pre><h2 id=jin-yi-bu-yue-du>è¿›ä¸€æ­¥é˜…è¯»</h2><ol><li><strong>H.264ç¼–ç æ ‡å‡†</strong>: äº†è§£è¿™ä¸ªå¹¿æ³›ä½¿ç”¨çš„è§†é¢‘ç¼–ç æ ‡å‡†<li><strong>Bevyæˆªå›¾ç³»ç»Ÿ</strong>: é˜…è¯»Bevyå®˜æ–¹æ–‡æ¡£ä¸­å…³äº<code>Screenshot</code>ç»„ä»¶å’Œ<code>ScreenshotCaptured</code>äº‹ä»¶çš„éƒ¨åˆ†<li><strong>Rustä¸­çš„çº¿ç¨‹é€šä¿¡</strong>: å­¦ä¹ <code>std::sync::mpsc::channel</code>çš„ä½¿ç”¨å’Œå¤šçº¿ç¨‹ç¼–ç¨‹æœ€ä½³å®è·µ<li><strong>Bevyæ’ä»¶ç³»ç»Ÿ</strong>: ç†è§£å¦‚ä½•åˆ›å»ºå’Œé…ç½®Bevyæ’ä»¶<li><strong>FFmpegå·¥å…·</strong>: äº†è§£å¦‚ä½•ä½¿ç”¨FFmpegè½¬æ¢è§†é¢‘æ ¼å¼ï¼Œå¦‚å°†H.264è½¬æ¢ä¸ºMP4</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-12/pr_21237.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>