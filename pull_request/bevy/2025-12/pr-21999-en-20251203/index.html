<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #21999 Fix dragging-over panic
        
    </title><meta content="#21999 Fix dragging-over panic" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-12/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-12-03</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-12/pr-21999-zh-cn-20251203>中文</a></div></div><div class=pr-content><h1 id=title-fix-dragging-over-panic>Title: Fix dragging-over panic</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Fix dragging-over panic<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/21999<li><strong>Author</strong>: ickshonpe<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Bug, P-Crash, C-Code-Quality, S-Ready-For-Final-Review, P-Regression, M-Migration-Guide, A-Picking<li><strong>Created</strong>: 2025-12-01T15:40:09Z<li><strong>Merged</strong>: 2025-12-03T01:28:36Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description>Description</h2><h3 id=objective>Objective</h3><p>Problems:<ul><li><p>If a drag starts over a hovered entity, <code>picking_events</code> doesn’t add the hovered entity to the <code>dragging_over</code> map in <code>PointerButtonState</code>. This causes a panic when the pointer is moved and <code>picking_events</code> tries to update the non-existant <code>dragging_over</code> state for the hovered entity.</p><li><p><code>DragEnter</code> isn’t dispatched on <code>DragStart</code>. This doesn’t seem ideal. The drag isn’t crossing a geometric boundary, but it is causing the dragged over entities to enter into a dragged over state.</p></ul><p>Fixes #21998<h3 id=solution>Solution</h3><ul><li>Update the <code>dragging_state</code> for all hovered entities every frame, before handling any <code>PointerInput</code>s.<li>Reworked the <code>DragEnter</code> dispatch logic. <code>DragEnter</code> now also fires when a drag starts over an already hovered entity.</ul><h3 id=testing>Testing</h3><p>The examples using drag events should no longer panic:<pre style=color:#61676c;background-color:#fafafa><code><span>cargo run --example standard_widgets --features="experimental_bevy_ui_widgets"
</span></code></pre><pre style=color:#61676c;background-color:#fafafa><code><span>cargo run --example ui_drag_and_drop
</span></code></pre><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR fixes a crash in Bevy’s picking system that occurred during drag operations. The issue manifested when a user started dragging over an entity that was already being hovered, causing the system to panic when trying to update state for a non-existent entry in the <code>dragging_over</code> map.<p>The problem originated from a timing issue in how <code>dragging_over</code> state was managed. In the original implementation, when a drag started, the system would track the entity being dragged but would only add other hovered entities to the <code>dragging_over</code> map when those entities first became hovered during the drag operation. This meant that if an entity was already hovered when the drag started, it wouldn’t be added to the <code>dragging_over</code> map, leading to a panic later when the system tried to update its state.<p>The fix involved two key changes to the event handling logic in <code>pointer_events</code>. First, the code was restructured to consistently update <code>dragging_over</code> state for all hovered entities on every frame, rather than only when entities became newly hovered. This ensures that the state map is always properly populated, regardless of when the drag started relative to hover events.<p>Second, the <code>DragEnter</code> event dispatch logic was modified to fire not only when a dragged pointer enters a new entity’s bounds, but also when a drag starts over an entity that’s already being hovered. This change aligns with user expectations - if an entity is under the pointer when dragging begins, it should receive a <code>DragEnter</code> event since it’s now being dragged over.<p>The implementation separates concerns more cleanly: updating <code>dragging_over</code> state now happens in a dedicated loop that runs before processing pointer inputs, while event dispatch remains in the appropriate input handling sections. This separation prevents the state management bugs that caused the original panic.<p>A migration guide was added because this change affects the timing of <code>DragEnter</code> events. Systems that rely on <code>DragEnter</code> events may now receive them in scenarios where they previously didn’t, specifically when a drag starts over an already-hovered entity. Developers need to be aware that their drag-and-drop logic might need adjustments to handle these additional events.<p>The fix demonstrates good defensive programming practices: by ensuring state is always properly initialized before use, and by aligning event semantics with user expectations rather than just technical boundaries.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Pointer Events System] --> B[Process Hovered Entities]
</span><span>    B --> C[Update dragging_over State]
</span><span>    B --> D[Emit Over Events]
</span><span>    A --> E[Process Pointer Input]
</span><span>    E --> F[Drag Start]
</span><span>    F --> G[Initialize dragging_over State]
</span><span>    F --> H[Emit DragEnter Events]
</span><span>    E --> I[Drag Move]
</span><span>    I --> J[Emit DragOver Events]
</span><span>    C --> K[Prevents Panic on Drag Move]
</span><span>    G --> K
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-picking-src-events-rs-53-22><code>crates/bevy_picking/src/events.rs</code> (+53/-22)</h3><p>This file contains the core logic for handling pointer events in Bevy’s picking system. The changes restructure how dragging state is managed to prevent panics and ensure proper event dispatch.<p><strong>Key Changes:</strong><ol><li><strong>Restructured hover processing loop</strong>: The code that processes hovered entities was reorganized to first update <code>dragging_over</code> state for all hovered entities, then emit events based on state changes.</ol><p><strong>Before:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// If the entity is hovered...
</span><span style=color:#fa6e32>for </span><span>(pointer_id</span><span style=color:#61676ccc>,</span><span> hovered_entity</span><span style=color:#61676ccc>,</span><span> hit) </span><span style=color:#ed9366>in</span><span> hover_map
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>iter</span><span>()
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>flat_map</span><span>(|(</span><span style=color:#ff8f40>id</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>hashmap</span><span>)| hashmap</span><span style=color:#ed9366>.</span><span style=color:#f07171>iter</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(|</span><span style=color:#ff8f40>data</span><span>| (</span><span style=color:#ed9366>*</span><span>id</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>*</span><span>data</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>0</span><span style=color:#61676ccc>,</span><span> data</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>1.</span><span style=color:#f07171>clone</span><span>())))
</span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...but was not hovered last frame...
</span><span>    </span><span style=color:#fa6e32>if </span><span style=color:#ed9366>!</span><span>previous_hover_map
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(</span><span style=color:#ed9366>&</span><span>pointer_id)
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>iter</span><span>()
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>any</span><span>(|</span><span style=color:#ff8f40>e</span><span>| e</span><span style=color:#ed9366>.</span><span style=color:#f07171>contains_key</span><span>(</span><span style=color:#ed9366>&</span><span>hovered_entity))
</span><span>    {
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// Possibly send DragEnter events
</span><span>        </span><span style=color:#fa6e32>for</span><span> button </span><span style=color:#ed9366>in </span><span>PointerButton</span><span style=color:#ed9366>::</span><span>iter() {
</span><span>            </span><span style=color:#fa6e32>let</span><span> state </span><span style=color:#ed9366>=</span><span> pointer_state</span><span style=color:#ed9366>.</span><span style=color:#f07171>get_mut</span><span>(pointer_id</span><span style=color:#61676ccc>,</span><span> button)</span><span style=color:#61676ccc>;
</span><span>            
</span><span>            </span><span style=color:#fa6e32>for</span><span> drag_target </span><span style=color:#ed9366>in</span><span> state</span><span style=color:#ed9366>.</span><span>dragging</span><span style=color:#ed9366>.</span><span style=color:#f07171>keys</span><span>() {
</span><span>                state</span><span style=color:#ed9366>.</span><span>dragging_over</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>(hovered_entity</span><span style=color:#61676ccc>,</span><span> hit</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>())</span><span style=color:#61676ccc>;
</span><span>                </span><span style=color:#abb0b6;font-style:italic>// ... send DragEnter event
</span><span>            }
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre><p><strong>After:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Iterate all currently hovered entities for each pointer
</span><span style=color:#fa6e32>for </span><span>(pointer_id</span><span style=color:#61676ccc>,</span><span> hovered_entity</span><span style=color:#61676ccc>,</span><span> hit) </span><span style=color:#ed9366>in</span><span> hover_map
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>iter</span><span>()
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>flat_map</span><span>(|(</span><span style=color:#ff8f40>id</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>hashmap</span><span>)| hashmap</span><span style=color:#ed9366>.</span><span style=color:#f07171>iter</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(|</span><span style=color:#ff8f40>data</span><span>| (</span><span style=color:#ed9366>*</span><span>id</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>*</span><span>data</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>0</span><span style=color:#61676ccc>,</span><span> data</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>1.</span><span style=color:#f07171>clone</span><span>())))
</span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// For each button update its `dragging_over` state and possibly emit DragEnter events.
</span><span>    </span><span style=color:#fa6e32>for</span><span> button </span><span style=color:#ed9366>in </span><span>PointerButton</span><span style=color:#ed9366>::</span><span>iter() {
</span><span>        </span><span style=color:#fa6e32>let</span><span> state </span><span style=color:#ed9366>=</span><span> pointer_state</span><span style=color:#ed9366>.</span><span style=color:#f07171>get_mut</span><span>(pointer_id</span><span style=color:#61676ccc>,</span><span> button)</span><span style=color:#61676ccc>;
</span><span>        
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// Only update the `dragging_over` state if there is at least one entity being dragged.
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// Only emit DragEnter events for this `hovered_entity`, if it had no previous `dragging_over` state.
</span><span>        </span><span style=color:#fa6e32>if </span><span style=color:#ed9366>!</span><span>state</span><span style=color:#ed9366>.</span><span>dragging</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_empty</span><span>()
</span><span>            </span><span style=color:#ed9366>&&</span><span> state
</span><span>                </span><span style=color:#ed9366>.</span><span>dragging_over
</span><span>                </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>(hovered_entity</span><span style=color:#61676ccc>,</span><span> hit</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>())
</span><span>                </span><span style=color:#ed9366>.</span><span style=color:#f07171>is_none</span><span>()
</span><span>        {
</span><span>            </span><span style=color:#fa6e32>for</span><span> drag_target </span><span style=color:#ed9366>in</span><span> state</span><span style=color:#ed9366>.</span><span>dragging</span><span style=color:#ed9366>.</span><span style=color:#f07171>keys</span><span>() {
</span><span>                </span><span style=color:#abb0b6;font-style:italic>// ... send DragEnter event
</span><span>            }
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre><ol start=2><li><strong>Added DragEnter dispatch on DragStart</strong>: When a drag starts, the system now immediately adds all currently hovered entities (except the dragged entity itself) to the <code>dragging_over</code> state and emits <code>DragEnter</code> events for them.</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Insert dragging over state and emit DragEnter for hovered entities.
</span><span style=color:#fa6e32>for </span><span>(hovered_entity</span><span style=color:#61676ccc>,</span><span> hit) </span><span style=color:#ed9366>in</span><span> hover_map
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(</span><span style=color:#ed9366>&</span><span>pointer_id)
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>iter</span><span>()
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>flat_map</span><span>(|</span><span style=color:#ff8f40>h</span><span>| h</span><span style=color:#ed9366>.</span><span style=color:#f07171>iter</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(|(</span><span style=color:#ff8f40>entity</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>data</span><span>)| (</span><span style=color:#ed9366>*</span><span>entity</span><span style=color:#61676ccc>,</span><span> data</span><span style=color:#ed9366>.</span><span style=color:#f07171>to_owned</span><span>())))
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>filter</span><span>(|(</span><span style=color:#ff8f40>hovered_entity</span><span style=color:#61676ccc>,</span><span> _)| </span><span style=color:#ed9366>*</span><span>hovered_entity </span><span style=color:#ed9366>!= *</span><span>press_target)
</span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Inserting the `dragging_over` state here ensures the `DragEnter` event won't be dispatched twice.
</span><span>    state</span><span style=color:#ed9366>.</span><span>dragging_over</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>(hovered_entity</span><span style=color:#61676ccc>,</span><span> hit</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>())</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let</span><span> drag_enter_event </span><span style=color:#ed9366>= </span><span>Pointer</span><span style=color:#ed9366>::</span><span>new(
</span><span>        pointer_id</span><span style=color:#61676ccc>,
</span><span>        location</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>,
</span><span>        DragEnter {
</span><span>            button</span><span style=color:#61676ccc>,
</span><span>            dragged</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>*</span><span>press_target</span><span style=color:#61676ccc>,
</span><span>            hit</span><span style=color:#61676ccc>:</span><span> hit</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>,
</span><span>        }</span><span style=color:#61676ccc>,
</span><span>        hovered_entity</span><span style=color:#61676ccc>,
</span><span>    )</span><span style=color:#61676ccc>;
</span><span>    commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>trigger</span><span>(drag_enter_event</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>())</span><span style=color:#61676ccc>;
</span><span>    message_writers</span><span style=color:#ed9366>.</span><span>drag_enter_events</span><span style=color:#ed9366>.</span><span style=color:#f07171>write</span><span>(drag_enter_event)</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><ol start=3><li><strong>Removed redundant state update in DragOver</strong>: The <code>DragOver</code> event handling no longer updates the <code>dragging_over</code> state since it’s now handled in the hover processing loop.</ol><p><strong>Before:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#ed9366>*</span><span>state</span><span style=color:#ed9366>.</span><span>dragging_over</span><span style=color:#ed9366>.</span><span style=color:#f07171>get_mut</span><span>(</span><span style=color:#ed9366>&</span><span>hovered_entity)</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap</span><span>() </span><span style=color:#ed9366>=</span><span> hit</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>;
</span></code></pre><p><strong>After:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Just emit the event, state was already updated in the hover loop
</span></code></pre><h3 id=release-content-migration-guides-dragenter-now-fires-on-drag-starts-md-6-0><code>release-content/migration-guides/dragenter-now-fires-on-drag-starts.md</code> (+6/-0)</h3><p>This new file documents a behavioral change that developers need to be aware of when upgrading.<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span style=color:#abb0b6;background-color:#61676c10;font-weight:700>---
</span><span>title: "DragEnter now fires on drag starts"
</span><span>pull_requests: [21999]
</span><span style=color:#fa6e32;font-weight:700>---
</span><span>
</span><span style=color:#ed9366;background-color:#61676c10>`DragEnter`</span><span> now also fires when a drag starts over an already hovered entity.
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_picking/latest/bevy_picking/ target=_blank>Bevy Picking System Documentation</a> - Official documentation for Bevy’s picking system<li><a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Entity_component_system target=_blank>Entity Component System Pattern</a> - Background on the ECS architecture used by Bevy<li><a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Event-driven_programming target=_blank>Event-Driven Programming</a> - Principles behind Bevy’s event system<li><a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Defensive_programming target=_blank>Defensive Programming Techniques</a> - Programming practices that help prevent crashes like the one fixed in this PR</ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-12/pr_21999.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>