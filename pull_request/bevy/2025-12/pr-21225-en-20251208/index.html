<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #21225 anchor layout example
        
    </title><meta content="#21225 anchor layout example" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-12/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-12-08</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-12/pr-21225-zh-cn-20251208>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=anchor-layout-example>anchor layout example</h2><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: anchor layout example<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/21225<li><strong>Author</strong>: ChristopherBiscardi<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Examples, A-UI, S-Needs-Review<li><strong>Created</strong>: 2025-09-26T09:25:11Z<li><strong>Merged</strong>: 2025-12-08T12:19:16Z<li><strong>Merged By</strong>: mockersf</ul><h2 id=description-translation>Description Translation</h2><p>The PR description remains in English as requested.<h1 id=objective>Objective</h1><p>There was <a rel="noopener nofollow noreferrer" href=https://discord.com/channels/691052431525675048/1264881140007702558/1420909052879175810 target=_blank>some discussion in discord</a> about “anchor layouts”.<p>They are, as far as I can tell, basically absolute positioning.<h2 id=solution>Solution</h2><p>Write an example that shows how to “anchor” elements to the top/left/right/bottom of a box. Also optionally included “centering” using auto margins.<h2 id=testing>Testing</h2><pre style=color:#61676c;background-color:#fafafa><code><span>cargo run --example anchor_positioning
</span></code></pre><p>Moving the window around changes the gray box sizes, while the interior labels are “anchored” to their respective positions, offset from their specific side attachments by 10 pixels<h2 id=showcase>Showcase</h2><img alt="screenshot-2025-09-26-at-02 17 31@2x" height=888 src=https://github.com/user-attachments/assets/c9af868b-c412-4292-802e-076d2c98ca6b width=1562><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The PR addresses a community request for an example demonstrating “anchor layouts” in Bevy’s UI system. Anchor layouts refer to a common UI pattern where elements are positioned relative to the edges of their container, similar to CSS absolute positioning with offsets from specific sides.<p>The developer identified a gap in Bevy’s existing examples: while Bevy’s UI system supports absolute positioning through the <code>PositionType::Absolute</code> setting combined with <code>left</code>, <code>right</code>, <code>top</code>, and <code>bottom</code> properties, there wasn’t a clear example showing how to use these features together. This made it difficult for new users to understand how to implement common UI patterns like tooltips, overlays, or positioned dialogs.<p>The solution approach was straightforward: create a minimal, focused example that demonstrates all combinations of edge anchoring. The example needed to be visually clear, showing each possible combination of anchored edges (top-left, top-center, top-right, middle-left, center, middle-right, bottom-left, bottom-center, bottom-right). The developer chose a 3x3 grid layout to display all nine combinations simultaneously, which makes it easy for users to see how each anchoring configuration behaves.<p>The implementation is clean and educational. The core insight is that anchor layouts in Bevy require two key settings: first, setting <code>position_type: PositionType::Absolute</code> on the positioned element, and second, specifying offsets from one or more edges using the <code>left</code>, <code>right</code>, <code>top</code>, and <code>bottom</code> properties on the <code>Node</code> component. For centering, the example demonstrates using auto margins - when you set <code>margin: UiRect::all(Val::Auto)</code> on an absolutely positioned element, it centers within its parent container.<p>Here’s the key code pattern that makes anchoring work:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span>Node {
</span><span>    display</span><span style=color:#61676ccc>: </span><span>Display</span><span style=color:#ed9366>::</span><span>Block</span><span style=color:#61676ccc>,
</span><span>    padding</span><span style=color:#61676ccc>: </span><span>UiRect</span><span style=color:#ed9366>::</span><span>axes(</span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>5</span><span>)</span><span style=color:#61676ccc>, </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>1</span><span>))</span><span style=color:#61676ccc>,
</span><span>    position_type</span><span style=color:#61676ccc>: </span><span>PositionType</span><span style=color:#ed9366>::</span><span>Absolute</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// This enables absolute positioning
</span><span>    left</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10</span><span>)</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// Anchor 10px from the left edge
</span><span>    top</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10</span><span>)</span><span style=color:#61676ccc>,   </span><span style=color:#abb0b6;font-style:italic>// Anchor 10px from the top edge
</span><span>    </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>}
</span></code></pre><p>The example also shows a clever technique for centering: when you want an element centered horizontally, you can use <code>margin: auto().horizontal()</code>, which sets both left and right margins to <code>Val::Auto</code>. This pushes the element to the center. Similarly, <code>UiRect::vertical(Val::Auto)</code> centers vertically, and <code>UiRect::all(Val::Auto)</code> centers in both dimensions.<p>One important implementation detail is how the example handles the grid layout. The parent container uses CSS Grid layout properties that were recently added to Bevy:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span>Node {
</span><span>    display</span><span style=color:#61676ccc>: </span><span>Display</span><span style=color:#ed9366>::</span><span>Grid</span><span style=color:#61676ccc>,
</span><span>    grid_template_columns</span><span style=color:#61676ccc>: </span><span>RepeatedGridTrack</span><span style=color:#ed9366>::</span><span>fr(</span><span style=color:#ff8f40>3</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>1.</span><span>)</span><span style=color:#61676ccc>,
</span><span>    grid_template_rows</span><span style=color:#61676ccc>: </span><span>RepeatedGridTrack</span><span style=color:#ed9366>::</span><span>fr(</span><span style=color:#ff8f40>3</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>1.</span><span>)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>}
</span></code></pre><p>This creates a 3x3 grid where each cell takes up equal space. Each gray box is placed in one cell using <code>grid_column: GridPlacement::span(1)</code> and <code>grid_row: GridPlacement::span(1)</code>. This grid approach makes the example responsive - when you resize the window, the gray boxes resize proportionally, but the anchored labels maintain their positions relative to their containing gray box.<p>The example is well-structured for educational purposes. It uses a data-driven approach where all nine configurations are defined in an array, then mapped to UI elements:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>let</span><span> rows </span><span style=color:#ed9366>= </span><span>[
</span><span>    (</span><span style=color:#86b300>"left: 10px</span><span style=color:#4cbf99>\n</span><span style=color:#86b300>top: 10px"</span><span style=color:#61676ccc>,</span><span> Node { left</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10</span><span>)</span><span style=color:#61676ccc>,</span><span> top</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10</span><span>)</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>() })</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... 7 more configurations ...
</span><span>    (</span><span style=color:#86b300>"right: 10px</span><span style=color:#4cbf99>\n</span><span style=color:#86b300>bottom: 10px"</span><span style=color:#61676ccc>,</span><span> Node { right</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10</span><span>)</span><span style=color:#61676ccc>,</span><span> bottom</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>10</span><span>)</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>() })</span><span style=color:#61676ccc>,
</span><span>]</span><span style=color:#61676ccc>;
</span></code></pre><p>This makes it easy to see all the possible configurations in one place and understand how each property combination affects positioning.<p>From a technical perspective, this example demonstrates several important Bevy UI concepts:<ol><li>Absolute positioning with <code>PositionType::Absolute</code><li>Edge-based positioning with <code>left</code>, <code>right</code>, <code>top</code>, <code>bottom</code><li>Centering techniques using auto margins<li>CSS Grid layout for container organization<li>Nested UI hierarchies with parent-child relationships<li>Responsive design that works with window resizing</ol><p>The impact of this PR is purely educational - it doesn’t change any functionality in Bevy, but it provides a valuable reference for developers trying to understand how to position UI elements precisely. Examples like this reduce the learning curve for new Bevy users and serve as living documentation for the UI system’s capabilities.<p>One thing to note is that the example uses <code>PositionType::Absolute</code>, which positions elements relative to their nearest positioned ancestor (or the viewport if none exist). In this case, each gray box serves as the positioning context for its anchored label because it’s the immediate parent. This is an important detail that developers need to understand when building more complex UI hierarchies.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Window/Root Node] --> B[Grid Container]
</span><span>    B --> C[Gray Box 1 Top-Left]
</span><span>    B --> D[Gray Box 2 Top-Center]
</span><span>    B --> E[Gray Box 3 Top-Right]
</span><span>    B --> F[Gray Box 4 Middle-Left]
</span><span>    B --> G[Gray Box 5 Center]
</span><span>    B --> H[Gray Box 6 Middle-Right]
</span><span>    B --> I[Gray Box 7 Bottom-Left]
</span><span>    B --> J[Gray Box 8 Bottom-Center]
</span><span>    B --> K[Gray Box 9 Bottom-Right]
</span><span>    
</span><span>    C --> L[Pink Label anchored top-left]
</span><span>    D --> M[Pink Label anchored top-center]
</span><span>    E --> N[Pink Label anchored top-right]
</span><span>    F --> O[Pink Label anchored middle-left]
</span><span>    G --> P[Pink Label anchored center]
</span><span>    H --> Q[Pink Label anchored middle-right]
</span><span>    I --> R[Pink Label anchored bottom-left]
</span><span>    J --> S[Pink Label anchored bottom-center]
</span><span>    K --> T[Pink Label anchored bottom-right]
</span><span>    
</span><span>    style A fill:#f9f,stroke:#333
</span><span>    style B fill:#ccf,stroke:#333
</span><span>    style C fill:#ddd,stroke:#333
</span><span>    style D fill:#ddd,stroke:#333
</span><span>    style E fill:#ddd,stroke:#333
</span><span>    style F fill:#ddd,stroke:#333
</span><span>    style G fill:#ddd,stroke:#333
</span><span>    style H fill:#ddd,stroke:#333
</span><span>    style I fill:#ddd,stroke:#333
</span><span>    style J fill:#ddd,stroke:#333
</span><span>    style K fill:#ddd,stroke:#333
</span><span>    style L fill:#fcc,stroke:#333
</span><span>    style M fill:#fcc,stroke:#333
</span><span>    style N fill:#fcc,stroke:#333
</span><span>    style O fill:#fcc,stroke:#333
</span><span>    style P fill:#fcc,stroke:#333
</span><span>    style Q fill:#fcc,stroke:#333
</span><span>    style R fill:#fcc,stroke:#333
</span><span>    style S fill:#fcc,stroke:#333
</span><span>    style T fill:#fcc,stroke:#333
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><ol><li><p><strong><code>examples/ui/anchor_layout.rs</code></strong> (+146/-0)</p> <ul><li>This is a completely new file that contains the anchor layout example<li>The example demonstrates 9 different anchor position combinations in a 3x3 grid<li>Each combination shows text labels positioned using <code>left</code>, <code>right</code>, <code>top</code>, <code>bottom</code> properties with <code>PositionType::Absolute</code></ul> <p>Key code snippet showing the absolute positioning setup:</p> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span>Node {
</span><span>    display</span><span style=color:#61676ccc>: </span><span>Display</span><span style=color:#ed9366>::</span><span>Block</span><span style=color:#61676ccc>,
</span><span>    padding</span><span style=color:#61676ccc>: </span><span>UiRect</span><span style=color:#ed9366>::</span><span>axes(</span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>5</span><span>)</span><span style=color:#61676ccc>, </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>1</span><span>))</span><span style=color:#61676ccc>,
</span><span>    position_type</span><span style=color:#61676ccc>: </span><span>PositionType</span><span style=color:#ed9366>::</span><span>Absolute</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// Enables absolute positioning
</span><span>    </span><span style=color:#ed9366>..</span><span>node  </span><span style=color:#abb0b6;font-style:italic>// Contains left/right/top/bottom values from the rows array
</span><span>}
</span></code></pre><li><p><strong><code>Cargo.toml</code></strong> (+11/-0)</p> <ul><li>Added the new example to Bevy’s example configuration<li>Makes the example runnable with <code>cargo run --example anchor_layout</code><li>Sets up proper documentation scraping for the example</ul> <pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span>[[</span><span style=color:#399ee6>example</span><span>]]
</span><span style=color:#399ee6>name </span><span>= </span><span style=color:#86b300>"anchor_layout"
</span><span style=color:#399ee6>path </span><span>= </span><span style=color:#86b300>"examples/ui/anchor_layout.rs"
</span><span style=color:#399ee6>doc-scrape-examples </span><span>= </span><span style=color:#ff8f40>true
</span><span>
</span><span>[</span><span style=color:#399ee6>package</span><span style=color:#61676ccc>.</span><span style=color:#399ee6>metadata</span><span style=color:#61676ccc>.</span><span style=color:#399ee6>example</span><span style=color:#61676ccc>.</span><span style=color:#399ee6>anchor_layout</span><span>]
</span><span style=color:#399ee6>name </span><span>= </span><span style=color:#86b300>"Anchor Layout"
</span><span style=color:#399ee6>description </span><span>= </span><span style=color:#86b300>"Shows an 'anchor layout' style of ui layout"
</span><span style=color:#399ee6>category </span><span>= </span><span style=color:#86b300>"UI (User Interface)"
</span><span style=color:#399ee6>wasm </span><span>= </span><span style=color:#ff8f40>true
</span></code></pre><li><p><strong><code>examples/README.md</code></strong> (+1/-0)</p> <ul><li>Added a single line to the documentation to list the new example<li>Ensures the example appears in the project’s example documentation</ul> <pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span>[Anchor Layout](</span><span style=color:#4cbf99;font-style:italic;text-decoration:underline>../examples/ui/anchor_layout.rs</span><span>) | Shows an 'anchor layout' style of ui layout
</span></code></pre></ol><h2 id=further-reading>Further Reading</h2><ol><li><strong>Bevy UI Documentation</strong>: The official Bevy UI documentation provides comprehensive information about the UI system’s components and layout algorithms<li><strong>CSS Absolute Positioning</strong>: Since Bevy’s UI system is inspired by CSS, understanding CSS absolute positioning concepts (like <code>position: absolute</code>, <code>top</code>, <code>left</code>, etc.) can help understand the patterns shown in this example<li><strong>Bevy UI Examples</strong>: Other UI examples in the Bevy repository demonstrate different aspects of the UI system, such as <code>flex_layout</code>, <code>grid_layout</code>, and <code>overflow</code><li><strong>CSS Grid Layout</strong>: The example uses CSS Grid for the container layout, which is worth studying separately to understand modern layout techniques<li><strong>Bevy Discord Community</strong>: The PR originated from Discord discussion, showing that the Bevy community is an active resource for learning and sharing UI patterns</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-12/pr_21225.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>