<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22009 remove unnecessary clone from `load_font_to_fontdb`
        
    </title><meta content="#22009 remove unnecessary clone from `load_font_to_fontdb`" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-12/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-12-02</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-12/pr-22009-zh-cn-20251202>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=remove-unnecessary-clone-from-load-font-to-fontdb>remove unnecessary clone from <code>load_font_to_fontdb</code></h2><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: remove unnecessary clone from <code>load_font_to_fontdb</code><li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22009<li><strong>Author</strong>: ickshonpe<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, C-Performance, C-Code-Quality, A-Text<li><strong>Created</strong>: 2025-12-02T16:40:45Z<li><strong>Merged</strong>: 2025-12-02T17:28:27Z<li><strong>Merged By</strong>: james7132</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p><code>load_font_to_fontdb</code> clones the font handle needlessly.<h2 id=solution>Solution</h2><p>Just call id() on it.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a simple but impactful performance optimization in Bevy’s text rendering system. The issue was found in the <code>load_font_to_fontdb</code> function within the text pipeline module, which handles font loading and caching for text rendering.<p>The problem was straightforward: the function was unnecessarily cloning a <code>Handle&LTFont></code> object when it only needed the underlying <code>AssetId&LTFont></code> for hash map lookup operations. In Bevy’s asset system, <code>Handle&LTT></code> is a reference-counted handle to an asset, and cloning it involves atomic reference counting operations that carry overhead.<p>Here’s the issue in the original code:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>let</span><span> font_handle </span><span style=color:#ed9366>=</span><span> text_font</span><span style=color:#ed9366>.</span><span>font</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>;  </span><span style=color:#abb0b6;font-style:italic>// Unnecessary clone
</span><span style=color:#fa6e32>let </span><span>(face_id</span><span style=color:#61676ccc>,</span><span> family_name) </span><span style=color:#ed9366>=</span><span> map_handle_to_font_id
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>entry</span><span>(font_handle</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>())  </span><span style=color:#abb0b6;font-style:italic>// We only need the id()
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>or_insert_with</span><span>(|| {
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// Loading logic
</span><span>    })</span><span style=color:#61676ccc>;
</span></code></pre><p>The developer recognized that the clone operation was redundant because:<ol><li>The code immediately calls <code>.id()</code> on the cloned handle<li>The hash map key is <code>AssetId&LTFont></code>, not <code>Handle&LTFont></code><li>The original <code>text_font.font</code> handle remains unchanged and could be used directly</ol><p>The solution was to eliminate the intermediate clone and directly extract the <code>AssetId</code>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>let</span><span> font_id </span><span style=color:#ed9366>=</span><span> text_font</span><span style=color:#ed9366>.</span><span>font</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()</span><span style=color:#61676ccc>;  </span><span style=color:#abb0b6;font-style:italic>// No clone needed
</span><span style=color:#fa6e32>let </span><span>(face_id</span><span style=color:#61676ccc>,</span><span> family_name) </span><span style=color:#ed9366>=</span><span> map_handle_to_font_id</span><span style=color:#ed9366>.</span><span style=color:#f07171>entry</span><span>(font_id)</span><span style=color:#ed9366>.</span><span style=color:#f07171>or_insert_with</span><span>(|| {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Loading logic now uses font_id directly
</span><span>})</span><span style=color:#61676ccc>;
</span></code></pre><p>This change demonstrates several important engineering principles. First, it shows attention to micro-optimizations in performance-critical paths - text rendering is a common operation in games and applications, and even small overheads can accumulate. Second, it exemplifies the importance of understanding the underlying data structures: by recognizing that the hash map key was <code>AssetId&LTFont></code> rather than <code>Handle&LTFont></code>, the developer could avoid unnecessary work.<p>The implementation change is minimal but effective. The function now directly accesses the <code>AssetId</code> from the original handle, bypassing the atomic reference counting operations involved in cloning. This reduces memory allocation and atomic operations in a function that may be called frequently during text rendering operations.<p>From an architectural perspective, this change reinforces the pattern of using <code>AssetId</code> as the canonical identifier for assets in cache and lookup structures, rather than the heavier <code>Handle</code> wrapper. This is consistent with Bevy’s design philosophy where <code>AssetId</code> serves as the lightweight, copyable identifier for assets, while <code>Handle</code> manages ownership and lifecycle.<p>The impact of this change is a direct performance improvement in text rendering. While individual atomic operations might seem negligible, they can add up in games with complex UI systems or dynamic text elements. The change also improves code clarity by removing unnecessary indirection - the new code more directly expresses the intent of getting an asset ID for cache lookup.<p>This PR is a good example of how small, focused optimizations can improve both performance and code quality without changing external behavior. It requires no API changes and maintains backward compatibility while eliminating unnecessary overhead.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[load_font_to_fontdb Function] --> B[Original Approach]
</span><span>    A --> C[Optimized Approach]
</span><span>    
</span><span>    B --> D[Clone Handle&LTFont>]
</span><span>    D --> E[Get AssetId from clone]
</span><span>    E --> F[HashMap lookup with AssetId]
</span><span>    
</span><span>    C --> G[Directly get AssetId from original handle]
</span><span>    G --> H[HashMap lookup with AssetId]
</span><span>    
</span><span>    style B stroke:#f66
</span><span>    style D stroke:#f66
</span><span>    style C stroke:#6f6
</span><span>    style G stroke:#6f6
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><ul><li><code>crates/bevy_text/src/pipeline.rs</code> (+17/-19)</ul><p>The changes are focused on a single function in the text pipeline module:<p><strong>File</strong>: <code>crates/bevy_text/src/pipeline.rs</code><p><strong>Before</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>load_font_to_fontdb</span><span>(
</span><span>    </span><span style=color:#ff8f40>font_system</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> FontSystem,
</span><span>    </span><span style=color:#ff8f40>text_font</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>TextFont,
</span><span>    </span><span style=color:#ff8f40>map_handle_to_font_id</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>HashMap&LTAssetId&LTFont>, (cosmic_text</span><span style=color:#ed9366>::</span><span>fontdb</span><span style=color:#ed9366>::</span><span>ID, Arc<</span><span style=color:#fa6e32>str</span><span>>)>,
</span><span>    </span><span style=color:#ff8f40>fonts</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Assets&LTFont>,
</span><span>) </span><span style=color:#61676ccc>-></span><span> FontFaceInfo {
</span><span>    </span><span style=color:#fa6e32>let</span><span> font_handle </span><span style=color:#ed9366>=</span><span> text_font</span><span style=color:#ed9366>.</span><span>font</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>;  </span><span style=color:#abb0b6;font-style:italic>// Unnecessary clone
</span><span>    </span><span style=color:#fa6e32>let </span><span>(face_id</span><span style=color:#61676ccc>,</span><span> family_name) </span><span style=color:#ed9366>=</span><span> map_handle_to_font_id
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>entry</span><span>(font_handle</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>())
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>or_insert_with</span><span>(|| {
</span><span>            </span><span style=color:#fa6e32>let</span><span> font </span><span style=color:#ed9366>=</span><span> fonts</span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(font_handle</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>())</span><span style=color:#ed9366>.</span><span style=color:#f07171>expect</span><span>(
</span><span>                </span><span style=color:#86b300>"Tried getting a font that was not available, probably due to not being loaded yet"</span><span style=color:#61676ccc>,
</span><span>            )</span><span style=color:#61676ccc>;
</span><span>            </span><span style=color:#fa6e32>let</span><span> data </span><span style=color:#ed9366>= </span><span>Arc</span><span style=color:#ed9366>::</span><span>clone(</span><span style=color:#ed9366>&</span><span>font</span><span style=color:#ed9366>.</span><span>data)</span><span style=color:#61676ccc>;
</span><span>            </span><span style=color:#fa6e32>let</span><span> ids </span><span style=color:#ed9366>=</span><span> font_system
</span><span>                </span><span style=color:#ed9366>.</span><span style=color:#f07171>db_mut</span><span>()
</span><span>                </span><span style=color:#ed9366>.</span><span style=color:#f07171>load_font_source</span><span>(cosmic_text</span><span style=color:#ed9366>::</span><span>fontdb</span><span style=color:#ed9366>::</span><span>Source</span><span style=color:#ed9366>::</span><span>Binary(data))</span><span style=color:#61676ccc>;
</span><span>
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// TODO: it is assumed this is the right font face
</span><span>            </span><span style=color:#fa6e32>let</span><span> face_id </span><span style=color:#ed9366>= *</span><span>ids</span><span style=color:#ed9366>.</span><span style=color:#f07171>last</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap</span><span>()</span><span style=color:#61676ccc>;
</span><span>            </span><span style=color:#fa6e32>let</span><span> face </span><span style=color:#ed9366>=</span><span> font_system</span><span style=color:#ed9366>.</span><span style=color:#f07171>db</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>face</span><span>(face_id)</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap</span><span>()</span><span style=color:#61676ccc>;
</span><span>
</span><span>            </span><span style=color:#fa6e32>let</span><span> family_name </span><span style=color:#ed9366>= </span><span>Arc</span><span style=color:#ed9366>::</span><span>from(face</span><span style=color:#ed9366>.</span><span>families[</span><span style=color:#ff8f40>0</span><span>]</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>0.</span><span style=color:#f07171>as_str</span><span>())</span><span style=color:#61676ccc>;
</span><span>            (face_id</span><span style=color:#61676ccc>,</span><span> family_name)
</span><span>        })</span><span style=color:#61676ccc>;
</span><span>    
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Rest of function...
</span><span>}
</span></code></pre><p><strong>After</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>load_font_to_fontdb</span><span>(
</span><span>    </span><span style=color:#ff8f40>font_system</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> FontSystem,
</span><span>    </span><span style=color:#ff8f40>text_font</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>TextFont,
</span><span>    </span><span style=color:#ff8f40>map_handle_to_font_id</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>HashMap&LTAssetId&LTFont>, (cosmic_text</span><span style=color:#ed9366>::</span><span>fontdb</span><span style=color:#ed9366>::</span><span>ID, Arc<</span><span style=color:#fa6e32>str</span><span>>)>,
</span><span>    </span><span style=color:#ff8f40>fonts</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Assets&LTFont>,
</span><span>) </span><span style=color:#61676ccc>-></span><span> FontFaceInfo {
</span><span>    </span><span style=color:#fa6e32>let</span><span> font_id </span><span style=color:#ed9366>=</span><span> text_font</span><span style=color:#ed9366>.</span><span>font</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()</span><span style=color:#61676ccc>;  </span><span style=color:#abb0b6;font-style:italic>// Direct ID extraction
</span><span>    </span><span style=color:#fa6e32>let </span><span>(face_id</span><span style=color:#61676ccc>,</span><span> family_name) </span><span style=color:#ed9366>=</span><span> map_handle_to_font_id</span><span style=color:#ed9366>.</span><span style=color:#f07171>entry</span><span>(font_id)</span><span style=color:#ed9366>.</span><span style=color:#f07171>or_insert_with</span><span>(|| {
</span><span>        </span><span style=color:#fa6e32>let</span><span> font </span><span style=color:#ed9366>=</span><span> fonts</span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(font_id)</span><span style=color:#ed9366>.</span><span style=color:#f07171>expect</span><span>(
</span><span>            </span><span style=color:#86b300>"Tried getting a font that was not available, probably due to not being loaded yet"</span><span style=color:#61676ccc>,
</span><span>        )</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#fa6e32>let</span><span> data </span><span style=color:#ed9366>= </span><span>Arc</span><span style=color:#ed9366>::</span><span>clone(</span><span style=color:#ed9366>&</span><span>font</span><span style=color:#ed9366>.</span><span>data)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#fa6e32>let</span><span> ids </span><span style=color:#ed9366>=</span><span> font_system
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>db_mut</span><span>()
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>load_font_source</span><span>(cosmic_text</span><span style=color:#ed9366>::</span><span>fontdb</span><span style=color:#ed9366>::</span><span>Source</span><span style=color:#ed9366>::</span><span>Binary(data))</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// TODO: it is assumed this is the right font face
</span><span>        </span><span style=color:#fa6e32>let</span><span> face_id </span><span style=color:#ed9366>= *</span><span>ids</span><span style=color:#ed9366>.</span><span style=color:#f07171>last</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap</span><span>()</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#fa6e32>let</span><span> face </span><span style=color:#ed9366>=</span><span> font_system</span><span style=color:#ed9366>.</span><span style=color:#f07171>db</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>face</span><span>(face_id)</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap</span><span>()</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>let</span><span> family_name </span><span style=color:#ed9366>= </span><span>Arc</span><span style=color:#ed9366>::</span><span>from(face</span><span style=color:#ed9366>.</span><span>families[</span><span style=color:#ff8f40>0</span><span>]</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>0.</span><span style=color:#f07171>as_str</span><span>())</span><span style=color:#61676ccc>;
</span><span>        (face_id</span><span style=color:#61676ccc>,</span><span> family_name)
</span><span>    })</span><span style=color:#61676ccc>;
</span><span>    
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Rest of function remains the same...
</span><span>}
</span></code></pre><p>The key changes are:<ol><li>Removed the unnecessary <code>text_font.font.clone()</code> call<li>Directly extract <code>font_id</code> using <code>text_font.font.id()</code><li>Updated all subsequent references to use <code>font_id</code> instead of <code>font_handle.id()</code><li>The function’s logic and behavior remain identical, only the implementation is optimized</ol><h2 id=further-reading>Further Reading</h2><p>For more information about the concepts and patterns in this PR:<ol><li><strong>Bevy Asset System</strong>: The official Bevy documentation on assets and handles: https://bevyengine.org/learn/book/features/assets/<li><strong>Rust Atomic Operations</strong>: Understanding reference counting and atomic operations in Rust: https://doc.rust-lang.org/std/sync/atomic/<li><strong>Performance Optimization Patterns</strong>: Common micro-optimization patterns in game engines<li><strong>Cosmic Text</strong>: The text rendering library used by Bevy: https://github.com/pop-os/cosmic-text<li><strong>Bevy Text Rendering</strong>: Documentation on Bevy’s text rendering system and pipeline architecture</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-12/pr_22009.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>