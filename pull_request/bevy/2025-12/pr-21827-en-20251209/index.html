<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #21827 Add vertical slider support to bevy_ui_widgets slider
        
    </title><meta content="#21827 Add vertical slider support to bevy_ui_widgets slider" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-12/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-12-09</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-12/pr-21827-zh-cn-20251209>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><p>Add vertical slider support to bevy_ui_widgets slider<h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Add vertical slider support to bevy_ui_widgets slider<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/21827<li><strong>Author</strong>: DuckyBlender<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Feature, A-UI, S-Ready-For-Final-Review, X-Uncontroversial, D-Straightforward<li><strong>Created</strong>: 2025-11-13T15:37:03Z<li><strong>Merged</strong>: 2025-12-09T05:40:08Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description>Description</h2><h1 id=objective>Objective</h1><ul><li>Fixes the issue of vertical sliders not being functional. Previously, when creating a vertical slider, the slider drag behavior was still horizontal, meaning dragging left/right would change the value instead of dragging up/down. Additionally, clicking on the slider track was offset and didn’t correctly map to the clicked position.</ul><h2 id=solution>Solution</h2><p>The slider widget now automatically detects its orientation based on the node’s dimensions (<code>height > width</code> for vertical, otherwise horizontal) and adjusts its interaction behavior accordingly:<ol><li><p><strong>Orientation Detection</strong>: Added automatic detection of slider orientation by comparing <code>node.size().y</code> to <code>node.size().x</code> in both <code>slider_on_pointer_down</code> and <code>slider_on_drag</code> functions.</p><li><p><strong>Drag Direction Fix</strong>:</p> <ul><li>For vertical sliders, the drag calculation now uses the Y-axis (<code>distance.y</code>) instead of X-axis<li>The Y coordinate is properly inverted (since screen Y increases downward) to match expected behavior (dragging up increases value)<li>Thumb size calculation uses <code>thumb.size().y</code> for vertical sliders instead of always using <code>thumb.size().x</code></ul><li><p><strong>Click Position Fix</strong>:</p> <ul><li>Fixed coordinate conversion from Bevy’s center-origin coordinate system to top/left-origin coordinates<li>For vertical sliders: converts <code>local_pos.y</code> from <code>[-height/2, +height/2]</code> to <code>[0, height]</code> before calculating the slider value<li>Accounts for thumb size offset to center the calculation properly<li>Inverts the Y coordinate for vertical sliders since Y increases downward</ul><li><p><strong>Track Size Calculation</strong>: Uses <code>node.size().y - thumb_size</code> for vertical sliders and <code>node.size().x - thumb_size</code> for horizontal sliders when calculating the available track space.</p></ol><p>The changes are backward compatible - horizontal sliders continue to work exactly as before, and the orientation detection is transparent to users of the API.<h2 id=testing>Testing</h2><ul><li><p><strong>Manual Testing</strong>: Created test application with both vertical and horizontal sliders to verify:</p> <ul><li>Vertical sliders respond correctly to vertical drag movements (up = increase, down = decrease)<li>Horizontal sliders continue to work correctly with horizontal drag movements<li>Clicking anywhere on the slider track correctly snaps to that position for both orientations<li>Thumb positioning updates correctly during drag operations<li>Multiple sliders can coexist without interfering with each other</ul><li><p><strong>Edge Cases Tested</strong>:</p> <ul><li>Clicking at the very top/bottom of vertical sliders<li>Clicking at the very left/right of horizontal sliders<li>Dragging from one extreme to the other<li>Rapid clicking and dragging interactions</ul></ul><p><strong>Areas that may need more testing</strong>:<ul><li>Sliders with non-standard aspect ratios (very wide vertical sliders or very tall horizontal sliders)<li>Sliders with custom transforms/rotations applied<li>Sliders in nested UI hierarchies with complex transforms</ul><p><strong>How reviewers can test</strong>:<ol><li>Create a vertical slider (height > width) and verify: <ul><li>Dragging up increases the value<li>Dragging down decreases the value<li>Clicking anywhere on the track snaps to that exact position</ul><li>Create a horizontal slider (width > height) and verify it still works as before<li>Test with multiple sliders of both orientations simultaneously</ol><p><strong>Platforms tested</strong>:<ul><li>macOS (Apple Silicon)</ul><h2 id=showcase>Showcase</h2><h3 id=before>Before</h3><ul><li>Vertical sliders were unusable - dragging would move horizontally instead of vertically<li>Clicking on vertical slider tracks was offset, with clicks near the bottom snapping to the middle instead</ul><p>https://github.com/user-attachments/assets/9bda83e7-f46b-4626-9df3-a558526a8ab2<h3 id=after>After</h3><ul><li>Vertical sliders work correctly with intuitive up/down drag behavior<li>Clicking anywhere on the slider track accurately snaps to the clicked position<li>Both vertical and horizontal sliders work seamlessly together</ul><p>https://github.com/user-attachments/assets/cca24288-4cbc-4ceb-828f-9ce7a735ade0<h3 id=code-example>Code Example</h3><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Vertical slider - now works correctly!
</span><span>commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>    Node {
</span><span>        width</span><span style=color:#61676ccc>: </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>12.0</span><span>)</span><span style=color:#61676ccc>,
</span><span>        height</span><span style=color:#61676ccc>: </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>300.0</span><span>)</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// height > width = vertical
</span><span>        </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>    }</span><span style=color:#61676ccc>,
</span><span>    Slider</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>,
</span><span>    SliderValue(</span><span style=color:#ff8f40>50.0</span><span>)</span><span style=color:#61676ccc>,
</span><span>    SliderRange</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#ff8f40>0.0</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>100.0</span><span>)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... thumb and track children
</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Horizontal slider - continues to work as before
</span><span>commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>    Node {
</span><span>        width</span><span style=color:#61676ccc>: </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>300.0</span><span>)</span><span style=color:#61676ccc>,
</span><span>        height</span><span style=color:#61676ccc>: </span><span>Val</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>12.0</span><span>)</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// width > height = horizontal
</span><span>        </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>    }</span><span style=color:#61676ccc>,
</span><span>    Slider</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>,
</span><span>    SliderValue(</span><span style=color:#ff8f40>50.0</span><span>)</span><span style=color:#61676ccc>,
</span><span>    SliderRange</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#ff8f40>0.0</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>100.0</span><span>)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... thumb and track children
</span><span>))</span><span style=color:#61676ccc>;
</span></code></pre><p>The orientation is automatically detected based on the node dimensions - no API changes required!<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The Bevy UI slider widget had a fundamental limitation: it only worked horizontally. When developers tried to create vertical sliders by making the container taller than wide, the slider’s interaction logic would incorrectly interpret vertical movements as horizontal ones, making vertical sliders unusable. This PR fixes that by implementing automatic orientation detection and adjusting the slider’s interaction logic accordingly.<p>The problem was straightforward: the original slider implementation assumed all sliders were horizontal. The drag calculation used only the X-axis distance, and the click position calculation assumed a left-to-right coordinate system. For vertical sliders, this meant dragging left/right would change the value (incorrectly), and clicking on the track would map to the wrong position due to coordinate system mismatches.<p>The solution approach was to detect orientation based on the node’s aspect ratio. If the node’s height is greater than its width, the slider is treated as vertical; otherwise, it’s horizontal. This heuristic is simple, intuitive, and requires no API changes - developers can create vertical sliders simply by making their containers taller than wide.<p>The implementation modifies two key functions in the slider system: <code>slider_on_pointer_down</code> (handles track clicks) and <code>slider_on_drag</code> (handles thumb dragging). In both functions, we first determine the orientation:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>let</span><span> is_vertical </span><span style=color:#ed9366>=</span><span> node</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>y </span><span style=color:#ed9366>></span><span> node</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>x</span><span style=color:#61676ccc>;
</span></code></pre><p>For drag calculations, we now use the appropriate axis based on orientation:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>let</span><span> drag_distance </span><span style=color:#ed9366>= </span><span style=color:#fa6e32>if</span><span> is_vertical { distance</span><span style=color:#ed9366>.</span><span>y } </span><span style=color:#fa6e32>else </span><span>{ distance</span><span style=color:#ed9366>.</span><span>x }</span><span style=color:#61676ccc>;
</span></code></pre><p>This is important because screen coordinates in Bevy (and most graphics systems) have Y increasing downward, so for vertical sliders, dragging up (negative Y) should increase the value, which requires inverting the Y coordinate.<p>The track click calculation required more substantial changes. For horizontal sliders, the original code converted from Bevy’s center-origin coordinate system (where (0,0) is at the center of the node) to a left-origin system (where 0 is at the left edge). For vertical sliders, we needed to do a similar conversion but for the Y-axis, and also invert the direction since screen Y increases downward:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>if</span><span> is_vertical {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// For vertical sliders: bottom-to-top (0 at bottom, max at top)
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// local_pos.y ranges from -height/2 (top) to +height/2 (bottom)
</span><span>    </span><span style=color:#fa6e32>let</span><span> y_from_bottom </span><span style=color:#ed9366>= </span><span>(node</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>y </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>2.0</span><span>) </span><span style=color:#ed9366>-</span><span> local_pos</span><span style=color:#ed9366>.</span><span>y</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let</span><span> adjusted_y </span><span style=color:#ed9366>=</span><span> y_from_bottom </span><span style=color:#ed9366>-</span><span> thumb_size </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>2.0</span><span style=color:#61676ccc>;
</span><span>    adjusted_y </span><span style=color:#ed9366>*</span><span> range</span><span style=color:#ed9366>.</span><span style=color:#f07171>span</span><span>() </span><span style=color:#ed9366>/</span><span> track_size </span><span style=color:#ed9366>+</span><span> range</span><span style=color:#ed9366>.</span><span style=color:#f07171>start</span><span>()
</span><span>} </span><span style=color:#fa6e32>else </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// For horizontal sliders: convert from center-origin to left-origin
</span><span>    </span><span style=color:#fa6e32>let</span><span> x_from_left </span><span style=color:#ed9366>=</span><span> local_pos</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>+</span><span> node</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>2.0</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let</span><span> adjusted_x </span><span style=color:#ed9366>=</span><span> x_from_left </span><span style=color:#ed9366>-</span><span> thumb_size </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>2.0</span><span style=color:#61676ccc>;
</span><span>    adjusted_x </span><span style=color:#ed9366>*</span><span> range</span><span style=color:#ed9366>.</span><span style=color:#f07171>span</span><span>() </span><span style=color:#ed9366>/</span><span> track_size </span><span style=color:#ed9366>+</span><span> range</span><span style=color:#ed9366>.</span><span style=color:#f07171>start</span><span>()
</span><span>}
</span></code></pre><p>The thumb size calculation also needed to consider orientation, since a thumb might have different dimensions for vertical vs horizontal sliders:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#ed9366>.</span><span style=color:#f07171>find_map</span><span>(|</span><span style=color:#ff8f40>child_id</span><span>| {
</span><span>    q_thumb</span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(child_id)</span><span style=color:#ed9366>.</span><span style=color:#f07171>ok</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(|</span><span style=color:#ff8f40>thumb</span><span>| {
</span><span>        </span><span style=color:#fa6e32>if</span><span> is_vertical {
</span><span>            thumb</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>y
</span><span>        } </span><span style=color:#fa6e32>else </span><span>{
</span><span>            thumb</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>x
</span><span>        }
</span><span>    })
</span><span>})
</span></code></pre><p>One subtle but important change was in the <code>slider_on_drag</code> function: the query no longer includes <code>SliderValue</code> as a component to fetch. This is because the value is computed from the drag offset and doesn’t need to be read from the component. Instead, a <code>ValueChange</code> event is always triggered with the new value, which allows the value to be updated elsewhere in the system.<p>The PR also adds a comprehensive example (<code>vertical_slider.rs</code>) that demonstrates both vertical and horizontal sliders working together. This example includes value labels that update in real-time, visual feedback for hover and drag states, and proper styling for both orientations.<p>From an architectural perspective, this implementation maintains backward compatibility while adding new functionality. Horizontal sliders continue to work exactly as before, and the orientation detection happens automatically without requiring developers to specify it. The changes are localized to the slider interaction logic and don’t affect the broader UI system.<p>However, there are some limitations to the current approach. The orientation detection based on aspect ratio might not work correctly for sliders with non-standard transforms (like rotations) or in complex UI hierarchies. Also, the heuristic assumes that a taller-than-wide slider should be vertical, which might not always be the desired behavior for custom slider designs.<p>The impact of this PR is significant for Bevy’s UI capabilities. Vertical sliders are a common UI component in applications ranging from audio editors to game settings menus. By fixing this issue, Bevy now provides a complete slider widget that works in both orientations, making it more suitable for a wider range of applications.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Slider Interaction System] --> B{Orientation Detection}
</span><span>    B -->|Height > Width| C[Vertical Slider Logic]
</span><span>    B -->|Width > Height| D[Horizontal Slider Logic]
</span><span>    
</span><span>    C --> E[Track Click: Y-axis calculation]
</span><span>    C --> F[Drag: distance.y]
</span><span>    C --> G[Thumb Size: thumb.size().y]
</span><span>    
</span><span>    D --> H[Track Click: X-axis calculation]
</span><span>    D --> I[Drag: distance.x]
</span><span>    D --> J[Thumb Size: thumb.size().x]
</span><span>    
</span><span>    E --> K[ValueChange Event]
</span><span>    F --> K
</span><span>    H --> K
</span><span>    I --> K
</span><span>    
</span><span>    K --> L[UI Update]
</span><span>    L --> M[Thumb Position Update]
</span><span>    L --> N[Value Label Update]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-ui-widgets-src-slider-rs-60-17><code>crates/bevy_ui_widgets/src/slider.rs</code> (+60/-17)</h3><p>This is the core file that implements the slider widget’s interaction logic. The changes add orientation detection and adjust calculations for vertical sliders.<p><strong>Key modifications:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before (in slider_on_pointer_down):
</span><span style=color:#fa6e32>let</span><span> thumb_size </span><span style=color:#ed9366>=</span><span> q_children
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>iter_descendants</span><span>(press</span><span style=color:#ed9366>.</span><span>entity)
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>find_map</span><span>(|</span><span style=color:#ff8f40>child_id</span><span>| q_thumb</span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(child_id)</span><span style=color:#ed9366>.</span><span style=color:#f07171>ok</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(|</span><span style=color:#ff8f40>thumb</span><span>| thumb</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>x))
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap_or</span><span>(</span><span style=color:#ff8f40>0.0</span><span>)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>let</span><span> track_width </span><span style=color:#ed9366>=</span><span> node</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>-</span><span> thumb_size</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>let</span><span> click_val </span><span style=color:#ed9366>= </span><span style=color:#fa6e32>if</span><span> track_width </span><span style=color:#ed9366>> </span><span style=color:#ff8f40>0. </span><span>{
</span><span>    local_pos</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>*</span><span> range</span><span style=color:#ed9366>.</span><span style=color:#f07171>span</span><span>() </span><span style=color:#ed9366>/</span><span> track_width </span><span style=color:#ed9366>+</span><span> range</span><span style=color:#ed9366>.</span><span style=color:#f07171>center</span><span>()
</span><span>} </span><span style=color:#fa6e32>else </span><span>{
</span><span>    </span><span style=color:#ff8f40>0.
</span><span>}</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>// Detect orientation: vertical if height > width
</span><span style=color:#fa6e32>let</span><span> is_vertical </span><span style=color:#ed9366>=</span><span> node</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>y </span><span style=color:#ed9366>></span><span> node</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>x</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>let</span><span> thumb_size </span><span style=color:#ed9366>=</span><span> q_children
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>iter_descendants</span><span>(press</span><span style=color:#ed9366>.</span><span>entity)
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>find_map</span><span>(|</span><span style=color:#ff8f40>child_id</span><span>| {
</span><span>        q_thumb</span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(child_id)</span><span style=color:#ed9366>.</span><span style=color:#f07171>ok</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(|</span><span style=color:#ff8f40>thumb</span><span>| {
</span><span>            </span><span style=color:#fa6e32>if</span><span> is_vertical {
</span><span>                thumb</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>y
</span><span>            } </span><span style=color:#fa6e32>else </span><span>{
</span><span>                thumb</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>x
</span><span>            }
</span><span>        })
</span><span>    })
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap_or</span><span>(</span><span style=color:#ff8f40>0.0</span><span>)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>let</span><span> track_size </span><span style=color:#ed9366>= </span><span style=color:#fa6e32>if</span><span> is_vertical {
</span><span>    node</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>y </span><span style=color:#ed9366>-</span><span> thumb_size
</span><span>} </span><span style=color:#fa6e32>else </span><span>{
</span><span>    node</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>-</span><span> thumb_size
</span><span>}</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>let</span><span> click_val </span><span style=color:#ed9366>= </span><span style=color:#fa6e32>if</span><span> track_size </span><span style=color:#ed9366>> </span><span style=color:#ff8f40>0. </span><span>{
</span><span>    </span><span style=color:#fa6e32>if</span><span> is_vertical {
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// For vertical sliders: bottom-to-top (0 at bottom, max at top)
</span><span>        </span><span style=color:#fa6e32>let</span><span> y_from_bottom </span><span style=color:#ed9366>= </span><span>(node</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>y </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>2.0</span><span>) </span><span style=color:#ed9366>-</span><span> local_pos</span><span style=color:#ed9366>.</span><span>y</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#fa6e32>let</span><span> adjusted_y </span><span style=color:#ed9366>=</span><span> y_from_bottom </span><span style=color:#ed9366>-</span><span> thumb_size </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>2.0</span><span style=color:#61676ccc>;
</span><span>        adjusted_y </span><span style=color:#ed9366>*</span><span> range</span><span style=color:#ed9366>.</span><span style=color:#f07171>span</span><span>() </span><span style=color:#ed9366>/</span><span> track_size </span><span style=color:#ed9366>+</span><span> range</span><span style=color:#ed9366>.</span><span style=color:#f07171>start</span><span>()
</span><span>    } </span><span style=color:#fa6e32>else </span><span>{
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// For horizontal sliders: convert from center-origin to left-origin
</span><span>        </span><span style=color:#fa6e32>let</span><span> x_from_left </span><span style=color:#ed9366>=</span><span> local_pos</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>+</span><span> node</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>()</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>2.0</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#fa6e32>let</span><span> adjusted_x </span><span style=color:#ed9366>=</span><span> x_from_left </span><span style=color:#ed9366>-</span><span> thumb_size </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>2.0</span><span style=color:#61676ccc>;
</span><span>        adjusted_x </span><span style=color:#ed9366>*</span><span> range</span><span style=color:#ed9366>.</span><span style=color:#f07171>span</span><span>() </span><span style=color:#ed9366>/</span><span> track_size </span><span style=color:#ed9366>+</span><span> range</span><span style=color:#ed9366>.</span><span style=color:#f07171>start</span><span>()
</span><span>    }
</span><span>} </span><span style=color:#fa6e32>else </span><span>{
</span><span>    range</span><span style=color:#ed9366>.</span><span style=color:#f07171>center</span><span>()
</span><span>}</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=examples-ui-vertical-slider-rs-313-0><code>examples/ui/vertical_slider.rs</code> (+313/-0)</h3><p>A new example file demonstrating vertical and horizontal sliders with value labels and visual feedback.<p><strong>Key sections:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Vertical slider bundle
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>vertical_slider</span><span>() </span><span style=color:#61676ccc>-></span><span> impl Bundle {
</span><span>    (
</span><span>        Node {
</span><span>            width</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>12</span><span>)</span><span style=color:#61676ccc>,
</span><span>            height</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>200</span><span>)</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// height > width = vertical
</span><span>            </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>        }</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ... slider components and children
</span><span>    )
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Horizontal slider bundle  
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>horizontal_slider</span><span>() </span><span style=color:#61676ccc>-></span><span> impl Bundle {
</span><span>    (
</span><span>        Node {
</span><span>            height</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>12</span><span>)</span><span style=color:#61676ccc>,
</span><span>            width</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>200</span><span>)</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// width > height = horizontal
</span><span>            </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>        }</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ... slider components and children
</span><span>    )
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Thumb positioning based on orientation
</span><span style=color:#fa6e32>if</span><span> is_vertical {
</span><span>    thumb_node</span><span style=color:#ed9366>.</span><span>bottom </span><span style=color:#ed9366>= </span><span style=color:#f07171>percent</span><span>(position)</span><span style=color:#61676ccc>;
</span><span>} </span><span style=color:#fa6e32>else </span><span>{
</span><span>    thumb_node</span><span style=color:#ed9366>.</span><span>left </span><span style=color:#ed9366>= </span><span style=color:#f07171>percent</span><span>(position)</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><h3 id=cargo-toml-12-0-and-examples-readme-md-1-0><code>Cargo.toml</code> (+12/-0) and <code>examples/README.md</code> (+1/-0)</h3><p>Configuration changes to add the new example to the project and documentation.<h2 id=further-reading>Further Reading</h2><ol><li><p><strong>Bevy UI Coordinates</strong>: Understanding Bevy’s coordinate system (center origin vs top-left origin) is crucial for UI development. The <a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/features/ui/ target=_blank>Bevy UI documentation</a> covers this in detail.</p><li><p><strong>Slider Widget Design Patterns</strong>: For more advanced slider implementations, consider studying how other UI frameworks handle sliders with custom tracks, multiple thumbs (range sliders), and touch interactions.</p><li><p><strong>Coordinate Transformations in Computer Graphics</strong>: The mathematics behind coordinate system transformations (world space, screen space, local space) is fundamental to graphics programming. Resources like <a rel="noopener nofollow noreferrer" href=https://learnopengl.com/Getting-started/Transformations target=_blank>LearnOpenGL’s Transformations chapter</a> provide a good foundation.</p><li><p><strong>Event-Driven Architecture in Bevy</strong>: This PR uses Bevy’s event system (<code>ValueChange</code> event) to communicate value changes. Understanding Bevy’s ECS and event systems is essential for developing complex interactive widgets.</p></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-12/pr_21827.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>