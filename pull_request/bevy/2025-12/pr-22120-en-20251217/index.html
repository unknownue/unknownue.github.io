<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22120 Bump actions/cache from 4 to 5
        
    </title><meta content="#22120 Bump actions/cache from 4 to 5" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-12/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-12-17</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-12/pr-22120-zh-cn-20251217>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Bump actions/cache from 4 to 5<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22120<li><strong>Author</strong>: app/dependabot<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Build-System, C-Dependencies, S-Ready-For-Final-Review<li><strong>Created</strong>: 2025-12-15T06:01:09Z<li><strong>Merged</strong>: 2025-12-17T19:40:07Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p>The PR description is already in English.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR represents a routine but important infrastructure maintenance task. It updates GitHub Actions workflows to use version 5 of the <code>actions/cache</code> action instead of version 4. This is an automated dependency update performed by Dependabot, GitHub’s automated dependency management tool.<p>The primary motivation for this update is to stay current with the latest version of a widely-used caching action. Version 5 introduces a significant runtime change: it requires Node.js 24 and a minimum Actions Runner version of 2.327.1. For teams using self-hosted runners, this would require updating their runners before upgrading. However, for Bevy’s GitHub-hosted runners, this requirement is automatically satisfied by GitHub’s infrastructure.<p>The changelog shows that version 5.0.0 primarily involves upgrading to Node.js 24 runtime. The previous version 4.3.0 had already introduced a rewritten cache backend service (v2) that improved performance and reliability. This backend rewrite was backward compatible but required upgrading before February 1, 2025, when the legacy service would be sunset. By upgrading to version 5, Bevy ensures it remains on a supported version of the cache action.<p>From a technical perspective, the changes are straightforward: update all references to <code>actions/cache/restore@v4</code> and <code>actions/cache/save@v4</code> to use <code>@v5</code> instead. The PR modifies four workflow files that collectively manage Bevy’s CI/CD pipeline. These workflows handle continuous integration, example runs, cache updates, and various validation jobs.<p>The implementation approach is consistent across all files. Each instance follows the same pattern: changing the version specifier from <code>@v4</code> to <code>@v5</code>. No other parameters or configurations need adjustment because the cache action maintains backward compatibility in its API. The cache keys, paths, and restore logic remain unchanged.<p>One technical consideration is that <code>actions/cache@v5</code> runs on Node.js 24, which may have different behavior than previous Node.js versions. However, since this is a widely-used GitHub-maintained action, any breaking changes would be well-documented and likely minimal. The compatibility score shown in the PR description (via the Dependabot badge) indicates high compatibility between versions 4 and 5.<p>The impact of this change is primarily operational: Bevy’s CI/CD pipeline will use the newer, more performant cache service with better reliability. For developers, this should translate to slightly faster CI runs due to improved cache performance. The change also future-proofs the workflow by ensuring compatibility with upcoming GitHub Actions features that may depend on newer runner versions.<p>This type of maintenance is essential for any project using GitHub Actions. Staying current with action versions ensures access to security updates, performance improvements, and bug fixes. Automated tools like Dependabot help reduce the manual maintenance burden while keeping dependencies up-to-date.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[GitHub Actions Workflows] --> B[ci.yml]
</span><span>    A --> C[validation-jobs.yml]
</span><span>    A --> D[example-run.yml]
</span><span>    A --> E[update-caches.yml]
</span><span>    
</span><span>    B --> F[Uses actions/cache@v5]
</span><span>    C --> F
</span><span>    D --> F
</span><span>    E --> F
</span><span>    
</span><span>    F --> G[Cache Operations]
</span><span>    G --> H[Restore]
</span><span>    G --> I[Save]
</span><span>    
</span><span>    H --> J[Faster CI Builds]
</span><span>    I --> J
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=1-github-workflows-ci-yml-11-11>1. <code>.github/workflows/ci.yml</code> (+11/-11)</h3><p>This is Bevy’s main CI workflow. The file contains multiple jobs that build and test the project. Each job that uses cache operations was updated from version 4 to version 5.<p><strong>Key changes:</strong><pre class=language-yaml data-lang=yaml style=color:#61676c;background-color:#fafafa><code class=language-yaml data-lang=yaml><span style=color:#abb0b6;font-style:italic># Multiple instances throughout the file
</span><span style=color:#abb0b6;font-style:italic># Before:
</span><span>- </span><span style=color:#399ee6>uses</span><span style=color:#61676ccc>: </span><span style=color:#86b300>actions/cache/restore@v4
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span>- </span><span style=color:#399ee6>uses</span><span style=color:#61676ccc>: </span><span style=color:#86b300>actions/cache/restore@v5
</span></code></pre><h3 id=2-github-workflows-validation-jobs-yml-5-5>2. <code>.github/workflows/validation-jobs.yml</code> (+5/-5)</h3><p>This workflow handles specialized validation jobs for different platforms (iOS, Android, WebAssembly, etc.). Each job uses cache restoration to speed up builds.<p><strong>Example change:</strong><pre class=language-yaml data-lang=yaml style=color:#61676c;background-color:#fafafa><code class=language-yaml data-lang=yaml><span style=color:#abb0b6;font-style:italic># Before:
</span><span>- </span><span style=color:#399ee6>uses</span><span style=color:#61676ccc>: </span><span style=color:#86b300>actions/cache/restore@v4
</span><span>  </span><span style=color:#399ee6>with</span><span style=color:#61676ccc>:
</span><span>    </span><span style=color:#abb0b6;font-style:italic># key won't match, will rely on restore-keys
</span><span>    </span><span style=color:#399ee6>key</span><span style=color:#61676ccc>: </span><span style=color:#86b300>${{ runner.os }}-stable-aarch64-apple-ios-sim-${{ hashFiles('**/Cargo.toml') }}-
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span>- </span><span style=color:#399ee6>uses</span><span style=color:#61676ccc>: </span><span style=color:#86b300>actions/cache/restore@v5
</span><span>  </span><span style=color:#399ee6>with</span><span style=color:#61676ccc>:
</span><span>    </span><span style=color:#abb0b6;font-style:italic># key won't match, will rely on restore-keys
</span><span>    </span><span style=color:#399ee6>key</span><span style=color:#61676ccc>: </span><span style=color:#86b300>${{ runner.os }}-stable-aarch64-apple-ios-sim-${{ hashFiles('**/Cargo.toml') }}-
</span></code></pre><h3 id=3-github-workflows-example-run-yml-3-3>3. <code>.github/workflows/example-run.yml</code> (+3/-3)</h3><p>This workflow runs Bevy examples to ensure they build and execute correctly. It uses cache operations to avoid rebuilding dependencies.<p><strong>Example change:</strong><pre class=language-yaml data-lang=yaml style=color:#61676c;background-color:#fafafa><code class=language-yaml data-lang=yaml><span style=color:#abb0b6;font-style:italic># Before:
</span><span>- </span><span style=color:#399ee6>uses</span><span style=color:#61676ccc>: </span><span style=color:#86b300>actions/cache/restore@v4
</span><span>  </span><span style=color:#399ee6>with</span><span style=color:#61676ccc>:
</span><span>    </span><span style=color:#abb0b6;font-style:italic># key won't match, will rely on restore-keys
</span><span>    </span><span style=color:#399ee6>key</span><span style=color:#61676ccc>: </span><span style=color:#86b300>${{ runner.os }}-stable--${{ hashFiles('**/Cargo.toml') }}-
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span>- </span><span style=color:#399ee6>uses</span><span style=color:#61676ccc>: </span><span style=color:#86b300>actions/cache/restore@v5
</span><span>  </span><span style=color:#399ee6>with</span><span style=color:#61676ccc>:
</span><span>    </span><span style=color:#abb0b6;font-style:italic># key won't match, will rely on restore-keys
</span><span>    </span><span style=color:#399ee6>key</span><span style=color:#61676ccc>: </span><span style=color:#86b300>${{ runner.os }}-stable--${{ hashFiles('**/Cargo.toml') }}-
</span></code></pre><h3 id=4-github-workflows-update-caches-yml-2-2>4. <code>.github/workflows/update-caches.yml</code> (+2/-2)</h3><p>This workflow updates the caches used by other workflows. It’s unique in that it uses both <code>restore</code> and <code>save</code> operations.<p><strong>Key changes:</strong><pre class=language-yaml data-lang=yaml style=color:#61676c;background-color:#fafafa><code class=language-yaml data-lang=yaml><span style=color:#abb0b6;font-style:italic># Restore operation
</span><span style=color:#abb0b6;font-style:italic># Before:
</span><span>- </span><span style=color:#399ee6>uses</span><span style=color:#61676ccc>: </span><span style=color:#86b300>actions/cache/restore@v4
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span>- </span><span style=color:#399ee6>uses</span><span style=color:#61676ccc>: </span><span style=color:#86b300>actions/cache/restore@v5
</span><span>
</span><span style=color:#abb0b6;font-style:italic># Save operation
</span><span style=color:#abb0b6;font-style:italic># Before:
</span><span>- </span><span style=color:#399ee6>uses</span><span style=color:#61676ccc>: </span><span style=color:#86b300>actions/cache/save@v4
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span>- </span><span style=color:#399ee6>uses</span><span style=color:#61676ccc>: </span><span style=color:#86b300>actions/cache/save@v5
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://docs.github.com/en/actions/using-workflows/caching-dependencies-to-speed-up-workflows target=_blank>GitHub Actions Cache documentation</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/actions/cache target=_blank>actions/cache GitHub repository</a><li><a rel="noopener nofollow noreferrer" href=https://docs.github.com/en/code-security/dependabot/dependabot-version-updates/about-dependabot-version-updates target=_blank>Dependabot documentation for GitHub Actions</a></ul><h1 id=full-code-diff>Full Code Diff</h1><p>The full diff is provided in the original request.</div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-12/pr_22120.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>