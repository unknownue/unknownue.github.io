<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22101 Revert "Support non-sRGB image formats for `RenderTarget::Image`"
        
    </title><meta content='#22101 Revert "Support non-sRGB image formats for `RenderTarget::Image`"' property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-12/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-12-13</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-12/pr-22101-zh-cn-20251213>中文</a></div></div><div class=pr-content><h1 id=title-revert-support-non-srgb-image-formats-for-rendertarget-image>Title: Revert “Support non-sRGB image formats for <code>RenderTarget::Image</code>”</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Revert “Support non-sRGB image formats for <code>RenderTarget::Image</code>”<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22101<li><strong>Author</strong>: beicause<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: None<li><strong>Created</strong>: 2025-12-12T23:29:09Z<li><strong>Merged</strong>: 2025-12-13T00:18:09Z<li><strong>Merged By</strong>: mockersf</ul><h2 id=description-translation>Description Translation</h2><p>Reverts bevyengine/bevy#22031<p>Rationale see https://github.com/bevyengine/bevy/pull/22090<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR represents a strategic rollback of a recent feature that attempted to expand Bevy’s rendering capabilities. The original PR #22031 added support for non-sRGB image formats to <code>RenderTarget::Image</code>, which would have allowed render targets to use formats like <code>Rgba8Unorm</code> and <code>Bgra8Unorm</code> directly instead of being limited to sRGB formats. However, subsequent testing revealed this change introduced significant issues that warranted a revert.<p>The core problem was that while the initial implementation allowed setting non-sRGB formats on render targets, it didn’t properly account for how Bevy’s rendering pipeline expects sRGB color space handling. The graphics pipeline makes assumptions about color space conversions that don’t hold when render targets use non-sRGB formats. This mismatch led to incorrect color rendering and potential performance issues.<p>The solution approach here is straightforward: revert the changes completely and return to the previous stable behavior where render targets use sRGB formats by default. This is a practical engineering decision - when a feature introduces more problems than it solves, and those problems are fundamental to the rendering pipeline’s architecture, rolling back allows the team to reconsider the approach more carefully.<p>Examining the implementation changes shows a systematic reversion. The <code>ManualTextureView</code> struct is modified to store a <code>format</code> field explicitly, and the constructor is renamed to <code>with_default_format</code> to make it clear that it defaults to <code>TextureFormat::bevy_default()</code> (which is an sRGB format). This change reflects a shift from dynamically querying texture formats at runtime to statically tracking them.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// In manual_texture_view.rs
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>ManualTextureView </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>texture_view</span><span style=color:#61676ccc>:</span><span> TextureView,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>size</span><span style=color:#61676ccc>:</span><span> UVec2,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>format</span><span style=color:#61676ccc>:</span><span> TextureFormat,  </span><span style=color:#abb0b6;font-style:italic>// Added field
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>ManualTextureView </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>with_default_format</span><span>(</span><span style=color:#ff8f40>texture_view</span><span style=color:#61676ccc>:</span><span> TextureView, </span><span style=color:#ff8f40>size</span><span style=color:#61676ccc>:</span><span> UVec2) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#fa6e32>Self </span><span>{
</span><span>            texture_view</span><span style=color:#61676ccc>,
</span><span>            size</span><span style=color:#61676ccc>,
</span><span>            format</span><span style=color:#61676ccc>: </span><span>TextureFormat</span><span style=color:#ed9366>::</span><span>bevy_default()</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// Defaults to sRGB
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre><p>The <code>OutputColorAttachment</code> struct also now explicitly stores its format, and the <code>add_srgb_suffix()</code> method is consistently applied when creating attachments. This ensures that all render targets use sRGB color space, maintaining consistency throughout the rendering pipeline.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// In texture_attachment.rs
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>OutputColorAttachment </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>view</span><span style=color:#61676ccc>:</span><span> TextureView,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>format</span><span style=color:#61676ccc>:</span><span> TextureFormat,  </span><span style=color:#abb0b6;font-style:italic>// Added field
</span><span>    is_first_call</span><span style=color:#61676ccc>: </span><span>Arc&LTAtomicBool>,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>OutputColorAttachment </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>view</span><span style=color:#61676ccc>:</span><span> TextureView, </span><span style=color:#ff8f40>format</span><span style=color:#61676ccc>:</span><span> TextureFormat) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#fa6e32>Self </span><span>{
</span><span>            view</span><span style=color:#61676ccc>,
</span><span>            format</span><span style=color:#61676ccc>,
</span><span>            is_first_call</span><span style=color:#61676ccc>: </span><span>Arc</span><span style=color:#ed9366>::</span><span>new(AtomicBool</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#ff8f40>true</span><span>))</span><span style=color:#61676ccc>,
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre><p>In the view preparation logic, the code now explicitly adds sRGB suffixes to formats and sets appropriate view formats for texture creation. The key insight here is that the rendering system needs to know whether a texture should be interpreted as sRGB or linear color space, and the previous implementation didn’t handle this correctly for all cases.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// In view/mod.rs
</span><span>view_formats</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>match</span><span> main_texture_format {
</span><span>    TextureFormat</span><span style=color:#ed9366>::</span><span>Bgra8Unorm </span><span style=color:#ed9366>=> &</span><span>[TextureFormat</span><span style=color:#ed9366>::</span><span>Bgra8UnormSrgb]</span><span style=color:#61676ccc>,
</span><span>    TextureFormat</span><span style=color:#ed9366>::</span><span>Rgba8Unorm </span><span style=color:#ed9366>=> &</span><span>[TextureFormat</span><span style=color:#ed9366>::</span><span>Rgba8UnormSrgb]</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#ed9366>_ => &</span><span>[]</span><span style=color:#61676ccc>,
</span><span>}</span><span style=color:#61676ccc>,
</span></code></pre><p>The technical insight from this revert is that color space handling in graphics APIs is subtle and pervasive. Bevy’s rendering architecture was built around certain assumptions about sRGB color space, and changing those assumptions requires coordinated updates across multiple subsystems, not just isolated format changes.<p>The impact of this revert is that Bevy returns to a stable rendering state where color rendering is predictable and correct. The lesson for future development is that color space changes need comprehensive testing and potentially architectural adjustments, not just surface-level format support.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[RenderTarget Formats] --> B[Color Space Handling]
</span><span>    B --> C{SRGB or Non-SRGB?}
</span><span>    C -->|SRGB| D[Correct Color Rendering]
</span><span>    C -->|Non-SRGB| E[Color Issues]
</span><span>    D --> F[Stable Pipeline]
</span><span>    E --> G[Revert Required]
</span><span>    F --> H[PR #22101: Revert]
</span><span>    G --> H
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-render-src-texture-manual-texture-view-rs-10-3><code>crates/bevy_render/src/texture/manual_texture_view.rs</code> (+10/-3)</h3><p><strong>What changed</strong>: The <code>ManualTextureView</code> struct now explicitly stores a texture format and defaults to sRGB format.<p><strong>Key modifications</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>ManualTextureView </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>texture_view</span><span style=color:#61676ccc>:</span><span> TextureView,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>size</span><span style=color:#61676ccc>:</span><span> UVec2,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>ManualTextureView </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>texture_view</span><span style=color:#61676ccc>:</span><span> TextureView, </span><span style=color:#ff8f40>size</span><span style=color:#61676ccc>:</span><span> UVec2) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#fa6e32>Self </span><span>{ texture_view</span><span style=color:#61676ccc>,</span><span> size }
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>ManualTextureView </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>texture_view</span><span style=color:#61676ccc>:</span><span> TextureView,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>size</span><span style=color:#61676ccc>:</span><span> UVec2,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>format</span><span style=color:#61676ccc>:</span><span> TextureFormat,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>ManualTextureView </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>with_default_format</span><span>(</span><span style=color:#ff8f40>texture_view</span><span style=color:#61676ccc>:</span><span> TextureView, </span><span style=color:#ff8f40>size</span><span style=color:#61676ccc>:</span><span> UVec2) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#fa6e32>Self </span><span>{
</span><span>            texture_view</span><span style=color:#61676ccc>,
</span><span>            size</span><span style=color:#61676ccc>,
</span><span>            format</span><span style=color:#61676ccc>: </span><span>TextureFormat</span><span style=color:#ed9366>::</span><span>bevy_default()</span><span style=color:#61676ccc>,
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre><h3 id=crates-bevy-render-src-view-mod-rs-10-3><code>crates/bevy_render/src/view/mod.rs</code> (+10/-3)</h3><p><strong>What changed</strong>: Updated view preparation to explicitly handle sRGB formats and properly set texture view formats.<p><strong>Key modifications</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>// In prepare_view_targets:
</span><span>view_formats</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>[]</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>// In prepare_view_targets:
</span><span>view_formats</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>match</span><span> main_texture_format {
</span><span>    TextureFormat</span><span style=color:#ed9366>::</span><span>Bgra8Unorm </span><span style=color:#ed9366>=> &</span><span>[TextureFormat</span><span style=color:#ed9366>::</span><span>Bgra8UnormSrgb]</span><span style=color:#61676ccc>,
</span><span>    TextureFormat</span><span style=color:#ed9366>::</span><span>Rgba8Unorm </span><span style=color:#ed9366>=> &</span><span>[TextureFormat</span><span style=color:#ed9366>::</span><span>Rgba8UnormSrgb]</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#ed9366>_ => &</span><span>[]</span><span style=color:#61676ccc>,
</span><span>}</span><span style=color:#61676ccc>,
</span></code></pre><h3 id=crates-bevy-render-src-texture-texture-attachment-rs-4-2><code>crates/bevy_render/src/texture/texture_attachment.rs</code> (+4/-2)</h3><p><strong>What changed</strong>: <code>OutputColorAttachment</code> now stores format explicitly and constructor requires format parameter.<p><strong>Key modifications</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>OutputColorAttachment </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>view</span><span style=color:#61676ccc>:</span><span> TextureView,
</span><span>    is_first_call</span><span style=color:#61676ccc>: </span><span>Arc&LTAtomicBool>,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>OutputColorAttachment </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>view</span><span style=color:#61676ccc>:</span><span> TextureView) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#fa6e32>Self </span><span>{
</span><span>            view</span><span style=color:#61676ccc>,
</span><span>            is_first_call</span><span style=color:#61676ccc>: </span><span>Arc</span><span style=color:#ed9366>::</span><span>new(AtomicBool</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#ff8f40>true</span><span>))</span><span style=color:#61676ccc>,
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>OutputColorAttachment </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>view</span><span style=color:#61676ccc>:</span><span> TextureView,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>format</span><span style=color:#61676ccc>:</span><span> TextureFormat,
</span><span>    is_first_call</span><span style=color:#61676ccc>: </span><span>Arc&LTAtomicBool>,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>OutputColorAttachment </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>view</span><span style=color:#61676ccc>:</span><span> TextureView, </span><span style=color:#ff8f40>format</span><span style=color:#61676ccc>:</span><span> TextureFormat) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#fa6e32>Self </span><span>{
</span><span>            view</span><span style=color:#61676ccc>,
</span><span>            format</span><span style=color:#61676ccc>,
</span><span>            is_first_call</span><span style=color:#61676ccc>: </span><span>Arc</span><span style=color:#ed9366>::</span><span>new(AtomicBool</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#ff8f40>true</span><span>))</span><span style=color:#61676ccc>,
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre><h3 id=crates-bevy-render-src-camera-rs-3-3><code>crates/bevy_render/src/camera.rs</code> (+3/-3)</h3><p><strong>What changed</strong>: Simplified format retrieval for <code>NormalizedRenderTarget::TextureView</code> to use stored format instead of querying texture.<p><strong>Key modifications</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>NormalizedRenderTarget</span><span style=color:#ed9366>::</span><span>TextureView(id) </span><span style=color:#ed9366>=></span><span> manual_texture_views
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(id)
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(|</span><span style=color:#ff8f40>view</span><span>| view</span><span style=color:#ed9366>.</span><span>texture_view</span><span style=color:#ed9366>.</span><span style=color:#f07171>texture</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>format</span><span>())</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>NormalizedRenderTarget</span><span style=color:#ed9366>::</span><span>TextureView(id) </span><span style=color:#ed9366>=> </span><span>{
</span><span>    manual_texture_views</span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(id)</span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(|</span><span style=color:#ff8f40>tex</span><span>| tex</span><span style=color:#ed9366>.</span><span>format)
</span><span>}
</span></code></pre><h3 id=crates-bevy-render-src-view-window-screenshot-rs-5-5><code>crates/bevy_render/src/view/window/screenshot.rs</code> (+5/-5)</h3><p><strong>What changed</strong>: Updated screenshot preparation to use stored formats with sRGB suffix.<p><strong>Key modifications</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Multiple instances changed from:
</span><span>OutputColorAttachment</span><span style=color:#ed9366>::</span><span>new(texture_view</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>())
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// To:
</span><span>OutputColorAttachment</span><span style=color:#ed9366>::</span><span>new(texture_view</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>,</span><span> format</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_srgb_suffix</span><span>())
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://www.w3.org/TR/webgpu/#color-space-and-format-handling target=_blank>WebGPU Color Space and Format Handling</a> - Understanding color space fundamentals in modern graphics APIs<li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/next/rendering/ target=_blank>Bevy Rendering Pipeline Documentation</a> - Official Bevy documentation on rendering concepts<li><a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/SRGB target=_blank>SRGB Color Space Explained</a> - Technical background on sRGB color space<li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/pull/22090 target=_blank>PR #22090 - Rationale for revert</a> - Detailed discussion of issues with non-SRGB render targets<li><a rel="noopener nofollow noreferrer" href=https://github.com/gpuweb/gpuweb/wiki/Texture-Format-Encoding target=_blank>GPU Texture Formats and Color Spaces</a> - Technical details on texture format encoding and color space considerations</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-12/pr_22101.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>