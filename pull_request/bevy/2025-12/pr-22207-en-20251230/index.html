<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22207 Adds ability to pause in gizmo examples
        
    </title><meta content="#22207 Adds ability to pause in gizmo examples" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-12/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-12-30</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-12/pr-22207-zh-cn-20251230>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Adds ability to pause in gizmo examples<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22207<li><strong>Author</strong>: kfc35<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Examples, S-Ready-For-Final-Review, A-Gizmos, D-Straightforward<li><strong>Created</strong>: 2025-12-20T06:20:39Z<li><strong>Merged</strong>: 2025-12-30T00:15:31Z<li><strong>Merged By</strong>: mockersf</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Fixes #22203</ul><h2 id=solution>Solution</h2><ul><li>Utilize the virtual clock to pause time! Use the real time clock in config as well, though, since increasing and decreasing line widths scales happens with elapsed time deltas.<li>I did not include an indicator for when the scenes are paused / unpaused since it seems there is at least one thing constantly moving in the two scenes unless they are paused. (the 2d example has that constantly rotating oval, and the 3d example has that constantly moving grid gizmo in the air)</ul><h2 id=testing>Testing</h2><ul><li>Did you test these changes? If so, how? I ran both the affected examples: <code>cargo run --example 3d_gizmos --features=“free_camera”</code> <code>cargo run --example 2d_gizmos</code> Pausing works as expected, and increasing/decreasing line widths while paused still works</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses issue #22203, which requested a pause feature for the Bevy engine’s gizmo examples. The developer implemented a clean solution that maintains functionality while adding the requested feature.<p>The core problem was straightforward: users needed a way to pause the animated examples to better inspect the gizmo drawings. The 2D example has a constantly rotating oval, and the 3D example has a moving grid gizmo, making it difficult to examine details while everything is in motion.<p>The developer chose to leverage Bevy’s time system architecture, which provides two types of time resources: <code>Time&LTVirtual></code> for game logic time (which can be paused) and <code>Time&LTReal></code> for real-world wall clock time (which always advances). This distinction was crucial because the examples needed to handle two different requirements simultaneously: pausing the animations while still allowing line width adjustments to work when paused.<p>In the original implementation, the <code>update_config</code> function used a generic <code>Time</code> resource for line width adjustments:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>fn </span><span style=color:#f29718>update_config</span><span>(
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>config_store</span><span style=color:#61676ccc>: </span><span>ResMut&LTGizmoConfigStore>,
</span><span>    </span><span style=color:#ff8f40>keyboard</span><span style=color:#61676ccc>: </span><span>Res&LTButtonInput&LTKeyCode>>,
</span><span>    </span><span style=color:#ff8f40>time</span><span style=color:#61676ccc>: </span><span>Res&LTTime>,  </span><span style=color:#abb0b6;font-style:italic>// Generic time resource
</span><span>)
</span></code></pre><p>The challenge was that if the developer simply added pausing using the virtual clock, the line width adjustments would also stop working when paused because they depended on time deltas. The solution was to split the time usage: use <code>Time&LTReal></code> for line width adjustments and <code>Time&LTVirtual></code> for pausing the example animations.<p>The implementation modified both <code>update_config</code> functions to accept two time resources:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>fn </span><span style=color:#f29718>update_config</span><span>(
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>config_store</span><span style=color:#61676ccc>: </span><span>ResMut&LTGizmoConfigStore>,
</span><span>    </span><span style=color:#ff8f40>keyboard</span><span style=color:#61676ccc>: </span><span>Res&LTButtonInput&LTKeyCode>>,
</span><span>    </span><span style=color:#ff8f40>real_time</span><span style=color:#61676ccc>: </span><span>Res&LTTime&LTReal>>,        </span><span style=color:#abb0b6;font-style:italic>// For line width adjustments
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>virtual_time</span><span style=color:#61676ccc>: </span><span>ResMut&LTTime&LTVirtual>>,  </span><span style=color:#abb0b6;font-style:italic>// For pausing
</span><span>)
</span></code></pre><p>This separation ensures that pressing arrow keys to adjust line widths continues to work based on real time elapsed, even when the virtual clock is paused. The developer then added spacebar handling to toggle the pause state:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>if</span><span> keyboard</span><span style=color:#ed9366>.</span><span style=color:#f07171>just_pressed</span><span>(KeyCode</span><span style=color:#ed9366>::</span><span>Space) {
</span><span>    </span><span style=color:#fa6e32>if</span><span> virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_paused</span><span>() {
</span><span>        virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>unpause</span><span>()</span><span style=color:#61676ccc>;
</span><span>    } </span><span style=color:#fa6e32>else </span><span>{
</span><span>        virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>pause</span><span>()</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>}
</span></code></pre><p>The developer also updated the on-screen instructions in both examples to inform users about the new pause functionality, adding the line: “Press ‘Spacebar’ to toggle pause”.<p>An important design decision was to not add a visual indicator for the pause state. The rationale was that users could easily determine if the scene was paused by observing whether the constantly moving elements (the rotating oval in 2D or moving grid in 3D) were stationary. This kept the implementation minimal and avoided adding UI complexity to what are primarily demonstration examples.<p>The changes demonstrate a good understanding of Bevy’s time system architecture. By using both real and virtual time appropriately, the implementation maintains all existing functionality while adding the requested feature. This approach is particularly useful in game development scenarios where you might want to pause game logic but continue processing input or UI updates.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[User presses Spacebar] --> B{Check virtual time state}
</span><span>    B -->|Paused| C[Call virtual_time.unpause()]
</span><span>    B -->|Running| D[Call virtual_time.pause()]
</span><span>    
</span><span>    E[User adjusts line width] --> F{Check virtual time state}
</span><span>    F -->|Paused| G[Use Time&LTReal> delta]
</span><span>    F -->|Running| G
</span><span>    
</span><span>    H[Time&LTReal>] --> G
</span><span>    I[Time&LTVirtual>] --> J[Example animations]
</span><span>    
</span><span>    C --> K[Animations resume]
</span><span>    D --> L[Animations pause]
</span><span>    G --> M[Line width updates]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=examples-gizmos-2d-gizmos-rs-15-6><code>examples/gizmos/2d_gizmos.rs</code> (+15/-6)</h3><p><strong>Changes:</strong> Added pause functionality using Bevy’s virtual clock system while maintaining line width adjustment using real time.<p><strong>Key modifications:</strong><ol><li>Updated instructions text:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#86b300>"Press 'J' / 'K' to cycle through line joins"</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#86b300>"Press 'J' / 'K' to cycle through line joins</span><span style=color:#4cbf99>\n</span><span style=color:#61676ccc>\
</span><span style=color:#86b300>Press 'Spacebar' to toggle pause"</span><span style=color:#61676ccc>,
</span></code></pre><ol start=2><li>Modified function signature and time usage:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>update_config</span><span>(
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>config_store</span><span style=color:#61676ccc>: </span><span>ResMut&LTGizmoConfigStore>,
</span><span>    </span><span style=color:#ff8f40>keyboard</span><span style=color:#61676ccc>: </span><span>Res&LTButtonInput&LTKeyCode>>,
</span><span>    </span><span style=color:#ff8f40>time</span><span style=color:#61676ccc>: </span><span>Res&LTTime>,
</span><span>)
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>update_config</span><span>(
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>config_store</span><span style=color:#61676ccc>: </span><span>ResMut&LTGizmoConfigStore>,
</span><span>    </span><span style=color:#ff8f40>keyboard</span><span style=color:#61676ccc>: </span><span>Res&LTButtonInput&LTKeyCode>>,
</span><span>    </span><span style=color:#ff8f40>real_time</span><span style=color:#61676ccc>: </span><span>Res&LTTime&LTReal>>,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>virtual_time</span><span style=color:#61676ccc>: </span><span>ResMut&LTTime&LTVirtual>>,
</span><span>)
</span></code></pre><ol start=3><li>Updated line width calculations to use real time:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>config</span><span style=color:#ed9366>.</span><span>line</span><span style=color:#ed9366>.</span><span>width </span><span style=color:#ed9366>+= </span><span style=color:#ff8f40>5. </span><span style=color:#ed9366>*</span><span> time</span><span style=color:#ed9366>.</span><span style=color:#f07171>delta_secs</span><span>()</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>config</span><span style=color:#ed9366>.</span><span>line</span><span style=color:#ed9366>.</span><span>width </span><span style=color:#ed9366>+= </span><span style=color:#ff8f40>5. </span><span style=color:#ed9366>*</span><span> real_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>delta_secs</span><span>()</span><span style=color:#61676ccc>;
</span></code></pre><ol start=4><li>Added pause toggle logic:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>if</span><span> keyboard</span><span style=color:#ed9366>.</span><span style=color:#f07171>just_pressed</span><span>(KeyCode</span><span style=color:#ed9366>::</span><span>Space) {
</span><span>    </span><span style=color:#fa6e32>if</span><span> virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_paused</span><span>() {
</span><span>        virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>unpause</span><span>()</span><span style=color:#61676ccc>;
</span><span>    } </span><span style=color:#fa6e32>else </span><span>{
</span><span>        virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>pause</span><span>()</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>}
</span></code></pre><h3 id=examples-gizmos-3d-gizmos-rs-15-6><code>examples/gizmos/3d_gizmos.rs</code> (+15/-6)</h3><p><strong>Changes:</strong> Applied the same pause functionality to the 3D gizmo example.<p><strong>Key modifications:</strong><ol><li><p>Updated instructions text (same pattern as 2D example).</p><li><p>Modified function signature and time usage (same pattern as 2D example).</p><li><p>Updated line width calculations to use real time (same pattern as 2D example).</p><li><p>Added pause toggle logic (same pattern as 2D example).</p></ol><p>The changes in both files follow identical patterns, ensuring consistency across the examples.<h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/time/struct.Time.html target=_blank>Bevy Time Documentation</a> - Official documentation for Bevy’s time system<li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/blob/main/examples/time/virtual_time.rs target=_blank>Bevy Virtual Time Example</a> - Example demonstrating virtual time usage<li><a rel="noopener nofollow noreferrer" href=https://gafferongames.com/post/fix_your_timestep/ target=_blank>Game Loop and Time Step Patterns</a> - In-depth article on game timing<li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/gizmos/index.html target=_blank>Bevy Gizmos Documentation</a> - Official gizmo system documentation</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-12/pr_22207.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>