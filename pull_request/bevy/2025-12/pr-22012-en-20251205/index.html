<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22012 Clarify docs for `ExtractSchedule`
        
    </title><meta content="#22012 Clarify docs for `ExtractSchedule`" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-12/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-12-05</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-12/pr-22012-zh-cn-20251205>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Clarify docs for <code>ExtractSchedule</code><li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22012<li><strong>Author</strong>: bilsen<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, D-Trivial, A-Rendering<li><strong>Created</strong>: 2025-12-02T19:27:59Z<li><strong>Merged</strong>: 2025-12-05T18:38:10Z<li><strong>Merged By</strong>: james7132</ul><h2 id=description-translation>Description Translation</h2><p>The previous docs incorrectly states that the <code>ExtractSchedule</code> is run on the main world. Also some small additional changes.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a documentation inaccuracy in Bevy’s render system that could lead to developer confusion about the execution context of the <code>ExtractSchedule</code>. The issue was straightforward but significant: the documentation incorrectly stated which world the schedule operates on, which could mislead developers trying to understand or extend the extraction pipeline.<p>The problem stemmed from a misstatement in the doc comments for the <code>ExtractSchedule</code> struct. Originally, the documentation claimed that “This schedule is run on the main world, but its buffers are not applied until it is returned to the render world.” This was incorrect and could cause developers to write extraction systems with wrong assumptions about their execution context. In Bevy’s ECS architecture, understanding which world a system operates in is critical for proper data access and system design.<p>The solution approach was simple but important: correct the documentation to accurately reflect the execution model. The developer identified the specific lines that needed fixing and proposed clear, accurate replacements. This is a documentation-only change, so no code logic was modified, but the correction prevents potential misunderstandings.<p>The implementation consists of three key changes to the documentation. First, the opening description was rephrased from “Schedule which extract data from the main world and inserts it into the render world” to “Schedule in which data from the main world is ‘extracted’ into the render world.” This change uses more passive phrasing that better matches the extraction metaphor and focuses on the schedule’s purpose rather than its mechanism.<p>The most important correction addresses the execution context. The line “This schedule is run on the main world, but its buffers are not applied until it is returned to the render world” was replaced with “This schedule is run on the render world, but it also has access to the main world.” This accurately describes how extraction works in Bevy: the schedule executes in the render world context but can access data from the main world through specific mechanisms.<p>To provide practical guidance, the documentation now includes a reference: “See [<code>MainWorld</code>] and [<code>Extract</code>] for details on how to access main world data from this schedule.” This directs developers to the relevant APIs for implementing extraction systems, making the documentation more actionable.<p>From a technical perspective, this correction is important because Bevy’s extraction phase follows a specific pattern. The <code>ExtractSchedule</code> runs on the render world but has access to the main world through the <code>Extract</code> system parameter and the <code>MainWorld</code> resource. This allows extraction systems to read data from the main world and copy it into the render world without mutating the main world. Understanding this execution context is essential for writing correct extraction systems that don’t accidentally mutate the wrong world or assume incorrect data availability.<p>The impact of this change is primarily educational. While it doesn’t alter any runtime behavior, it prevents developers from making incorrect assumptions about where their extraction systems run. This is particularly important for new contributors or developers extending the rendering pipeline, who might otherwise write systems that assume they’re operating in the main world context.<p>This documentation fix highlights an important pattern in Bevy’s architecture: the separation between the main world (where game logic runs) and the render world (where rendering data is prepared). The extraction phase bridges these two worlds by copying necessary data, and understanding which world provides the execution context for this copying is fundamental to working with Bevy’s rendering system effectively.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    MW[Main World] -->|ExtractSchedule accesses| ES[ExtractSchedule]
</span><span>    RW[Render World] -->|ExtractSchedule runs on| ES
</span><span>    ES -->|copies data to| RW2[Render World]
</span><span>    
</span><span>    style MW fill:#f9f,stroke:#333,stroke-width:2px
</span><span>    style RW fill:#ccf,stroke:#333,stroke-width:2px
</span><span>    style ES fill:#cfc,stroke:#333,stroke-width:2px
</span><span>    style RW2 fill:#ccf,stroke:#333,stroke-width:2px
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-render-src-lib-rs-3-3><code>crates/bevy_render/src/lib.rs</code> (+3/-3)</h3><p>This file contains the documentation for the <code>ExtractSchedule</code> struct in Bevy’s render module. The changes correct inaccurate information about which world the schedule runs on and improve the overall clarity of the documentation.<p><strong>Key changes:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_render/src/lib.rs
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>/// Schedule which extract data from the main world and inserts it into the render world.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// This step should be kept as short as possible to increase the "pipelining potential" for
</span><span style=color:#abb0b6;font-style:italic>/// running the next frame while rendering the current frame.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// This schedule is run on the main world, but its buffers are not applied
</span><span style=color:#abb0b6;font-style:italic>/// until it is returned to the render world.
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>/// Schedule in which data from the main world is 'extracted' into the render world.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// This step should be kept as short as possible to increase the "pipelining potential" for
</span><span style=color:#abb0b6;font-style:italic>/// running the next frame while rendering the current frame.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// This schedule is run on the render world, but it also has access to the main world.
</span><span style=color:#abb0b6;font-style:italic>/// See [`MainWorld`] and [`Extract`] for details on how to access main world data from this schedule.
</span></code></pre><p>The changes include:<ol><li>Rephrasing the first line to use more descriptive language (“is ‘extracted’” instead of “extract”)<li>Correcting the crucial detail about which world the schedule runs on (render world vs main world)<li>Adding practical guidance to reference <code>MainWorld</code> and <code>Extract</code> for implementation details</ol><p>These changes directly address the PR’s goal of clarifying the documentation for <code>ExtractSchedule</code> and correcting the misconception about execution context.<h2 id=further-reading>Further Reading</h2><ol><li><p><strong>Bevy’s ECS Architecture</strong>: Understanding Bevy’s Entity Component System and how systems interact with different worlds is fundamental. The official Bevy Book’s ECS chapter provides a good foundation.</p><li><p><strong>Extraction Pattern in Game Engines</strong>: The pattern of extracting data from a game world to a render world is common in game engine architecture. Research on “data-oriented design” and “entity component systems” provides context for why this separation exists.</p><li><p><strong>Bevy’s Render Graph</strong>: The <code>ExtractSchedule</code> is part of Bevy’s render graph system. The render graph documentation explains how different rendering phases connect and execute.</p><li><p><strong>System Parameters in Bevy</strong>: Understanding how <code>Extract</code> and <code>MainWorld</code> work as system parameters helps when writing extraction systems. The Bevy documentation on system parameters shows how to access different resources and components.</p><li><p><strong>Schedule Execution in Bevy</strong>: Bevy’s schedule system determines when and where systems run. The documentation on schedules and stages explains the execution order and context.</p></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-12/pr_22012.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>