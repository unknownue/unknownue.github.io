<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #18828 Don't restrict the scene viewer to loading assets from approved paths
        
    </title><meta content="#18828 Don't restrict the scene viewer to loading assets from approved paths" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-04/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-04-14</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-04/pr-18828-zh-cn-20250414>中文</a></div></div><div class=pr-content><h1 id=title-don-t-restrict-the-scene-viewer-to-loading-assets-from-approved-paths>Title: Don’t restrict the scene viewer to loading assets from approved paths</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Don’t restrict the scene viewer to loading assets from approved paths<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/18828<li><strong>Author</strong>: pcwalton<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Examples, A-Assets, S-Needs-Review<li><strong>Created</strong>: 2025-04-13T08:54:48Z<li><strong>Merged</strong>: 2025-04-14T20:40:45Z<li><strong>Merged By</strong>: mockersf</ul><h2 id=description-translation>Description Translation</h2><p>The purpose of the scene viewer is to load arbitrary glTF scenes, so it’s inconvenient if they have to be moved into the Bevy assets directory first. Thus this patch switches the scene viewer to use <code>UnapprovedPathMode::Allow</code>.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The scene viewer example in Bevy faced a usability limitation due to security measures in the asset system. By default, Bevy’s asset server restricts loading assets from unapproved paths to prevent arbitrary file system access. While this is a sensible security precaution for general use, it conflicted with the scene viewer’s primary purpose of quickly loading and inspecting arbitrary glTF files.<p>The core issue manifested when users tried to load scene files outside Bevy’s designated assets directory. The asset system would block these requests, forcing users to first copy files into approved directories - an unnecessary step for a development tool meant for rapid experimentation. This friction reduced the utility of the scene viewer for its intended use case.<p>The solution focused on configuring the asset processor’s security settings specifically for the scene viewer example. By adding a single line to the example’s setup:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span>asset_processor</span><span style=color:#ed9366>.</span><span style=color:#f07171>set_unapproved_path_mode</span><span>(UnapprovedPathMode</span><span style=color:#ed9366>::</span><span>Allow)</span><span style=color:#61676ccc>;
</span></code></pre><p>This change tells Bevy’s asset system to bypass path approval checks while maintaining other security features. The implementation leverages existing configuration options in Bevy’s <code>AssetProcessor</code>, demonstrating how to adapt engine components for specific use cases.<p>The choice of <code>UnapprovedPathMode::Allow</code> represents a deliberate trade-off between security and usability appropriate for an example tool. While production applications should generally maintain strict path restrictions, development tools like the scene viewer benefit from relaxed constraints. This change preserves the default security behavior for most Bevy applications while making the scene viewer more flexible for its intended purpose.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Scene Viewer Example] --> B[AssetProcessor]
</span><span>    B --> C{UnapprovedPathMode}
</span><span>    C -->|Allow| D[Load Any glTF]
</span><span>    C -->|Deny| E[Restrict to Approved Paths]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=examples-tools-scene-viewer-main-rs-3-0><code>examples/tools/scene_viewer/main.rs</code> (+3/-0)</h3><p><strong>Purpose</strong>: Configure asset processing to allow loading from any path<p>Key addition:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Configure the asset processor to allow unapproved paths
</span><span style=color:#fa6e32>let</span><span> asset_processor </span><span style=color:#ed9366>=</span><span> app</span><span style=color:#ed9366>.</span><span>world</span><span style=color:#ed9366>.</span><span>resource</span><span style=color:#ed9366>::</span><span>&LTAssetProcessor>()</span><span style=color:#61676ccc>;
</span><span>asset_processor</span><span style=color:#ed9366>.</span><span style=color:#f07171>set_unapproved_path_mode</span><span>(UnapprovedPathMode</span><span style=color:#ed9366>::</span><span>Allow)</span><span style=color:#61676ccc>;
</span></code></pre><p>This change:<ol><li>Retrieves the <code>AssetProcessor</code> instance<li>Sets its unapproved path handling mode to <code>Allow</code><li>Affects only the scene viewer example’s behavior<li>Maintains default security settings for other Bevy applications</ol><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/assets/ target=_blank>Bevy Asset System Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/rfcs/blob/main/rfcs/45-asset-system.md#security target=_blank>Asset Path Security RFC</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/examples/3D%20Rendering/gltf/ target=_blank>glTF Loading in Bevy</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-04/pr_18828.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>