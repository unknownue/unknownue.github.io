<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22650 `WinitSettings` Cleanup - Simplifying Example Code
        
    </title><meta content="#22650 `WinitSettings` Cleanup - Simplifying Example Code" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-22</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-01/pr-22650-zh-cn-20260122>中文</a></div></div><div class=pr-content><h1 id=title-winitsettings-cleanup-simplifying-example-code>Title: <code>WinitSettings</code> Cleanup - Simplifying Example Code</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: <code>WinitSettings</code> cleanup<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22650<li><strong>Author</strong>: ickshonpe<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, C-Code-Quality, S-Ready-For-Final-Review<li><strong>Created</strong>: 2026-01-22T17:31:23Z<li><strong>Merged</strong>: 2026-01-22T18:42:32Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h3 id=objective>Objective</h3><h4 id=some-cleanup>Some cleanup</h4><ol><li><code>many_gradients</code> inserts <code>WinitSettings</code> twice.<li>Replace manual configuration where <code>WinitSettings::continuous()</code> could be used.</ol><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a straightforward code quality issue in Bevy’s example codebase. When examining several stress test and large scene examples, the author noticed a pattern of redundant and verbose <code>WinitSettings</code> configuration. The cleanup follows two clear objectives that demonstrate good software engineering practices: eliminating duplicate code and utilizing helper methods where available.<p>The core issue was that multiple examples were manually constructing <code>WinitSettings</code> structs with identical configuration instead of using the existing convenience method. In Bevy, <code>WinitSettings</code> controls how the game loop updates when the application window is focused or unfocused. Many examples, particularly stress tests and performance-focused demonstrations, need continuous updates regardless of window focus to provide accurate performance measurements and smooth animations.<p>The manual configuration pattern appeared in five different example files:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before the change:
</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings {
</span><span>    focused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>    unfocused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>})
</span></code></pre><p>This approach worked correctly but was verbose and less maintainable than using the provided helper method. The Bevy engine already included <code>WinitSettings::continuous()</code> as a convenience constructor that creates settings with both update modes set to continuous.<p>The author identified a more serious issue in the <code>many_gradients.rs</code> example where <code>WinitSettings</code> was being inserted twice - once with the verbose manual construction and once with the helper method. This duplication wasn’t causing functional problems since the second insertion would overwrite the first, but it represented unnecessary code execution and potential confusion for developers reading the example.<p>The solution approach was methodical and targeted. Instead of making sweeping changes or refactoring complex logic, the author applied focused improvements:<ol><li><strong>Eliminate duplicate insertion</strong> in <code>many_gradients.rs</code> by removing the manual configuration and keeping only the helper method call<li><strong>Replace manual configuration</strong> with <code>WinitSettings::continuous()</code> in all other examples where appropriate</ol><p>The technical insight here is about API design and usage patterns. When an API provides convenience constructors like <code>::continuous()</code>, using them offers several benefits:<ul><li>Reduced verbosity and improved readability<li>Centralized logic (if the implementation of “continuous” needs to change, it happens in one place)<li>Clearer intent (the method name <code>continuous()</code> communicates the purpose better than reading two field assignments)<li>Prevention of common errors (developers can’t accidentally set one mode differently than the other)</ul><p>This cleanup also demonstrates the importance of reviewing example code. Examples serve as both demonstration and documentation for users learning the engine. Clean, concise examples with proper API usage patterns teach best practices to new users. When examples contain redundant code or don’t use available convenience methods, they can inadvertently teach suboptimal patterns.<p>The impact of these changes is primarily on code quality and maintainability. While there’s no functional difference in how the examples run, the improvements make the code:<ul><li>More readable and self-documenting<li>Less prone to accidental configuration errors<li>Consistent across different examples<li>Better aligned with Bevy’s API design patterns</ul><p>From an engineering perspective, this PR exemplifies the value of small, focused improvements. Each change is minimal and low-risk, but collectively they improve the overall quality of the codebase. The changes also follow the DRY (Don’t Repeat Yourself) principle by eliminating duplicate configuration patterns.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Example Files Review] --> B{Identify Issues}
</span><span>    B --> C[Duplicate WinitSettings in many_gradients]
</span><span>    B --> D[Verbose Manual Configuration]
</span><span>    C --> E[Remove Duplicate Insertion]
</span><span>    D --> F[Replace with WinitSettings::continuous]
</span><span>    E --> G[Cleaner Code]
</span><span>    F --> G
</span><span>    G --> H[Improved Example Quality]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=examples-stress-tests-many-gradients-rs-2-6><code>examples/stress_tests/many_gradients.rs</code> (+2/-6)</h3><p><strong>Description</strong>: Fixed duplicate <code>WinitSettings</code> insertion and replaced verbose configuration with helper method. This was the most significant change since it addressed two issues in one file.<p><strong>Code changes</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings {
</span><span>            focused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>            unfocused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>        })
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(args)
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings</span><span style=color:#ed9366>::</span><span>continuous())
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings</span><span style=color:#ed9366>::</span><span>continuous())
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(args)
</span></code></pre><h3 id=examples-large-scenes-bistro-src-main-rs-2-5><code>examples/large_scenes/bistro/src/main.rs</code> (+2/-5)</h3><p><strong>Description</strong>: Replaced manual <code>WinitSettings</code> construction with the <code>::continuous()</code> helper method.<p><strong>Code changes</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings {
</span><span>            focused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>            unfocused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>        })
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings</span><span style=color:#ed9366>::</span><span>continuous())
</span></code></pre><h3 id=examples-large-scenes-caldera-hotel-src-main-rs-2-5><code>examples/large_scenes/caldera_hotel/src/main.rs</code> (+2/-5)</h3><p><strong>Description</strong>: Replaced manual <code>WinitSettings</code> construction with the <code>::continuous()</code> helper method.<p><strong>Code changes</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings {
</span><span>            focused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>            unfocused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>        })
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings</span><span style=color:#ed9366>::</span><span>continuous())
</span></code></pre><h3 id=examples-stress-tests-many-cubes-rs-2-5><code>examples/stress_tests/many_cubes.rs</code> (+2/-5)</h3><p><strong>Description</strong>: Replaced manual <code>WinitSettings</code> construction with the <code>::continuous()</code> helper method.<p><strong>Code changes</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings {
</span><span>            focused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>            unfocused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>        })
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings</span><span style=color:#ed9366>::</span><span>continuous())
</span></code></pre><h3 id=examples-stress-tests-many-materials-rs-2-5><code>examples/stress_tests/many_materials.rs</code> (+2/-5)</h3><p><strong>Description</strong>: Replaced manual <code>WinitSettings</code> construction with the <code>::continuous()</code> helper method.<p><strong>Code changes</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings {
</span><span>            focused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>            unfocused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>        })
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings</span><span style=color:#ed9366>::</span><span>continuous())
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><strong>Bevy <code>WinitSettings</code> documentation</strong>: For understanding the different update modes and their use cases<li><strong>API Design Patterns</strong>: Resources on when to provide convenience constructors vs. direct struct initialization<li><strong>Code Quality Metrics</strong>: Information on how small improvements contribute to overall codebase health<li><strong>Example-Driven Development</strong>: How example code serves as documentation and teaching tool in open source projects<li><strong>The DRY Principle</strong>: Understanding the benefits of eliminating duplication in code</ol><h1 id=full-code-diff>Full Code Diff</h1><p><em>(Provided in the original request)</em></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22650.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>