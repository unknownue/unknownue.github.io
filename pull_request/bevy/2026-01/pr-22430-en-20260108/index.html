<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22430 0.18: Remove references to `ReaderRequiredFeatures`
        
    </title><meta content="#22430 0.18: Remove references to `ReaderRequiredFeatures`" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-08</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-01/pr-22430-zh-cn-20260108>中文</a></div></div><div class=pr-content><h1 id=title-0-18-remove-references-to-readerrequiredfeatures>Title: 0.18: Remove references to <code>ReaderRequiredFeatures</code></h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: 0.18: Remove references to <code>ReaderRequiredFeatures</code><li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22430<li><strong>Author</strong>: greeble-dev<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Bug, C-Docs, A-Assets, S-Ready-For-Final-Review, P-Compile-Failure<li><strong>Created</strong>: 2026-01-08T14:48:46Z<li><strong>Merged</strong>: 2026-01-08T20:22:28Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description>Description</h2><p><code>ReaderRequiredFeatures</code> was added by #22104 and removed by #22182, but <a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/pull/22182#issuecomment-3723854168 target=_blank>some references</a> snuck into the 0.18 branch. This was causing a compile error if the <code>trace</code> feature was enabled, and some release content was misleading.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a cleanup task that emerged from the development cycle for Bevy 0.18. The core issue was that a feature, <code>ReaderRequiredFeatures</code>, which was introduced and then subsequently removed during the development process, left behind residual references in the codebase. These references caused a compile-time failure when the <code>trace</code> feature was enabled, and also resulted in misleading documentation.<p>The problem originated from PR #22104, which added <code>ReaderRequiredFeatures</code> to the asset system. This change was part of an effort to make asset reading more flexible by allowing asset loaders to specify what kind of seeking capabilities they require from readers. However, this approach was later reverted in PR #22182, which removed the <code>ReaderRequiredFeatures</code> entirely from the main codebase. Despite this removal, some references managed to persist in the 0.18 branch, likely due to merge conflicts or incomplete cleanup during the revert process.<p>The most critical issue was in <code>crates/bevy_asset/src/server/loaders.rs</code>, where the <code>InstrumentedAssetLoader</code> struct’s implementation still included a <code>reader_required_features</code> method. This method was trying to delegate to the wrapped loader’s <code>reader_required_features</code> method, but since that trait method no longer existed (it was removed along with <code>ReaderRequiredFeatures</code>), the code failed to compile when the <code>trace</code> feature was enabled because the <code>InstrumentedAssetLoader</code> is only compiled with that feature.<p>Additionally, the documentation system contained two migration guide files that were now obsolete. These files were explaining how to migrate code to use <code>ReaderRequiredFeatures</code>, which was no longer relevant since the feature had been removed. Keeping these files would mislead developers trying to understand the migration path to Bevy 0.18.<p>The solution was straightforward: completely remove all remaining references to <code>ReaderRequiredFeatures</code>. This involved:<ol><li>Removing the unused import and method implementation from <code>loaders.rs</code><li>Deleting the two migration guide files that discussed the now-removed feature<li>Updating the release notes to acknowledge that they were outdated and to correctly reference the PR that removed the feature</ol><p>The implementation change in <code>loaders.rs</code> was minimal but critical. The <code>InstrumentedAssetLoader</code> is a wrapper that adds tracing instrumentation to asset loaders when the <code>trace</code> feature is enabled. Since the underlying <code>AssetLoader</code> trait no longer had a <code>reader_required_features</code> method after PR #22182, the wrapper’s implementation of that method became invalid and needed to be removed.<p>From a technical perspective, this cleanup highlights an important aspect of software development: when features are removed, it’s crucial to ensure all references are cleaned up, not just in the main code paths but also in conditional compilation blocks and documentation. The <code>trace</code> feature being optional meant that the compilation error only manifested when that feature was enabled, which could easily be missed during testing if the feature wasn’t actively used in all test configurations.<p>The impact of this PR is primarily about maintaining code correctness and documentation accuracy. By removing these residual references, the codebase compiles correctly in all feature configurations, and developers aren’t misled by documentation describing features that no longer exist. This kind of cleanup is essential for maintaining a stable and understandable codebase, especially during major version transitions like the 0.18 release.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[PR #22104: Add ReaderRequiredFeatures] --> B[PR #22182: Remove ReaderRequiredFeatures]
</span><span>    B --> C{Residual References Remain}
</span><span>    C --> D[Compile Error with trace feature]
</span><span>    C --> E[Misleading Documentation]
</span><span>    D --> F[This PR: Cleanup]
</span><span>    E --> F
</span><span>    F --> G[Clean 0.18 Codebase]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=1-crates-bevy-asset-src-server-loaders-rs-0-5>1. <code>crates/bevy_asset/src/server/loaders.rs</code> (+0/-5)</h3><p><strong>What changed</strong>: Removed the <code>reader_required_features</code> method implementation from <code>InstrumentedAssetLoader</code> and the corresponding import.<p><strong>Why</strong>: The <code>ReaderRequiredFeatures</code> type and associated trait methods were removed in PR #22182, but this implementation remained, causing compilation errors when the <code>trace</code> feature was enabled.<p><strong>Code changes</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before (with trace feature enabled):
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>cfg</span><span>(feature </span><span style=color:#ed9366>= </span><span style=color:#86b300>"trace"</span><span>)]
</span><span style=color:#fa6e32>use </span><span>{
</span><span>    </span><span style=color:#fa6e32>crate</span><span style=color:#ed9366>::</span><span>io</span><span style=color:#ed9366>::</span><span>ReaderRequiredFeatures</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// This import is no longer valid
</span><span>    alloc</span><span style=color:#ed9366>::</span><span>string</span><span style=color:#ed9366>::</span><span>ToString</span><span style=color:#61676ccc>,
</span><span>    bevy_tasks</span><span style=color:#ed9366>::</span><span>ConditionalSendFuture</span><span style=color:#61676ccc>,
</span><span>    tracing</span><span style=color:#ed9366>::</span><span>{info_span</span><span style=color:#61676ccc>, </span><span>instrument</span><span style=color:#ed9366>::</span><span>Instrument}</span><span style=color:#61676ccc>,
</span><span>}</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// In the InstrumentedAssetLoader implementation:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>reader_required_features</span><span>(</span><span style=color:#ff8f40>settings</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>Self</span><span style=color:#ed9366>::</span><span>Settings) </span><span style=color:#61676ccc>-></span><span> ReaderRequiredFeatures {
</span><span>    T</span><span style=color:#ed9366>::</span><span>reader_required_features(settings)  </span><span style=color:#abb0b6;font-style:italic>// This method no longer exists on T
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>cfg</span><span>(feature </span><span style=color:#ed9366>= </span><span style=color:#86b300>"trace"</span><span>)]
</span><span style=color:#fa6e32>use </span><span>{
</span><span>    alloc</span><span style=color:#ed9366>::</span><span>string</span><span style=color:#ed9366>::</span><span>ToString</span><span style=color:#61676ccc>,
</span><span>    bevy_tasks</span><span style=color:#ed9366>::</span><span>ConditionalSendFuture</span><span style=color:#61676ccc>,
</span><span>    tracing</span><span style=color:#ed9366>::</span><span>{info_span</span><span style=color:#61676ccc>, </span><span>instrument</span><span style=color:#ed9366>::</span><span>Instrument}</span><span style=color:#61676ccc>,
</span><span>}</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// The reader_required_features method is completely removed
</span></code></pre><h3 id=2-release-content-migration-guides-reader-required-features-md-0-36>2. <code>release-content/migration-guides/reader_required_features.md</code> (+0/-36)</h3><p><strong>What changed</strong>: This entire migration guide file was deleted.<p><strong>Why</strong>: The file explained how to migrate code to use <code>ReaderRequiredFeatures</code>, which was removed from Bevy 0.18. Keeping it would mislead developers.<h3 id=3-release-content-migration-guides-readers-impl-async-seek-md-0-52>3. <code>release-content/migration-guides/readers_impl_async_seek.md</code> (+0/-52)</h3><p><strong>What changed</strong>: This entire migration guide file was deleted.<p><strong>Why</strong>: This file also referenced <code>ReaderRequiredFeatures</code> and was made obsolete by the removal of that feature.<h3 id=4-release-content-release-notes-optional-asset-reader-seek-md-4-2>4. <code>release-content/release-notes/optional_asset_reader_seek.md</code> (+4/-2)</h3><p><strong>What changed</strong>: Updated the metadata and added a note indicating the release note was outdated.<p><strong>Why</strong>: The release note needed to reflect that the feature described (related to <code>ReaderRequiredFeatures</code>) was changed by a different PR (#22182) and was no longer accurate.<p><strong>Code changes</strong>:<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span style=color:#abb0b6;font-style:italic>&LT!-- Before: -->
</span><span style=color:#abb0b6;background-color:#61676c10;font-weight:700>---
</span><span>title: The </span><span style=color:#ed9366;background-color:#61676c10>`AssetReader`</span><span> trait can now (optionally) support seeking any direction.
</span><span>authors: ["@andriyDev"]
</span><span>pull_requests: []
</span><span style=color:#fa6e32;font-weight:700>---
</span><span>
</span><span style=color:#abb0b6;font-style:italic>&LT!-- After: -->
</span><span style=color:#abb0b6;background-color:#61676c10;font-weight:700>---
</span><span>title: The </span><span style=color:#ed9366;background-color:#61676c10>`AssetReader`</span><span> trait can now (optionally) support seeking any direction.
</span><span>authors: ["@andriyDev", "@cart"]
</span><span>pull_requests: [22182]
</span><span style=color:#fa6e32;font-weight:700>---
</span><span>
</span><span style=color:#f07171;font-style:italic>_TODO: This release note is not up to date with the changes in </span><span style=color:#4cbf99;font-style:italic;text-decoration:underline>https://github.com/bevyengine/bevy/pull/22182</span><span style=color:#f07171;font-style:italic>._
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><strong>PR #22104</strong>: The original PR that introduced <code>ReaderRequiredFeatures</code> - useful for understanding the initial motivation and implementation.<li><strong>PR #22182</strong>: The PR that removed <code>ReaderRequiredFeatures</code> - provides context on why the feature was removed and what replaced it.<li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/quick-start/assets/ target=_blank>Bevy’s Asset System Documentation</a> - For understanding the broader context of asset loading in Bevy.<li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/reference/conditional-compilation.html target=_blank>Conditional Compilation in Rust</a> - To understand how features like <code>trace</code> work in Rust and why the compile error was conditional.<li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/blob/main/docs/plugins_guidelines.md#migration-guides target=_blank>Bevy’s Migration Guide Process</a> - For understanding how migration guides are structured and maintained in the Bevy ecosystem.</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22430.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>