<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22712 Update linux_dependencies.md NixOS Wayland Dependency
        
    </title><meta content="#22712 Update linux_dependencies.md NixOS Wayland Dependency" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-26</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-01/pr-22712-zh-cn-20260126>中文</a></div></div><div class=pr-content><h1 id=update-linux-dependencies-md-nixos-wayland-dependency>Update linux_dependencies.md NixOS Wayland Dependency</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Update linux_dependencies.md NixOS Wayland Dependency<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22712<li><strong>Author</strong>: DefectiveDev<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, O-Linux, S-Ready-For-Final-Review<li><strong>Created</strong>: 2026-01-26T12:56:54Z<li><strong>Merged</strong>: 2026-01-26T18:48:03Z<li><strong>Merged By</strong>: james7132</ul><h2 id=description-translation>Description Translation</h2><p>Added a line for Wayland NixOS users!<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This pull request addresses a documentation gap in the Bevy game engine’s Linux dependencies guide, specifically for NixOS users who work with Wayland display servers. The change is small but meaningful, representing the type of incremental improvements that make open-source projects more accessible to diverse development environments.<p>The problem was straightforward: when following the existing NixOS setup instructions, developers using Wayland would encounter missing dependencies when building or running Bevy applications. While X11 dependencies were correctly listed, the Wayland library was omitted. This oversight could lead to compilation errors or runtime issues for users on Wayland-based NixOS systems, requiring them to manually discover and add the missing dependency.<p>The solution approach was minimal and precise - simply add <code>wayland</code> to the list of native dependencies in the Nix flake configuration example. This follows the established pattern in the documentation where dependencies are explicitly listed in the Nix package specification. The developer recognized that both X11 and Wayland support are important for Linux graphics applications, and Bevy needs to accommodate both display server protocols.<p>Looking at the implementation, this is a one-line addition to a documentation file. The change occurs within a Nix flake configuration block where system dependencies are specified:<pre class=language-nix data-lang=nix style=color:#61676c;background-color:#fafafa><code class=language-nix data-lang=nix><span style=color:#ff8f40>nativeBuildInputs </span><span style=color:#f51818>= with </span><span style=color:#ff8f40>pkgs</span><span style=color:#f51818>; </span><span>[
</span><span>  </span><span style=color:#abb0b6;font-style:italic># existing dependencies...
</span><span>  </span><span style=color:#ff8f40>wayland  </span><span style=color:#abb0b6;font-style:italic># new addition
</span><span>]</span><span style=color:#f51818>;
</span></code></pre><p>The placement of this addition is logical - it’s added alongside other graphics-related libraries like <code>libxkbcommon</code> and the X11 libraries. This organization maintains consistency with how dependencies are grouped in the configuration.<p>From a technical perspective, this change reflects an important consideration for Linux graphics programming. Modern Linux desktop environments increasingly use Wayland as their display server protocol, while X11 remains widely used. Applications built with frameworks like Bevy need to support both, especially when using windowing libraries that abstract over these protocols (such as winit, which Bevy uses). The <code>wayland</code> package in NixOS provides the necessary client libraries for Wayland protocol communication.<p>The impact of this documentation update is practical rather than technical. It doesn’t change Bevy’s codebase but improves the developer experience for NixOS users. By ensuring the documentation accurately reflects the complete set of dependencies, the project reduces friction for developers setting up their environments. This type of documentation maintenance is particularly valuable for niche setups like NixOS, where dependency management differs significantly from more common Linux distributions.<p>This PR demonstrates how small, focused documentation improvements contribute to a project’s overall quality. While the change itself is simple, it represents attention to detail and consideration for users across different Linux configurations. The merge happened quickly (within about 6 hours), indicating both the straightforward nature of the change and its alignment with project maintenance priorities.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Bevy Linux Dependencies Documentation] --> B[NixOS Section]
</span><span>    B --> C[Flake Configuration Example]
</span><span>    C --> D[Original: X11 dependencies only]
</span><span>    C --> E[Updated: X11 + Wayland dependencies]
</span><span>    E --> F[Improved developer experience for Wayland users]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><p><strong>File:</strong> <code>docs/linux_dependencies.md</code> (+1/-0)<p>This is a documentation file that provides Linux distribution-specific dependency instructions for Bevy developers. The change adds the <code>wayland</code> package to the NixOS flake configuration example.<p><strong>Key modification:</strong><pre class=language-nix data-lang=nix style=color:#61676c;background-color:#fafafa><code class=language-nix data-lang=nix><span style=color:#abb0b6;font-style:italic># File: docs/linux_dependencies.md
</span><span style=color:#abb0b6;font-style:italic># Before:
</span><span>            </span><span style=color:#ff8f40>nativeBuildInputs </span><span style=color:#f51818>= with </span><span style=color:#ff8f40>pkgs</span><span style=color:#f51818>; </span><span>[
</span><span>              </span><span style=color:#ff8f40>clang
</span><span>              </span><span style=color:#ff8f40>mold
</span><span>              </span><span style=color:#ff8f40>pkg-config
</span><span>              </span><span style=color:#ff8f40>xorg</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>libX11
</span><span>              </span><span style=color:#ff8f40>xorg</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>libXrandr
</span><span>              </span><span style=color:#ff8f40>xorg</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>libXext
</span><span>              </span><span style=color:#ff8f40>xorg</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>libXcursor
</span><span>              </span><span style=color:#ff8f40>xorg</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>libXi
</span><span>              </span><span style=color:#ff8f40>xorg</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>libXcursor
</span><span>              </span><span style=color:#ff8f40>libxkbcommon
</span><span>            ]</span><span style=color:#f51818>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span>            </span><span style=color:#ff8f40>nativeBuildInputs </span><span style=color:#f51818>= with </span><span style=color:#ff8f40>pkgs</span><span style=color:#f51818>; </span><span>[
</span><span>              </span><span style=color:#ff8f40>clang
</span><span>              </span><span style=color:#ff8f40>mold
</span><span>              </span><span style=color:#ff8f40>pkg-config
</span><span>              </span><span style=color:#ff8f40>xorg</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>libX11
</span><span>              </span><span style=color:#ff8f40>xorg</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>libXrandr
</span><span>              </span><span style=color:#ff8f40>xorg</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>libXext
</span><span>              </span><span style=color:#ff8f40>xorg</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>libXcursor
</span><span>              </span><span style=color:#ff8f40>xorg</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>libXi
</span><span>              </span><span style=color:#ff8f40>xorg</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>libXcursor
</span><span>              </span><span style=color:#ff8f40>libxkbcommon
</span><span>              </span><span style=color:#ff8f40>wayland
</span><span>            ]</span><span style=color:#f51818>;
</span></code></pre><p>The change adds <code>wayland</code> to the list of <code>nativeBuildInputs</code> in the Nix flake configuration. This ensures NixOS users with Wayland display servers have the necessary libraries available when building Bevy applications.<h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://wayland.freedesktop.org/ target=_blank>Wayland Protocol Documentation</a> - Official documentation for the Wayland display server protocol<li><a rel="noopener nofollow noreferrer" href=https://nixos.org/manual/nixos/stable/#sec-declarative-package-management target=_blank>NixOS Manual: Declarative Package Management</a> - Guide to package management in NixOS<li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/getting-started/setup/#linux target=_blank>Bevy Engine: Getting Started on Linux</a> - Official Bevy setup guide for Linux<li><a rel="noopener nofollow noreferrer" href=https://github.com/rust-windowing/winit target=_blank>winit: Cross-platform window creation and management</a> - The windowing library Bevy uses, which supports both X11 and Wayland<li><a rel="noopener nofollow noreferrer" href=https://nixos.org/guides/nix-pills/ target=_blank>Nix Pills: Understanding Nix Language and Flakes</a> - Comprehensive guide to Nix package manager concepts</ul><h1 id=full-code-diff>Full Code Diff</h1><pre style=color:#61676c;background-color:#fafafa><code><span>diff --git a/docs/linux_dependencies.md b/docs/linux_dependencies.md
</span><span>index 9050e7495f0ae..8be5db98e72c8 100644
</span><span>--- a/docs/linux_dependencies.md
</span><span>+++ b/docs/linux_dependencies.md
</span><span>@@ -165,6 +165,7 @@ Add a `flake.nix` file to the root of your GitHub repository containing:
</span><span>               xorg.libXi
</span><span>               xorg.libXcursor
</span><span>               libxkbcommon
</span><span>+              wayland
</span><span>             ];
</span><span>           };
</span><span>       }
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22712.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>