<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22416 Add AssetPath::resolve_path and resolve_embed_path methods
        
    </title><meta content="#22416 Add AssetPath::resolve_path and resolve_embed_path methods" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-08</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-01/pr-22416-zh-cn-20260108>中文</a></div></div><div class=pr-content><h1 id=title-add-assetpath-resolve-path-and-resolve-embed-path-methods>Title: Add AssetPath::resolve_path and resolve_embed_path methods</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Add AssetPath::resolve_path and resolve_embed_path methods<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22416<li><strong>Author</strong>: Eyad3skr<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Assets, C-Code-Quality, C-Usability, S-Ready-For-Final-Review, X-Uncontroversial, D-Straightforward<li><strong>Created</strong>: 2026-01-07T12:27:38Z<li><strong>Merged</strong>: 2026-01-08T19:03:17Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Fixes #22239<h2 id=solution>Solution</h2><ul><li>Added <code>resolve_path(&AssetPath)</code> - equivalent to <code>resolve(&str)</code><li>Added <code>resolve_embed_path(&AssetPath)</code> - equivalent to <code>resolve_embed(&str)</code><li>Refactored <code>resolve_internal</code> to use shared <code>resolve_from_parts</code> helper<li>Added unit tests for equivalence<li>All semantic edge cases preserved (eg., label-only, or leading /)<li>No behavior changes to existing methods</ul><h2 id=testing>Testing</h2><ul><li>Added 2 new equivalence tests proving <code>resolve_path() ≡ resolve(&path.to_string())</code><li>All 20 tests pass: <code>cargo test -p bevy_asset --lib path::tests</code><li>Test covers: relative paths, labels, leading /, explicit sources, RFC 1808 embed behavior</ul><h3 id=how-to-test>How to test</h3><pre style=color:#61676c;background-color:#fafafa><code><span>cargo test -p bevy_asset --lib path::tests
</span></code></pre><hr><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a common pattern in Bevy’s asset system where developers need to resolve one AssetPath relative to another. Previously, the API only provided string-based resolution methods, which meant that when you already had an AssetPath object, you had to convert it back to a string, parse it again, and then perform the resolution. This was inefficient and verbose.<p>The core problem was that <code>AssetPath::resolve(&str)</code> and <code>AssetPath::resolve_embed(&str)</code> required string inputs, even when the caller already had an AssetPath object. Consider this common scenario: you have a base AssetPath and want to resolve a relative AssetPath against it. You’d need to call <code>base.resolve(&other_path.to_string())</code>, which involves unnecessary string allocation and parsing overhead.<p>The solution introduces two new methods: <code>resolve(&AssetPath)</code> and <code>resolve_embed(&AssetPath)</code>. These work identically to their string-based counterparts but take AssetPath objects directly, avoiding the intermediate string conversion. To maintain backward compatibility, the existing string methods were renamed to <code>resolve_str</code> and <code>resolve_embed_str</code>.<p>The implementation was refactored to extract the common resolution logic into a new private method <code>resolve_from_parts</code>. This method handles the actual path resolution logic, which both the string-based and AssetPath-based methods now call. This approach ensures consistent behavior across both APIs and reduces code duplication.<p>Let’s examine the key implementation details. The <code>resolve_from_parts</code> method takes these parameters:<ul><li><code>replace</code>: a boolean indicating whether to use RFC 1808 semantics (removing the file portion for embedded paths)<li><code>source</code>: an optional explicit source name<li><code>rpath</code>: the path to resolve<li><code>rlabel</code>: an optional label</ul><p>The method handles several edge cases:<ol><li>Label-only paths: If the relative path contains only a label (like <code>#label</code>), it replaces the base path’s label<li>Absolute paths: Paths starting with <code>/</code> are treated as rooted at the asset source<li>Explicit sources: Paths with a source prefix (like <code>custom://path</code>) replace the entire base source<li>Path normalization: Relative segments (<code>.</code> and <code>..</code>) are properly handled</ol><p>Here’s how the new AssetPath-based method works:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>resolve</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>path</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>AssetPath<'</span><span style=color:#ed9366>_</span><span>>) </span><span style=color:#61676ccc>-> </span><span>AssetPath<</span><span style=color:#fa6e32>'static</span><span>> {
</span><span>    </span><span style=color:#fa6e32>let</span><span> is_label_only </span><span style=color:#ed9366>= </span><span style=color:#f07171>matches!</span><span>(path</span><span style=color:#ed9366>.</span><span style=color:#f07171>source</span><span>()</span><span style=color:#61676ccc>, </span><span>AssetSourceId</span><span style=color:#ed9366>::</span><span>Default)
</span><span>        </span><span style=color:#ed9366>&&</span><span> path</span><span style=color:#ed9366>.</span><span style=color:#f07171>path</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>as_os_str</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_empty</span><span>()
</span><span>        </span><span style=color:#ed9366>&&</span><span> path</span><span style=color:#ed9366>.</span><span style=color:#f07171>label</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_some</span><span>()</span><span style=color:#61676ccc>;
</span><span>
</span><span>    </span><span style=color:#fa6e32>if</span><span> is_label_only {
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone_owned</span><span>()
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>with_label</span><span>(path</span><span style=color:#ed9366>.</span><span style=color:#f07171>label</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>to_owned</span><span>())
</span><span>    } </span><span style=color:#fa6e32>else </span><span>{
</span><span>        </span><span style=color:#fa6e32>let</span><span> explicit_source </span><span style=color:#ed9366>= </span><span style=color:#fa6e32>match</span><span> path</span><span style=color:#ed9366>.</span><span style=color:#f07171>source</span><span>() {
</span><span>            AssetSourceId</span><span style=color:#ed9366>::</span><span>Default </span><span style=color:#ed9366>=> </span><span style=color:#55b4d4;font-style:italic>None</span><span style=color:#61676ccc>,
</span><span>            AssetSourceId</span><span style=color:#ed9366>::</span><span>Name(name) </span><span style=color:#ed9366>=> </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(name</span><span style=color:#ed9366>.</span><span style=color:#f07171>as_ref</span><span>())</span><span style=color:#61676ccc>,
</span><span>        }</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>resolve_from_parts</span><span>(</span><span style=color:#ff8f40>false</span><span style=color:#61676ccc>,</span><span> explicit_source</span><span style=color:#61676ccc>,</span><span> path</span><span style=color:#ed9366>.</span><span style=color:#f07171>path</span><span>()</span><span style=color:#61676ccc>,</span><span> path</span><span style=color:#ed9366>.</span><span style=color:#f07171>label</span><span>())
</span><span>    }
</span><span>}
</span></code></pre><p>The method first checks if the input path is label-only by verifying it has the default source, an empty path, and a label. If so, it simply clones the base path with the new label. Otherwise, it extracts the source (if any) and delegates to <code>resolve_from_parts</code>.<p>The existing string-based methods were updated to use the same infrastructure:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>resolve_str</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>path</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Result</span><span>&LTAssetPath<</span><span style=color:#fa6e32>'static</span><span>>, ParseAssetPathError> {
</span><span>    </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>resolve_internal</span><span>(path</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>false</span><span>)
</span><span>}
</span></code></pre><p>The <code>resolve_internal</code> method now parses the string and then calls <code>resolve_from_parts</code>, ensuring both code paths produce identical results.<p>The PR includes comprehensive test coverage, with each test case verifying both the string-based and AssetPath-based methods produce the same output. For example:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>test</span><span>]
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>resolve_full_path</span><span>() {
</span><span>    </span><span style=color:#fa6e32>let</span><span> base </span><span style=color:#ed9366>= </span><span>AssetPath</span><span style=color:#ed9366>::</span><span>from(</span><span style=color:#86b300>"alice/bob#carol"</span><span>)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#f07171>assert_eq!</span><span>(
</span><span>        base</span><span style=color:#ed9366>.</span><span style=color:#f07171>resolve_str</span><span>(</span><span style=color:#86b300>"/joe/next"</span><span>)</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap</span><span>()</span><span style=color:#61676ccc>,
</span><span>        AssetPath</span><span style=color:#ed9366>::</span><span>from(</span><span style=color:#86b300>"joe/next"</span><span>)
</span><span>    )</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#f07171>assert_eq!</span><span>(
</span><span>        base</span><span style=color:#ed9366>.</span><span style=color:#f07171>resolve</span><span>(</span><span style=color:#ed9366>&</span><span>AssetPath</span><span style=color:#ed9366>::</span><span>parse(</span><span style=color:#86b300>"/joe/next"</span><span>))</span><span style=color:#61676ccc>,
</span><span>        AssetPath</span><span style=color:#ed9366>::</span><span>from(</span><span style=color:#86b300>"joe/next"</span><span>)
</span><span>    )</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><p>This testing approach validates that the new methods are truly equivalent to the old ones, just more efficient when you already have an AssetPath object.<p>The changes also required updates to existing code that used the string-based methods. In <code>bevy_gltf</code> and the asset decompression example, calls to <code>resolve_embed</code> were updated to <code>resolve_embed_str</code> to maintain the same string-based behavior while freeing up the shorter method names for the new AssetPath-based versions.<p>The PR includes a migration guide explaining that <code>AssetPath::resolve</code> and <code>resolve_embed</code> now take <code>&AssetPath</code> directly, and the previous string-based APIs have been renamed to <code>resolve_str</code> and <code>resolve_embed_str</code>. This is a breaking change, but it’s justified by the improved API ergonomics and performance.<p>From a technical perspective, this PR demonstrates several good practices:<ol><li><strong>API design</strong>: When adding new methods, consider whether existing method names should be repurposed for better ergonomics<li><strong>Code reuse</strong>: Extract shared logic into helper methods to maintain consistency<li><strong>Testing</strong>: Add equivalence tests to ensure new implementations match old behavior<li><strong>Documentation</strong>: Update examples and migration guides for breaking changes</ol><p>The refactoring improves performance for common use cases while maintaining full backward compatibility through renamed methods. Developers who have AssetPath objects can now resolve them more efficiently, while code that works with strings continues to work with the <code>_str</code> suffix.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Existing Code] --> B{Has AssetPath?}
</span><span>    B -->|Yes| C[Use resolve/embed directly]
</span><span>    B -->|No| D[Use resolve_str/embed_str]
</span><span>    E[String Input] --> D
</span><span>    F[AssetPath Input] --> C
</span><span>    G[Internal Logic] --> H[resolve_from_parts]
</span><span>    C --> H
</span><span>    D --> I[Parse to AssetPath] --> H
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=1-crates-bevy-asset-src-path-rs-360-129>1. <code>crates/bevy_asset/src/path.rs</code> (+360/-129)</h3><p>This is the main file containing the AssetPath implementation. The changes include:<ul><li>Added new <code>resolve</code> and <code>resolve_embed</code> methods that take <code>&AssetPath</code><li>Renamed existing string-based methods to <code>resolve_str</code> and <code>resolve_embed_str</code><li>Added <code>resolve_from_parts</code> helper method for shared logic<li>Updated documentation with new examples<li>Added comprehensive tests for both old and new APIs</ul><p>Key code changes:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>resolve</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>path</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Result</span><span>&LTAssetPath<</span><span style=color:#fa6e32>'static</span><span>>, ParseAssetPathError> {
</span><span>    </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>resolve_internal</span><span>(path</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>false</span><span>)
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>resolve</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>path</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>AssetPath<'</span><span style=color:#ed9366>_</span><span>>) </span><span style=color:#61676ccc>-> </span><span>AssetPath<</span><span style=color:#fa6e32>'static</span><span>> {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// New implementation using AssetPath directly
</span><span>}
</span><span>
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>resolve_str</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>path</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Result</span><span>&LTAssetPath<</span><span style=color:#fa6e32>'static</span><span>>, ParseAssetPathError> {
</span><span>    </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>resolve_internal</span><span>(path</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>false</span><span>)
</span><span>}
</span></code></pre><h3 id=2-release-content-migration-guides-assetpath-resolve-semantics-md-8-0>2. <code>release-content/migration-guides/assetpath-resolve-semantics.md</code> (+8/-0)</h3><p>Added a migration guide explaining the breaking change:<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span style=color:#ed9366;background-color:#61676c10>`AssetPath::resolve`</span><span> and </span><span style=color:#ed9366;background-color:#61676c10>`AssetPath::resolve_embed`</span><span> no longer accept </span><span style=color:#ed9366;background-color:#61676c10>`&str`</span><span> and now take </span><span style=color:#ed9366;background-color:#61676c10>`&AssetPath`</span><span> directly. The previous string-based APIs have been renamed to </span><span style=color:#ed9366;background-color:#61676c10>`resolve_str`</span><span> and </span><span style=color:#ed9366;background-color:#61676c10>`resolve_embed_str`</span><span>.
</span></code></pre><h3 id=3-crates-bevy-gltf-src-loader-mod-rs-2-2>3. <code>crates/bevy_gltf/src/loader/mod.rs</code> (+2/-2)</h3><p>Updated two calls from <code>resolve_embed</code> to <code>resolve_embed_str</code>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>let</span><span> image_path </span><span style=color:#ed9366>=</span><span> gltf_path
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>resolve_embed</span><span>(uri)
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>map_err</span><span>(|</span><span style=color:#ff8f40>err</span><span>| GltfError</span><span style=color:#ed9366>::</span><span>InvalidImageUri(uri</span><span style=color:#ed9366>.</span><span style=color:#f07171>to_owned</span><span>()</span><span style=color:#61676ccc>,</span><span> err))</span><span style=color:#ed9366>?</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>let</span><span> image_path </span><span style=color:#ed9366>=</span><span> gltf_path
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>resolve_embed_str</span><span>(uri)
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>map_err</span><span>(|</span><span style=color:#ff8f40>err</span><span>| GltfError</span><span style=color:#ed9366>::</span><span>InvalidImageUri(uri</span><span style=color:#ed9366>.</span><span style=color:#f07171>to_owned</span><span>()</span><span style=color:#61676ccc>,</span><span> err))</span><span style=color:#ed9366>?</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=4-examples-asset-asset-decompression-rs-1-1>4. <code>examples/asset/asset_decompression.rs</code> (+1/-1)</h3><p>Similar update from <code>resolve_embed</code> to <code>resolve_embed_str</code>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>let</span><span> contained_path </span><span style=color:#ed9366>=</span><span> compressed_path
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>resolve_embed</span><span>(uncompressed_file_name)
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>map_err</span><span>(|_| GzAssetLoaderError</span><span style=color:#ed9366>::</span><span>IndeterminateFilePath)</span><span style=color:#ed9366>?</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>let</span><span> contained_path </span><span style=color:#ed9366>=</span><span> compressed_path
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>resolve_embed_str</span><span>(uncompressed_file_name)
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>map_err</span><span>(|_| GzAssetLoaderError</span><span style=color:#ed9366>::</span><span>IndeterminateFilePath)</span><span style=color:#ed9366>?</span><span style=color:#61676ccc>;
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><strong>RFC 1808</strong>: The standard for relative URLs that inspired the <code>resolve_embed</code> semantics<li><strong>Bevy Asset System Documentation</strong>: For understanding AssetPath and asset loading<li><strong>API Design Patterns</strong>: For learning about breaking changes and migration strategies<li><strong>Rust Performance Optimization</strong>: For understanding the benefits of avoiding unnecessary allocations</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22416.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>