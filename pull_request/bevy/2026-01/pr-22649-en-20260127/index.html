<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22649 Change camera order ambiguity warning to `warn_once!`
        
    </title><meta content="#22649 Change camera order ambiguity warning to `warn_once!`" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-27</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-01/pr-22649-zh-cn-20260127>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Change camera order ambiguity warning to <code>warn_once!</code><li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22649<li><strong>Author</strong>: natepiano<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, A-Rendering, C-Usability, S-Ready-For-Final-Review<li><strong>Created</strong>: 2026-01-22T17:27:44Z<li><strong>Merged</strong>: 2026-01-27T07:03:38Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h3 id=objective>Objective</h3><p>Fixes #22635<p>Camera order ambiguity warnings currently fire every frame, flooding the console.<h3 id=solution>Solution</h3><ul><li>Change <code>warn!</code> to <code>warn_once!</code> in <code>sort_cameras</code> so the warning only fires once per ambiguity<li>Remove the log filter workaround from <code>ui_target_camera</code> example since the warning is no longer spammy</ul><h3 id=testing>Testing</h3><p>Ran the <code>ui_target_camera</code> example and triggered a camera order ambiguity by clicking to give two cameras the same order. Verified the warning appears exactly once in the logs despite running for many frames afterward.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The PR addresses a straightforward but annoying issue in Bevy’s rendering system: camera order ambiguity warnings that were spamming the console every frame. These warnings occur when multiple active cameras share the same render order value, creating an ambiguous situation where the renderer can’t deterministically decide which camera to prioritize.<p>In the existing implementation, when the <code>sort_cameras</code> system runs each frame (which is necessary to maintain correct rendering order), it would check for ambiguities and log a warning using the standard <code>warn!</code> macro. This meant that if you had two cameras with the same order value, you’d get the same warning message printed to your console 60+ times per second, quickly flooding the output and making it difficult to see other important log messages.<p>The fix is simple but effective: replace <code>warn!</code> with <code>warn_once!</code>. This macro, provided by Bevy’s logging system, ensures that a warning message is only logged once per unique call site and message. This change maintains the warning’s utility for alerting developers to a legitimate configuration issue while eliminating the console spam.<p>The PR also cleans up a workaround in the <code>ui_target_camera</code> example. Previously, to avoid the spammy warnings during example execution, the example was manually configuring the <code>LogPlugin</code> with a filter that suppressed warnings from the camera module entirely. With the warning now appearing only once, this workaround is no longer necessary, so the example reverts to using the default plugin configuration.<p>From an engineering perspective, this change demonstrates good practice in logging: warnings should alert developers to problems without overwhelming them with noise. The <code>warn_once!</code> macro is particularly useful for warnings that occur in systems running every frame, where the underlying condition persists unchanged across multiple frames. This pattern could be applied to other similar warnings in the codebase where repetitive logging adds no additional value.<p>The implementation is minimal - just changing one macro call and removing some configuration code - but the impact on developer experience is significant. Developers can now see the warning once, understand the problem, and fix it, without having to filter through hundreds of identical messages.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[sort_cameras system runs each frame] --> B{Check for camera order ambiguities}
</span><span>    B -->|Ambiguities found| C[warn_once! logs message once]
</span><span>    B -->|No ambiguities| D[Continue normal execution]
</span><span>    C --> E[Developer sees warning once]
</span><span>    E --> F[Developer fixes camera order values]
</span><span>    F --> B
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=1-crates-bevy-render-src-camera-rs-2-1>1. <code>crates/bevy_render/src/camera.rs</code> (+2/-1)</h3><p>This file contains the core change to fix the warning spam. The <code>sort_cameras</code> function now uses <code>warn_once!</code> instead of <code>warn!</code> for camera order ambiguity warnings.<p><strong>Key changes:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before (line 652-657):
</span><span style=color:#fa6e32>if </span><span style=color:#ed9366>!</span><span>ambiguities</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_empty</span><span>() {
</span><span>    </span><span style=color:#f07171>warn!</span><span>(
</span><span>        </span><span style=color:#86b300>"Camera order ambiguities detected for active cameras with the following priorities: {:?}. </span><span style=color:#61676ccc>\
</span><span style=color:#86b300>        To fix this, ensure there is exactly one Camera entity spawned with a given order for a given RenderTarget. </span><span style=color:#61676ccc>\
</span><span style=color:#86b300>        Ambiguities should be resolved because either (1) multiple active cameras were spawned accidentally, which will </span><span style=color:#61676ccc>\
</span><span style=color:#86b300>        result in multiple renders happening on the same window; or (2) one of the cameras should be changed to a different order."</span><span style=color:#61676ccc>,
</span><span>        ambiguities
</span><span>    )</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After (lines 653-658):
</span><span style=color:#fa6e32>if </span><span style=color:#ed9366>!</span><span>ambiguities</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_empty</span><span>() {
</span><span>    </span><span style=color:#f07171>warn_once!</span><span>(
</span><span>        </span><span style=color:#86b300>"Camera order ambiguities detected for active cameras with the following priorities: {:?}. </span><span style=color:#61676ccc>\
</span><span style=color:#86b300>        To fix this, ensure there is exactly one Camera entity spawned with a given order for a given RenderTarget. </span><span style=color:#61676ccc>\
</span><span style=color:#86b300>        Ambiguities should be resolved because either (1) multiple active cameras were spawned accidentally, which will </span><span style=color:#61676ccc>\
</span><span style=color:#86b300>        result in multiple renders happening on the same window; or (2) one of the cameras should be changed to a different order."</span><span style=color:#61676ccc>,
</span><span>        ambiguities
</span><span>    )</span><span style=color:#61676ccc>;
</span></code></pre><p>Additionally, the import for <code>warn_once</code> was added:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>use </span><span>bevy_log</span><span style=color:#ed9366>::</span><span>warn_once</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=2-examples-ui-ui-target-camera-rs-1-7>2. <code>examples/ui/ui_target_camera.rs</code> (+1/-7)</h3><p>This file removes the workaround that was suppressing camera warnings in the example. The example now uses the default <code>LogPlugin</code> configuration instead of a custom one that filtered out camera warnings.<p><strong>Key changes:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before (lines 4-11):
</span><span style=color:#fa6e32>use </span><span>bevy</span><span style=color:#ed9366>::</span><span>log</span><span style=color:#ed9366>::</span><span>LogPlugin</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>use </span><span>bevy</span><span style=color:#ed9366>::</span><span>log</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>DEFAULT_FILTER</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>use </span><span>bevy</span><span style=color:#ed9366>::</span><span>prelude</span><span style=color:#ed9366>::*</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>main</span><span>() {
</span><span>    App</span><span style=color:#ed9366>::</span><span>new()
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>add_plugins</span><span>(DefaultPlugins</span><span style=color:#ed9366>.</span><span style=color:#f07171>set</span><span>(LogPlugin {
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// Disable camera order ambiguity warnings
</span><span>            filter</span><span style=color:#61676ccc>: </span><span style=color:#f07171>format!</span><span>(</span><span style=color:#86b300>"</span><span style=color:#ff8f40>{DEFAULT_FILTER}</span><span style=color:#86b300>,bevy_render::camera=off"</span><span>)</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#ed9366>..</span><span style=color:#55b4d4;font-style:italic>Default</span><span style=color:#ed9366>::</span><span>default()
</span><span>        }))
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>add_systems</span><span>(Startup</span><span style=color:#61676ccc>,</span><span> setup)
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>run</span><span>()</span><span style=color:#61676ccc>;
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After (lines 4-11):
</span><span style=color:#fa6e32>use </span><span>bevy</span><span style=color:#ed9366>::</span><span>prelude</span><span style=color:#ed9366>::*</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>main</span><span>() {
</span><span>    App</span><span style=color:#ed9366>::</span><span>new()
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>add_plugins</span><span>(DefaultPlugins)
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>add_systems</span><span>(Startup</span><span style=color:#61676ccc>,</span><span> setup)
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>run</span><span>()</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><p><strong>Bevy Logging Documentation</strong>: For more information on Bevy’s logging system and available macros like <code>warn_once!</code>, see the <a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_log/latest/bevy_log/ target=_blank>Bevy Logging documentation</a>.</p><li><p><strong>Camera Ordering in Bevy</strong>: To understand camera ordering and why ambiguities matter, refer to the <a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_render/latest/bevy_render/camera/index.html target=_blank>Bevy Camera documentation</a> and the <code>Camera</code> component documentation.</p><li><p><strong>Rust Logging Best Practices</strong>: For general guidance on effective logging in Rust applications, the <a rel="noopener nofollow noreferrer" href=https://docs.rs/log/latest/log/ target=_blank>Rust Log crate documentation</a> provides useful patterns and conventions.</p><li><p><strong>Issue #22635</strong>: The original issue report provides additional context about the problem and user experience impact: https://github.com/bevyengine/bevy/issues/22635</p><li><p><strong>Bevy ECS Systems</strong>: To understand how systems like <code>sort_cameras</code> run each frame in Bevy’s ECS, see the <a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_ecs/latest/bevy_ecs/system/index.html target=_blank>Bevy ECS Systems documentation</a>.</p></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22649.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>