<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22397 Remove the `Component` derive from `FontSource`.
        
    </title><meta content="#22397 Remove the `Component` derive from `FontSource`." property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-05</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-01/pr-22397-zh-cn-20260105>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Remove the <code>Component</code> derive from <code>FontSource</code>.<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22397<li><strong>Author</strong>: ickshonpe<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Bug, D-Trivial, S-Ready-For-Final-Review, A-Text<li><strong>Created</strong>: 2026-01-05T21:51:28Z<li><strong>Merged</strong>: 2026-01-05T23:05:36Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p><code>FontSource</code> is not a <code>Component</code>, the derive is misleading.<h2 id=solution>Solution</h2><p>Remove the <code>Component</code> derive from <code>FontSource</code>.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This pull request addresses a straightforward but important issue in Bevy’s text system. The problem was that the <code>FontSource</code> struct in the text module had an incorrect <code>Component</code> derive macro attached to it. This was misleading because <code>FontSource</code> is not actually used as a component in Bevy’s Entity Component System (ECS).<p>The issue represents a form of technical debt that can cause confusion for developers working with the codebase. When a struct is marked as a <code>Component</code>, developers reasonably expect it to be usable in ECS queries, to be attachable to entities, and to follow the patterns established for other components in the system. However, <code>FontSource</code> doesn’t serve this purpose - it’s a data structure used internally within the text system to specify how fonts are sourced, either by referencing a font asset or by family name for system font lookup.<p>Looking at the code context, <code>FontSource</code> appears in text-related structures but isn’t registered or used as a component in Bevy’s ECS. The derive macro being present created a false signal about the type’s intended usage. This kind of discrepancy, while small, can lead to wasted time for developers who might try to use it as a component, only to find it doesn’t work as expected.<p>The solution was minimal and surgical: simply removing <code>Component</code> from the derive attributes list. This correction aligns the code’s representation with its actual usage. The other derives - <code>Clone</code>, <code>Debug</code>, <code>Reflect</code>, and <code>PartialEq</code> - remain appropriate for the type’s actual role in the system.<p>From an engineering perspective, this change improves code clarity and reduces cognitive overhead. Developers reading the <code>FontSource</code> definition now see an accurate representation of what the type is and how it should be used. This aligns with good software engineering practices where code should communicate intent clearly and avoid misleading signals.<p>The PR also demonstrates the value of small, focused improvements in maintaining a codebase. While this change doesn’t affect runtime behavior or add features, it reduces technical debt and improves developer experience. These kinds of maintenance tasks are important for keeping a codebase clean and understandable over time.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Text System] --> B[FontSource Struct]
</span><span>    B --> C[Used internally for font resolution]
</span><span>    B --> D[NOT used as ECS Component]
</span><span>    C --> E[Asset-based fonts]
</span><span>    C --> F[System font lookup]
</span><span>    
</span><span>    style D stroke:#f00,stroke-width:2px
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><p><strong>crates/bevy_text/src/text.rs</strong> (+1/-1) This file contains the definition of the <code>FontSource</code> struct and related text system functionality. The change removes the misleading <code>Component</code> derive attribute.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_text/src/text.rs
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Clone</span><span style=color:#61676ccc>,</span><span> Debug</span><span style=color:#61676ccc>,</span><span> Reflect</span><span style=color:#61676ccc>,</span><span> PartialEq)]
</span><span style=color:#abb0b6;font-style:italic>/// Specifies how the font face for a text span is sourced.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// A `FontSource` can either reference a font asset or identify a font by family name to be
</span><span style=color:#abb0b6;font-style:italic>/// sourced from the operating system.
</span><span style=color:#fa6e32>pub enum </span><span style=color:#399ee6>FontSource </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// References a font asset (handled via `Assets&LTFont>`).
</span><span>    Asset(Handle&LTFont>)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Identifies a font by family name to be sourced from the operating system.
</span><span>    System(</span><span style=color:#55b4d4;font-style:italic>String</span><span>)</span><span style=color:#61676ccc>,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Clone</span><span style=color:#61676ccc>,</span><span> Debug</span><span style=color:#61676ccc>,</span><span> Reflect</span><span style=color:#61676ccc>,</span><span> PartialEq)]
</span><span style=color:#abb0b6;font-style:italic>/// Specifies how the font face for a text span is sourced.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// A `FontSource` can either reference a font asset or identify a font by family name to be
</span><span style=color:#abb0b6;font-style:italic>/// sourced from the operating system.
</span><span style=color:#fa6e32>pub enum </span><span style=color:#399ee6>FontSource </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// References a font asset (handled via `Assets&LTFont>`).
</span><span>    Asset(Handle&LTFont>)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Identifies a font by family name to be sourced from the operating system.
</span><span>    System(</span><span style=color:#55b4d4;font-style:italic>String</span><span>)</span><span style=color:#61676ccc>,
</span><span>}
</span></code></pre><p>The change removes <code>Component</code> from the derive macro, correcting the inaccurate representation that <code>FontSource</code> is meant to be used as an ECS component. The struct’s purpose and functionality remain unchanged - it’s still used to specify font sources within the text system, but now its definition accurately reflects that it’s not a component type.<h2 id=further-reading>Further Reading</h2><ol><li><strong>Bevy ECS Components Documentation</strong>: Understanding how components work in Bevy’s Entity Component System<li><strong>Rust Derive Macros</strong>: Documentation on how derive macros work in Rust and what each common derive (Clone, Debug, etc.) provides<li><strong>Bevy Text System</strong>: Documentation on Bevy’s text rendering system and how fonts are managed<li><strong>Technical Debt in Software Engineering</strong>: Resources on identifying and addressing technical debt in codebases<li><strong>Code Clarity Principles</strong>: Best practices for writing code that clearly communicates intent and reduces cognitive load for developers</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22397.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>