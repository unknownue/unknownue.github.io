<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22613 Bump the accesskit group with 2 updates
        
    </title><meta content="#22613 Bump the accesskit group with 2 updates" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-21</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-01/pr-22613-zh-cn-20260121>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Bump the accesskit group with 2 updates<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22613<li><strong>Author</strong>: mnmaita<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Dependencies, A-Accessibility, S-Ready-For-Final-Review, D-Straightforward<li><strong>Created</strong>: 2026-01-20T23:23:45Z<li><strong>Merged</strong>: 2026-01-21T17:55:13Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Closes #22540.</ul><h2 id=solution>Solution</h2><ul><li>Updates <code>accesskit</code> to 0.23.0.<li>Updates <code>accesskit_winit</code> to 0.31.0.<li>Addressed breaking changes (multiple tree support).</ul><h2 id=testing>Testing</h2><ul><li>CI checks.</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a straightforward but necessary dependency update task. The core issue was that Bevy needed to update its accessibility framework dependencies to newer versions, specifically moving from accesskit 0.22 to 0.23 and accesskit_winit from 0.30 to 0.31. These updates were required to keep the engine current with upstream improvements and bug fixes in the accessibility ecosystem.<p>The primary technical challenge was handling a breaking change in the accesskit API. Version 0.23 introduced support for multiple accessibility trees, which required adding a new <code>tree_id</code> field to <code>TreeUpdate</code> structs. Previously, accesskit assumed a single accessibility tree per application, but with the 0.23 release, it gained the ability to manage multiple trees concurrently - a feature that could support more complex applications with multiple independent UI contexts.<p>The implementation approach was minimal and focused: update the dependency versions in all relevant Cargo.toml files, then make the necessary code changes to accommodate the API changes. The developer identified that the <code>TreeUpdate</code> struct construction in two locations needed to include the new <code>TreeId::ROOT</code> field, maintaining backward compatibility for applications that only need a single tree.<p>From an architectural perspective, this change demonstrates how Bevy handles dependency updates that include breaking API changes. The approach is pragmatic: update the dependencies, then make the minimal necessary adjustments to restore functionality. The fact that only two code locations needed modification speaks to the clean abstraction boundaries in Bevy’s accessibility implementation.<p>The impact is primarily maintenance-oriented. Keeping dependencies current reduces technical debt, ensures access to security patches, and maintains compatibility with the broader Rust ecosystem. For users, this update should be transparent unless they’re directly working with accessibility APIs, in which case they’ll benefit from the new multiple tree support capabilities.<p>The engineering decision here was straightforward - accept the breaking change and update accordingly. No alternatives were considered because dependency updates of this nature are typically mandatory for long-term maintenance. The implementation shows good practices: checking all usage sites of the updated API and making consistent, minimal changes.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[accesskit 0.22 → 0.23] --> B[TreeUpdate API change]
</span><span>    C[accesskit_winit 0.30 → 0.31] --> D[Breaking changes]
</span><span>    B --> E[Add TreeId::ROOT field]
</span><span>    D --> E
</span><span>    E --> F[Update bevy_winit accessibility.rs]
</span><span>    E --> G[Update Cargo.toml files]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=1-crates-bevy-winit-cargo-toml-2-2>1. <code>crates/bevy_winit/Cargo.toml</code> (+2/-2)</h3><p><strong>Purpose</strong>: Update accesskit_winit dependency from 0.30 to 0.31 and accesskit from 0.22 to 0.23.<p><strong>Key changes</strong>:<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># Before:
</span><span style=color:#399ee6>accesskit_winit </span><span>= { </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"0.30"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>default-features </span><span>= </span><span style=color:#ff8f40>false</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>features </span><span>= [
</span><span>  </span><span style=color:#86b300>"rwh_06"</span><span style=color:#61676ccc>,
</span><span>] }
</span><span style=color:#399ee6>accesskit </span><span>= </span><span style=color:#86b300>"0.22"
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span style=color:#399ee6>accesskit_winit </span><span>= { </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"0.31"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>default-features </span><span>= </span><span style=color:#ff8f40>false</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>features </span><span>= [
</span><span>  </span><span style=color:#86b300>"rwh_06"</span><span style=color:#61676ccc>,
</span><span>] }
</span><span style=color:#399ee6>accesskit </span><span>= </span><span style=color:#86b300>"0.23"
</span></code></pre><h3 id=2-crates-bevy-winit-src-accessibility-rs-3-1>2. <code>crates/bevy_winit/src/accessibility.rs</code> (+3/-1)</h3><p><strong>Purpose</strong>: Handle the breaking API change in accesskit 0.23 by adding the required <code>tree_id</code> field to <code>TreeUpdate</code> structs.<p><strong>Key changes</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Updated import
</span><span style=color:#fa6e32>use </span><span>accesskit</span><span style=color:#ed9366>::</span><span>{
</span><span>    ActionHandler</span><span style=color:#61676ccc>,</span><span> ActionRequest</span><span style=color:#61676ccc>,</span><span> ActivationHandler</span><span style=color:#61676ccc>,</span><span> DeactivationHandler</span><span style=color:#61676ccc>,</span><span> Node</span><span style=color:#61676ccc>,</span><span> NodeId</span><span style=color:#61676ccc>,</span><span> Role</span><span style=color:#61676ccc>,</span><span> Tree</span><span style=color:#61676ccc>,
</span><span>    TreeId</span><span style=color:#61676ccc>,</span><span> TreeUpdate</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// Added TreeId import
</span><span>}</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// In create_window_update function:
</span><span>TreeUpdate {
</span><span>    nodes</span><span style=color:#61676ccc>: </span><span style=color:#f07171>vec!</span><span>[(accesskit_window_id</span><span style=color:#61676ccc>,</span><span> root)]</span><span style=color:#61676ccc>,
</span><span>    tree</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(tree)</span><span style=color:#61676ccc>,
</span><span>    tree_id</span><span style=color:#61676ccc>: </span><span>TreeId</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>ROOT</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// Added required field
</span><span>    focus</span><span style=color:#61676ccc>:</span><span> accesskit_window_id</span><span style=color:#61676ccc>,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// In update_adapter function:
</span><span>TreeUpdate {
</span><span>    nodes</span><span style=color:#61676ccc>:</span><span> to_update</span><span style=color:#61676ccc>,
</span><span>    tree</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>None</span><span style=color:#61676ccc>,
</span><span>    tree_id</span><span style=color:#61676ccc>: </span><span>TreeId</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>ROOT</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// Added required field
</span><span>    focus</span><span style=color:#61676ccc>:</span><span> NodeId(focus</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>0.</span><span style=color:#f07171>unwrap_or</span><span>(primary_window_id)</span><span style=color:#ed9366>.</span><span style=color:#f07171>to_bits</span><span>())</span><span style=color:#61676ccc>,
</span><span>}
</span></code></pre><h3 id=3-cargo-toml-1-1-and-other-crate-cargo-toml-files>3. <code>Cargo.toml</code> (+1/-1) and other crate Cargo.toml files</h3><p><strong>Purpose</strong>: Update accesskit dependency version from 0.22 to 0.23 across the entire project.<p><strong>Key changes</strong>: Multiple files updated with the same pattern:<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># Before:
</span><span style=color:#399ee6>accesskit </span><span>= </span><span style=color:#86b300>"0.22"
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span style=color:#399ee6>accesskit </span><span>= </span><span style=color:#86b300>"0.23"
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/accesskit/latest/accesskit/ target=_blank>AccessKit Documentation</a> - The official API documentation for the accesskit crate<li><a rel="noopener nofollow noreferrer" href=https://github.com/AccessKit/accesskit target=_blank>AccessKit GitHub Repository</a> - Source code and issue tracking for the accesskit project<li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html target=_blank>Rust Dependency Management</a> - Cargo’s documentation on managing dependencies<li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/quick-start/platform/accessibility/ target=_blank>Bevy Accessibility Guide</a> - Bevy’s documentation on implementing accessibility features<li><a rel="noopener nofollow noreferrer" href=https://www.w3.org/TR/WCAG22/ target=_blank>WCAG 2.2 Guidelines</a> - Web Content Accessibility Guidelines that inform accesskit’s design</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22613.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>