<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22423 Allow reading the individual accesses of a `FilteredAccessSet`.
        
    </title><meta content="#22423 Allow reading the individual accesses of a `FilteredAccessSet`." property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-08</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-01/pr-22423-zh-cn-20260108>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Allow reading the individual accesses of a <code>FilteredAccessSet</code>.<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22423<li><strong>Author</strong>: andriyDev<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Feature, D-Trivial, A-ECS, S-Ready-For-Final-Review<li><strong>Created</strong>: 2026-01-08T08:23:16Z<li><strong>Merged</strong>: 2026-01-08T09:19:06Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>A <code>FilteredAccessSet</code> doesn’t give access to the individual filters. This is sad for introspecting the access of systems (e.g., for visualizing systems in a schedule).</ul><h2 id=solution>Solution</h2><ul><li>Add a getter for <code>filtered_accesses</code>.</ul><h1 id=the-story-of-this-pull-request>The Story of This Pull Request</h1><p>The PR addresses a straightforward but important need in the Bevy ECS (Entity Component System) for better introspection capabilities. When developers work with Bevy’s scheduling system, they often need to understand what components systems access and how they interact. This is particularly important for debugging performance issues, understanding system dependencies, and building visualization tools for schedules.<p>Before this change, the <code>FilteredAccessSet</code> struct provided access to the combined access information through the <code>combined_access()</code> method, but did not expose the individual <code>FilteredAccess</code> entries that make up the set. This limitation made it difficult to analyze system behavior at a granular level. For example, when building schedule visualization tools or debugging system conflicts, developers couldn’t easily see which specific components each system was accessing with what filters.<p>The solution implemented is minimal and focused. A single getter method was added to the <code>FilteredAccessSet</code> implementation that returns a reference to the underlying vector of <code>FilteredAccess</code> objects. This approach follows Rust’s borrowing patterns correctly - it returns an immutable reference (<code>&[FilteredAccess]</code>) rather than exposing the internal vector directly, maintaining encapsulation while providing the necessary access.<p>The method is marked with <code>#[inline]</code>, which is a reasonable optimization for a simple getter that just returns a reference to a field. This allows the compiler to potentially eliminate the function call overhead in release builds.<p>The implementation doesn’t change any existing behavior or add new functionality beyond the getter. It simply makes existing internal data accessible for introspection purposes. This is a classic example of the “make internal state observable” pattern - keeping the core logic unchanged but adding observability for debugging and tooling.<p>From an architectural perspective, this change aligns with Bevy’s growing ecosystem of development tools. As Bevy matures, having better introspection capabilities becomes increasingly important for both engine developers and users building complex applications. The ability to inspect <code>FilteredAccess</code> entries directly enables better debugging tools, performance analyzers, and schedule visualizers.<p>The change is backward compatible - existing code continues to work unchanged, and the new method provides additional functionality without breaking any APIs. The simplicity of the change (adding a single getter method) means there’s minimal maintenance overhead and no performance impact on existing code paths.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[FilteredAccessSet] --> B[combined_access: &CombinedAccess]
</span><span>    A --> C[filtered_accesses: &[FilteredAccess]]
</span><span>    C --> D[Individual FilteredAccess objects]
</span><span>    D --> E[Component access patterns]
</span><span>    D --> F[Filter conditions]
</span><span>    
</span><span>    style A fill:#e1f5fe
</span><span>    style C fill:#f3e5f5
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><p><strong>crates/bevy_ecs/src/query/access.rs</strong> (+6/-0)<p>This file contains the implementation of access tracking for Bevy’s ECS queries. The change adds a single public method to expose the internal <code>filtered_accesses</code> vector.<p><strong>Before the change:</strong> The <code>FilteredAccessSet</code> struct had methods to access the combined access information, but no way to inspect individual filtered accesses.<p><strong>After the change:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// Returns a reference to the filtered accesses of the set.
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>inline</span><span>]
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>filtered_accesses</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#ed9366>&</span><span>[FilteredAccess] {
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filtered_accesses
</span><span>}
</span></code></pre><p>This method provides read-only access to the vector of <code>FilteredAccess</code> objects. Each <code>FilteredAccess</code> contains information about which components are accessed and any filter conditions applied. The method signature returns a slice reference (<code>&[FilteredAccess]</code>), which is appropriate for a getter that doesn’t need to transfer ownership.<p>The placement of this method in the code is logical - it’s added right after the existing <code>combined_access()</code> getter, keeping related methods together. The documentation comment clearly states what the method returns, and the <code>#[inline]</code> attribute suggests the method is simple enough to be inlined by the compiler.<h2 id=further-reading>Further Reading</h2><ol><li><p><strong>Bevy ECS Documentation</strong>: The official Bevy ECS documentation provides comprehensive information about the entity component system architecture, queries, and access patterns.</p><li><p><strong>Rust Borrowing and References</strong>: Understanding Rust’s ownership model and borrowing rules is essential for working with getter methods that return references.</p><li><p><strong>Introspection in Game Engines</strong>: Articles and talks about debugging and profiling game engines often discuss the importance of introspection capabilities for development tools.</p><li><p><strong>Bevy Schedule Visualization</strong>: Community tools and projects that visualize Bevy schedules can benefit from this change to provide more detailed information about system dependencies.</p><li><p><strong>API Design Patterns</strong>: Resources on API design, particularly around exposing internal state for debugging while maintaining encapsulation.</p></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22423.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>