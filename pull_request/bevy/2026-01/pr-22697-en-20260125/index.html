<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22697 Update `sysinfo` version to `0.38.0`
        
    </title><meta content="#22697 Update `sysinfo` version to `0.38.0`" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-25</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-01/pr-22697-zh-cn-20260125>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Update <code>sysinfo</code> version to <code>0.38.0</code><li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22697<li><strong>Author</strong>: GuillaumeGomez<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Dependencies, S-Ready-For-Final-Review<li><strong>Created</strong>: 2026-01-25T15:07:32Z<li><strong>Merged</strong>: 2026-01-25T22:00:09Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p>This new version fixes some bugs and adds support for <code>NetBSD</code>.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This pull request addresses a routine but important maintenance task: updating a system information dependency to gain bug fixes and expanded platform support. The Bevy engine uses the <code>sysinfo</code> crate to collect system diagnostics and hardware information, which powers features like system resource monitoring and platform-specific optimizations.<p>The problem was straightforward - the Bevy diagnostic module was locked to an older version of <code>sysinfo</code> (0.37.0), which lacked support for NetBSD and contained known bugs that had been addressed in subsequent releases. For a game engine targeting multiple platforms, maintaining current dependencies is crucial for ensuring compatibility, security, and access to the latest features across all supported operating systems.<p>The solution approach was minimal and targeted: update the version constraint in the Cargo.toml file from 0.37.0 to 0.38.0. This required updating the version in two separate dependency declarations because Bevy’s diagnostic module configures <code>sysinfo</code> differently based on the target operating system. The macOS configuration is separate due to Apple’s platform restrictions, while other platforms share a common feature set.<p>The implementation reveals an important pattern in Rust dependency management for cross-platform crates. Bevy uses conditional compilation via <code>cfg</code> attributes to include platform-specific dependencies with appropriate feature flags. The update needed to be applied consistently across both conditional dependency blocks:<ol><li>For macOS targets, the version was updated while preserving the “apple-app-store” and “system” features<li>For other platforms (Linux, Windows, Android, FreeBSD), the version was updated and NetBSD was added to the target condition list</ol><p>The technical insight here is in understanding how Rust’s Cargo handles conditional dependencies. By specifying <code>target.'cfg(...)'.dependencies</code>, the build system only includes these dependencies when building for the specified target configurations. This minimizes the dependency graph for platforms that don’t need <code>sysinfo</code> and avoids pulling in unnecessary code.<p>The impact of this change is threefold:<ol><li>NetBSD users can now use Bevy’s diagnostic features<li>Bug fixes from <code>sysinfo</code> 0.38.0 are now available across all supported platforms<li>The dependency remains current, reducing technical debt and ensuring compatibility with the broader Rust ecosystem</ol><p>From an engineering perspective, this PR demonstrates proper dependency maintenance practices. Regular updates to minor versions of well-maintained dependencies typically bring bug fixes and performance improvements with minimal risk of breaking changes. The fact that only version numbers and a platform condition needed updating suggests good API stability in the <code>sysinfo</code> crate between these releases.<p>The change also highlights the importance of comprehensive platform targeting in game engines. By explicitly adding NetBSD to the condition, the maintainers ensure that the dependency is correctly included for this platform without affecting others. This careful platform targeting prevents build errors and ensures consistent functionality across the engine’s supported operating systems.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[bevy_diagnostic crate] --> B[Dependency: sysinfo]
</span><span>    B --> C[Version: 0.38.0]
</span><span>    B --> D[Platform-specific configuration]
</span><span>    D --> E[macOS: apple-app-store, system features]
</span><span>    D --> F[Other Platforms: system feature]
</span><span>    F --> G[Linux, Windows, Android]
</span><span>    F --> H[FreeBSD, NetBSD]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-diagnostic-cargo-toml-4-4><code>crates/bevy_diagnostic/Cargo.toml</code> (+4/-4)</h3><p>This file contains the dependency configuration for Bevy’s diagnostic subsystem. The changes update the <code>sysinfo</code> crate version and extend platform support.<p><strong>Before:</strong><pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># macOS
</span><span>[</span><span style=color:#399ee6>target</span><span style=color:#61676ccc>.</span><span style=color:#86b300>'cfg(all(target_os="macos"))'</span><span style=color:#61676ccc>.</span><span style=color:#399ee6>dependencies</span><span>]
</span><span style=color:#abb0b6;font-style:italic># Some features of sysinfo are not supported by apple. This will disable those features on apple devices
</span><span style=color:#399ee6>sysinfo </span><span>= { </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"0.37.0"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>optional </span><span>= </span><span style=color:#ff8f40>true</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>default-features </span><span>= </span><span style=color:#ff8f40>false</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>features </span><span>= [
</span><span>  </span><span style=color:#86b300>"apple-app-store"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"system"</span><span style=color:#61676ccc>,
</span><span>] }
</span><span>
</span><span style=color:#abb0b6;font-style:italic># Only include when on linux/windows/android/freebsd
</span><span>[</span><span style=color:#399ee6>target</span><span style=color:#61676ccc>.</span><span style=color:#86b300>'cfg(any(target_os = "linux", target_os = "windows", target_os = "android", target_os = "freebsd"))'</span><span style=color:#61676ccc>.</span><span style=color:#399ee6>dependencies</span><span>]
</span><span style=color:#399ee6>sysinfo </span><span>= { </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"0.37.0"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>optional </span><span>= </span><span style=color:#ff8f40>true</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>default-features </span><span>= </span><span style=color:#ff8f40>false</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>features </span><span>= [
</span><span>  </span><span style=color:#86b300>"system"</span><span style=color:#61676ccc>,
</span><span>] }
</span></code></pre><p><strong>After:</strong><pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># macOS
</span><span>[</span><span style=color:#399ee6>target</span><span style=color:#61676ccc>.</span><span style=color:#86b300>'cfg(all(target_os="macos"))'</span><span style=color:#61676ccc>.</span><span style=color:#399ee6>dependencies</span><span>]
</span><span style=color:#abb0b6;font-style:italic># Some features of sysinfo are not supported by apple. This will disable those features on apple devices
</span><span style=color:#399ee6>sysinfo </span><span>= { </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"0.38.0"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>optional </span><span>= </span><span style=color:#ff8f40>true</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>default-features </span><span>= </span><span style=color:#ff8f40>false</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>features </span><span>= [
</span><span>  </span><span style=color:#86b300>"apple-app-store"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"system"</span><span style=color:#61676ccc>,
</span><span>] }
</span><span>
</span><span style=color:#abb0b6;font-style:italic># Only include when on linux/windows/android/freebsd/netbsd
</span><span>[</span><span style=color:#399ee6>target</span><span style=color:#61676ccc>.</span><span style=color:#86b300>'cfg(any(target_os = "linux", target_os = "windows", target_os = "android", target_os = "freebsd", target_os = "netbsd"))'</span><span style=color:#61676ccc>.</span><span style=color:#399ee6>dependencies</span><span>]
</span><span style=color:#399ee6>sysinfo </span><span>= { </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"0.38.0"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>optional </span><span>= </span><span style=color:#ff8f40>true</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>default-features </span><span>= </span><span style=color:#ff8f40>false</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>features </span><span>= [
</span><span>  </span><span style=color:#86b300>"system"</span><span style=color:#61676ccc>,
</span><span>] }
</span></code></pre><p><strong>Changes:</strong><ol><li>Updated <code>sysinfo</code> version from <code>0.37.0</code> to <code>0.38.0</code> in both dependency declarations<li>Added <code>target_os = "netbsd"</code> to the second dependency’s condition list<li>Updated the comment to reflect the new platform inclusion</ol><p>These changes ensure that:<ul><li>The diagnostic system uses the latest <code>sysinfo</code> version with bug fixes<li>NetBSD is properly supported as a target platform<li>Platform-specific feature configurations remain intact</ul><h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/sysinfo/latest/sysinfo/ target=_blank>sysinfo crate documentation</a> - Official documentation for the system information library<li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html#platform-specific-dependencies target=_blank>Cargo conditional dependencies</a> - How to specify platform-specific dependencies in Rust<li><a rel="noopener nofollow noreferrer" href=https://www.netbsd.org/ target=_blank>NetBSD operating system</a> - Official NetBSD website for understanding this target platform<li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/cargo/reference/semver.html target=_blank>Semantic Versioning in Rust</a> - How versioning works in the Rust ecosystem</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22697.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>