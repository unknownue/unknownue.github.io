<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22337 Use toggle function to pause/unpause
        
    </title><meta content="#22337 Use toggle function to pause/unpause" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-01</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-01/pr-22337-zh-cn-20260101>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Use toggle function to pause/unpause<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22337<li><strong>Author</strong>: GitGhillie<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: None<li><strong>Created</strong>: 2026-01-01T14:34:19Z<li><strong>Merged</strong>: 2026-01-01T17:57:49Z<li><strong>Merged By</strong>: mockersf</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Avoid code duplication<h2 id=solution>Solution</h2><p>Use the newly added toggle function<h2 id=testing>Testing</h2><p>Ran the example<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This pull request addresses a straightforward code quality issue in Bevy’s examples: eliminating duplicated logic for toggling the pause state of virtual time. The changes focus on two example files that demonstrate Bevy’s gizmo system in 2D and 3D contexts.<p>The core problem was that both examples contained identical manual implementations for toggling the pause state. When a user pressed the spacebar, the code would check if the virtual time was currently paused, then either unpause or pause it accordingly. This pattern is common in game engines where developers need to implement pause functionality, but it represents unnecessary code duplication when a dedicated toggle method exists.<p>The solution leverages a recently added <code>toggle()</code> method on the <code>Time&LTVirtual></code> resource. This method encapsulates the pause/unpause logic in a single, reusable function call. The implementation change is minimal but effective: in both example files, the conditional logic block is replaced with a direct call to <code>virtual_time.toggle()</code>.<p>From an engineering perspective, this change follows the DRY (Don’t Repeat Yourself) principle. The original code had several issues: it was verbose, required manual state checking, and duplicated the same logic in multiple places. The new approach is cleaner, more maintainable, and reduces the cognitive load when reading the code. If the toggle logic ever needs to change (for example, to add additional side effects or logging), it can be updated in one place rather than multiple locations.<p>The technical context involves Bevy’s time system, which provides both real and virtual time tracking. Virtual time can be paused, sped up, or slowed down relative to real time, which is useful for debugging, cutscenes, or game mechanics like bullet time. The <code>Time&LTVirtual></code> resource manages this virtual time state, and the newly added <code>toggle()</code> method provides a convenient interface for changing the pause state without requiring the caller to manage the state logic.<p>This change also serves as a good example for Bevy users. By updating the official examples to use the new <code>toggle()</code> method, the PR demonstrates best practices and encourages users to adopt the more concise API in their own code. Examples in a game engine’s documentation serve as both teaching tools and reference implementations, so keeping them up-to-date with the latest API improvements is important.<p>The testing approach was straightforward - running the examples to verify the pause functionality still works correctly. Since the change is essentially a refactoring that doesn’t alter behavior, comprehensive testing beyond confirming the examples still compile and run was unnecessary.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[User Presses Spacebar] --> B[Example Code]
</span><span>    B --> C{Original Implementation}
</span><span>    C --> D[Check if paused]
</span><span>    D --> E[If paused: unpause]
</span><span>    D --> F[If not paused: pause]
</span><span>    B --> G{New Implementation}
</span><span>    G --> H[Call toggle() method]
</span><span>    H --> I[Time&LTVirtual> Resource]
</span><span>    I --> J[Encapsulated toggle logic]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=examples-gizmos-2d-gizmos-rs-1-5><code>examples/gizmos/2d_gizmos.rs</code> (+1/-5)</h3><p><strong>Change</strong>: Replaced manual pause/unpause toggle logic with a single <code>toggle()</code> method call.<p><strong>Code Before:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>if</span><span> keyboard</span><span style=color:#ed9366>.</span><span style=color:#f07171>just_pressed</span><span>(KeyCode</span><span style=color:#ed9366>::</span><span>Space) {
</span><span>    </span><span style=color:#fa6e32>if</span><span> virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_paused</span><span>() {
</span><span>        virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>unpause</span><span>()</span><span style=color:#61676ccc>;
</span><span>    } </span><span style=color:#fa6e32>else </span><span>{
</span><span>        virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>pause</span><span>()</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>}
</span></code></pre><p><strong>Code After:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>if</span><span> keyboard</span><span style=color:#ed9366>.</span><span style=color:#f07171>just_pressed</span><span>(KeyCode</span><span style=color:#ed9366>::</span><span>Space) {
</span><span>    virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>toggle</span><span>()</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><p><strong>Why this matters</strong>: This change reduces 5 lines of code to 1 line while maintaining identical functionality. The <code>toggle()</code> method encapsulates the conditional logic that was previously duplicated in multiple example files.<h3 id=examples-gizmos-3d-gizmos-rs-1-5><code>examples/gizmos/3d_gizmos.rs</code> (+1/-5)</h3><p><strong>Change</strong>: Identical change to the 2D example - replaced manual toggle logic with <code>toggle()</code> method.<p><strong>Code Before:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>if</span><span> keyboard</span><span style=color:#ed9366>.</span><span style=color:#f07171>just_pressed</span><span>(KeyCode</span><span style=color:#ed9366>::</span><span>Space) {
</span><span>    </span><span style=color:#fa6e32>if</span><span> virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_paused</span><span>() {
</span><span>        virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>unpause</span><span>()</span><span style=color:#61676ccc>;
</span><span>    } </span><span style=color:#fa6e32>else </span><span>{
</span><span>        virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>pause</span><span>()</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>}
</span></code></pre><p><strong>Code After:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>if</span><span> keyboard</span><span style=color:#ed9366>.</span><span style=color:#f07171>just_pressed</span><span>(KeyCode</span><span style=color:#ed9366>::</span><span>Space) {
</span><span>    virtual_time</span><span style=color:#ed9366>.</span><span style=color:#f07171>toggle</span><span>()</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><p><strong>Why this matters</strong>: This demonstrates consistency across examples. Both 2D and 3D gizmo examples now use the same clean API for toggling pause state, making the codebase more maintainable and providing consistent examples for users to follow.<h2 id=further-reading>Further Reading</h2><ol><li><strong>Bevy Time System Documentation</strong>: For understanding how virtual time works in Bevy and the available APIs for time manipulation<li><strong>DRY Principle</strong>: The “Don’t Repeat Yourself” principle in software engineering emphasizes reducing repetition in code<li><strong>Bevy Gizmos</strong>: Documentation on Bevy’s gizmo system for debugging and visualization in both 2D and 3D contexts<li><strong>Refactoring Techniques</strong>: Martin Fowler’s refactoring patterns provide guidance on improving code structure without changing behavior</ol><h1 id=full-code-diff>Full Code Diff</h1><pre style=color:#61676c;background-color:#fafafa><code><span>diff --git a/examples/gizmos/2d_gizmos.rs b/examples/gizmos/2d_gizmos.rs
</span><span>index 9f060e6d20c48..50bd46d3b010d 100644
</span><span>--- a/examples/gizmos/2d_gizmos.rs
</span><span>+++ b/examples/gizmos/2d_gizmos.rs
</span><span>@@ -210,10 +210,6 @@ fn update_config(
</span><span>         };
</span><span>     }
</span><span>     if keyboard.just_pressed(KeyCode::Space) {
</span><span>-        if virtual_time.is_paused() {
</span><span>-            virtual_time.unpause();
</span><span>-        } else {
</span><span>-            virtual_time.pause();
</span><span>-        }
</span><span>+        virtual_time.toggle();
</span><span>     }
</span><span> }
</span><span>diff --git a/examples/gizmos/3d_gizmos.rs b/examples/gizmos/3d_gizmos.rs
</span><span>index 56478e4fb1c77..aac66225779b8 100644
</span><span>--- a/examples/gizmos/3d_gizmos.rs
</span><span>+++ b/examples/gizmos/3d_gizmos.rs
</span><span>@@ -292,10 +292,6 @@ fn update_config(
</span><span>         config_store.config_mut::&LTAabbGizmoConfigGroup>().1.draw_all ^= true;
</span><span>     }
</span><span>     if keyboard.just_pressed(KeyCode::Space) {
</span><span>-        if virtual_time.is_paused() {
</span><span>-            virtual_time.unpause();
</span><span>-        } else {
</span><span>-            virtual_time.pause();
</span><span>-        }
</span><span>+        virtual_time.toggle();
</span><span>     }
</span><span> }
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22337.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>