<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22390 Remove system fonts test code from the `text` example.
        
    </title><meta content="#22390 Remove system fonts test code from the `text` example." property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-05</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-01/pr-22390-zh-cn-20260105>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Remove system fonts test code from the <code>text</code> example.<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22390<li><strong>Author</strong>: ickshonpe<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, C-Examples, S-Ready-For-Final-Review, A-Text<li><strong>Created</strong>: 2026-01-05T18:15:35Z<li><strong>Merged</strong>: 2026-01-05T23:20:00Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Included some naive test code for system fonts in the <code>text</code> example in #22156 by mistake.<h2 id=solution>Solution</h2><p>Revert the changes to the example.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This pull request represents a straightforward cleanup operation to remove accidental test code that was inadvertently merged into a core Bevy example. The author, ickshonpe, had previously contributed system fonts support in PR #22156, but during that work, some experimental test code remained embedded in the main text example.<p>The problem was that the <code>text.rs</code> example in the UI examples directory contained code that was meant for testing system font loading functionality during development. This code wasn’t intended to be part of the final example, as examples in a game engine like Bevy serve as educational resources and reference implementations for users. Having test code mixed with production examples creates confusion and doesn’t represent best practices for using the engine’s APIs.<p>Looking at the changes, the implementation approach was simple and direct: revert the example file back to its original, cleaner state. The developer removed three key elements that were added for testing purposes. First, the import of <code>CosmicFontSystem</code> was removed since it was no longer needed. Second, two lines of code in the <code>main()</code> function that accessed the world to load system fonts were deleted. Third, the font specification in the example setup was changed from using the system font “Comic Sans MS” back to the standard asset-based font loading approach.<p>This cleanup is important because examples in a game engine serve multiple purposes. They need to demonstrate proper API usage, provide working reference code that users can copy and adapt, and maintain consistency across the codebase. The accidental inclusion of system font test code created an example that didn’t follow the standard Bevy patterns for font loading, which could mislead users about the recommended way to handle fonts in their applications.<p>The technical insight here is about the separation between experimental development code and production examples. When working on new features like system font support, it’s common to use existing examples as test beds, but it’s crucial to ensure these modifications don’t get committed to the main codebase. The reversion maintains the example’s educational value while ensuring it demonstrates the established, stable API patterns that users should follow.<p>The impact of this change is minimal in terms of functionality but significant for code quality and developer experience. Users studying the text example will now see the proper way to load fonts using Bevy’s asset system, rather than seeing a hybrid approach that mixes experimental system font loading with standard asset loading. This maintains consistency with other examples in the codebase and provides clearer documentation through code.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[PR #22156 System Fonts] --> B[Accidentally left test code in text example]
</span><span>    B --> C[PR #22390 Cleanup]
</span><span>    C --> D[Clean text example]
</span><span>    C --> E[Removed CosmicFontSystem import]
</span><span>    C --> F[Removed system font loading code]
</span><span>    C --> G[Restored asset-based font loading]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=examples-ui-text-rs-2-6><code>examples/ui/text.rs</code> (+2/-6)</h3><p>This is the only file modified in this PR. The changes revert accidental test code that was left in the text example from a previous system fonts implementation.<p><strong>Key Changes:</strong><ol><li><strong>Removed unnecessary import</strong>: The <code>CosmicFontSystem</code> import was removed since it was only used for the test code.</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>use </span><span>bevy</span><span style=color:#ed9366>::</span><span>text</span><span style=color:#ed9366>::</span><span>{CosmicFontSystem</span><span style=color:#61676ccc>,</span><span> FontFeatureTag</span><span style=color:#61676ccc>,</span><span> FontFeatures</span><span style=color:#61676ccc>,</span><span> Underline}</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>use </span><span>bevy</span><span style=color:#ed9366>::</span><span>text</span><span style=color:#ed9366>::</span><span>{FontFeatureTag</span><span style=color:#61676ccc>,</span><span> FontFeatures</span><span style=color:#61676ccc>,</span><span> Underline}</span><span style=color:#61676ccc>;
</span></code></pre><ol start=2><li><strong>Removed system font loading code from main()</strong>: Two lines that accessed the world to load system fonts were removed.</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>    app</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_plugins</span><span>((DefaultPlugins</span><span style=color:#61676ccc>, </span><span>FrameTimeDiagnosticsPlugin</span><span style=color:#ed9366>::</span><span>default()))
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>add_systems</span><span>(Startup</span><span style=color:#61676ccc>,</span><span> setup)
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>add_systems</span><span>(Update</span><span style=color:#61676ccc>, </span><span>(text_update_system</span><span style=color:#61676ccc>,</span><span> text_color_system))</span><span style=color:#61676ccc>;
</span><span>
</span><span>    </span><span style=color:#fa6e32>let mut</span><span> f </span><span style=color:#ed9366>=</span><span> app</span><span style=color:#ed9366>.</span><span style=color:#f07171>world_mut</span><span>()</span><span style=color:#ed9366>.</span><span>resource_mut</span><span style=color:#ed9366>::</span><span>&LTCosmicFontSystem>()</span><span style=color:#61676ccc>;
</span><span>    f</span><span style=color:#ed9366>.</span><span style=color:#f07171>db_mut</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>load_system_fonts</span><span>()</span><span style=color:#61676ccc>;
</span><span>
</span><span>    app</span><span style=color:#ed9366>.</span><span style=color:#f07171>run</span><span>()</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>    app</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_plugins</span><span>((DefaultPlugins</span><span style=color:#61676ccc>, </span><span>FrameTimeDiagnosticsPlugin</span><span style=color:#ed9366>::</span><span>default()))
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>add_systems</span><span>(Startup</span><span style=color:#61676ccc>,</span><span> setup)
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>add_systems</span><span>(Update</span><span style=color:#61676ccc>, </span><span>(text_update_system</span><span style=color:#61676ccc>,</span><span> text_color_system))</span><span style=color:#61676ccc>;
</span><span>    app</span><span style=color:#ed9366>.</span><span style=color:#f07171>run</span><span>()</span><span style=color:#61676ccc>;
</span></code></pre><ol start=3><li><strong>Restored asset-based font loading</strong>: Changed from using a system font name directly to loading a font asset.</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>        TextFont {
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// This font is loaded and will be used instead of the default font.
</span><span>            font</span><span style=color:#61676ccc>: </span><span style=color:#86b300>"Comic Sans MS"</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>()</span><span style=color:#61676ccc>,
</span><span>            font_size</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>67.0</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>        }</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>        TextFont {
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// This font is loaded and will be used instead of the default font.
</span><span>            font</span><span style=color:#61676ccc>:</span><span> asset_server</span><span style=color:#ed9366>.</span><span style=color:#f07171>load</span><span>(</span><span style=color:#86b300>"fonts/FiraSans-Bold.ttf"</span><span>)</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>()</span><span style=color:#61676ccc>,
</span><span>            font_size</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>67.0</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>        }</span><span style=color:#61676ccc>,
</span></code></pre><p>These changes ensure the example follows Bevy’s standard patterns for asset loading and provides a clean, educational reference for users learning how to work with text in the engine.<h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/asset/index.html target=_blank>Bevy Asset System Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/tree/main/examples/ui target=_blank>Bevy Text and UI Examples</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/pull/22156 target=_blank>Original System Fonts PR #22156</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/quick-start/getting-started/examples/ target=_blank>Bevy Examples as Documentation</a></ul><h1 id=full-code-diff>Full Code Diff</h1><pre style=color:#61676c;background-color:#fafafa><code><span>diff --git a/examples/ui/text.rs b/examples/ui/text.rs
</span><span>index 87f235b5eb588..65f525994594d 100644
</span><span>--- a/examples/ui/text.rs
</span><span>+++ b/examples/ui/text.rs
</span><span>@@ -7,7 +7,7 @@ use bevy::{
</span><span>     color::palettes::css::GOLD,
</span><span>     diagnostic::{DiagnosticsStore, FrameTimeDiagnosticsPlugin},
</span><span>     prelude::*,
</span><span>-    text::{CosmicFontSystem, FontFeatureTag, FontFeatures, Underline},
</span><span>+    text::{FontFeatureTag, FontFeatures, Underline},
</span><span> };
</span><span> 
</span><span> fn main() {
</span><span>@@ -15,10 +15,6 @@ fn main() {
</span><span>     app.add_plugins((DefaultPlugins, FrameTimeDiagnosticsPlugin::default()))
</span><span>         .add_systems(Startup, setup)
</span><span>         .add_systems(Update, (text_update_system, text_color_system));
</span><span>-
</span><span>-    let mut f = app.world_mut().resource_mut::&LTCosmicFontSystem>();
</span><span>-    f.db_mut().load_system_fonts();
</span><span>-
</span><span>     app.run();
</span><span> }
</span><span> 
</span><span>@@ -40,7 +36,7 @@ fn setup(mut commands: Commands, asset_server: Res&LTAssetServer>) {
</span><span>         Underline,
</span><span>         TextFont {
</span><span>             // This font is loaded and will be used instead of the default font.
</span><span>-            font: "Comic Sans MS".into(),
</span><span>+            font: asset_server.load("fonts/FiraSans-Bold.ttf").into(),
</span><span>             font_size: 67.0,
</span><span>             ..default()
</span><span>         },
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22390.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>