<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22675 Replace `validate_parent_has_component` with `ValidateParentHasComponentPlugin`.
        
    </title><meta content="#22675 Replace `validate_parent_has_component` with `ValidateParentHasComponentPlugin`." property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-27</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-01/pr-22675-zh-cn-20260127>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Replace <code>validate_parent_has_component</code> with <code>ValidateParentHasComponentPlugin</code>.<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22675<li><strong>Author</strong>: andriyDev<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Bug, A-ECS, S-Ready-For-Final-Review, M-Migration-Guide, D-Straightforward<li><strong>Created</strong>: 2026-01-24T02:39:40Z<li><strong>Merged</strong>: 2026-01-27T06:44:28Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Fixes #21666.<li>Fixes #19776</ul><h2 id=solution>Solution</h2><p>Instead of warning in the hook, we instead send a message for the entity if its parent is missing the component. A system later reads these messages and checks again if the parent is missing the component, and only then logs. This is done by:<ul><li>Change the hook into an observer.<li>Create a message to indicate a check is needed.<li>Create a system to do this check.<li>Create a plugin in <code>bevy_app</code> to add all these things to the app. <ul><li>I couldn’t think of a better place to put this, other than like <code>bevy_util</code>, but I didn’t want to add to the “kitchen sink”.</ul><li>Switch <code>GlobalTransform</code>/<code>InheritedVisibility</code> to use this plugin instead. <ul><li>One thing to note is I only perform this check in the <code>Last</code> schedule. We could move this check if necessary, but I doubt many users will spawn a child, and then only add the parent’s GlobalTransform <strong>after</strong> <code>PostUpdate</code> (not sure if this will even affect transform propagation though?)</ul></ul><p>Note: the memory usage is proportional to how many of these bad entities you spawn in a single frame.<h2 id=testing>Testing</h2><ul><li>I ran the following example:</ul><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>use </span><span>bevy</span><span style=color:#ed9366>::</span><span>prelude</span><span style=color:#ed9366>::*</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>main</span><span>() {
</span><span>    App</span><span style=color:#ed9366>::</span><span>new()
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>add_plugins</span><span>(DefaultPlugins)
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>add_systems</span><span>(Startup</span><span style=color:#61676ccc>,</span><span> setup)
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>run</span><span>()</span><span style=color:#61676ccc>;
</span><span>}
</span><span>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>setup</span><span>(</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>commands</span><span style=color:#61676ccc>:</span><span> Commands) {
</span><span>    </span><span style=color:#fa6e32>let</span><span> parent </span><span style=color:#ed9366>=</span><span> commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn_empty</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let</span><span> child </span><span style=color:#ed9366>=</span><span> commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn_empty</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()</span><span style=color:#61676ccc>;
</span><span>
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Initialize the child first, add the Visibility+Transform component, which implicitly adds the
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// InheritedVisibility+GlobalTransform component as well.
</span><span>    commands
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>entity</span><span>(child)
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>((ChildOf(parent)</span><span style=color:#61676ccc>, </span><span>Visibility</span><span style=color:#ed9366>::</span><span>Inherited</span><span style=color:#61676ccc>, </span><span>Transform</span><span style=color:#ed9366>::</span><span>default()))</span><span style=color:#61676ccc>;
</span><span>
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Also make the parent add the Visibility+Transform component so it is valid.
</span><span>    commands
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>entity</span><span>(parent)
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>((Visibility</span><span style=color:#ed9366>::</span><span>Inherited</span><span style=color:#61676ccc>, </span><span>Transform</span><span style=color:#ed9366>::</span><span>default()))</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><p>On main, this logs two warnings. With this PR, there are no logs! I also verified that omitting attaching the components to the parent still logs the warning.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a fundamental problem in Bevy’s component hierarchy validation system. The original implementation used <code>on_insert</code> component hooks to immediately validate when certain components were added to entities. Specifically, it checked whether an entity with a <code>GlobalTransform</code> or <code>InheritedVisibility</code> component had a parent that also contained the same component.<p>The problem with this approach was that it validated immediately upon component insertion, which often occurred during entity spawning when components might be added in a non-deterministic order. In many cases, developers would spawn a child entity first, then spawn or configure its parent. This ordering would trigger false positive warnings, even though the parent would eventually get the required component later in the same frame.<p>The PR fixes this by replacing the immediate validation hook with a deferred validation system. Instead of checking and warning immediately, the new approach marks entities that need validation and performs the check later in the frame during the <code>Last</code> schedule. This allows parent components to be added to entities before the validation occurs, eliminating false positives while still catching genuine configuration errors.<p>The implementation creates a new plugin system that’s more flexible and robust than the previous hook-based approach. The <code>ValidateParentHasComponentPlugin</code> sets up three main components:<ol><li>An observer that triggers when a component is inserted and creates validation messages<li>A message type (<code>CheckParentHasComponent</code>) to track entities needing validation<li>A system that processes these messages and logs warnings only if validation still fails</ol><p>This approach demonstrates several important ECS patterns in Bevy:<ul><li>Using observers instead of hooks for more complex logic<li>Leveraging Bevy’s message system for deferred processing<li>Creating reusable plugin infrastructure for common validation patterns<li>Managing validation timing to avoid false positives</ul><p>The memory usage is proportional to the number of validation messages created per frame, which in practice means it scales with the number of entities that might be misconfigured. This is an acceptable trade-off for eliminating false positive warnings that were confusing developers.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Component Inserted] --> B[Observer Triggers]
</span><span>    B --> C[Create Validation Message]
</span><span>    C --> D[Message Stored in ECS]
</span><span>    D --> E[Last Schedule Runs]
</span><span>    E --> F[CheckParentHasComponent System]
</span><span>    F --> G{Parent Has Component?}
</span><span>    G -->|Yes| H[Silent Success]
</span><span>    G -->|No| I[Log Warning B0004]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-app-src-hierarchy-rs-137-0><code>crates/bevy_app/src/hierarchy.rs</code> (+137/-0)</h3><p>This new file contains the entire implementation of the <code>ValidateParentHasComponentPlugin</code>. It defines the plugin struct, the message type for deferred validation, the observer that triggers on component insertion, and the system that performs the actual validation.<p>Key implementation:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// The plugin that sets up the validation system
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>ValidateParentHasComponentPlugin</span><span>&LTC</span><span style=color:#61676ccc>:</span><span> Component> {
</span><span>    schedule</span><span style=color:#61676ccc>: </span><span>Interned&LTdyn ScheduleLabel>,
</span><span>    marker</span><span style=color:#61676ccc>: </span><span>PhantomData<</span><span style=color:#fa6e32>fn</span><span>() </span><span style=color:#61676ccc>-></span><span> C>,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Observer that triggers when component C is inserted
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>validate_parent_has_component</span><span>&LTC</span><span style=color:#61676ccc>:</span><span> Component>(
</span><span>    </span><span style=color:#ff8f40>event</span><span style=color:#61676ccc>: </span><span>On&LTInsert, C>,
</span><span>    </span><span style=color:#ff8f40>child</span><span style=color:#61676ccc>: </span><span>Query<</span><span style=color:#ed9366>&</span><span>ChildOf>,
</span><span>    </span><span style=color:#ff8f40>with_component</span><span style=color:#61676ccc>: </span><span>Query<(), With&LTC>>,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>writer</span><span style=color:#61676ccc>: </span><span>MessageWriter&LTCheckParentHasComponent&LTC>>,
</span><span>) {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Check if parent has component, send message if not
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// System that processes validation messages
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>check_parent_has_component</span><span>&LTC</span><span style=color:#61676ccc>:</span><span> Component>(
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>messages</span><span style=color:#61676ccc>: </span><span>MessageReader&LTCheckParentHasComponent&LTC>>,
</span><span>    </span><span style=color:#ff8f40>children</span><span style=color:#61676ccc>: </span><span>Query<(</span><span style=color:#ed9366>&</span><span>ChildOf, </span><span style=color:#55b4d4;font-style:italic>Option</span><span><</span><span style=color:#ed9366>&</span><span>Name>), With&LTC>>,
</span><span>    </span><span style=color:#ff8f40>components</span><span style=color:#61676ccc>: </span><span>Query<</span><span style=color:#55b4d4;font-style:italic>Option</span><span><</span><span style=color:#ed9366>&</span><span>Name>, Without&LTC>>,
</span><span>) {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Check again and log warning if parent still missing component
</span><span>}
</span></code></pre><h3 id=crates-bevy-ecs-src-hierarchy-rs-2-41><code>crates/bevy_ecs/src/hierarchy.rs</code> (+2/-41)</h3><p>This file removes the old <code>validate_parent_has_component</code> hook function that was causing the false positive warnings.<p>Before:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Old hook that validated immediately
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>validate_parent_has_component</span><span>&LTC</span><span style=color:#61676ccc>:</span><span> Component>(
</span><span>    </span><span style=color:#ff8f40>world</span><span style=color:#61676ccc>:</span><span> DeferredWorld,
</span><span>    HookContext { entity, caller, .. }: HookContext,
</span><span>) {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Immediate validation with warning
</span><span>}
</span></code></pre><p>After:<ul><li>The function is completely removed<li>No replacement in this file (moved to bevy_app)</ul><h3 id=crates-bevy-transform-src-plugins-rs-10-6><code>crates/bevy_transform/src/plugins.rs</code> (+10/-6)</h3><p>This file updates the <code>TransformPlugin</code> to use the new validation plugin instead of the old hook.<p>Before:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>impl </span><span>Plugin </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>TransformPlugin </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>build</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>app</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> App) {
</span><span>        app</span><span style=color:#ed9366>.</span><span>init_resource</span><span style=color:#ed9366>::</span><span>&LTStaticTransformOptimizations>()
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// ... systems added
</span><span>    }
</span><span>}
</span></code></pre><p>After:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>impl </span><span>Plugin </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>TransformPlugin </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>build</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>app</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> App) {
</span><span>        app</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_plugins</span><span>(ValidateParentHasComponentPlugin</span><span style=color:#ed9366>::</span><span>&LTGlobalTransform></span><span style=color:#ed9366>::</span><span>default())
</span><span>            </span><span style=color:#ed9366>.</span><span>init_resource</span><span style=color:#ed9366>::</span><span>&LTStaticTransformOptimizations>()
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// ... systems added
</span><span>    }
</span><span>}
</span></code></pre><h3 id=crates-bevy-camera-src-visibility-mod-rs-4-4><code>crates/bevy_camera/src/visibility/mod.rs</code> (+4/-4)</h3><p>This file updates the <code>VisibilityPlugin</code> to use the new validation plugin for <code>InheritedVisibility</code>.<p>Before:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>component</span><span>(on_insert </span><span style=color:#ed9366>=</span><span> validate_parent_has_component::&LTSelf>)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>InheritedVisibility</span><span>(</span><span style=color:#fa6e32>bool</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><p>After:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Component definition without hook
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>InheritedVisibility</span><span>(</span><span style=color:#fa6e32>bool</span><span>)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// In plugin build method:
</span><span style=color:#fa6e32>impl </span><span>Plugin </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>VisibilityPlugin </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>build</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>app</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>bevy_app</span><span style=color:#ed9366>::</span><span>App) {
</span><span>        app</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_plugins</span><span>(ValidateParentHasComponentPlugin</span><span style=color:#ed9366>::</span><span>&LTInheritedVisibility></span><span style=color:#ed9366>::</span><span>default())
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// ... rest of plugin setup
</span><span>    }
</span><span>}
</span></code></pre><h3 id=crates-bevy-transform-src-components-global-transform-rs-2-6><code>crates/bevy_transform/src/components/global_transform.rs</code> (+2/-6)</h3><p>This file removes the <code>on_insert</code> hook from the <code>GlobalTransform</code> component definition.<p>Before:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>cfg_attr</span><span>(
</span><span>    feature </span><span style=color:#ed9366>= </span><span style=color:#86b300>"bevy-support"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#f29718>derive</span><span>(Component)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#f29718>component</span><span>(on_insert </span><span style=color:#ed9366>=</span><span> validate_parent_has_component::&LTGlobalTransform>)
</span><span>)]
</span></code></pre><p>After:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>cfg_attr</span><span>(feature </span><span style=color:#ed9366>= </span><span style=color:#86b300>"bevy-support"</span><span style=color:#61676ccc>, </span><span style=color:#f29718>derive</span><span>(Component))]
</span></code></pre><h3 id=release-content-migration-guides-validate-parent-has-component-is-now-a-plugin-md-8-0><code>release-content/migration-guides/validate_parent_has_component_is_now_a_plugin.md</code> (+8/-0)</h3><p>This new migration guide explains the change for users who might have been using the old hook function directly.<h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_ecs/latest/bevy_ecs/observer/index.html target=_blank>Bevy ECS Observers Documentation</a> - Learn about observers as a replacement for component hooks<li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_ecs/latest/bevy_ecs/message/index.html target=_blank>Bevy Message System</a> - Understanding ECS messages for deferred processing<li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_app/latest/bevy_app/trait.Plugin.html target=_blank>Bevy Plugin System</a> - How to create reusable plugins in Bevy<li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/discussions/21666 target=_blank>Component Hooks vs Observers</a> - Discussion about the limitations of component hooks<li><a rel="noopener nofollow noreferrer" href=https://bevy.org/learn/errors/b0004 target=_blank>Error B0004 Documentation</a> - Official documentation for the hierarchy validation warning</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22675.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>