<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22407 docs: adds migration guide for Assets<Mesh> retaining render_world only meshes
        
    </title><meta content="#22407 docs: adds migration guide for Assets<Mesh> retaining render_world only meshes" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-07</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-01/pr-22407-zh-cn-20260107>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><p>docs: adds migration guide for Assets<mesh> retaining render_world only meshes <h2 id=basic-information>Basic Information</h2> <ul><li><strong>Title</strong>: docs: adds migration guide for Assets<mesh> retaining render_world only meshes <li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22407</li> <li><strong>Author</strong>: kfc35</li> <li><strong>Status</strong>: MERGED</li> <li><strong>Labels</strong>: C-Docs, A-Rendering, S-Needs-Review, A-Picking</li> <li><strong>Created</strong>: 2026-01-07T02:07:59Z</li> <li><strong>Merged</strong>: 2026-01-07T05:42:46Z</li> <li><strong>Merged By</strong>: alice-i-cecile</li> <h2 id=description-translation>Description Translation</h2> <p>This is targeting <code>release-0.18.0</code>, NOT <code>main</code>!</p> <h1 id=objective>Objective</h1> <ul><li>Fixes #22206</ul> <h2 id=solution>Solution</h2> <ul><li>Adds a migration guide for the changes in #21732. As someone not too familiar with mesh stuff, I’d appreciate a review from someone more familiar with the changes and mesh things!</ul> <p>FYI @robtfm @beicause</p> <h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2> <p>The PR addresses a documentation gap that emerged from a significant change in Bevy’s rendering architecture. In PR #21732, the team modified how the <code>Assets&LTMesh></code> resource handles meshes marked with <code>RenderAssetUsages::RENDER_WORLD</code>. Previously, once these meshes were extracted to the render world, they would be removed from the main world’s <code>Assets&LTMesh></code> collection. This meant that any subsequent attempts to access such meshes in the main world would fail, but at least they wouldn’t panic.</p> <p>In Bevy 0.18, this behavior changed: <code>Assets&LTMesh></code> now retains all meshes, including those marked as <code>RENDER_WORLD</code>-only, even after their data has been extracted. This architectural shift improves consistency but introduces a new problem: attempting to modify or access the data of an extracted mesh from the main world is now invalid, since the mesh data physically resides in the render world.</p> <p>The solution implemented in #21732 was to add new <code>try_*</code> methods to the <code>Mesh</code> struct that return a <code>Result<..., MeshAccessError></code>. These methods check whether the mesh data is still available in the main world and return an <code>Err(MeshAccessError::ExtractedToRenderWorld)</code> if it’s not. This provides a safe way to handle the case where mesh data might have been extracted.</p> <p>This PR #22407 adds the necessary migration guide to document this breaking change. The guide serves as a critical resource for developers upgrading from Bevy 0.17 to 0.18, helping them understand why their code might start panicking and how to fix it.</p> <p>The migration guide takes a straightforward approach: it lists every affected <code>Mesh</code> method and its corresponding <code>try_*</code> equivalent. For methods that don’t have a <code>try_*</code> version, it explicitly notes that they will now panic if called on an extracted mesh. The guide is comprehensive, covering mesh attribute operations, index manipulations, normal computations, transformations, and morph target features.</p> <p>The key insight here is that developers need to change their mindset when working with meshes. Previously, they could assume that if they had a reference to a <code>Mesh</code> in <code>Assets&LTMesh></code>, the mesh data was accessible. Now they must consider that the mesh might have been extracted, and they need to handle this possibility explicitly using the new <code>try_*</code> methods.</p> <p>The guide also clarifies an important distinction: some <code>try_*</code> methods return <code>Result<..., MeshAccessError></code> while others return <code>Option<...></code>. This reflects different failure modes - some operations are fundamentally invalid on extracted meshes (returning an error), while others can be attempted but might fail (returning <code>None</code>).</p> <p>This documentation addition is particularly important because the change affects a wide range of mesh operations, and without proper guidance, developers would face confusing panics when upgrading. By providing a clear, exhaustive list of affected methods and their replacements, the migration guide reduces friction during the upgrade process and helps developers write more robust code that properly handles the render world extraction lifecycle.</p> <h2 id=visual-representation>Visual Representation</h2> <pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Assets&amplt;Mesh&ampgt; in Main World] -->|Retains after extraction| B[RENDER_WORLD-only meshes]
</span><span>    B -->|Data extracted to| C[Render World]
</span><span>    B -->|Can no longer be modified via| D[Regular Mesh methods]
</span><span>    D -->|Will panic if accessed| E[Extracted Mesh]
</span><span>    D -->|Should use| F[try_* Mesh methods]
</span><span>    F -->|Return Result/Option| G[Safe handling]
</span></code></pre> <h2 id=key-files-changed>Key Files Changed</h2> <p><strong>File:</strong> <code>release-content/migration-guides/assets_mesh_try_functions.md</code> (+125/-0)</p> <p>This is a new file created to document the migration from Bevy 0.17 to 0.18 for mesh handling. The file provides a comprehensive list of <code>Mesh</code> methods that need to be updated when working with meshes that might be <code>RENDER_WORLD</code>-only.</p> <p>Key content includes:</p> <ol><li><strong>Explanation of the change</strong>: Describes how <code>Assets&LTMesh></code> now retains <code>RENDER_WORLD</code>-only meshes after extraction<li><strong>Migration instructions</strong>: Shows side-by-side comparisons of old methods and their new <code>try_*</code> equivalents<li><strong>Error handling notes</strong>: Explains that the new methods return <code>Result<..., MeshAccessError></code> or <code>Option<...></code><li><strong>Panic warnings</strong>: Identifies methods without <code>try_*</code> equivalents that will now panic on extracted meshes</ol> <p>The file structure is straightforward:</p> <ul><li>A title and reference to the implementing PR (#21732)<li>A brief explanation of the behavioral change<li>Comprehensive migration tables showing 0.17 methods and their 0.18 replacements<li>Clear warnings about methods that will panic</ul> <pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span style=color:#abb0b6;background-color:#61676c10;font-weight:700>---
</span><span>title: "Use </span><span style=color:#ed9366;background-color:#61676c10>`Mesh::try_* mesh`</span><span> functions for </span><span style=color:#ed9366;background-color:#61676c10>`Assets&LTMesh>`</span><span> entries when there can be </span><span style=color:#ed9366;background-color:#61676c10>`RenderAssetUsages::RENDER_WORLD`</span><span>-only meshes."
</span><span>pull_requests: [21732]
</span><span style=color:#fa6e32;font-weight:700>---
</span><span>
</span><span>Previously, the </span><span style=color:#ed9366;background-color:#61676c10>`Assets&LTMesh>`</span><span> resource would not retain </span><span style=color:#ed9366;background-color:#61676c10>`RenderAssetUsages::RENDER_WORLD`</span><span>-only
</span><span>meshes once their data was extracted.
</span><span>
</span><span>In 0.18, </span><span style=color:#ed9366;background-color:#61676c10>`Assets&LTMesh>`</span><span> retains </span><span style=color:#ed9366;background-color:#61676c10>`RenderAssetUsages::RENDER_WORLD`</span><span>-only meshes, even after their data
</span><span>is extracted. To handle such meshes, </span><span style=color:#ed9366;background-color:#61676c10>`Mesh`</span><span> now contains </span><span style=color:#ed9366;background-color:#61676c10>`Mesh::try_*`</span><span> functions which return a
</span><span style=color:#ed9366;background-color:#61676c10>`Result<..., MeshAccessError>`</span><span>. These functions return an
</span><span style=color:#ed9366;background-color:#61676c10>`Err(MeshAccessError,ExtractedToRenderWorld)`</span><span> when the mesh has already been extracted.
</span><span>
</span><span>If </span><span style=color:#ed9366;background-color:#61676c10>`Assets&LTMesh>`</span><span> can contain </span><span style=color:#ed9366;background-color:#61676c10>`RenderAssetUsages::RENDER_WORLD`</span><span>-only meshes, the following </span><span style=color:#ed9366;background-color:#61676c10>`Mesh`</span><span>
</span><span>functions should be changed to their </span><span style=color:#ed9366;background-color:#61676c10>`try_*`</span><span> equivalent and handled appropriately:
</span><span>
</span><span>[Comprehensive list of method replacements follows...]
</span></code></pre> <h2 id=further-reading>Further Reading</h2> <ol><li><p><strong>Bevy Render World Architecture</strong>: Understanding Bevy’s ECS architecture and the separation between main world and render world is essential for grasping why this change was necessary.</p><li><p><strong>Rust Error Handling Patterns</strong>: The migration to <code>try_*</code> methods follows Rust’s error handling best practices. Resources on <code>Result</code> and <code>Option</code> types in Rust would help developers adapt to the new patterns.</p><li><p><strong>Bevy Asset System</strong>: The <code>Assets&LTT></code> resource and asset handling in Bevy provide context for why mesh retention behavior changed.</p><li><p><strong>PR #21732</strong>: The implementation PR that introduced the behavioral change and the <code>try_*</code> methods. Reviewing this PR provides technical details about the implementation.</p><li><p><strong>Issue #22206</strong>: The original issue requesting this migration guide, which may contain additional context about user confusion and pain points during migration.</p></ol>    <div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22407.patch id=patch-info style=display:none></div>  <div class=bottom-spacer></div> 