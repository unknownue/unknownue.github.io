<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22395 Document that `configure_schedules()` only applies to currently existing schedules.
        
    </title><meta content="#22395 Document that `configure_schedules()` only applies to currently existing schedules." property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-05</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-01/pr-22395-zh-cn-20260105>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Document that <code>configure_schedules()</code> only applies to currently existing schedules.<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22395<li><strong>Author</strong>: kpreid<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, A-ECS, S-Ready-For-Final-Review, X-Uncontroversial, D-Straightforward<li><strong>Created</strong>: 2026-01-05T20:38:14Z<li><strong>Merged</strong>: 2026-01-05T23:17:35Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Clarify how to use the <code>configure_schedules()</code> function. The existing documentation confused me, because I thought that<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>let</span><span> world </span><span style=color:#ed9366>= </span><span>World</span><span style=color:#ed9366>::</span><span>new()</span><span style=color:#61676ccc>;
</span><span style=color:#ed9366>...
</span><span>schedules</span><span style=color:#ed9366>.</span><span style=color:#f07171>configure_schedules</span><span>(</span><span style=color:#ed9366>...</span><span>)</span><span style=color:#61676ccc>;
</span><span>schedules</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_systems</span><span>(</span><span style=color:#ed9366>...</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><p>would have an effect instead of having no effect.<h2 id=solution>Solution</h2><p>Add documentation to <code>configure_schedules()</code> functions, specifying that they only mutate existing schedules.<h2 id=testing>Testing</h2><p><code>cargo doc --open</code></p><img alt="Screenshot 2026-01-05 at 12 37 01" height=216 src=https://github.com/user-attachments/assets/ba168507-c3eb-42b7-adfb-a54a4fe3fbae width=679><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This pull request addresses a documentation gap in the Bevy game engine’s ECS (Entity Component System) scheduling system. The issue was straightforward but important for developer experience: the <code>configure_schedules()</code> method’s behavior wasn’t fully documented, leading to incorrect assumptions about when and how it applies configuration changes.<p>The problem emerged when a developer tried to use <code>configure_schedules()</code> in what seemed like a logical order: configure the schedule settings first, then add systems. They expected the configuration to apply to subsequently added systems, but in reality, <code>configure_schedules()</code> only affects schedules that already exist at the time of the call. This temporal aspect of the API’s behavior wasn’t documented, creating a subtle trap for developers.<p>The solution approach was minimal and surgical: add clarifying documentation to two key methods. The developer identified that the documentation needed to explicitly state that the method only mutates currently present schedules and doesn’t apply to schedules added in the future. This is a classic case of API documentation catching up with actual behavior.<p>The implementation itself is extremely simple - just adding doc comments to two functions. However, the value of this change is significant for preventing future confusion. Both <code>App::configure_schedules()</code> and <code>Schedules::configure_schedules()</code> received identical documentation clarifying their temporal behavior.<p>Technically, this documentation change helps developers understand an important aspect of Bevy’s scheduling system: configuration is applied immediately to existing schedule objects. If you need to configure a schedule that will be added later, you must call <code>configure_schedules()</code> after adding that schedule. This temporal ordering constraint is now explicitly documented.<p>The impact of this change is purely in the documentation domain - no code behavior is altered. However, it improves the developer experience by preventing the exact confusion the PR author encountered. This type of documentation update is particularly valuable in systems like Bevy’s ECS where scheduling and execution order are critical to correct game behavior.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Developer calls configure_schedules()] --> B{Does schedule exist?}
</span><span>    B -->|Yes| C[Configuration applied]
</span><span>    B -->|No| D[No effect - must call after adding]
</span><span>    C --> E[Schedule runs with configured settings]
</span><span>    D --> F[Schedule runs with default settings]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-app-src-app-rs-3-0><code>crates/bevy_app/src/app.rs</code> (+3/-0)</h3><p>This file contains the main <code>App</code> struct which is the primary entry point for Bevy applications. The change adds documentation to the <code>configure_schedules()</code> method to clarify its temporal behavior.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_app/src/app.rs
</span><span style=color:#abb0b6;font-style:italic>// After (added documentation):
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Applies the provided [`ScheduleBuildSettings`] to all schedules.
</span><span>    </span><span style=color:#abb0b6;font-style:italic>///
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// This mutates all currently present schedules, but does not apply to any custom schedules
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// that might be added in the future.
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>configure_schedules</span><span>(
</span><span>        </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>,
</span><span>        </span><span style=color:#ff8f40>schedule_build_settings</span><span style=color:#61676ccc>:</span><span> ScheduleBuildSettings,
</span><span>    ) {
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>world_mut</span><span>()
</span><span>            </span><span style=color:#ed9366>.</span><span>resource_mut</span><span style=color:#ed9366>::</span><span>&LTSchedules>()
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>configure_schedules</span><span>(schedule_build_settings)</span><span style=color:#61676ccc>;
</span><span>    }
</span></code></pre><h3 id=crates-bevy-ecs-src-schedule-schedule-rs-3-0><code>crates/bevy_ecs/src/schedule/schedule.rs</code> (+3/-0)</h3><p>This file contains the <code>Schedules</code> struct which manages the collection of schedules in the ECS world. The change adds parallel documentation to the underlying <code>configure_schedules()</code> method.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_ecs/src/schedule/schedule.rs
</span><span style=color:#abb0b6;font-style:italic>// After (added documentation):
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Applies the provided [`ScheduleBuildSettings`] to all schedules.
</span><span>    </span><span style=color:#abb0b6;font-style:italic>///
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// This mutates all currently present schedules, but does not apply to schedules added
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// in the future.
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>configure_schedules</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>schedule_build_settings</span><span style=color:#61676ccc>:</span><span> ScheduleBuildSettings) {
</span><span>        </span><span style=color:#fa6e32>for </span><span>(</span><span style=color:#ed9366>_</span><span style=color:#61676ccc>,</span><span> schedule) </span><span style=color:#ed9366>in &</span><span style=color:#fa6e32>mut </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>inner {
</span><span>            schedule</span><span style=color:#ed9366>.</span><span style=color:#f07171>set_build_settings</span><span>(schedule_build_settings</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>())</span><span style=color:#61676ccc>;
</span><span>        }
</span><span>    }
</span></code></pre><p>Both changes add the same essential clarification: the configuration only applies to schedules that exist at the time of the call. The <code>App::configure_schedules()</code> method delegates to <code>Schedules::configure_schedules()</code>, so both need the same documentation.<h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/getting-started/ecs/#systems target=_blank>Bevy Engine: Schedules and Systems</a> - Official documentation on Bevy’s ECS system scheduling<li><a rel="noopener nofollow noreferrer" href=https://rust-lang.github.io/rfcs/1574-more-api-documentation-conventions.html target=_blank>Rust Documentation Guidelines</a> - Best practices for documenting Rust APIs<li><a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Temporal_isolation_(computer_science) target=_blank>Temporal API Design Patterns</a> - Concepts around time-dependent behavior in APIs</ul><h1 id=full-code-diff>Full Code Diff</h1><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_app/src/app.rs b/crates/bevy_app/src/app.rs
</span><span>index ef56ed42cb05b..b9c316f14d82e 100644
</span><span style=color:#c594c5>--- a/crates/bevy_app/src/app.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_app/src/app.rs
</span><span style=color:#c594c5>@@ -1225,6 +1225,9 @@ </span><span style=color:#399ee6>impl App {
</span><span>     }
</span><span> 
</span><span>     /// Applies the provided [`ScheduleBuildSettings`] to all schedules.
</span><span style=color:#86b300>+    ///
</span><span style=color:#86b300>+    /// This mutates all currently present schedules, but does not apply to any custom schedules
</span><span style=color:#86b300>+    /// that might be added in the future.
</span><span>     pub fn configure_schedules(
</span><span>         &mut self,
</span><span>         schedule_build_settings: ScheduleBuildSettings,
</span><span>diff --git a/crates/bevy_ecs/src/schedule/schedule.rs b/crates/bevy_ecs/src/schedule/schedule.rs
</span><span>index e31b048881061..c26fb16618926 100644
</span><span style=color:#c594c5>--- a/crates/bevy_ecs/src/schedule/schedule.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_ecs/src/schedule/schedule.rs
</span><span style=color:#c594c5>@@ -133,6 +133,9 @@ </span><span style=color:#399ee6>impl Schedules {
</span><span>     }
</span><span> 
</span><span>     /// Applies the provided [`ScheduleBuildSettings`] to all schedules.
</span><span style=color:#86b300>+    ///
</span><span style=color:#86b300>+    /// This mutates all currently present schedules, but does not apply to schedules added
</span><span style=color:#86b300>+    /// in the future.
</span><span>     pub fn configure_schedules(&mut self, schedule_build_settings: ScheduleBuildSettings) {
</span><span>         for (_, schedule) in &mut self.inner {
</span><span>             schedule.set_build_settings(schedule_build_settings.clone());
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22395.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>