<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22631 Move occlusion culling out of the `experimental` namespace.
        
    </title><meta content="#22631 Move occlusion culling out of the `experimental` namespace." property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-21</span><div class=language-switcher><a class=lang-link data-lang=en href=/pull_request/bevy/2026-01/pr-22631-en-20260121>English</a> / <span class="lang-link active" data-lang=zh-cn>中文</span></div></div><div class=pr-content><h1 id=biao-ti>标题</h1><h2 id=ji-ben-xin-xi>基本信息</h2><ul><li><strong>标题</strong>: Move occlusion culling out of the <code>experimental</code> namespace.<li><strong>PR链接</strong>: https://github.com/bevyengine/bevy/pull/22631<li><strong>作者</strong>: pcwalton<li><strong>状态</strong>: MERGED<li><strong>标签</strong>: A-Rendering, M-Migration-Guide, X-Contentious, D-Straightforward, S-Needs-Review<li><strong>创建时间</strong>: 2026-01-21T18:58:22Z<li><strong>合并时间</strong>: 2026-01-21T23:04:28Z<li><strong>合并者</strong>: superdump</ul><h2 id=miao-shu-fan-yi>描述翻译</h2><p>在 #22603 合并后，所有可能导致 Bevy 剔除不应被剔除的网格（mesh）的已知问题都已修复，因此现在有共识认为可以将遮挡剔除（occlusion culling）从 <code>experimental</code> 命名空间中移除。本补丁完成了这项工作（实际上，由于 <code>experimental</code> 模块现在已空，它完全从 <code>bevy_render</code> 中移除了该模块）。<h2 id=zhe-ge-pr-de-gu-shi>这个 PR 的故事</h2><p>遮挡剔除是一种图形渲染优化技术，它通过避免渲染完全被其他不透明物体遮挡的物体来提高性能。在 Bevy 中，这项功能最初被标记为实验性（experimental），因为存在一些已知问题，可能导致本应可见的网格被错误地剔除。<p>随着 PR #22603 的合并，这些已知问题得到了解决。这意味着遮挡剔除功能现在被认为是稳定可靠的，可以安全地用于生产环境。因此，本 PR 的核心目标就是将遮挡剔除从实验性命名空间中移出，使其成为 Bevy 渲染管线的正式组成部分。<p>从技术实现的角度来看，这个 PR 主要涉及模块结构的重构。之前，遮挡剔除相关的代码位于 <code>bevy_render::experimental::occlusion_culling</code> 模块中。现在需要将其提升到 <code>bevy_render::occlusion_culling</code> 的直接子模块位置。这不仅仅是一个简单的重命名，还需要更新整个代码库中所有引用该模块的地方。<p>开发者首先需要移动整个模块的物理位置，将 <code>crates/bevy_render/src/experimental/occlusion_culling</code> 目录移动到 <code>crates/bevy_render/src/occlusion_culling</code>。然后，更新 <code>bevy_render</code> 库的主文件（<code>lib.rs</code>）中的模块声明：<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// 之前:
</span><span style=color:#fa6e32>pub mod </span><span style=color:#399ee6>experimental</span><span style=color:#61676ccc>;
</span><span style=color:#abb0b6;font-style:italic>// 之后:
</span><span style=color:#fa6e32>pub mod </span><span style=color:#399ee6>occlusion_culling</span><span style=color:#61676ccc>;
</span></code></pre><p>同时，需要更新 <code>OcclusionCullingPlugin</code> 的导入路径。之前它是通过 <code>experimental::occlusion_culling::OcclusionCullingPlugin</code> 导入的，现在改为 <code>occlusion_culling::OcclusionCullingPlugin</code>。<p>最繁琐的部分是更新所有引用遮挡剔除的代码文件。这包括多个核心管道（core pipeline）模块、PBR 渲染代码、开发工具以及示例代码。每个文件都需要将 <code>bevy_render::experimental::occlusion_culling</code> 的导入改为 <code>bevy_render::occlusion_culling</code>。<p>例如，在 <code>bevy_core_pipeline/src/core_3d/mod.rs</code> 中：<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// 之前:
</span><span style=color:#fa6e32>use </span><span>bevy_render</span><span style=color:#ed9366>::</span><span>experimental</span><span style=color:#ed9366>::</span><span>occlusion_culling</span><span style=color:#ed9366>::</span><span>OcclusionCulling</span><span style=color:#61676ccc>;
</span><span style=color:#abb0b6;font-style:italic>// 之后:
</span><span style=color:#fa6e32>use </span><span>bevy_render</span><span style=color:#ed9366>::</span><span>occlusion_culling</span><span style=color:#ed9366>::</span><span>OcclusionCulling</span><span style=color:#61676ccc>;
</span></code></pre><p>这种全局性的导入更新确保了整个代码库的一致性。由于 <code>experimental</code> 模块现在为空，可以安全地删除整个模块定义文件（<code>crates/bevy_render/src/experimental/mod.rs</code>）。<p>除了代码结构的调整，还需要更新文档。<code>OcclusionCulling</code> 组件之前的文档包含关于实验性状态和潜在问题的警告信息。这些警告现在已不再适用，因此被移除：<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// Add this component to a view in order to enable experimental GPU occlusion
</span><span style=color:#abb0b6;font-style:italic>/// culling.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// *Bevy's occlusion culling is currently marked as experimental.* There are
</span><span style=color:#abb0b6;font-style:italic>/// known issues whereby, in rare circumstances, occlusion culling can result in
</span><span style=color:#abb0b6;font-style:italic>/// meshes being culled that shouldn't be (i.e. meshes that turn invisible).
</span><span style=color:#abb0b6;font-style:italic>/// Please try it out and report issues.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// *Occlusion culling* allows Bevy to avoid rendering objects that are fully
</span><span style=color:#abb0b6;font-style:italic>/// behind other opaque or alpha tested objects. This is different from, and
</span><span style=color:#abb0b6;font-style:italic>/// complementary to, *frustum culling*, which only culls objects outside the
</span><span style=color:#abb0b6;font-style:italic>/// camera's view frustum.
</span></code></pre><p>更新后的文档更加简洁，直接说明其功能：<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// Add this component to a view in order to enable GPU occlusion culling.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// *Occlusion culling* allows Bevy to avoid rendering objects that are fully
</span><span style=color:#abb0b6;font-style:italic>/// behind other opaque or alpha tested objects. This is different from, and
</span><span style=color:#abb0b6;font-style:italic>/// complementary to, *frustum culling*, which only culls objects outside the
</span><span style=color:#abb0b6;font-style:italic>/// camera's view frustum.
</span></code></pre><p>为了帮助现有用户迁移，还添加了一个迁移指南（migration guide）。这个指南简明地说明了变化：遮挡剔除不再标记为实验性，相应的模块路径已从 <code>bevy::render::experimental::occlusion_culling</code> 更名为 <code>bevy::render::occlusion_culling</code>。<p>从工程角度看，这个 PR 展示了 Bevy 项目中功能从实验性到稳定状态的典型升级路径。当一项功能经过充分测试，解决了关键问题后，就可以从实验性命名空间中移出，成为正式 API 的一部分。这种模式有助于保持代码库的整洁，同时为用户提供清晰的 API 稳定性信号。<p>值得注意的是，虽然这个 PR 看似只是移动文件和更新导入，但它实际上代表了项目对遮挡剔除功能稳定性的信心。现在开发者可以更放心地在生产项目中使用这一性能优化功能，而不必担心之前可能存在的错误剔除问题。<h2 id=ke-shi-hua-biao-shi>可视化表示</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[bevy_render] --> B[experimental模块]
</span><span>    A --> C[occlusion_culling模块]
</span><span>    B --> D[occlusion_culling子模块]
</span><span>    
</span><span>    E[更新后] --> F[occlusion_culling模块]
</span><span>    
</span><span>    D -.->|移动到| F
</span><span>    B -.->|删除| B
</span></code></pre><h2 id=guan-jian-wen-jian-bian-geng>关键文件变更</h2><h3 id=release-content-migration-guides-occlusion-culling-no-longer-experimental-md-10-0><code>release-content/migration-guides/occlusion-culling-no-longer-experimental.md</code> (+10/-0)</h3><p>这是新增的迁移指南文件，告知用户遮挡剔除不再标记为实验性，并提供了模块路径变更信息。<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span style=color:#abb0b6;background-color:#61676c10;font-weight:700>---
</span><span>title: "Occlusion culling is no longer experimental"
</span><span>pull_requests: [22631]
</span><span style=color:#fa6e32;font-weight:700>---
</span><span>
</span><span>Occlusion culling is no longer experimental, as the known issues that could
</span><span>cause Bevy to cull meshes incorrectly are now fixed.
</span><span> Consequently, the
</span><span style=color:#ed9366;background-color:#61676c10>`bevy::render::experimental::occlusion_culling`</span><span> module has been renamed to
</span><span>simply </span><span style=color:#ed9366;background-color:#61676c10>`bevy::render::occlusion_culling`</span><span>.
</span></code></pre><h3 id=crates-bevy-render-src-occlusion-culling-mod-rs-1-7><code>crates/bevy_render/src/occlusion_culling/mod.rs</code> (+1/-7)</h3><p>这是从 <code>experimental/occlusion_culling/mod.rs</code> 移动并修改后的文件。主要变化是移除了关于实验性状态的警告文档。<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// 之前:
</span><span style=color:#abb0b6;font-style:italic>/// Add this component to a view in order to enable experimental GPU occlusion
</span><span style=color:#abb0b6;font-style:italic>/// culling.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// *Bevy's occlusion culling is currently marked as experimental.* There are
</span><span style=color:#abb0b6;font-style:italic>/// known issues whereby, in rare circumstances, occlusion culling can result in
</span><span style=color:#abb0b6;font-style:italic>/// meshes being culled that shouldn't be (i.e. meshes that turn invisible).
</span><span style=color:#abb0b6;font-style:italic>/// Please try it out and report issues.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// *Occlusion culling* allows Bevy to avoid rendering objects that are fully
</span><span style=color:#abb0b6;font-style:italic>/// behind other opaque or alpha tested objects. This is different from, and
</span><span style=color:#abb0b6;font-style:italic>/// complementary to, *frustum culling*, which only culls objects outside the
</span><span style=color:#abb0b6;font-style:italic>/// camera's view frustum.
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// 之后:
</span><span style=color:#abb0b6;font-style:italic>/// Add this component to a view in order to enable GPU occlusion culling.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// *Occlusion culling* allows Bevy to avoid rendering objects that are fully
</span><span style=color:#abb0b6;font-style:italic>/// behind other opaque or alpha tested objects. This is different from, and
</span><span style=color:#abb0b6;font-style:italic>/// complementary to, *frustum culling*, which only culls objects outside the
</span><span style=color:#abb0b6;font-style:italic>/// camera's view frustum.
</span></code></pre><h3 id=crates-bevy-render-src-experimental-mod-rs-0-6><code>crates/bevy_render/src/experimental/mod.rs</code> (+0/-6)</h3><p>这个文件被完全删除，因为 <code>experimental</code> 模块现在已空。<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// 被删除的内容:
</span><span style=color:#abb0b6;font-style:italic>//! Experimental rendering features.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! Experimental features are features with known problems, but are included
</span><span style=color:#abb0b6;font-style:italic>//! nonetheless for testing purposes.
</span><span>
</span><span style=color:#fa6e32>pub mod </span><span style=color:#399ee6>occlusion_culling</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=crates-bevy-render-src-lib-rs-2-2><code>crates/bevy_render/src/lib.rs</code> (+2/-2)</h3><p>主库文件更新了模块声明和插件导入路径。<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// 之前:
</span><span style=color:#fa6e32>pub mod </span><span style=color:#399ee6>experimental</span><span style=color:#61676ccc>;
</span><span style=color:#abb0b6;font-style:italic>// ...
</span><span style=color:#fa6e32>use </span><span>experimental</span><span style=color:#ed9366>::</span><span>occlusion_culling</span><span style=color:#ed9366>::</span><span>OcclusionCullingPlugin</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// 之后:
</span><span style=color:#fa6e32>pub mod </span><span style=color:#399ee6>occlusion_culling</span><span style=color:#61676ccc>;
</span><span style=color:#abb0b6;font-style:italic>// ...
</span><span style=color:#fa6e32>use </span><span>occlusion_culling</span><span style=color:#ed9366>::</span><span>OcclusionCullingPlugin</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=examples-large-scenes-bistro-src-main-rs-2-2><code>examples/large_scenes/bistro/src/main.rs</code> (+2/-2)</h3><p>示例文件中的导入路径更新，展示了用户代码需要如何迁移。<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// 之前:
</span><span style=color:#fa6e32>use </span><span>bevy</span><span style=color:#ed9366>::</span><span>render</span><span style=color:#ed9366>::</span><span>{
</span><span>    batching</span><span style=color:#ed9366>::</span><span>NoAutomaticBatching</span><span style=color:#61676ccc>, </span><span>experimental</span><span style=color:#ed9366>::</span><span>occlusion_culling</span><span style=color:#ed9366>::</span><span>OcclusionCulling</span><span style=color:#61676ccc>,
</span><span>    render_resource</span><span style=color:#ed9366>::</span><span>Face</span><span style=color:#61676ccc>, </span><span>view</span><span style=color:#ed9366>::</span><span>NoIndirectDrawing</span><span style=color:#61676ccc>,
</span><span>}</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// 之后:
</span><span style=color:#fa6e32>use </span><span>bevy</span><span style=color:#ed9366>::</span><span>render</span><span style=color:#ed9366>::</span><span>{
</span><span>    batching</span><span style=color:#ed9366>::</span><span>NoAutomaticBatching</span><span style=color:#61676ccc>, </span><span>occlusion_culling</span><span style=color:#ed9366>::</span><span>OcclusionCulling</span><span style=color:#61676ccc>, </span><span>render_resource</span><span style=color:#ed9366>::</span><span>Face</span><span style=color:#61676ccc>,
</span><span>    view</span><span style=color:#ed9366>::</span><span>NoIndirectDrawing</span><span style=color:#61676ccc>,
</span><span>}</span><span style=color:#61676ccc>;
</span></code></pre><h2 id=jin-yi-bu-yue-du>进一步阅读</h2><ol><li><strong>遮挡剔除技术介绍</strong>：了解 GPU 遮挡剔除的基本原理和实现方式<li><strong>Bevy 渲染管道架构</strong>：学习 Bevy 的渲染系统如何组织，包括实验性功能的处理机制<li><strong>PR #22603</strong>：了解修复了哪些遮挡剔除的具体问题，使这项功能得以稳定<li><strong>Bevy 迁移指南模式</strong>：研究 Bevy 如何管理 API 变更和提供迁移指导<li><strong>图形优化技术</strong>：深入学习包括视锥剔除、遮挡剔除在内的各种渲染优化技术</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22631.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>