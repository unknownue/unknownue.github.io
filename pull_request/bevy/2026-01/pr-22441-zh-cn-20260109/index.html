<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22441 wght font feature tag comment fix
        
    </title><meta content="#22441 wght font feature tag comment fix" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-01/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-01-09</span><div class=language-switcher><a class=lang-link data-lang=en href=/pull_request/bevy/2026-01/pr-22441-en-20260109>English</a> / <span class="lang-link active" data-lang=zh-cn>中文</span></div></div><div class=pr-content><h1 id=wght-font-feature-tag-comment-fix>wght font feature tag comment fix</h1><h2 id=ji-ben-xin-xi>基本信息</h2><ul><li><strong>标题</strong>: wght font feature tag comment fix<li><strong>PR 链接</strong>: https://github.com/bevyengine/bevy/pull/22441<li><strong>作者</strong>: ickshonpe<li><strong>状态</strong>: 已合并<li><strong>标签</strong>: C-Docs, D-Trivial, S-Ready-For-Final-Review, A-Text<li><strong>创建时间</strong>: 2026-01-08T23:31:28Z<li><strong>合并时间</strong>: 2026-01-09T00:33:21Z<li><strong>合并者</strong>: alice-i-cecile</ul><h2 id=miao-shu-fan-yi>描述翻译</h2><h1 id=mu-biao>目标</h1><p>文档注释给出的有效范围是 0 到 1000，但应该是 1 到 1000。<h2 id=jie-jue-fang-an>解决方案</h2><p>将其改为 “1 到 1000”。<h2 id=ben-ci-pull-request-de-wan-zheng-shuo-ming>本次 Pull Request 的完整说明</h2><p>这个 PR 解决了一个文档注释中的错误。在 Bevy 引擎的文本系统中，<code>FontFeatureTag::WEIGHT</code> 常量用于控制字体的笔画粗细（stroke thickness），这是一个 OpenType 字体特性。文档注释原本错误地将有效范围指定为 0 到 1000，但实际上该特性的有效范围是 1 到 1000（包含边界值）。<p>这个错误虽然很小，但对于开发者使用这个 API 时可能会造成混淆。如果开发者按照错误的文档将值设为 0，字体渲染系统可能无法正确解释这个值，导致意外的渲染结果或错误。<p>从技术角度看，<code>FontFeatureTag</code> 是一个表示 OpenType 字体特性标签的结构体，它通过四个字节的标识符来指定特定的字体特性。<code>WEIGHT</code> 特性对应的是 “wght” 标签，用于控制字重（weight）的变化。在 OpenType 规范中，wght 特性的有效值范围确实是 1 到 1000。<p>PR 的作者 ickshonpe 发现这个问题后，提交了一个最小化的修复：只修改了一行文档注释。这个修复是直接的，将原本的 “Values must be in the range of 0 to 1000” 改为 “Valid values are in the range of 1 to 1000, inclusive.”。修改后的描述更加精确，明确指出了有效值范围（valid values），并且强调了包含边界值（inclusive）。<p>这种文档修复虽然简单，但对于维护代码库的准确性很重要。准确的文档能帮助开发者正确使用 API，减少调试时间。特别是在游戏引擎这样的底层系统中，即使是文档中的小错误也可能导致开发者花费不必要的时间排查问题。<p>从工程实践角度看，这个 PR 体现了几个良好的开发习惯：<ol><li>即使是很小的文档错误也值得修复<li>提交的修改精确针对问题，不引入无关变更<li>使用了明确、精确的语言来描述有效范围</ol><p>该修复被迅速合并（从创建到合并仅约1小时），表明这是一个清晰、正确的修改，得到了维护者的认可。标签中的 “D-Trivial”（琐碎级别）和 “C-Docs”（文档类别）准确反映了这个 PR 的性质。<h2 id=ke-shi-hua-biao-shi>可视化表示</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[FontFeatureTag::WEIGHT] --> B[文档注释修复]
</span><span>    B --> C[有效范围: 1-1000]
</span><span>    C --> D[正确指导开发者]
</span></code></pre><h2 id=guan-jian-wen-jian-geng-gai>关键文件更改</h2><h3 id=crates-bevy-text-src-text-rs-1-1><code>crates/bevy_text/src/text.rs</code> (+1/-1)</h3><p>这个文件包含了文本渲染相关的核心类型定义。具体修改是针对 <code>FontFeatureTag::WEIGHT</code> 常量的文档注释。<p><strong>修改前:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// Varies the stroke thickness. Values must be in the range of 0 to 1000.
</span><span style=color:#fa6e32>pub const </span><span style=color:#ff8f40>WEIGHT</span><span style=color:#61676ccc>:</span><span> FontFeatureTag </span><span style=color:#ed9366>= </span><span>FontFeatureTag</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#fa6e32>b</span><span style=color:#86b300>"wght"</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><p><strong>修改后:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// Varies the stroke thickness. Valid values are in the range of 1 to 1000, inclusive.
</span><span style=color:#fa6e32>pub const </span><span style=color:#ff8f40>WEIGHT</span><span style=color:#61676ccc>:</span><span> FontFeatureTag </span><span style=color:#ed9366>= </span><span>FontFeatureTag</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#fa6e32>b</span><span style=color:#86b300>"wght"</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><p>修改说明：<ol><li>将 “Values must be in the range of 0 to 1000” 改为 “Valid values are in the range of 1 to 1000, inclusive.”<li>这个改动纠正了有效值范围的下限，从 0 改为 1<li>修改后的描述更加精确，使用了 “Valid values” 明确表示这是有效值范围，并添加了 “inclusive” 说明包含边界值</ol><p>这个修改直接对应 PR 的目标：修复 wght 字体特性标签的文档注释错误。<h2 id=kuo-zhan-yue-du>扩展阅读</h2><p>对于想了解更多相关概念的开发者，可以参考以下资源：<ol><li><strong>OpenType 字体特性规范</strong>: 了解 OpenType 字体特性标签系统，包括 “wght” 标签的详细规范<li><strong>Microsoft OpenType 文档</strong>: 官方文档中关于字体特性的说明，包括有效值范围的定义<li><strong>Bevy 引擎文本系统文档</strong>: 了解 Bevy 中文本渲染的整体架构和字体特性的使用方式<li><strong>typography 基础知识</strong>: 理解字重（font weight）在排版设计中的意义和应用</ol><p>这些资源可以帮助开发者更好地理解字体渲染技术，以及如何在游戏引擎中正确使用字体特性。<h1 id=wan-zheng-dai-ma-chai-yi>完整代码差异</h1><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_text/src/text.rs b/crates/bevy_text/src/text.rs
</span><span>index 12d4bbf143dec..800fd61307d6f 100644
</span><span style=color:#c594c5>--- a/crates/bevy_text/src/text.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_text/src/text.rs
</span><span style=color:#c594c5>@@ -588,7 +588,7 @@ </span><span style=color:#399ee6>impl FontFeatureTag {
</span><span>     /// same width.
</span><span>     pub const TABULAR_FIGURES: FontFeatureTag = FontFeatureTag::new(b"tnum");
</span><span> 
</span><span style=color:#f07171>-    /// Varies the stroke thickness. Values must be in the range of 0 to 1000.
</span><span style=color:#86b300>+    /// Varies the stroke thickness. Valid values are in the range of 1 to 1000, inclusive.
</span><span>     pub const WEIGHT: FontFeatureTag = FontFeatureTag::new(b"wght");
</span><span> 
</span><span>     /// Varies the width of text from narrower to wider. Must be a value greater than 0. A value of
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-01/pr_22441.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>