<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19987 fix percentage signs in SMAA
        
    </title><meta content="#19987 fix percentage signs in SMAA" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-07/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-07-06</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-07/pr-19987-zh-cn-20250706>中文</a></div></div><div class=pr-content><h1 id=title-fix-percentage-signs-in-smaa>Title: fix percentage signs in SMAA</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: fix percentage signs in SMAA<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19987<li><strong>Author</strong>: atlv24<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, D-Trivial, A-Rendering, S-Needs-Design, X-Contentious<li><strong>Created</strong>: 2025-07-06T18:55:06Z<li><strong>Merged</strong>: 2025-07-06T22:43:05Z<li><strong>Merged By</strong>: superdump</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>fix typo</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The problem started with a minor documentation error in Bevy’s SMAA (Subpixel Morphological Anti-Aliasing) implementation. In the shader comments describing quality presets, percentage values were incorrectly formatted with the percent sign preceding the numerical value (e.g., <code>%60</code> instead of <code>60%</code>). While this didn’t affect runtime behavior, it created inconsistent documentation that could confuse developers referencing these comments.<p>The solution approach was straightforward: correct the formatting of percentage values in the preset documentation comments. This required minimal changes - just repositioning the percent symbol in four lines of comments within the shader file. No functional code changes were needed since this was purely a documentation fix.<p>The implementation modified the shader source file <code>smaa.wgsl</code>, specifically the comments describing the SMAA quality presets. The changes corrected the percentage formatting to follow standard numerical conventions. This aligns the documentation with common mathematical notation and improves readability for developers working with the anti-aliasing system.<p>The impact of these changes is primarily on code maintainability and developer experience. Correct documentation formatting reduces cognitive load when reading the source code, especially for developers new to the SMAA implementation. The changes also maintain consistency with percentage notation used elsewhere in the codebase.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph LR
</span><span>    SMAA[SMAA Shader] --> Presets[Quality Presets]
</span><span>    Presets --> Formatting[Percentage Formatting]
</span><span>    Formatting --> Correction[Symbol Position Fix]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-anti-aliasing-src-smaa-smaa-wgsl><code>crates/bevy_anti_aliasing/src/smaa/smaa.wgsl</code></h3><p>This file contains the WebGPU Shading Language (WGSL) implementation of the SMAA anti-aliasing algorithm. The changes correct percentage formatting in documentation comments for quality presets.<p><strong>Key Modifications:</strong><pre class=language-wgsl data-lang=wgsl style=color:#61676c;background-color:#fafafa><code class=language-wgsl data-lang=wgsl><span>// Before:
</span><span> *         SMAA_PRESET_LOW          (%60 of the quality)
</span><span> *         SMAA_PRESET_MEDIUM       (%80 of the quality)
</span><span> *         SMAA_PRESET_HIGH         (%95 of the quality)
</span><span> *         SMAA_PRESET_ULTRA        (%99 of the quality)
</span><span>
</span><span>// After:
</span><span> *         SMAA_PRESET_LOW          (60% of the quality)
</span><span> *         SMAA_PRESET_MEDIUM       (80% of the quality)
</span><span> *         SMAA_PRESET_HIGH         (95% of the quality)
</span><span> *         SMAA_PRESET_ULTRA        (99% of the quality)
</span></code></pre><p>These changes fix the position of the percentage symbol in documentation comments while preserving all functional shader code. The modifications maintain the existing technical descriptions but present them using standard percentage notation.<h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://www.iryoku.com/smaa/ target=_blank>SMAA: Enhanced Subpixel Morphological Antialiasing</a> - Original research paper<li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_anti_aliasing/latest/bevy_anti_aliasing/ target=_blank>Bevy Anti-Aliasing Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://www.w3.org/TR/WGSL/ target=_blank>WGSL Shading Language Specification</a></ol><h2 id=full-code-diff>Full Code Diff</h2><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_anti_aliasing/src/smaa/smaa.wgsl b/crates/bevy_anti_aliasing/src/smaa/smaa.wgsl
</span><span>index 08723254483c6..24dc6baa25902 100644
</span><span style=color:#c594c5>--- a/crates/bevy_anti_aliasing/src/smaa/smaa.wgsl
</span><span style=color:#c594c5>+++ b/crates/bevy_anti_aliasing/src/smaa/smaa.wgsl
</span><span style=color:#c594c5>@@ -146,10 +146,10 @@
</span><span>  *         * (See SMAA_INCLUDE_VS and SMAA_INCLUDE_PS below).
</span><span>  *
</span><span>  *     And four presets:
</span><span style=color:#f07171>- *         SMAA_PRESET_LOW          (%60 of the quality)
</span><span style=color:#f07171>- *         SMAA_PRESET_MEDIUM       (%80 of the quality)
</span><span style=color:#f07171>- *         SMAA_PRESET_HIGH         (%95 of the quality)
</span><span style=color:#f07171>- *         SMAA_PRESET_ULTRA        (%99 of the quality)
</span><span style=color:#86b300>+ *         SMAA_PRESET_LOW          (60% of the quality)
</span><span style=color:#86b300>+ *         SMAA_PRESET_MEDIUM       (80% of the quality)
</span><span style=color:#86b300>+ *         SMAA_PRESET_HIGH         (95% of the quality)
</span><span style=color:#86b300>+ *         SMAA_PRESET_ULTRA        (99% of the quality)
</span><span>  *
</span><span>  *     For example:
</span><span>  *         #define SMAA_RT_METRICS float4(1.0 / 1280.0, 1.0 / 720.0, 1280.0, 720.0)
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-07/pr_19987.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>