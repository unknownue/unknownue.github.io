<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20180 Remove unnecessary + `use<>`
        
    </title><meta content="#20180 Remove unnecessary + `use<>`" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-07/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-07-17</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-07/pr-20180-zh-cn-20250717>中文</a></div></div><div class=pr-content><h2 id=analysis-of-pr-20180-remove-unnecessary-use>Analysis of PR #20180: Remove unnecessary + <code>use<></code></h2><h3 id=basic-information>Basic Information</h3><ul><li><strong>Title</strong>: Remove unnecessary + <code>use<></code><li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20180<li><strong>Author</strong>: cart<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, C-Code-Quality, P-High, S-Ready-For-Final-Review, X-Uncontroversial<li><strong>Created</strong>: 2025-07-17T21:16:28Z<li><strong>Merged</strong>: 2025-07-17T21:57:27Z<li><strong>Merged By</strong>: cart</ul><h3 id=description-translation>Description Translation</h3><h1 id=objective>Objective</h1><p>Including <code>use<></code> where it is not needed is abhorrent to my sensibilities<h2 id=solution>Solution</h2><p>Begone foul demon!<h3 id=the-story-of-this-pull-request>The Story of This Pull Request</h3><p>This PR addresses a minor but consistent code quality issue across several Bevy modules. The core problem was unnecessary trait bound syntax (<code>+ use<></code> or <code>+ use<'_></code>) appearing in function return type declarations. These redundant bounds didn’t affect functionality but added visual noise and violated Rust’s principle of minimal explicit typing.<p>The author identified four instances where <code>impl Trait</code> return types included superfluous <code>use</code> bounds. The changes are purely syntactic - removing these unnecessary specifiers makes the code cleaner and more idiomatic. Each modification follows the same pattern: stripping the <code>+ use</code> clause while preserving the actual return type semantics.<p>The changes demonstrate a key Rust principle: only specify necessary trait bounds. Since <code>use</code> wasn’t required for these return types, including it was misleading and added maintenance overhead. The PR required no architectural changes or new tests since it only affected type declarations, not runtime behavior.<p>These changes improve code readability and maintainability by:<ol><li>Removing visual clutter from type signatures<li>Making trait bounds more intentional<li>Aligning with Rust’s type inference capabilities<li>Establishing consistent patterns across the codebase</ol><h3 id=visual-representation>Visual Representation</h3><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    PR[PR #20180 Cleanup] --> ECS[crates/bevy_ecs]
</span><span>    PR --> AssetExample[examples/asset]
</span><span>    PR --> UIExample[examples/ui]
</span><span>    PR --> ContextExample[examples/usage]
</span></code></pre><h3 id=key-files-changed>Key Files Changed</h3><ol><li><p><strong>crates/bevy_ecs/src/entity_disabling.rs</strong><br> Removed unnecessary lifetime-bound <code>use</code> from iterator return type:</p> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>disabling_ids</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-></span><span> impl </span><span style=color:#55b4d4;font-style:italic>Iterator</span><span>&LTItem = ComponentId> </span><span style=color:#ed9366>+ </span><span style=color:#fa6e32>use</span><span style=color:#ed9366><'_>
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>disabling_ids</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-></span><span> impl </span><span style=color:#55b4d4;font-style:italic>Iterator</span><span>&LTItem = ComponentId>
</span></code></pre><li><p><strong>examples/asset/multi_asset_sync.rs</strong><br> Simplified future return type declaration:</p> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>wait_async</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-></span><span> impl Future&LTOutput = ()> </span><span style=color:#ed9366>+ </span><span style=color:#fa6e32>'static </span><span style=color:#ed9366>+ </span><span style=color:#fa6e32>use</span><span style=color:#ed9366><>
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>wait_async</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-></span><span> impl Future&LTOutput = ()> </span><span style=color:#ed9366>+ </span><span style=color:#fa6e32>'static
</span></code></pre><li><p><strong>examples/ui/button.rs</strong><br> Cleaned up UI bundle constructor signature:</p> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>button</span><span>(</span><span style=color:#ff8f40>asset_server</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>AssetServer) </span><span style=color:#61676ccc>-></span><span> impl Bundle </span><span style=color:#ed9366>+ </span><span style=color:#fa6e32>use</span><span style=color:#ed9366><>
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>button</span><span>(</span><span style=color:#ff8f40>asset_server</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>AssetServer) </span><span style=color:#61676ccc>-></span><span> impl Bundle
</span></code></pre><li><p><strong>examples/usage/context_menu.rs</strong> (2 instances)<br> Removed redundant bounds from UI component builders:</p> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>context_item</span><span>(</span><span style=color:#ff8f40>text</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>, </span><span style=color:#ff8f40>col</span><span style=color:#61676ccc>:</span><span> Srgba) </span><span style=color:#61676ccc>-></span><span> impl Bundle </span><span style=color:#ed9366>+ </span><span style=color:#fa6e32>use</span><span style=color:#ed9366><>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>background_and_button</span><span>() </span><span style=color:#61676ccc>-></span><span> impl Bundle </span><span style=color:#ed9366>+ </span><span style=color:#fa6e32>use</span><span style=color:#ed9366><>
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>context_item</span><span>(</span><span style=color:#ff8f40>text</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>, </span><span style=color:#ff8f40>col</span><span style=color:#61676ccc>:</span><span> Srgba) </span><span style=color:#61676ccc>-></span><span> impl Bundle
</span><span>fn background_and_button() </span><span style=color:#61676ccc>-></span><span> impl Bundle
</span></code></pre></ol><h3 id=further-reading>Further Reading</h3><ol><li><a rel="noopener nofollow noreferrer" href=https://rust-lang.github.io/rfcs/1522-conservative-impl-trait.html target=_blank>Rust RFC 1522: <code>impl Trait</code></a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/book/ch10-02-traits.html#trait-bounds target=_blank>Rust Book: Trait Bounds</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/blob/main/docs/CODE_CONVENTIONS.md target=_blank>Bevy Coding Conventions</a><li><a rel="noopener nofollow noreferrer" href=https://rust-lang.github.io/rust-clippy/master/ target=_blank>Rust Clippy Lints</a> (particularly bounds-related lints)</ol><h3 id=full-code-diff>Full Code Diff</h3><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_ecs/src/entity_disabling.rs b/crates/bevy_ecs/src/entity_disabling.rs
</span><span>index 41a461b77e498..39d2aa27e8837 100644
</span><span style=color:#c594c5>--- a/crates/bevy_ecs/src/entity_disabling.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_ecs/src/entity_disabling.rs
</span><span style=color:#c594c5>@@ -178,7 +178,7 @@ </span><span style=color:#399ee6>impl DefaultQueryFilters {
</span><span>     }
</span><span> 
</span><span>     /// Get an iterator over all of the components which disable entities when present.
</span><span style=color:#f07171>-    pub fn disabling_ids(&self) -> impl Iterator&LTItem = ComponentId> + use<'_> {
</span><span style=color:#86b300>+    pub fn disabling_ids(&self) -> impl Iterator&LTItem = ComponentId> {
</span><span>         self.disabling.iter().copied()
</span><span>     }
</span><span> 
</span><span>diff --git a/examples/asset/multi_asset_sync.rs b/examples/asset/multi_asset_sync.rs
</span><span>index cc233eb5fd4db..83add4ba3c016 100644
</span><span style=color:#c594c5>--- a/examples/asset/multi_asset_sync.rs
</span><span style=color:#c594c5>+++ b/examples/asset/multi_asset_sync.rs
</span><span style=color:#c594c5>@@ -105,7 +105,7 @@ </span><span style=color:#399ee6>impl AssetBarrier {
</span><span>     }
</span><span> 
</span><span>     /// Wait for all [`AssetBarrierGuard`]s to be dropped asynchronously.
</span><span style=color:#f07171>-    pub fn wait_async(&self) -> impl Future&LTOutput = ()> + 'static + use<> {
</span><span style=color:#86b300>+    pub fn wait_async(&self) -> impl Future&LTOutput = ()> + 'static {
</span><span>         let shared = self.0.clone();
</span><span>         async move {
</span><span>             loop {
</span><span>diff --git a/examples/ui/button.rs b/examples/ui/button.rs
</span><span>index a402b5e7da098..aefa96918bc5f 100644
</span><span style=color:#c594c5>--- a/examples/ui/button.rs
</span><span style=color:#c594c5>+++ b/examples/ui/button.rs
</span><span style=color:#c594c5>@@ -72,7 +72,7 @@ </span><span style=color:#399ee6>fn setup(mut commands: Commands, assets: Res&LTAssetServer>) {
</span><span>     commands.spawn(button(&assets));
</span><span> }
</span><span> 
</span><span style=color:#f07171>-fn button(asset_server: &AssetServer) -> impl Bundle + use<> {
</span><span style=color:#86b300>+fn button(asset_server: &AssetServer) -> impl Bundle {
</span><span>     (
</span><span>         Node {
</span><span>             width: Val::Percent(100.0),
</span><span>diff --git a/examples/usage/context_menu.rs b/examples/usage/context_menu.rs
</span><span>index a50e5cdabbae7..9ccd3e4b4b7e3 100644
</span><span style=color:#c594c5>--- a/examples/usage/context_menu.rs
</span><span style=color:#c594c5>+++ b/examples/usage/context_menu.rs
</span><span style=color:#c594c5>@@ -122,7 +122,7 @@ </span><span style=color:#399ee6>fn on_trigger_menu(trigger: On&LTOpenContextMenu>, mut commands: Commands) {
</span><span>         );
</span><span> }
</span><span> 
</span><span style=color:#f07171>-fn context_item(text: &str, col: Srgba) -> impl Bundle + use<> {
</span><span style=color:#86b300>+fn context_item(text: &str, col: Srgba) -> impl Bundle {
</span><span>     (
</span><span>         Name::new(format!("item-{text}")),
</span><span>         ContextMenuItem(col),
</span><span style=color:#c594c5>@@ -143,7 +143,7 @@ </span><span style=color:#399ee6>fn context_item(text: &str, col: Srgba) -> impl Bundle + use<> {
</span><span>     )
</span><span> }
</span><span> 
</span><span style=color:#f07171>-fn background_and_button() -> impl Bundle + use<> {
</span><span style=color:#86b300>+fn background_and_button() -> impl Bundle {
</span><span>     (
</span><span>         Name::new("background"),
</span><span>         Node {
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-07/pr_20180.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>