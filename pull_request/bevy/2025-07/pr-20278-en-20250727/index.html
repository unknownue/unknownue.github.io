<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20278 Delete `ui_material.rs`
        
    </title><meta content="#20278 Delete `ui_material.rs`" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-07/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-07-27</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-07/pr-20278-zh-cn-20250727>中文</a></div></div><div class=pr-content><h1 id=delete-ui-material-rs>Delete <code>ui_material.rs</code></h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Delete <code>ui_material.rs</code><li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20278<li><strong>Author</strong>: ickshonpe<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, A-UI, S-Ready-For-Final-Review<li><strong>Created</strong>: 2025-07-24T23:44:15Z<li><strong>Merged</strong>: 2025-07-27T20:11:47Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Remove <code>ui_material.rs</code> from the <code>bevy_ui</code> crate. The <code>mod</code> declaration was removed and the module was moved to the <code>bevy_ui_render</code> crate, but the original file wasn’t deleted.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a straightforward cleanup task in the Bevy UI system. The core issue was that during a previous code reorganization, the <code>ui_material</code> module had been moved from <code>bevy_ui</code> to <code>bevy_ui_render</code>, but the original source file (<code>ui_material.rs</code>) wasn’t deleted from its original location. This left dead code in the codebase that could cause confusion for developers and unnecessary bloat.<p>The solution was simple: delete the obsolete file. Since the module had already been relocated to <code>bevy_ui_render</code> and all references to it updated in previous PRs, this file served no purpose. Removing it cleans up the codebase and prevents potential confusion from having duplicate module declarations.<p>From an implementation perspective, this change required no complex modifications. The file deletion was the only operation needed. The cleanup aligns with standard code maintenance practices where obsolete files should be removed to keep the project structure clean and maintainable.<p>The impact is minimal but positive: the codebase now accurately reflects the actual module structure, reducing cognitive load for developers working in this area. There are no functional changes or performance implications, as this was purely a file system cleanup operation.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph LR
</span><span>    A[bevy_ui crate] --> B[src directory]
</span><span>    B -- Remove --> C[ui_material.rs]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-ui-src-ui-material-rs-0-182><code>crates/bevy_ui/src/ui_material.rs</code> (+0/-182)</h3><p>This file was entirely removed since its contents had been migrated to the <code>bevy_ui_render</code> crate in a previous reorganization. The file contained the <code>UiMaterial</code> trait implementation and related components for custom UI materials, which are no longer part of the <code>bevy_ui</code> crate’s responsibilities.<p><strong>File contents before deletion:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>use crate</span><span style=color:#ed9366>::</span><span>Node</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>use </span><span>bevy_asset</span><span style=color:#ed9366>::</span><span>{Asset</span><span style=color:#61676ccc>,</span><span> AssetId</span><span style=color:#61676ccc>,</span><span> Handle}</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>use </span><span>bevy_derive</span><span style=color:#ed9366>::</span><span>{Deref</span><span style=color:#61676ccc>,</span><span> DerefMut}</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>use </span><span>bevy_ecs</span><span style=color:#ed9366>::</span><span>{component</span><span style=color:#ed9366>::</span><span>Component</span><span style=color:#61676ccc>, </span><span>reflect</span><span style=color:#ed9366>::</span><span>ReflectComponent}</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>use </span><span>bevy_reflect</span><span style=color:#ed9366>::</span><span>{prelude</span><span style=color:#ed9366>::</span><span>ReflectDefault</span><span style=color:#61676ccc>,</span><span> Reflect}</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>use </span><span>bevy_render</span><span style=color:#ed9366>::</span><span>{
</span><span>    extract_component</span><span style=color:#ed9366>::</span><span>ExtractComponent</span><span style=color:#61676ccc>,
</span><span>    render_resource</span><span style=color:#ed9366>::</span><span>{AsBindGroup</span><span style=color:#61676ccc>,</span><span> RenderPipelineDescriptor</span><span style=color:#61676ccc>,</span><span> ShaderRef}</span><span style=color:#61676ccc>,
</span><span>}</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>use </span><span>core</span><span style=color:#ed9366>::</span><span>hash</span><span style=color:#ed9366>::</span><span>Hash</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>use </span><span>derive_more</span><span style=color:#ed9366>::</span><span>derive</span><span style=color:#ed9366>::</span><span>From</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>/// Materials are used alongside [`UiMaterialPlugin`](crate::UiMaterialPlugin) and [`MaterialNode`]
</span><span style=color:#abb0b6;font-style:italic>/// to spawn entities that are rendered with a specific [`UiMaterial`] type. They serve as an easy to use high level
</span><span style=color:#abb0b6;font-style:italic>/// way to render `Node` entities with custom shader logic.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// `UiMaterials` must implement [`AsBindGroup`] to define how data will be transferred to the GPU and bound in shaders.
</span><span style=color:#abb0b6;font-style:italic>/// [`AsBindGroup`] can be derived, which makes generating bindings straightforward. See the [`AsBindGroup`] docs for details.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// Materials must also implement [`Asset`] so they can be treated as such.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// If you are only using the fragment shader, make sure your shader imports the `UiVertexOutput`
</span><span style=color:#abb0b6;font-style:italic>/// from `bevy_ui::ui_vertex_output` and uses it as the input of your fragment shader like the
</span><span style=color:#abb0b6;font-style:italic>/// example below does.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// # Example
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// Here is a simple [`UiMaterial`] implementation. The [`AsBindGroup`] derive has many features. To see what else is available,
</span><span style=color:#abb0b6;font-style:italic>/// check out the [`AsBindGroup`] documentation.
</span><span style=color:#abb0b6;font-style:italic>/// ```
</span><span style=color:#abb0b6;font-style:italic>/// # use bevy_ui::prelude::*;
</span><span style=color:#abb0b6;font-style:italic>/// # use bevy_ecs::prelude::*;
</span><span style=color:#abb0b6;font-style:italic>/// # use bevy_image::Image;
</span><span style=color:#abb0b6;font-style:italic>/// # use bevy_reflect::TypePath;
</span><span style=color:#abb0b6;font-style:italic>/// # use bevy_render::render_resource::{AsBindGroup, ShaderRef};
</span><span style=color:#abb0b6;font-style:italic>/// # use bevy_color::LinearRgba;
</span><span style=color:#abb0b6;font-style:italic>/// # use bevy_asset::{Handle, AssetServer, Assets, Asset};
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// #[derive(AsBindGroup, Asset, TypePath, Debug, Clone)]
</span><span style=color:#abb0b6;font-style:italic>/// pub struct CustomMaterial {
</span><span style=color:#abb0b6;font-style:italic>///     // Uniform bindings must implement `ShaderType`, which will be used to convert the value to
</span><span style=color:#abb0b6;font-style:italic>///     // its shader-compatible equivalent. Most core math types already implement `ShaderType`.
</span><span style=color:#abb0b6;font-style:italic>///     #[uniform(0)]
</span><span style=color:#abb0b6;font-style:italic>///     color: LinearRgba,
</span><span style=color:#abb0b6;font-style:italic>///     // Images can be bound as textures in shaders. If the Image's sampler is also needed, just
</span><span style=color:#abb0b6;font-style:italic>///     // add the sampler attribute with a different binding index.
</span><span style=color:#abb0b6;font-style:italic>///     #[texture(1)]
</span><span style=color:#abb0b6;font-style:italic>///     #[sampler(2)]
</span><span style=color:#abb0b6;font-style:italic>///     color_texture: Handle&LTImage>,
</span><span style=color:#abb0b6;font-style:italic>/// }
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// // All functions on `UiMaterial` have default impls. You only need to implement the
</span><span style=color:#abb0b6;font-style:italic>/// // functions that are relevant for your material.
</span><span style=color:#abb0b6;font-style:italic>/// impl UiMaterial for CustomMaterial {
</span><span style=color:#abb0b6;font-style:italic>///     fn fragment_shader() -> ShaderRef {
</span><span style=color:#abb0b6;font-style:italic>///         "shaders/custom_material.wgsl".into()
</span><span style=color:#abb0b6;font-style:italic>///     }
</span><span style=color:#abb0b6;font-style:italic>/// }
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// // Spawn an entity using `CustomMaterial`.
</span><span style=color:#abb0b6;font-style:italic>/// fn setup(mut commands: Commands, mut materials: ResMut&LTAssets&LTCustomMaterial>>, asset_server: Res&LTAssetServer>) {
</span><span style=color:#abb0b6;font-style:italic>///     commands.spawn((
</span><span style=color:#abb0b6;font-style:italic>///         MaterialNode(materials.add(CustomMaterial {
</span><span style=color:#abb0b6;font-style:italic>///             color: LinearRgba::RED,
</span><span style=color:#abb0b6;font-style:italic>///             color_texture: asset_server.load("some_image.png"),
</span><span style=color:#abb0b6;font-style:italic>///         })),
</span><span style=color:#abb0b6;font-style:italic>///         Node {
</span><span style=color:#abb0b6;font-style:italic>///             width: Val::Percent(100.0),
</span><span style=color:#abb0b6;font-style:italic>///             ..Default::default()
</span><span style=color:#abb0b6;font-style:italic>///         },
</span><span style=color:#abb0b6;font-style:italic>///     ));
</span><span style=color:#abb0b6;font-style:italic>/// }
</span><span style=color:#abb0b6;font-style:italic>/// ```
</span><span style=color:#abb0b6;font-style:italic>/// In WGSL shaders, the material's binding would look like this:
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// If you only use the fragment shader make sure to import `UiVertexOutput` from
</span><span style=color:#abb0b6;font-style:italic>/// `bevy_ui::ui_vertex_output` in your wgsl shader.
</span><span style=color:#abb0b6;font-style:italic>/// Also note that bind group 0 is always bound to the [`View Uniform`](bevy_render::view::ViewUniform)
</span><span style=color:#abb0b6;font-style:italic>/// and the [`Globals Uniform`](bevy_render::globals::GlobalsUniform).
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// ```wgsl
</span><span style=color:#abb0b6;font-style:italic>/// #import bevy_ui::ui_vertex_output UiVertexOutput
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// struct CustomMaterial {
</span><span style=color:#abb0b6;font-style:italic>///     color: vec4&LTf32>,
</span><span style=color:#abb0b6;font-style:italic>/// }
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// @group(1) @binding(0)
</span><span style=color:#abb0b6;font-style:italic>/// var&LTuniform> material: CustomMaterial;
</span><span style=color:#abb0b6;font-style:italic>/// @group(1) @binding(1)
</span><span style=color:#abb0b6;font-style:italic>/// var color_texture: texture_2d&LTf32>;
</span><span style=color:#abb0b6;font-style:italic>/// @group(1) @binding(2)
</span><span style=color:#abb0b6;font-style:italic>/// var color_sampler: sampler;
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// @fragment
</span><span style=color:#abb0b6;font-style:italic>/// fn fragment(in: UiVertexOutput) -> @location(0) vec4&LTf32> {
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// }
</span><span style=color:#abb0b6;font-style:italic>/// ```
</span><span style=color:#fa6e32>pub trait </span><span style=color:#399ee6>UiMaterial</span><span>: AsBindGroup + Asset + Clone + Sized {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Returns this materials vertex shader. If [`ShaderRef::Default`] is returned, the default UI
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// vertex shader will be used.
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>vertex_shader</span><span>() </span><span style=color:#61676ccc>-></span><span> ShaderRef {
</span><span>        ShaderRef</span><span style=color:#ed9366>::</span><span>Default
</span><span>    }
</span><span>
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Returns this materials fragment shader. If [`ShaderRef::Default`] is returned, the default
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// UI fragment shader will be used.
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>fragment_shader</span><span>() </span><span style=color:#61676ccc>-></span><span> ShaderRef {
</span><span>        ShaderRef</span><span style=color:#ed9366>::</span><span>Default
</span><span>    }
</span><span>
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>expect</span><span>(
</span><span>        unused_variables</span><span style=color:#61676ccc>,
</span><span>        reason </span><span style=color:#ed9366>= </span><span style=color:#86b300>"The parameters here are intentionally unused by the default implementation; however, putting underscores here will result in the underscores being copied by rust-analyzer's tab completion."
</span><span>    )]
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>inline</span><span>]
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>specialize</span><span>(</span><span style=color:#ff8f40>descriptor</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> RenderPipelineDescriptor, </span><span style=color:#ff8f40>key</span><span style=color:#61676ccc>: </span><span>UiMaterialKey<</span><span style=color:#fa6e32>Self</span><span>>) {}
</span><span>}
</span><span>
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>UiMaterialKey</span><span>&LTM</span><span style=color:#61676ccc>:</span><span> UiMaterial> {
</span><span>    </span><span style=color:#fa6e32>pub </span><span>hdr</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>bool</span><span>,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>bind_group_data</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>M</span><span style=color:#ed9366>::</span><span>Data,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl</span><span>&LTM</span><span style=color:#61676ccc>:</span><span> UiMaterial> Eq </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>UiMaterialKey</span><span>&LTM> </span><span style=color:#fa6e32>where M</span><span style=color:#ed9366>::</span><span>Data</span><span style=color:#61676ccc>:</span><span> PartialEq {}
</span><span>
</span><span style=color:#fa6e32>impl</span><span>&LTM</span><span style=color:#61676ccc>:</span><span> UiMaterial> PartialEq </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>UiMaterialKey</span><span>&LTM>
</span><span style=color:#fa6e32>where
</span><span>    </span><span style=color:#fa6e32>M</span><span style=color:#ed9366>::</span><span>Data</span><span style=color:#61676ccc>:</span><span> PartialEq,
</span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>eq</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>other</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>Self</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>bool </span><span>{
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>hdr </span><span style=color:#ed9366>==</span><span> other</span><span style=color:#ed9366>.</span><span>hdr </span><span style=color:#ed9366>&& </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>bind_group_data </span><span style=color:#ed9366>==</span><span> other</span><span style=color:#ed9366>.</span><span>bind_group_data
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl</span><span>&LTM</span><span style=color:#61676ccc>:</span><span> UiMaterial> Clone </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>UiMaterialKey</span><span>&LTM>
</span><span style=color:#fa6e32>where
</span><span>    </span><span style=color:#fa6e32>M</span><span style=color:#ed9366>::</span><span>Data</span><span style=color:#61676ccc>:</span><span> Clone,
</span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>clone</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#fa6e32>Self </span><span>{
</span><span>            hdr</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>hdr</span><span style=color:#61676ccc>,
</span><span>            bind_group_data</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>bind_group_data</span><span style=color:#61676ccc>,
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl</span><span>&LTM</span><span style=color:#61676ccc>:</span><span> UiMaterial> core</span><span style=color:#ed9366>::</span><span>hash</span><span style=color:#ed9366>::</span><span>Hash </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>UiMaterialKey</span><span>&LTM>
</span><span style=color:#fa6e32>where
</span><span>    </span><span style=color:#fa6e32>M</span><span style=color:#ed9366>::</span><span>Data</span><span style=color:#61676ccc>:</span><span> Hash,
</span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>hash</span><span>&LTH</span><span style=color:#61676ccc>: </span><span>core</span><span style=color:#ed9366>::</span><span>hash</span><span style=color:#ed9366>::</span><span>Hasher>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>state</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> H) {
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>hdr</span><span style=color:#ed9366>.</span><span style=color:#f07171>hash</span><span>(state)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>bind_group_data</span><span style=color:#ed9366>.</span><span style=color:#f07171>hash</span><span>(state)</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(
</span><span>    Component</span><span style=color:#61676ccc>,</span><span> Clone</span><span style=color:#61676ccc>,</span><span> Debug</span><span style=color:#61676ccc>,</span><span> Deref</span><span style=color:#61676ccc>,</span><span> DerefMut</span><span style=color:#61676ccc>,</span><span> Reflect</span><span style=color:#61676ccc>,</span><span> PartialEq</span><span style=color:#61676ccc>,</span><span> Eq</span><span style=color:#61676ccc>,</span><span> ExtractComponent</span><span style=color:#61676ccc>,</span><span> From</span><span style=color:#61676ccc>,
</span><span>)]
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>reflect</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Default)]
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>require</span><span>(Node)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>MaterialNode</span><span>&LTM</span><span style=color:#61676ccc>:</span><span> UiMaterial>(pub Handle&LTM>)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>impl</span><span>&LTM</span><span style=color:#61676ccc>:</span><span> UiMaterial> Default </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>MaterialNode</span><span>&LTM> {
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>default</span><span>() </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#fa6e32>Self</span><span>(Handle</span><span style=color:#ed9366>::</span><span>default())
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl</span><span>&LTM</span><span style=color:#61676ccc>:</span><span> UiMaterial> </span><span style=color:#55b4d4;font-style:italic>From</span><span>&LTMaterialNode&LTM>> </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>AssetId</span><span>&LTM> {
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>from</span><span>(</span><span style=color:#ff8f40>material</span><span style=color:#61676ccc>: </span><span>MaterialNode&LTM>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        material</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl</span><span>&LTM</span><span style=color:#61676ccc>:</span><span> UiMaterial> </span><span style=color:#55b4d4;font-style:italic>From</span><span><</span><span style=color:#ed9366>&</span><span>MaterialNode&LTM>> </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>AssetId</span><span>&LTM> {
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>from</span><span>(</span><span style=color:#ff8f40>material</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>MaterialNode&LTM>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        material</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()
</span><span>    }
</span><span>}
</span></code></pre><p><strong>After deletion:</strong><br> The file no longer exists in the <code>bevy_ui/src</code> directory.<h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy target=_blank>Bevy Engine GitHub Repository</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_ui/latest/bevy_ui/ target=_blank>Bevy UI Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/book/ch07-02-defining-modules-to-control-scope-and-privacy.html target=_blank>Rust Modules Reference</a></ol><h2 id=full-code-diff>Full Code Diff</h2><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_ui/src/ui_material.rs b/crates/bevy_ui/src/ui_material.rs
</span><span>deleted file mode 100644
</span><span>index b4a7e9a6b6416..0000000000000
</span><span style=color:#c594c5>--- a/crates/bevy_ui/src/ui_material.rs
</span><span style=color:#c594c5>+++ /dev/null
</span><span style=color:#c594c5>@@ -1,182 +0,0 @@
</span><span style=color:#f07171>-use crate::Node;
</span><span style=color:#f07171>-use bevy_asset::{Asset, AssetId, Handle};
</span><span style=color:#f07171>-use bevy_derive::{Deref, DerefMut};
</span><span style=color:#f07171>-use bevy_ecs::{component::Component, reflect::ReflectComponent};
</span><span style=color:#f07171>-use bevy_reflect::{prelude::ReflectDefault, Reflect};
</span><span style=color:#f07171>-use bevy_render::{
</span><span style=color:#f07171>-    extract_component::ExtractComponent,
</span><span style=color:#f07171>-    render_resource::{AsBindGroup, RenderPipelineDescriptor, ShaderRef},
</span><span style=color:#f07171>-};
</span><span style=color:#f07171>-use core::hash::Hash;
</span><span style=color:#f07171>-use derive_more::derive::From;
</span><span style=color:#f07171>-
</span><span style=color:#f07171>-/// Materials are used alongside [`UiMaterialPlugin`](crate::UiMaterialPlugin) and [`MaterialNode`]
</span><span style=color:#f07171>-/// to spawn entities that are rendered with a specific [`UiMaterial`] type. They serve as an easy to use high level
</span><span style=color:#f07171>-/// way to render `Node` entities with custom shader logic.
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// `UiMaterials` must implement [`AsBindGroup`] to define how data will be transferred to the GPU and bound in shaders.
</span><span style=color:#f07171>-/// [`AsBindGroup`] can be derived, which makes generating bindings straightforward. See the [`AsBindGroup`] docs for details.
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// Materials must also implement [`Asset`] so they can be treated as such.
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// If you are only using the fragment shader, make sure your shader imports the `UiVertexOutput`
</span><span style=color:#f07171>-/// from `bevy_ui::ui_vertex_output` and uses it as the input of your fragment shader like the
</span><span style=color:#f07171>-/// example below does.
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// # Example
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// Here is a simple [`UiMaterial`] implementation. The [`AsBindGroup`] derive has many features. To see what else is available,
</span><span style=color:#f07171>-/// check out the [`AsBindGroup`] documentation.
</span><span style=color:#f07171>-/// ```
</span><span style=color:#f07171>-/// # use bevy_ui::prelude::*;
</span><span style=color:#f07171>-/// # use bevy_ecs::prelude::*;
</span><span style=color:#f07171>-/// # use bevy_image::Image;
</span><span style=color:#f07171>-/// # use bevy_reflect::TypePath;
</span><span style=color:#f07171>-/// # use bevy_render::render_resource::{AsBindGroup, ShaderRef};
</span><span style=color:#f07171>-/// # use bevy_color::LinearRgba;
</span><span style=color:#f07171>-/// # use bevy_asset::{Handle, AssetServer, Assets, Asset};
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// #[derive(AsBindGroup, Asset, TypePath, Debug, Clone)]
</span><span style=color:#f07171>-/// pub struct CustomMaterial {
</span><span style=color:#f07171>-///     // Uniform bindings must implement `ShaderType`, which will be used to convert the value to
</span><span style=color:#f07171>-///     // its shader-compatible equivalent. Most core math types already implement `ShaderType`.
</span><span style=color:#f07171>-///     #[uniform(0)]
</span><span style=color:#f07171>-///     color: LinearRgba,
</span><span style=color:#f07171>-///     // Images can be bound as textures in shaders. If the Image's sampler is also needed, just
</span><span style=color:#f07171>-///     // add the sampler attribute with a different binding index.
</span><span style=color:#f07171>-///     #[texture(1)]
</span><span style=color:#f07171>-///     #[sampler(2)]
</span><span style=color:#f07171>-///     color_texture: Handle&LTImage>,
</span><span style=color:#f07171>-/// }
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// // All functions on `UiMaterial` have default impls. You only need to implement the
</span><span style=color:#f07171>-/// // functions that are relevant for your material.
</span><span style=color:#f07171>-/// impl UiMaterial for CustomMaterial {
</span><span style=color:#f07171>-///     fn fragment_shader() -> ShaderRef {
</span><span style=color:#f07171>-///         "shaders/custom_material.wgsl".into()
</span><span style=color:#f07171>-///     }
</span><span style=color:#f07171>-/// }
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// // Spawn an entity using `CustomMaterial`.
</span><span style=color:#f07171>-/// fn setup(mut commands: Commands, mut materials: ResMut&LTAssets&LTCustomMaterial>>, asset_server: Res&LTAssetServer>) {
</span><span style=color:#f07171>-///     commands.spawn((
</span><span style=color:#f07171>-///         MaterialNode(materials.add(CustomMaterial {
</span><span style=color:#f07171>-///             color: LinearRgba::RED,
</span><span style=color:#f07171>-///             color_texture: asset_server.load("some_image.png"),
</span><span style=color:#f07171>-///         })),
</span><span style=color:#f07171>-///         Node {
</span><span style=color:#f07171>-///             width: Val::Percent(100.0),
</span><span style=color:#f07171>-///             ..Default::default()
</span><span style=color:#f07171>-///         },
</span><span style=color:#f07171>-///     ));
</span><span style=color:#f07171>-/// }
</span><span style=color:#f07171>-/// ```
</span><span style=color:#f07171>-/// In WGSL shaders, the material's binding would look like this:
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// If you only use the fragment shader make sure to import `UiVertexOutput` from
</span><span style=color:#f07171>-/// `bevy_ui::ui_vertex_output` in your wgsl shader.
</span><span style=color:#f07171>-/// Also note that bind group 0 is always bound to the [`View Uniform`](bevy_render::view::ViewUniform)
</span><span style=color:#f07171>-/// and the [`Globals Uniform`](bevy_render::globals::GlobalsUniform).
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// ```wgsl
</span><span style=color:#f07171>-/// #import bevy_ui::ui_vertex_output UiVertexOutput
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// struct CustomMaterial {
</span><span style=color:#f07171>-///     color: vec4&LTf32>,
</span><span style=color:#f07171>-/// }
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// @group(1) @binding(0)
</span><span style=color:#f07171>-/// var&LTuniform> material: CustomMaterial;
</span><span style=color:#f07171>-/// @group(1) @binding(1)
</span><span style=color:#f07171>-/// var color_texture: texture_2d&LTf32>;
</span><span style=color:#f07171>-/// @group(1) @binding(2)
</span><span style=color:#f07171>-/// var color_sampler: sampler;
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// @fragment
</span><span style=color:#f07171>-/// fn fragment(in: UiVertexOutput) -> @location(0) vec4&LTf32> {
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// }
</span><span style=color:#f07171>-/// ```
</span><span style=color:#f07171>-pub trait UiMaterial: AsBindGroup + Asset + Clone + Sized {
</span><span style=color:#f07171>-    /// Returns this materials vertex shader. If [`ShaderRef::Default`] is returned, the default UI
</span><span style=color:#f07171>-    /// vertex shader will be used.
</span><span style=color:#f07171>-    fn vertex_shader() -> ShaderRef {
</span><span style=color:#f07171>-        ShaderRef::Default
</span><span style=color:#f07171>-    }
</span><span style=color:#f07171>-
</span><span style=color:#f07171>-    /// Returns this materials fragment shader. If [`ShaderRef::Default`] is returned, the default
</span><span style=color:#f07171>-    /// UI fragment shader will be used.
</span><span style=color:#f07171>-    fn fragment_shader() -> ShaderRef {
</span><span style=color:#f07171>-        ShaderRef::Default
</span><span style=color:#f07171>-    }
</span><span style=color:#f07171>-
</span><span style=color:#f07171>-    #[expect(
</span><span style=color:#f07171>-        unused_variables,
</span><span style=color:#f07171>-        reason = "The parameters here are intentionally unused by the default implementation; however, putting underscores here will result in the underscores being copied by rust-analyzer's tab completion."
</span><span style=color:#f07171>-    )]
</span><span style=color:#f07171>-    #[inline]
</span><span style=color:#f07171>-    fn specialize(descriptor: &mut RenderPipelineDescriptor, key: UiMaterialKey&LTSelf>) {}
</span><span style=color:#f07171>-}
</span><span style=color:#f07171>-
</span><span style=color:#f07171>-pub struct UiMaterialKey&LTM: UiMaterial> {
</span><span style=color:#f07171>-    pub hdr: bool,
</span><span style=color:#f07171>-    pub bind_group_data: M::Data,
</span><span style=color:#f07171>-}
</span><span style=color:#f07171>-
</span><span style=color:#f07171>-impl&LTM: UiMaterial> Eq for UiMaterialKey&LTM> where M::Data: PartialEq {}
</span><span style=color:#f07171>-
</span><span style=color:#f07171>-impl&LTM: UiMaterial> PartialEq for UiMaterialKey&LTM>
</span><span style=color:#f07171>-where
</span><span style=color:#f07171>-    M::Data: PartialEq,
</span><span style=color:#f07171>-{
</span><span style=color:#f07171>-    fn eq(&self, other: &Self) -> bool {
</span><span style=color:#f07171>-        self.hdr == other.hdr && self.bind_group_data == other.bind_group_data
</span><span style=color:#f07171>-    }
</span><span style=color:#f07171>-}
</span><span style=color:#f07171>-
</span><span style=color:#f07171>-impl&LTM: UiMaterial> Clone for UiMaterialKey&LTM>
</span><span style=color:#f07171>-where
</span><span style=color:#f07171>-    M::Data: Clone,
</span><span style=color:#f07171>-{
</span><span style=color:#f07171>-    fn clone(&self) -> Self {
</span><span style=color:#f07171>-        Self {
</span><span style=color:#f07171>-            hdr: self.hdr,
</span><span style=color:#f07171>-            bind_group_data: self.bind_group_data,
</span><span style=color:#f07171>-        }
</span><span style=color:#f07171>-    }
</span><span style=color:#f07171>-}
</span><span style=color:#f07171>-
</span><span style=color:#f07171>-impl&LTM: UiMaterial> core::hash::Hash for UiMaterialKey&LTM>
</span><span style=color:#f07171>-where
</span><span style=color:#f07171>-    M::Data: Hash,
</span><span style=color:#f07171>-{
</span><span style=color:#f07171>-    fn hash&LTH: core::hash::Hasher>(&self, state: &mut H) {
</span><span style=color:#f07171>-        self.hdr.hash(state);
</span><span style=color:#f07171>-        self.bind_group_data.hash(state);
</span><span style=color:#f07171>-    }
</span><span style=color:#f07171>-}
</span><span style=color:#f07171>-
</span><span style=color:#f07171>-#[derive(
</span><span style=color:#f07171>-    Component, Clone, Debug, Deref, DerefMut, Reflect, PartialEq, Eq, ExtractComponent, From,
</span><span style=color:#f07171>-)]
</span><span style=color:#f07171>-#[reflect(Component, Default)]
</span><span style=color:#f07171>-#[require(Node)]
</span><span style=color:#f07171>-pub struct MaterialNode&LTM: UiMaterial>(pub Handle&LTM>);
</span><span style=color:#f07171>-
</span><span style=color:#f07171>-impl&LTM: UiMaterial> Default for MaterialNode&LTM> {
</span><span style=color:#f07171>-    fn default() -> Self {
</span><span style=color:#f07171>-        Self(Handle::default())
</span><span style=color:#f07171>-    }
</span><span style=color:#f07171>-}
</span><span style=color:#f07171>-
</span><span style=color:#f07171>-impl&LTM: UiMaterial> From&LTMaterialNode&LTM>> for AssetId&LTM> {
</span><span style=color:#f07171>-    fn from(material: MaterialNode&LTM>) -> Self {
</span><span style=color:#f07171>-        material.id()
</span><span style=color:#f07171>-    }
</span><span style=color:#f07171>-}
</span><span style=color:#f07171>-
</span><span style=color:#f07171>-impl&LTM: UiMaterial> From<&MaterialNode&LTM>> for AssetId&LTM> {
</span><span style=color:#f07171>-    fn from(material: &MaterialNode&LTM>) -> Self {
</span><span style=color:#f07171>-        material.id()
</span><span style=color:#f07171>-    }
</span><span style=color:#f07171>-}
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-07/pr_20278.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>