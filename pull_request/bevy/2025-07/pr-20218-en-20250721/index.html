<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20218 Fix relationship method names in comments
        
    </title><meta content="#20218 Fix relationship method names in comments" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-07/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-07-21</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-07/pr-20218-zh-cn-20250721>中文</a></div></div><div class=pr-content><h2 id=fix-relationship-method-names-in-comments>Fix relationship method names in comments</h2><h3 id=basic-information>Basic Information</h3><ul><li><strong>Title</strong>: Fix relationship method names in comments<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20218<li><strong>Author</strong>: shunkie<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, D-Trivial, A-ECS, S-Ready-For-Final-Review<li><strong>Created</strong>: 2025-07-21T06:24:15Z<li><strong>Merged</strong>: 2025-07-21T07:43:25Z<li><strong>Merged By</strong>: mockersf</ul><h3 id=description-translation>Description Translation</h3><p>The original PR description is in English, so we preserve it exactly as-is:<pre style=color:#61676c;background-color:#fafafa><code><span>Fix relationship method names in comments
</span><span>
</span><span>Fix the relationship helper method names in the comments of the `relationships` example.
</span><span>
</span><span>The method names in the comments were incorrect. The correct method names are `with_related` and `with_related_entities`, not `with_related` and `with_relationships`.
</span><span>
</span><span>This PR updates the comments to match the actual method names.
</span><span>
</span><span>No functional changes.
</span></code></pre><h3 id=the-story-of-this-pull-request>The Story of This Pull Request</h3><h4 id=the-problem-and-context>The Problem and Context</h4><p>The <code>relationships.rs</code> example in Bevy’s ECS module contained incorrect documentation in its comments. Specifically, the example described two relationship helper methods on <code>EntityCommands</code>: <code>with_related</code> and <code>with_relationships</code>. However, the actual API only provides <code>with_related</code> and <code>with_related_entities</code>. This discrepancy created potential confusion for developers using the example as reference material.<p>The problem was identified as a documentation error - while the example code itself was functionally correct, the accompanying comments contained inaccurate method names. This type of inconsistency is particularly problematic in examples, which serve as learning resources and reference implementations for developers working with Bevy’s ECS relationships API.<h4 id=the-solution-approach>The Solution Approach</h4><p>The solution was straightforward: update the comments to reflect the actual method names in the API. The developer identified two instances where the incorrect method name <code>with_relationships</code> appeared in comments and replaced them with the correct <code>with_related_entities</code> name. Since this was purely a documentation fix, no functional changes were needed.<h4 id=the-implementation>The Implementation</h4><p>The implementation consisted of two simple comment updates in the <code>relationships.rs</code> example file. The first change corrected the overview comment describing the available helper methods, while the second change fixed the specific example demonstrating relationship creation.<h4 id=technical-insights>Technical Insights</h4><p>This fix highlights the importance of maintaining consistency between API documentation and actual implementation. Even minor discrepancies in examples can create confusion and friction for developers learning a new system. The relationship methods (<code>with_related</code> and <code>with_related_entities</code>) are part of Bevy’s Entity Command API, which provides a builder pattern for configuring entities and their relationships.<h4 id=the-impact>The Impact</h4><p>This correction improves the developer experience by ensuring the example’s documentation accurately reflects the API. Developers studying this example will now see the correct method names, reducing confusion and potential errors when implementing relationships in their own projects. While a small change, it contributes to the overall quality and reliability of Bevy’s documentation ecosystem.<h3 id=visual-representation>Visual Representation</h3><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Incorrect Comment] -->|Causes| B[Developer Confusion]
</span><span>    C[PR #20218] -->|Updates| D[relationships.rs Example]
</span><span>    D -->|Corrects| E[Method Names in Comments]
</span><span>    E -->|Results In| F[Accurate Documentation]
</span></code></pre><h3 id=key-files-changed>Key Files Changed</h3><h4 id=examples-ecs-relationships-rs><code>examples/ecs/relationships.rs</code></h4><p>This file contains the ECS relationships example. The changes fix incorrect method names in comments to match the actual API.<p><strong>Changes:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>// The `with_related` and `with_relationships` helper methods on `EntityCommands`...
</span><span style=color:#abb0b6;font-style:italic>// The `with_relationships` method will automatically add...
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>// The `with_related` and `with_related_entities` helper methods on `EntityCommands`...
</span><span style=color:#abb0b6;font-style:italic>// The `with_related_entities` method will automatically add...
</span></code></pre><p><strong>Full diff:</strong><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/examples/ecs/relationships.rs b/examples/ecs/relationships.rs
</span><span>index 5b855164283af..c8dc7f9b8b043 100644
</span><span style=color:#c594c5>--- a/examples/ecs/relationships.rs
</span><span style=color:#c594c5>+++ b/examples/ecs/relationships.rs
</span><span style=color:#c594c5>@@ -53,12 +53,12 @@ </span><span style=color:#399ee6>fn main() {
</span><span>         // Relations are just components, so we can add them into the bundle that we're spawning.
</span><span>         let bob = commands.spawn((Name::new("Bob"), Targeting(alice))).id();
</span><span> 
</span><span style=color:#f07171>-        // The `with_related` and `with_relationships` helper methods on `EntityCommands` can be used to add relations in a more ergonomic way.
</span><span style=color:#86b300>+        // The `with_related` and `with_related_entities` helper methods on `EntityCommands` can be used to add relations in a more ergonomic way.
</span><span>         let charlie = commands
</span><span>             .spawn((Name::new("Charlie"), Targeting(bob)))
</span><span>             // The `with_related` method will spawn a bundle with `Targeting` relationship
</span><span>             .with_related::&LTTargeting>(Name::new("James"))
</span><span style=color:#f07171>-            // The `with_relationships` method will automatically add the `Targeting` component to any entities spawned within the closure,
</span><span style=color:#86b300>+            // The `with_related_entities` method will automatically add the `Targeting` component to any entities spawned within the closure,
</span><span>             // targeting the entity that we're calling `with_related` on.
</span><span>             .with_related_entities::&LTTargeting>(|related_spawner_commands| {
</span><span>                 // We could spawn multiple entities here, and they would all target `charlie`.
</span></code></pre><h3 id=further-reading>Further Reading</h3><ol><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/ecs/relationship/index.html target=_blank>Bevy ECS Relationships Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/ecs/system/struct.EntityCommands.html target=_blank>EntityCommands API Reference</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/blob/main/examples/ecs/relationships.rs target=_blank>Original Relationships Example</a></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-07/pr_20218.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>