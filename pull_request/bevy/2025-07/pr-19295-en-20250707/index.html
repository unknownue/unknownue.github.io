<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19295 Explanation for the '3d shapes' example
        
    </title><meta content="#19295 Explanation for the '3d shapes' example" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-07/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-07-07</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-07/pr-19295-zh-cn-20250707>中文</a></div></div><div class=pr-content><h1 id=pull-request-analysis-explanation-for-the-3d-shapes-example>Pull Request Analysis: Explanation for the ‘3d shapes’ example</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Explanation for the ‘3d shapes’ example<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19295<li><strong>Author</strong>: fallible-algebra<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, A-Rendering, C-Examples, S-Ready-For-Final-Review, D-Straightforward<li><strong>Created</strong>: 2025-05-19T16:12:21Z<li><strong>Merged</strong>: 2025-07-07T20:07:06Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/contribute/helping-out/explaining-examples/ target=_blank>Explanation</a> for the 3d shapes example.<p>This shares a lot of detail with the <a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/pull/19211 target=_blank>2d shapes</a> example, so it’s similar in structure. The explanation for why asset handles are not components has been copied over for now with minor adjustment, I’ll do another editing pass on this to make it match the surrounding context and focus before taking it out of drafts.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The 3D shapes example in Bevy demonstrates how to create various primitive 3D objects, but its documentation was minimal. This presented a problem for newcomers trying to understand how Bevy’s rendering pipeline works with shape primitives, meshes, and materials. Without proper explanation, users might struggle to grasp key concepts like how mathematical shape definitions become renderable objects or why asset handles require special handling.<p>The solution approach focused on adding comprehensive documentation directly in the example file. The author expanded the module-level documentation to explain the complete workflow from shape primitives to rendered objects. This included clarifying several important concepts: how shape primitives differ from meshes, the role of the Assets system in mesh creation, how extrusion converts 2D shapes to 3D objects, and why asset handles need to be wrapped in component types.<p>The implementation consisted of replacing the original two-line comment with a detailed technical explanation. The new documentation explains the transformation pipeline where shape primitives like <code>Sphere</code> are converted to meshes via <code>meshes.add()</code>, which internally uses the <code>From&LTShape></code> implementation for <code>Mesh</code>. It also clarifies how extrusion works to give 2D shapes volume and depth.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>//! This example demonstrates the built-in 3d shapes in Bevy.
</span><span style=color:#abb0b6;font-style:italic>//! The scene includes a patterned texture and a rotation for visualizing the normals and UVs.
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>//! Here we use shape primitives to generate meshes for 3d objects as well as attaching a runtime-generated patterned texture to each 3d object.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! "Shape primitives" here are just the mathematical definition of certain shapes...
</span></code></pre><p>The explanation addresses a common point of confusion - why asset handles aren’t used directly as components. The documentation clarifies that handles are wrapped in newtype components (<code>Mesh3d</code>, <code>MeshMaterial3d</code>) to prevent ambiguity since entities might hold handles for various purposes beyond rendering.<p>The texture generation process is also explained - how the example creates a patterned texture at runtime by writing RGBA values to a buffer array, registers it as an asset, and applies the resulting <code>Handle&LTStandardMaterial></code> to all shapes. This demonstrates Bevy’s dynamic asset creation capabilities.<p>These changes significantly improve the educational value of the example by explaining not just what the code does, but why each step is necessary and how it fits into Bevy’s architecture. The documentation serves as a practical guide to core Bevy concepts like the asset system, mesh generation, and component composition.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    S[Shape Primitives] -->|Converted via| M[Meshes]
</span><span>    M -->|Stored as| H[Handle&LTMesh>]
</span><span>    H -->|Wrapped in| C1[Mesh3d Component]
</span><span>    T[Texture Generation] -->|Creates| MA[StandardMaterial]
</span><span>    MA -->|Stored as| H2[Handle&LTStandardMaterial>]
</span><span>    H2 -->|Wrapped in| C2[MeshMaterial3d Component]
</span><span>    C1 --> R[Rendered Object]
</span><span>    C2 --> R
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=examples-3d-3d-shapes-rs><code>examples/3d/3d_shapes.rs</code></h3><p>This file received comprehensive documentation improvements explaining the 3D rendering workflow.<p><strong>Changes:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>//! This example demonstrates the built-in 3d shapes in Bevy.
</span><span style=color:#abb0b6;font-style:italic>//! The scene includes a patterned texture and a rotation for visualizing the normals and UVs.
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>//! Here we use shape primitives to generate meshes for 3d objects as well as attaching a runtime-generated patterned texture to each 3d object.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! "Shape primitives" here are just the mathematical definition of certain shapes, they're not meshes on their own! A sphere with radius `1.0` can be defined with [`Sphere::new(1.0)`][Sphere::new] but all this does is store the radius. So we need to turn these descriptions of shapes into meshes.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! While a shape is not a mesh, turning it into one in Bevy is easy. In this example we call [`meshes.add(/* Shape here! */)`][Assets&LTA>::add] on the shape, which works because the [`Assets&LTA>::add`] method takes anything that can be turned into the asset type it stores. There's an implementation for [`From`] on shape primitives into [`Mesh`], so that will get called internally by [`Assets&LTA>::add`].
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! [`Extrusion`] lets us turn 2D shape primitives into versions of those shapes that have volume by extruding them. A 1x1 square that gets wrapped in this with an extrusion depth of 2 will give us a rectangular prism of size 1x1x2, but here we're just extruding these 2d shapes by depth 1.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! The material applied to these shapes is a texture that we generate at run time by looping through a "palette" of RGBA values (stored adjacent to each other in the array) and writing values to positions in another array that represents the buffer for an 8x8 texture. This texture is then registered with the assets system just one time, with that [`Handle&LTStandardMaterial>`] then applied to all the shapes in this example.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! The mesh and material are [`Handle&LTMesh>`] and [`Handle&LTStandardMaterial>`] at the moment, neither of which implement `Component` on their own. Handles are put behind "newtypes" to prevent ambiguity, as some entities might want to have handles to meshes (or images, or materials etc.) for different purposes! All we need to do to make them rendering-relevant components is wrap the mesh handle and the material handle in [`Mesh3d`] and [`MeshMaterial3d`] respectively.
</span></code></pre><p><strong>Impact:</strong> These changes transform the example from a simple demonstration to an educational resource that explains:<ol><li>The relationship between shape primitives and renderable meshes<li>How the asset system converts shapes to meshes<li>The extrusion process for 3D shapes<li>Runtime texture generation<li>Why handles require component wrappers</ol><h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/contribute/helping-out/explaining-examples/ target=_blank>Bevy’s Contributing Guide: Explaining Examples</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/pull/19211 target=_blank>Related PR: Explanation for 2D Shapes Example</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/asset/trait.Asset.html target=_blank>Bevy Assets System Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/render/mesh/struct.Mesh.html target=_blank>Mesh Generation in Bevy</a><li><a rel="noopener nofollow noreferrer" href=https://bevy-cheatbook.github.io/programming/component.html target=_blank>Component Wrapping Patterns in ECS</a></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-07/pr_19295.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>