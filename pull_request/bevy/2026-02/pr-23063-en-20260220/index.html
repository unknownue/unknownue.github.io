<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #23063 Add notes about using the R channel as the occlusion_texture
        
    </title><meta content="#23063 Add notes about using the R channel as the occlusion_texture" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-20</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-23063-zh-cn-20260220>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><p>Add notes about using the R channel as the occlusion_texture<h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Add notes about using the R channel as the occlusion_texture<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/23063<li><strong>Author</strong>: janhohenheim<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, A-Rendering, S-Ready-For-Final-Review, D-Straightforward<li><strong>Created</strong>: 2026-02-19T22:14:20Z<li><strong>Merged</strong>: 2026-02-20T01:31:41Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>I wasn’t sure if Bevy supported the common ARM-RGB encoding (r = AO, G = Roughness, B = Metallic). The docs weren’t helpful here.</ul><h2 id=solution>Solution</h2><ul><li>I set up a tiny test scene to make sure. Yes, Bevy works perfectly fine with that setup! Let’s make it easier for future users by documenting it.<li>This “Use the R channel for this texture” trick can also be used for other textures, like the clearcoat, but IME the most common thing is ambient occlusion, so I only added it there for now.</ul><h2 id=testing>Testing</h2><ul><li>Local test project</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>When working with Physically Based Rendering (PBR) materials, a common pattern in game development is to pack multiple material properties into a single texture using different color channels. One widely used packing scheme is the ARM format, where:<ul><li><strong>R</strong> channel stores Ambient Occlusion (AO)<li><strong>G</strong> channel stores Roughness<li><strong>B</strong> channel stores Metallic</ul><p>The PR author, janhohenheim, encountered a practical problem: while setting up PBR materials in Bevy, they wanted to use this ARM texture packing approach but couldn’t find explicit documentation confirming whether Bevy’s PBR implementation supported it. The existing documentation for the <code>StandardMaterial::occlusion_texture</code> field didn’t mention channel usage or texture sharing patterns.<p>To resolve this uncertainty, the author took the pragmatic engineering approach of creating a minimal test project. This allowed them to verify empirically that Bevy’s PBR shader does indeed correctly interpret the red channel of a texture as the occlusion value when using the ARM packing scheme. Once confirmed, they recognized this as a documentation gap that other developers would likely encounter.<p>The solution implemented is straightforward but valuable: adding clear documentation to the <code>occlusion_texture</code> field that explicitly:<ol><li>States the common practice of using RGB textures with specific channel assignments<li>Explains how to implement this in Bevy (using the same image handle for both <code>occlusion_texture</code> and <code>metallic_roughness_texture</code>)<li>Provides context by mentioning that this is the standard setup used by glTF, linking to relevant Blender documentation</ol><p>This documentation change serves as a form of “tribal knowledge” preservation. While the functionality already existed in the codebase, without explicit documentation, developers either need to discover it through experimentation (as the author did) or rely on community knowledge. By documenting this pattern directly in the code, the PR reduces the cognitive load for future developers and prevents redundant investigation.<p>The implementation is minimal - just five lines of documentation comments added to a single field. However, its impact is significant for developers working with PBR materials, especially those migrating from other engines or following common asset creation workflows. The PR author also notes that while this channel-sharing pattern could be applied to other material properties (like clearcoat), they focused on the most common use case for ambient occlusion to keep the change focused and avoid over-documenting less common patterns.<p>This PR demonstrates good documentation practices in action: identifying a knowledge gap through personal experience, verifying the technical details, and contributing that knowledge back to the project in a clear, concise manner that helps the entire community.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Developer Experience] --> B[Uncertainty about ARM texture support]
</span><span>    B --> C[Test implementation]
</span><span>    C --> D[Verification of functionality]
</span><span>    D --> E[Documentation gap identified]
</span><span>    E --> F[Add docs to occlusion_texture field]
</span><span>    F --> G[Improved developer experience for future users]
</span><span>    
</span><span>    H[RGB Texture] --> I[R: Ambient Occlusion]
</span><span>    H --> J[G: Roughness]
</span><span>    H --> K[B: Metallic]
</span><span>    I --> L[occlusion_texture field]
</span><span>    J --> M[metallic_roughness_texture field]
</span><span>    K --> M
</span><span>    L --> N[StandardMaterial]
</span><span>    M --> N
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><p><strong>File:</strong> <code>crates/bevy_pbr/src/pbr_material.rs</code><p><strong>Changes:</strong> Added documentation to the <code>occlusion_texture</code> field of the <code>StandardMaterial</code> struct to clarify that Bevy supports the common ARM texture packing format (Ambient Occlusion in R channel, Roughness in G channel, Metallic in B channel).<p><strong>Code Snippet:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_pbr/src/pbr_material.rs
</span><span style=color:#abb0b6;font-style:italic>// After the change (lines 424-434):
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>StandardMaterial </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... other fields ...
</span><span>
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// A tangent space normal map.
</span><span>    </span><span style=color:#abb0b6;font-style:italic>///
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// A common way to create this is with a
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// [`NormalMapPreprocess`](bevy_pbr::normal_map::NormalMapPreprocess) plugin
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// that transforms a standard RGB normal map into a tangent space normal map.
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>texture</span><span>(6)]
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>sampler</span><span>(7)]
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>dependency</span><span>]
</span><span>    </span><span style=color:#fa6e32>pub </span><span>normal_map_texture</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTHandle&LTImage>>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// A texture representing ambient occlusion, also known as "cavity."
</span><span>    </span><span style=color:#abb0b6;font-style:italic>///
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// The material will be less lit in places where this texture is dark.
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// This is similar to ambient occlusion, but built into the model.
</span><span>    </span><span style=color:#abb0b6;font-style:italic>///
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// It is very common to use an RGB texture that uses the red channel for the [`StandardMaterial::occlusion_texture`],
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// and the B and G channels for [`StandardMaterial::metallic_roughness_texture`].
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// In such cases, use the same image handle for both fields.
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Notably, this is the setup used by [glTF](https://docs.blender.org/manual/en/latest/addons/import_export/scene_gltf2.html#baked-ambient-occlusion).
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>texture</span><span>(7)]
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>sampler</span><span>(8)]
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>dependency</span><span>]
</span><span>    </span><span style=color:#fa6e32>pub </span><span>occlusion_texture</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTHandle&LTImage>>,
</span><span>
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... more fields ...
</span><span>}
</span></code></pre><p><strong>Why this change matters:</strong> The added documentation explicitly states that:<ol><li>Bevy supports the ARM texture packing format (AO in R, Roughness in G, Metallic in B)<li>Developers should use the same image handle for both <code>occlusion_texture</code> and <code>metallic_roughness_texture</code> when using this format<li>This is the standard approach used by glTF, providing context and linking to external documentation</ol><p>This eliminates ambiguity for developers and aligns with common industry practices for PBR material workflows.<h2 id=further-reading>Further Reading</h2><ol><li><p><strong>Physically Based Rendering (PBR) Theory</strong>: For understanding the fundamentals of PBR materials and why texture packing is used</p> <ul><li><a rel="noopener nofollow noreferrer" href=https://learnopengl.com/PBR/Theory target=_blank>LearnOpenGL: Theory</a><li><a rel="noopener nofollow noreferrer" href=https://www.marmoset.co/posts/basic-theory-of-physically-based-rendering/ target=_blank>Marmoset: PBR Theory</a></ul><li><p><strong>Texture Packing Techniques</strong>: For more information on channel packing in game development</p> <ul><li><a rel="noopener nofollow noreferrer" href=https://developer.nvidia.com/gpugems/gpugems2/part-iv-image-oriented-computing/chapter-24-using-vertex-texture-fetch-ocean target=_blank>GPU Optimization: Texture Channel Packing</a><li><a rel="noopener nofollow noreferrer" href=https://docs.unity3d.com/Packages/com.unity.render-pipelines.high-definition@14.0/manual/Mask-Map-and-Detail-Map.html target=_blank>Unity Documentation: Texture Channel Packing</a></ul><li><p><strong>glTF Material System</strong>: For understanding the standard that Bevy’s PBR implementation follows</p> <ul><li><a rel="noopener nofollow noreferrer" href=https://github.com/KhronosGroup/glTF/blob/main/specification/2.0/README.md#materials target=_blank>glTF 2.0 Specification: Materials</a><li><a rel="noopener nofollow noreferrer" href=https://docs.blender.org/manual/en/latest/addons/import_export/scene_gltf2.html target=_blank>Blender glTF Export Documentation</a></ul><li><p><strong>Bevy PBR Documentation</strong>: For context on Bevy’s implementation</p> <ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/3d-rendering/ target=_blank>Bevy Book: 3D Rendering</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/tree/main/examples/3d target=_blank>Bevy Examples: PBR</a></ul></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_23063.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>