<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22783 Fix vignette docstring to match default values
        
    </title><meta content="#22783 Fix vignette docstring to match default values" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-03</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-22783-zh-cn-20260203>中文</a></div></div><div class=pr-content><h1 id=fix-vignette-docstring-to-match-default-values>Fix vignette docstring to match default values</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Fix vignette docstring to match default values<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22783<li><strong>Author</strong>: glennDittmann<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, D-Trivial, A-Rendering, S-Ready-For-Final-Review<li><strong>Created</strong>: 2026-02-02T21:08:59Z<li><strong>Merged</strong>: 2026-02-03T00:45:33Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Update docstrings to match the actual default values defined as <code>const</code>s in the code.<p>Fixes #22677<h2 id=solution>Solution</h2><p>/<h2 id=testing>Testing</h2><p>/<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This pull request addresses a documentation inconsistency in Bevy’s post-processing system. The issue was straightforward: the docstrings for the <code>Vignette</code> component’s fields didn’t match the actual default values defined as constants in the code. While this might seem like a minor oversight, accurate documentation is crucial for a game engine like Bevy where developers rely on clear, correct API documentation to understand how to use features effectively.<p>The problem originated from the <code>Vignette</code> struct’s field documentation stating incorrect default values. For example, the docstring for the <code>intensity</code> field said the default was 0.50, but the actual constant <code>DEFAULT_VIGNETTE_INTENSITY</code> was defined as 1.00. Similar mismatches existed for the <code>radius</code>, <code>smoothness</code>, <code>roundness</code>, and <code>edge_compensation</code> fields. This discrepancy could mislead developers about the expected behavior when they create a <code>Vignette</code> component without explicitly setting these values.<p>The solution implemented in this PR is direct and focused. The developer identified all the mismatched documentation strings and updated them to reflect the actual default values defined in the constants. Additionally, they standardized the formatting of floating-point constants by changing values like <code>1.00</code> to <code>1.0</code> for consistency with Rust conventions, though this formatting change doesn’t affect the actual values.<p>The changes are minimal but important. When developers read documentation for the <code>Vignette</code> component, they now get accurate information about what values will be used by default. This prevents confusion and potential bugs where developers might assume different default behavior. The fix also improves the consistency of the codebase by ensuring that documentation always reflects the actual implementation.<p>From an engineering perspective, this PR demonstrates good attention to detail in maintaining documentation quality. While the changes are simple, they address a real usability issue where incorrect documentation could lead to developer frustration or incorrect assumptions about system behavior. The PR also shows the value of having constants defined for default values, as this makes it easier to identify and fix documentation mismatches.<p>The implementation approach is straightforward: update the docstrings to reference the correct constants. No architectural changes were needed, and the fix doesn’t affect runtime behavior. The PR was properly labeled with documentation-related tags (C-Docs, D-Trivial) and rendering area tags (A-Rendering), and was reviewed and merged quickly, indicating consensus on the importance of accurate documentation.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Vignette Component] --> B[Default Values Constants]
</span><span>    A --> C[Field Documentation]
</span><span>    B --> D{Docs Match Constants?}
</span><span>    D -- No --> E[Update Docstrings]
</span><span>    D -- Yes --> F[Documentation Correct]
</span><span>    E --> F
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-post-process-src-effect-stack-vignette-rs-8-8><code>crates/bevy_post_process/src/effect_stack/vignette.rs</code> (+8/-8)</h3><p>This file contains the <code>Vignette</code> component definition and its associated default value constants. The changes fix documentation mismatches between the field docstrings and the actual default values defined as constants.<p><strong>Key modifications:</strong><ol><li><strong>Standardized constant formatting</strong> - Changed <code>1.00</code> to <code>1.0</code> for consistency:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>const </span><span style=color:#ff8f40>DEFAULT_VIGNETTE_INTENSITY</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32 </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>1.00</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>const </span><span style=color:#ff8f40>DEFAULT_VIGNETTE_ROUNDNESS</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32 </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>1.00</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>const </span><span style=color:#ff8f40>DEFAULT_VIGNETTE_EDGE_COMPENSATION</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32 </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>1.00</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>const </span><span style=color:#ff8f40>DEFAULT_VIGNETTE_INTENSITY</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32 </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>1.0</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>const </span><span style=color:#ff8f40>DEFAULT_VIGNETTE_ROUNDNESS</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32 </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>1.0</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>const </span><span style=color:#ff8f40>DEFAULT_VIGNETTE_EDGE_COMPENSATION</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32 </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>1.0</span><span style=color:#61676ccc>;
</span></code></pre><ol start=2><li><strong>Updated field documentation</strong> - Corrected docstrings to match actual default values:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>/// The default value is 0.50
</span><span style=color:#fa6e32>pub</span><span> intensity</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>/// The default value is 1.00  
</span><span style=color:#fa6e32>pub</span><span> radius</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>/// The default value is 0.50
</span><span style=color:#fa6e32>pub</span><span> smoothness</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>/// The default value is 0.75
</span><span style=color:#fa6e32>pub</span><span> roundness</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>/// The default value is 1.00
</span><span style=color:#fa6e32>pub</span><span> edge_compensation</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>/// The default value is 1.0
</span><span style=color:#fa6e32>pub</span><span> intensity</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>/// The default value is 0.75
</span><span style=color:#fa6e32>pub</span><span> radius</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>/// The default value is 5.0
</span><span style=color:#fa6e32>pub</span><span> smoothness</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>/// The default value is 1.0
</span><span style=color:#fa6e32>pub</span><span> roundness</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>/// The default value is 1.0
</span><span style=color:#fa6e32>pub</span><span> edge_compensation</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span style=color:#61676ccc>,
</span></code></pre><p>The changes ensure that developers reading the documentation get accurate information about the default behavior of the <code>Vignette</code> component.<h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/rustdoc/how-to-write-documentation.html target=_blank>Rust Documentation Comments</a> - Best practices for writing documentation in Rust<li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/cookbook/2d/8-post-processing/ target=_blank>Bevy Post-Processing Effects</a> - How to use post-processing effects in Bevy<li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/book/ch03-01-variables-and-mutability.html#constants target=_blank>Constants in Rust</a> - Using constants for default values in Rust<li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/issues/22677 target=_blank>Issue #22677</a> - The original issue reporting the documentation mismatch</ul><h1 id=full-code-diff>Full Code Diff</h1><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_post_process/src/effect_stack/vignette.rs b/crates/bevy_post_process/src/effect_stack/vignette.rs
</span><span>index 8c09023be65e4..cf96708b6c0df 100644
</span><span style=color:#c594c5>--- a/crates/bevy_post_process/src/effect_stack/vignette.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_post_process/src/effect_stack/vignette.rs
</span><span style=color:#c594c5>@@ -11,7 +11,7 @@ </span><span style=color:#399ee6>use bevy_reflect::{std_traits::ReflectDefault, Reflect};
</span><span> use bevy_render::{extract_component::ExtractComponent, render_resource::ShaderType};
</span><span> 
</span><span> /// The default vignette intensity amount.
</span><span style=color:#f07171>-const DEFAULT_VIGNETTE_INTENSITY: f32 = 1.00;
</span><span style=color:#86b300>+const DEFAULT_VIGNETTE_INTENSITY: f32 = 1.0;
</span><span> 
</span><span> /// The default vignette radius amount.
</span><span> const DEFAULT_VIGNETTE_RADIUS: f32 = 0.75;
</span><span style=color:#c594c5>@@ -20,10 +20,10 @@ </span><span style=color:#399ee6>const DEFAULT_VIGNETTE_RADIUS: f32 = 0.75;
</span><span> const DEFAULT_VIGNETTE_SMOOTHNESS: f32 = 5.0;
</span><span> 
</span><span> /// The default vignette roundness amount.
</span><span style=color:#f07171>-const DEFAULT_VIGNETTE_ROUNDNESS: f32 = 1.00;
</span><span style=color:#86b300>+const DEFAULT_VIGNETTE_ROUNDNESS: f32 = 1.0;
</span><span> 
</span><span> /// The default vignette edge compensation
</span><span style=color:#f07171>-const DEFAULT_VIGNETTE_EDGE_COMPENSATION: f32 = 1.00;
</span><span style=color:#86b300>+const DEFAULT_VIGNETTE_EDGE_COMPENSATION: f32 = 1.0;
</span><span> 
</span><span> /// Adds a gradual shading effect to the edges of the screen, drawing focus
</span><span> /// towards the center.
</span><span style=color:#c594c5>@@ -45,25 +45,25 @@ </span><span style=color:#399ee6>pub struct Vignette {
</span><span>     ///
</span><span>     /// Range: `0.0` (No effect) to `1.0` (Fully black corners)
</span><span>     ///
</span><span style=color:#f07171>-    /// The default value is 0.50
</span><span style=color:#86b300>+    /// The default value is 1.0
</span><span>     pub intensity: f32,
</span><span>     /// The size of the unvignetted center area.
</span><span>     ///
</span><span>     /// Range: `0.0` (Tiny center) to `2.0+` (Large center)
</span><span>     ///
</span><span style=color:#f07171>-    /// The default value is 1.00
</span><span style=color:#86b300>+    /// The default value is 0.75
</span><span>     pub radius: f32,
</span><span>     /// The softness of the edge between the clear and dark areas.
</span><span>     ///
</span><span>     /// Range: `0.01` (Sharp edge) to `1.0+` (Very soft edge)
</span><span>     ///
</span><span style=color:#f07171>-    /// The default value is 0.50
</span><span style=color:#86b300>+    /// The default value is 5.0
</span><span>     pub smoothness: f32,
</span><span>     /// The shape of the vignette.
</span><span>     ///
</span><span>     /// `1.0` represents a perfect circle.
</span><span>     ///
</span><span style=color:#f07171>-    /// The default value is 0.75
</span><span style=color:#86b300>+    /// The default value is 1.0
</span><span>     pub roundness: f32,
</span><span>     /// The center of the vignette in UV coordinates (0.0 to 1.0).
</span><span>     ///
</span><span style=color:#c594c5>@@ -76,7 +76,7 @@ </span><span style=color:#399ee6>pub struct Vignette {
</span><span>     ///
</span><span>     /// Range: `0.0`(No fit) to `1.0` (Perfect fit)
</span><span>     ///
</span><span style=color:#f07171>-    /// The default value is 1.00
</span><span style=color:#86b300>+    /// The default value is 1.0
</span><span>     pub edge_compensation: f32,
</span><span>     /// The color of the vignette.
</span><span>     ///
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_22783.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>