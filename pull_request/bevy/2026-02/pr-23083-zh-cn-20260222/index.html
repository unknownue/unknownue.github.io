<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #23083 Fix 2d specialization w/ change lists.
        
    </title><meta content="#23083 Fix 2d specialization w/ change lists." property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-22</span><div class=language-switcher><a class=lang-link data-lang=en href=/pull_request/bevy/2026-02/pr-23083-en-20260222>English</a> / <span class="lang-link active" data-lang=zh-cn>中文</span></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Fix 2d specialization w/ change lists.<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/23083<li><strong>Author</strong>: tychedelia<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Bug, A-Rendering, S-Ready-For-Final-Review, P-Regression<li><strong>Created</strong>: 2026-02-20T21:32:53Z<li><strong>Merged</strong>: 2026-02-22T04:53:04Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p>对 #22966 之后 2D 渲染的一些修复。<p>这很复杂，因为与 3D 不同，2D 材质系统是针对其材质的泛型，而非类型擦除的。这意味着我们必须防范不同材质系统相互竞争时可能出现的各种奇怪情况。<p>我不确定这是否完全正确。最终的解决方案是摆脱所有这些定制的 2D 系统。<p>主要的修复点包括：<ul><li><code>material_bind_group_id</code> 不再每帧重置为默认值。<code>extract_mesh2d</code> 原本在每次提取时设置 <code>material_bind_group_id</code>。在此之前，这个值会在后续每帧的队列处理中被覆盖，但有了脏跟踪后，实体不会每帧都重新入队，因此默认值就保留下来了。<li><code>prepare_for_new_frame</code> 移动到了一个非泛型系统中。<li>更小心地避免将错误材质类型的实体添加到待处理队列中，否则它们会永远无法被专用化。<li>出队操作不再跨类型覆盖。当视图变脏时，我们之前返回所有可见实体，这在存在多种材质的情况下会带来问题。</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>这个 PR 开始于开发者注意到，在引入变更列表（change list）优化后，2D 渲染出现了一些回归问题。问题的核心在于，2D 的材质系统是泛型的，这与 3D 的类型擦除系统不同，导致了多材质类型竞争时的复杂性。<p>第一个主要问题是关于材质绑定组 ID 的生命周期管理。在 <code>extract_mesh2d</code> 系统中，每次提取时都会将 <code>material_bind_group_id</code> 设置为默认值（<code>Material2dBindGroupId::default()</code>）。在旧的渲染循环中，这个默认值会在每帧的 <code>queue_material2d_meshes</code> 中被正确的绑定组 ID 覆盖。然而，引入脏跟踪优化后，实体只在必要时才重新入队，这意味着如果实体没有被标记为脏，那么错误的默认绑定组 ID 就会一直保留，导致渲染问题。<p>修复方法是将绑定组 ID 的查找移到了提取阶段。通过引入两个新的资源来跨材质类型共享信息：<ul><li><code>RenderMaterial2dIds</code>: 一个从实体到未类型化材质 ID 的映射<li><code>RenderMaterial2dBindGroupIds</code>: 一个从未类型化材质 ID 到实际绑定组 ID 的映射</ul><p>在 <code>extract_mesh2d</code> 中，我们现在查找实体的材质 ID，然后通过该材质 ID 找到对应的绑定组 ID。这确保了实体在提取阶段就获得了正确的绑定组 ID，而不是依赖后续阶段的覆盖。<p>第二个问题涉及泛型系统与变更列表的交互。原来的 <code>specialize_material2d_meshes</code> 系统是一个泛型系统（每个材质类型一个实例），它负责初始化每个视图的待处理队列（<code>prepare_for_new_frame</code>）。这导致每个材质类型都会为同一视图初始化队列，造成冗余工作，并且可能产生竞争条件。<p>解决方案是将队列准备逻辑提取到一个独立的、非泛型的系统 <code>prepare_pending_mesh_material2d_queues</code> 中。这个系统在所有材质专用化系统之前运行（通过 <code>.after(prepare_pending_mesh_material2d_queues)</code> 顺序约束确保），为所有视图统一准备待处理队列。这消除了冗余，并保证了队列状态的一致性。<p>第三个问题是关于实体入队和出队的逻辑。之前，当视图变脏时，系统会遍历所有需要出队的实体（包括那些只是对当前材质类型不可见的实体）。这可能导致一种材质类型的系统错误地移除另一种材质类型的实体，因为出队逻辑是基于通用的 <code>dirty_specializations</code> 数据，而不是按材质类型过滤的。<p>新的实现更加精确地处理出队：<ol><li>只移除那些真正变得不可见或完全丢失网格/材质的实体<li>对于切换材质类型的实体（在 <code>changed_renderables</code> 中），则推迟到入队循环中处理，这样每个材质类型只处理自己的实体<li>在添加新的渲染项之前，先移除旧项，这样可以安全地处理排序键（bin key）的变化</ol><p>这些变化共同解决了 2D 渲染在引入变更列表优化后出现的多个问题。虽然作者提到，最终的解决方案可能是重构整个 2D 系统以避免这些复杂性问题，但当前的修复提供了稳定且正确的工作状态。<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    subgraph "提取阶段"
</span><span>        A[extract_mesh2d] --> B[设置绑定组ID]
</span><span>        C[extract_mesh_materials_2d] --> D[更新RenderMaterial2dIds]
</span><span>    end
</span><span>    
</span><span>    subgraph "准备阶段"
</span><span>        E[prepare_pending_mesh_material2d_queues] --> F[准备待处理队列]
</span><span>    end
</span><span>    
</span><span>    subgraph "专用化阶段"
</span><span>        G[specialize_material2d_meshes] --> H[处理当前材质类型实体]
</span><span>        F --> G
</span><span>    end
</span><span>    
</span><span>    subgraph "入队阶段"
</span><span>        I[queue_material2d_meshes] --> J[按材质类型处理入队/出队]
</span><span>        H --> I
</span><span>    end
</span><span>    
</span><span>    D --> B
</span><span>    B --> J
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=1-crates-bevy-sprite-render-src-mesh2d-material-rs-83-44>1. <code>crates/bevy_sprite_render/src/mesh2d/material.rs</code> (+83/-44)</h3><p><strong>变更描述</strong>：这是修复的主要文件，包含了对 2D 材质系统的核心逻辑修改。<p><strong>关键修改</strong>：<ol><li>添加了新的资源类型来跟踪材质 ID 和绑定组 ID：</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Resource</span><span style=color:#61676ccc>,</span><span> Default</span><span style=color:#61676ccc>,</span><span> Deref</span><span style=color:#61676ccc>,</span><span> DerefMut)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>RenderMaterial2dBindGroupIds</span><span>(HashMap&LTUntypedAssetId, Material2dBindGroupId>)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Resource</span><span style=color:#61676ccc>,</span><span> Default</span><span style=color:#61676ccc>,</span><span> Deref</span><span style=color:#61676ccc>,</span><span> DerefMut)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>RenderMaterial2dIds</span><span>(MainEntityHashMap&LTUntypedAssetId>)</span><span style=color:#61676ccc>;
</span></code></pre><ol start=2><li>修改了 <code>extract_mesh_materials_2d</code> 函数，现在会更新 <code>RenderMaterial2dIds</code> 资源：</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// 之前：只更新 material_instances
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>add_mesh_instance</span><span>&LTM>(...)
</span><span style=color:#fa6e32>where</span><span> M</span><span style=color:#61676ccc>:</span><span> Material2d {
</span><span>    material_instances</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>(entity</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>()</span><span style=color:#61676ccc>,</span><span> material</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>())</span><span style=color:#61676ccc>;
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// 之后：同时更新两个资源
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>add_mesh_instance</span><span>&LTM>(...)
</span><span style=color:#fa6e32>where</span><span> M</span><span style=color:#61676ccc>:</span><span> Material2d {
</span><span>    material_instances</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>(entity</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>()</span><span style=color:#61676ccc>,</span><span> material</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>())</span><span style=color:#61676ccc>;
</span><span>    render_material_2d_ids</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>(entity</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>()</span><span style=color:#61676ccc>,</span><span> material</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>())</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><ol start=3><li>添加了新的非泛型系统 <code>prepare_pending_mesh_material2d_queues</code>：</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>prepare_pending_mesh_material2d_queues</span><span>(
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>pending_mesh_material2d_queues</span><span style=color:#61676ccc>: </span><span>ResMut&LTPendingMeshMaterial2dQueues>,
</span><span>    </span><span style=color:#ff8f40>views</span><span style=color:#61676ccc>: </span><span>Query<</span><span style=color:#ed9366>&</span><span>ExtractedView>,
</span><span>) {
</span><span>    </span><span style=color:#fa6e32>let mut</span><span> all_views</span><span style=color:#61676ccc>: </span><span>HashSet&LTRetainedViewEntity, FixedHasher> </span><span style=color:#ed9366>= </span><span>HashSet</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>for</span><span> view </span><span style=color:#ed9366>in &</span><span>views {
</span><span>        all_views</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>(view</span><span style=color:#ed9366>.</span><span>retained_view_entity)</span><span style=color:#61676ccc>;
</span><span>        pending_mesh_material2d_queues</span><span style=color:#ed9366>.</span><span style=color:#f07171>prepare_for_new_frame</span><span>(view</span><span style=color:#ed9366>.</span><span>retained_view_entity)</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>    pending_mesh_material2d_queues</span><span style=color:#ed9366>.</span><span style=color:#f07171>expire_stale_views</span><span>(</span><span style=color:#ed9366>&</span><span>all_views)</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><ol start=4><li>修改了出队逻辑，避免跨材质类型的问题：</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// 之前：使用 iter_to_dequeue 获取所有需要出队的实体
</span><span style=color:#fa6e32>for </span><span style=color:#ed9366>&</span><span>main_entity </span><span style=color:#ed9366>in
</span><span>    dirty_specializations</span><span style=color:#ed9366>.</span><span style=color:#f07171>iter_to_dequeue</span><span>(view</span><span style=color:#ed9366>.</span><span>retained_view_entity</span><span style=color:#61676ccc>,</span><span> visible_entities)
</span><span>{
</span><span>    transparent_phase</span><span style=color:#ed9366>.</span><span style=color:#f07171>remove</span><span>(Entity</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>PLACEHOLDER</span><span style=color:#61676ccc>,</span><span> main_entity)</span><span style=color:#61676ccc>;
</span><span>    opaque_phase</span><span style=color:#ed9366>.</span><span style=color:#f07171>remove</span><span>(main_entity)</span><span style=color:#61676ccc>;
</span><span>    alpha_mask_phase</span><span style=color:#ed9366>.</span><span style=color:#f07171>remove</span><span>(main_entity)</span><span style=color:#61676ccc>;
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// 之后：更精确地选择需要出队的实体
</span><span style=color:#fa6e32>for</span><span> main_entity </span><span style=color:#ed9366>in</span><span> visible_entities
</span><span>    </span><span style=color:#ed9366>.</span><span>removed_entities
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>iter</span><span>()
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(|(_</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>main_entity</span><span>)| main_entity)
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>chain</span><span>(
</span><span>        dirty_specializations
</span><span>            </span><span style=color:#ed9366>.</span><span>removed_renderables
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>iter</span><span>()
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>filter</span><span>(|</span><span style=color:#ff8f40>e</span><span>| </span><span style=color:#ed9366>!</span><span>dirty_specializations</span><span style=color:#ed9366>.</span><span>changed_renderables</span><span style=color:#ed9366>.</span><span style=color:#f07171>contains</span><span>(</span><span style=color:#ed9366>*</span><span>e))</span><span style=color:#61676ccc>,
</span><span>    )
</span><span>{
</span><span>    transparent_phase</span><span style=color:#ed9366>.</span><span style=color:#f07171>remove</span><span>(Entity</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>PLACEHOLDER</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>*</span><span>main_entity)</span><span style=color:#61676ccc>;
</span><span>    opaque_phase</span><span style=color:#ed9366>.</span><span style=color:#f07171>remove</span><span>(</span><span style=color:#ed9366>*</span><span>main_entity)</span><span style=color:#61676ccc>;
</span><span>    alpha_mask_phase</span><span style=color:#ed9366>.</span><span style=color:#f07171>remove</span><span>(</span><span style=color:#ed9366>*</span><span>main_entity)</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><h3 id=2-crates-bevy-sprite-render-src-mesh2d-mesh-rs-20-3>2. <code>crates/bevy_sprite_render/src/mesh2d/mesh.rs</code> (+20/-3)</h3><p><strong>变更描述</strong>：修改了 2D 网格的提取逻辑，使用新的资源系统来获取正确的绑定组 ID。<p><strong>关键修改</strong>：<ol><li>初始化新的资源：</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#ed9366>.</span><span>init_resource</span><span style=color:#ed9366>::</span><span>&LTRenderMaterial2dBindGroupIds>()
</span><span style=color:#ed9366>.</span><span>allow_ambiguous_resource</span><span style=color:#ed9366>::</span><span>&LTRenderMaterial2dBindGroupIds>()
</span><span style=color:#ed9366>.</span><span>init_resource</span><span style=color:#ed9366>::</span><span>&LTRenderMaterial2dIds>()
</span><span style=color:#ed9366>.</span><span>allow_ambiguous_resource</span><span style=color:#ed9366>::</span><span>&LTRenderMaterial2dIds>()
</span></code></pre><ol start=2><li>在 <code>extract_mesh2d</code> 中查找绑定组 ID：</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// 之前：总是使用默认值
</span><span>material_bind_group_id</span><span style=color:#61676ccc>: </span><span>Material2dBindGroupId</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// 之后：从资源中查找
</span><span style=color:#fa6e32>let</span><span> material_bind_group_id </span><span style=color:#ed9366>=</span><span> render_material_instances
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(</span><span style=color:#ed9366>&</span><span>main_entity)
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>and_then</span><span>(|</span><span style=color:#ff8f40>material_id</span><span>| render_material_2d_bind_group_ids</span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(material_id))
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>copied</span><span>()
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap_or_default</span><span>()</span><span style=color:#61676ccc>;
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/quick-start/getting-started/systems/ target=_blank>Bevy 渲染管线架构</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/quick-start/getting-started/change-detection/ target=_blank>ECS 系统中的变更检测</a><li><a rel="noopener nofollow noreferrer" href=https://learnopengl.com/Advanced-OpenGL/Advanced-GLSL target=_blank>现代图形 API 中的绑定组概念</a><li><a rel="noopener nofollow noreferrer" href=https://rust-lang.github.io/api-guidelines/future-proofing.html target=_blank>泛型编程在游戏引擎中的应用</a></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_23083.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>