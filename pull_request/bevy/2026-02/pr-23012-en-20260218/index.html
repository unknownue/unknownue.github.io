<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #23012 FontAtlas Improvements
        
    </title><meta content="#23012 FontAtlas Improvements" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-18</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-23012-zh-cn-20260218>中文</a></div></div><div class=pr-content><h1 id=title-fontatlas-improvements>Title: FontAtlas Improvements</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: <code>FontAtlas</code> improvements<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/23012<li><strong>Author</strong>: ickshonpe<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, A-Rendering, C-Performance, C-Code-Quality, S-Ready-For-Final-Review, M-Migration-Guide, A-Text, D-Straightforward<li><strong>Created</strong>: 2026-02-17T20:54:24Z<li><strong>Merged</strong>: 2026-02-18T03:09:53Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Improve the <code>FontAtlas</code> implementation. Should help simplify the assets as entities (#22939) text changes, as well mitigate some of the performance regressions due to the parley migration (#22879).<ul><li><code>FontAtlas</code> has a handle to a <code>TextureAtlasLayout</code> asset, but it would be less complicated and more efficient for it to just hold the layout itself directly.<li><code>PositionedGlyph</code>’s <code>size</code> field isn’t used for anything. The size can be gotten from the atlas rect. The doc comment is wrong as well: it’s in physical pixels, not logical.<li><code>GlyphAtlasInfo</code> can just store the atlas rect directly, replacing the atlas layout handle and index.<li>The offset and rect values should use f32s not i32s, they aren’t ever used except after conversion.<li><code>GlyphAtlasInfo::offset</code> should be stored with the correct orientation, instead of negating its y axis each time.</ul><h2 id=solution>Solution</h2><ul><li>Font atlas layouts are now stored in <code>FontAtlas</code> directly, not as assets.<li>Removed <code>PositionedGlyph</code>’s <code>size</code> field.<li><code>GlyphAtlasInfo</code>’s <code>texture_atlas</code> and <code>location</code> fields have been removed, replaced with <code>rect</code> and <code>offset</code> fields.<li><code>get_outlined_glyph_texture</code> returns a <code>Vec2</code> instead of an <code>IVec2</code> with the y value negated.</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses several structural inefficiencies in Bevy’s text rendering system, specifically in how <code>FontAtlas</code> manages texture atlas layouts. The changes simplify the architecture, reduce overhead, and fix orientation issues that were causing unnecessary computation.<p>The core problem was that <code>FontAtlas</code> stored a handle to a <code>TextureAtlasLayout</code> asset rather than storing the layout directly. This created unnecessary indirection - every time the system needed to access the layout, it had to perform an asset lookup. Since font atlases are tightly coupled with their layouts and not meant to be shared across multiple atlases, the asset abstraction added overhead without benefit.<p>Additionally, the data structures had accumulated technical debt: <code>PositionedGlyph</code> contained a redundant <code>size</code> field (which could be derived from the atlas rectangle), and <code>GlyphAtlasInfo</code> stored integer-based coordinates that were immediately converted to floating-point for rendering.<p>The implementation approach was straightforward: remove the asset indirection and streamline the data structures. The <code>FontAtlas</code> struct now directly contains a <code>TextureAtlasLayout</code> instead of a handle to it. This change ripples through the codebase, eliminating the need to pass <code>Assets&LTTextureAtlasLayout></code> resources to multiple systems.<p>Looking at the changes in <code>font_atlas.rs</code>, the <code>FontAtlas::new</code> method signature changes from requiring a <code>texture_atlases_layout: &mut Assets&LTTextureAtlasLayout></code> parameter to not needing it at all. This is because the atlas layout is created directly and stored:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>new</span><span>(
</span><span>    </span><span style=color:#ff8f40>textures</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>Assets&LTImage>,
</span><span>    </span><span style=color:#ff8f40>texture_atlases_layout</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>Assets&LTTextureAtlasLayout>,
</span><span>    </span><span style=color:#ff8f40>size</span><span style=color:#61676ccc>:</span><span> UVec2,
</span><span>    </span><span style=color:#ff8f40>font_smoothing</span><span style=color:#61676ccc>:</span><span> FontSmoothing,
</span><span>) </span><span style=color:#61676ccc>-></span><span> FontAtlas {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    </span><span style=color:#fa6e32>let</span><span> texture_atlas </span><span style=color:#ed9366>=</span><span> texture_atlases_layout</span><span style=color:#ed9366>.</span><span style=color:#f07171>add</span><span>(TextureAtlasLayout</span><span style=color:#ed9366>::</span><span>new_empty(size))</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>new</span><span>(
</span><span>    </span><span style=color:#ff8f40>textures</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>Assets&LTImage>,
</span><span>    </span><span style=color:#ff8f40>size</span><span style=color:#61676ccc>:</span><span> UVec2,
</span><span>    </span><span style=color:#ff8f40>font_smoothing</span><span style=color:#61676ccc>:</span><span> FontSmoothing,
</span><span>) </span><span style=color:#61676ccc>-></span><span> FontAtlas {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        texture_atlas</span><span style=color:#61676ccc>: </span><span>TextureAtlasLayout</span><span style=color:#ed9366>::</span><span>new_empty(size)</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    }
</span><span>}
</span></code></pre><p>This change eliminates the asset management overhead for font atlas layouts. The <code>add_glyph</code> method similarly loses its <code>atlas_layouts: &mut Assets&LTTextureAtlasLayout></code> parameter, instead working directly with <code>self.texture_atlas</code>.<p>The <code>GlyphAtlasInfo</code> struct undergoes a significant simplification. Previously, it stored an asset ID for the texture atlas and a <code>GlyphAtlasLocation</code> containing an index and offset. Now it stores a <code>Rect</code> and <code>Vec2 offset</code> directly:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>GlyphAtlasInfo </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>texture</span><span style=color:#61676ccc>: </span><span>AssetId&LTImage>,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>texture_atlas</span><span style=color:#61676ccc>: </span><span>AssetId&LTTextureAtlasLayout>,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>location</span><span style=color:#61676ccc>:</span><span> GlyphAtlasLocation,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>GlyphAtlasInfo </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>texture</span><span style=color:#61676ccc>: </span><span>AssetId&LTImage>,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>rect</span><span style=color:#61676ccc>:</span><span> Rect,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>offset</span><span style=color:#61676ccc>:</span><span> Vec2,
</span><span>}
</span></code></pre><p>This change eliminates the need to look up the texture atlas layout to find the rectangle for each glyph. The rectangle is now stored directly, which is more efficient since glyph rectangles are accessed frequently during rendering.<p>The <code>get_outlined_glyph_texture</code> function fixes an orientation issue. Previously, it returned an <code>IVec2</code> with the y-value negated, requiring subsequent code to apply the negation again. Now it returns a <code>Vec2</code> with the correct orientation:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>IVec2</span><span style=color:#ed9366>::</span><span>new(left</span><span style=color:#61676ccc>,</span><span> top)
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>Vec2</span><span style=color:#ed9366>::</span><span>new(left </span><span style=color:#ed9366>as </span><span style=color:#fa6e32>f32</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>-</span><span>top </span><span style=color:#ed9366>as </span><span style=color:#fa6e32>f32</span><span>)
</span></code></pre><p>This change simplifies the downstream code, as seen in <code>pipeline.rs</code> where the offset is now used directly without additional transformation.<p>The removal of <code>PositionedGlyph</code>’s <code>size</code> field is a cleanup of redundant data. The size was already available from the atlas rectangle, and removing it reduces memory usage. The doc comment was also incorrect - the size was in physical pixels, not logical pixels.<p>These changes propagate through the rendering systems. In <code>text2d/mod.rs</code>, <code>bevy_ui_render/lib.rs</code>, and elsewhere, code that previously looked up texture atlas layouts to get glyph rectangles now uses the directly stored <code>rect</code> field. This eliminates multiple asset lookups per glyph during extraction, improving performance.<p>The migration guide provides clear instructions for updating code, noting that <code>TextureAtlasLayout</code> parameters have been removed from <code>FontAtlas</code> methods and that several fields have been renamed or replaced.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[FontAtlas] --> B[TextureAtlasLayout]
</span><span>    C[GlyphAtlasInfo] --> D[Rect]
</span><span>    C --> E[Vec2 offset]
</span><span>    F[PositionedGlyph] --> C
</span><span>    F -.->|removed| G[size field]
</span><span>    
</span><span>    style A fill:#e1f5e1
</span><span>    style C fill:#e1f5e1
</span><span>    style F fill:#e1f5e1
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-text-src-font-atlas-rs-13-37><code>crates/bevy_text/src/font_atlas.rs</code> (+13/-37)</h3><p>This file contains the core <code>FontAtlas</code> implementation changes. The most significant change is that <code>FontAtlas</code> now stores a <code>TextureAtlasLayout</code> directly instead of a handle to it.<p>Key changes:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>FontAtlas </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    </span><span style=color:#fa6e32>pub </span><span>texture_atlas</span><span style=color:#61676ccc>: </span><span>Handle&LTTextureAtlasLayout>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>FontAtlas </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    </span><span style=color:#fa6e32>pub </span><span>texture_atlas</span><span style=color:#61676ccc>:</span><span> TextureAtlasLayout,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span></code></pre><p>The <code>add_glyph</code> method signature changes to remove the texture atlas asset parameter:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>add_glyph</span><span>(
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>,
</span><span>    </span><span style=color:#ff8f40>textures</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>Assets&LTImage>,
</span><span>    </span><span style=color:#ff8f40>atlas_layouts</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>Assets&LTTextureAtlasLayout>,
</span><span>    </span><span style=color:#ff8f40>key</span><span style=color:#61676ccc>:</span><span> GlyphCacheKey,
</span><span>    </span><span style=color:#ff8f40>texture</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Image,
</span><span>    </span><span style=color:#ff8f40>offset</span><span style=color:#61676ccc>:</span><span> IVec2,
</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Result</span><span><(), TextError>
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>add_glyph</span><span>(
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>,
</span><span>    </span><span style=color:#ff8f40>textures</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>Assets&LTImage>,
</span><span>    </span><span style=color:#ff8f40>key</span><span style=color:#61676ccc>:</span><span> GlyphCacheKey,
</span><span>    </span><span style=color:#ff8f40>texture</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>Image,
</span><span>    </span><span style=color:#ff8f40>offset</span><span style=color:#61676ccc>:</span><span> Vec2,
</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Result</span><span><(), TextError>
</span></code></pre><h3 id=crates-bevy-text-src-glyph-rs-6-11><code>crates/bevy_text/src/glyph.rs</code> (+6/-11)</h3><p>This file contains changes to the glyph data structures, removing redundant fields and fixing data types.<p><code>PositionedGlyph</code> loses its <code>size</code> field:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>PositionedGlyph </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>position</span><span style=color:#61676ccc>:</span><span> Vec2,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>size</span><span style=color:#61676ccc>:</span><span> Vec2,  </span><span style=color:#abb0b6;font-style:italic>// Removed
</span><span>    </span><span style=color:#fa6e32>pub </span><span>atlas_info</span><span style=color:#61676ccc>:</span><span> GlyphAtlasInfo,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>PositionedGlyph </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>position</span><span style=color:#61676ccc>:</span><span> Vec2,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>atlas_info</span><span style=color:#61676ccc>:</span><span> GlyphAtlasInfo,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span></code></pre><p><code>GlyphAtlasInfo</code> is simplified to store data directly:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>GlyphAtlasInfo </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>texture</span><span style=color:#61676ccc>: </span><span>AssetId&LTImage>,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>texture_atlas</span><span style=color:#61676ccc>: </span><span>AssetId&LTTextureAtlasLayout>,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>location</span><span style=color:#61676ccc>:</span><span> GlyphAtlasLocation,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>GlyphAtlasInfo </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>texture</span><span style=color:#61676ccc>: </span><span>AssetId&LTImage>,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>rect</span><span style=color:#61676ccc>:</span><span> Rect,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>offset</span><span style=color:#61676ccc>:</span><span> Vec2,
</span><span>}
</span></code></pre><h3 id=crates-bevy-sprite-render-src-text2d-mod-rs-6-18><code>crates/bevy_sprite_render/src/text2d/mod.rs</code> (+6/-18)</h3><p>This file shows how the rendering code is simplified by using the directly stored rectangle data.<p>Before, the code had to look up the texture atlas to get the rectangle:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>let</span><span> rect </span><span style=color:#ed9366>=</span><span> texture_atlases
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(atlas_info</span><span style=color:#ed9366>.</span><span>texture_atlas)
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap</span><span>()
</span><span>    </span><span style=color:#ed9366>.</span><span>textures[atlas_info</span><span style=color:#ed9366>.</span><span>location</span><span style=color:#ed9366>.</span><span>glyph_index]
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>as_rect</span><span>()</span><span style=color:#61676ccc>;
</span></code></pre><p>After, it uses the directly stored rectangle:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// After:
</span><span>rect</span><span style=color:#61676ccc>:</span><span> atlas_info</span><span style=color:#ed9366>.</span><span>rect</span><span style=color:#61676ccc>,
</span></code></pre><h3 id=crates-bevy-text-src-pipeline-rs-6-11><code>crates/bevy_text/src/pipeline.rs</code> (+6/-11)</h3><p>The text pipeline no longer needs to access texture atlas assets, simplifying the method signature:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>update_text_layout_info</span><span>(
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>,
</span><span>    </span><span style=color:#ff8f40>layout_info</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> TextLayoutInfo,
</span><span>    </span><span style=color:#ff8f40>font_atlas_set</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> FontAtlasSet,
</span><span>    </span><span style=color:#ff8f40>texture_atlases</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>Assets&LTTextureAtlasLayout>,  </span><span style=color:#abb0b6;font-style:italic>// Removed
</span><span>    </span><span style=color:#ff8f40>textures</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>Assets&LTImage>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>)
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>update_text_layout_info</span><span>(
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>,
</span><span>    </span><span style=color:#ff8f40>layout_info</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> TextLayoutInfo,
</span><span>    </span><span style=color:#ff8f40>font_atlas_set</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> FontAtlasSet,
</span><span>    </span><span style=color:#ff8f40>textures</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>Assets&LTImage>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>)
</span></code></pre><h3 id=release-content-migration-guides-fontatlas-texture-atlas-layout-md-16-0><code>release-content/migration-guides/FontAtlas-texture-atlas-layout.md</code> (+16/-0)</h3><p>This new file provides migration instructions for the breaking changes:<ul><li>Texture atlas layouts are no longer separate assets<li>Method parameter changes<li>Field changes in <code>GlyphAtlasInfo</code> and <code>PositionedGlyph</code></ul><h2 id=further-reading>Further Reading</h2><ul><li>Bevy Text Rendering Documentation: Understanding the text rendering pipeline<li>Texture Atlases in Computer Graphics: Fundamentals of texture atlasing<li>Entity Component System (ECS) Patterns: How Bevy manages assets and components<li>Rust Ownership and Borrowing: Key concepts for understanding the API changes</ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_23012.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>