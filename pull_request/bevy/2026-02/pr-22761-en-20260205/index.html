<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22761 Render Recovery
        
    </title><meta content="#22761 Render Recovery" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-05</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-22761-zh-cn-20260205>中文</a></div></div><div class=pr-content><h1 id=render-recovery>Render Recovery</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Render Recovery<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22761<li><strong>Author</strong>: atlv24<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Feature, A-Rendering, P-Crash, S-Ready-For-Final-Review, D-Modest<li><strong>Created</strong>: 2026-02-01T01:12:13Z<li><strong>Merged</strong>: 2026-02-05T17:38:24Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description>Description</h2><h1 id=objective>Objective</h1><ul><li>Recover from rendering errors.<li>Another step towards render recovery after #22714 #22759 and #16481</ul><h2 id=solution>Solution</h2><ul><li>Use <code>wgpu::Device::set_device_lost_callback</code> and <code>wgpu::Device::on_uncaptured_error</code> to listen for errors.<li>Add a state machine for the renderer<li>Update it on error<li>Add a <code>RenderErrorHandler</code> to let users specify behavior on error by returning a specific <code>RenderErrorPolicy</code><li>This lets us for example ignore validation errors, delete responsible entities, or reload the renderer if the device was lost.</ul><h2 id=testing>Testing</h2><ul><li>#22757 with any of</ul><pre class=language-rs data-lang=rs style=color:#61676c;background-color:#fafafa><code class=language-rs data-lang=rs><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(bevy_render</span><span style=color:#ed9366>::</span><span>error_handler</span><span style=color:#ed9366>::</span><span>RenderErrorHandler(|_</span><span style=color:#61676ccc>,</span><span> _</span><span style=color:#61676ccc>,</span><span> _| {
</span><span>        bevy_render</span><span style=color:#ed9366>::</span><span>error_handler</span><span style=color:#ed9366>::</span><span>RenderErrorPolicy</span><span style=color:#ed9366>::</span><span>StopRendering
</span><span>    }))
</span></code></pre><pre class=language-rs data-lang=rs style=color:#61676c;background-color:#fafafa><code class=language-rs data-lang=rs><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(bevy_render</span><span style=color:#ed9366>::</span><span>error_handler</span><span style=color:#ed9366>::</span><span>RenderErrorHandler(|_</span><span style=color:#61676ccc>,</span><span> _</span><span style=color:#61676ccc>,</span><span> _| {
</span><span>        bevy_render</span><span style=color:#ed9366>::</span><span>error_handler</span><span style=color:#ed9366>::</span><span>RenderErrorPolicy</span><span style=color:#ed9366>::</span><span>Recover(</span><span style=color:#f07171>default</span><span>())
</span><span>    }))
</span></code></pre><p>Note: no release note yet, as recovery does not exactly work well: this PR gets us to the point of being able to care about it, but we currently instantly crash on recover due to gpu resources not existing anymore. We need to build more resilience before publicizing imo.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a fundamental limitation in Bevy’s rendering system: the inability to recover from GPU errors. Previously, any wgpu error - whether a validation error, device lost, or out-of-memory condition - would cause the application to panic and crash. This was particularly problematic for applications that need to run continuously, as GPU errors can occur due to driver issues, hardware failures, or even intentional stress testing.<p>The solution implements a state machine approach to renderer lifecycle management, coupled with error handling infrastructure that allows applications to define custom recovery policies. The core insight is that different types of errors require different responses: validation errors might be safely ignored in some cases, device lost errors require complete reinitialization, while out-of-memory conditions might need resource cleanup.<p>The implementation centers around three main components: a <code>DeviceErrorHandler</code> that captures wgpu errors through callbacks, a <code>RenderState</code> enum that tracks the renderer’s lifecycle state, and a <code>RenderErrorHandler</code> resource that lets users define custom error response policies. These components work together in the <code>update_state</code> function, which runs during the extract phase between the main world and render world.<p>The state machine has four states:<ul><li><code>Initializing</code>: The renderer is starting up and needs to run <code>RenderStartup</code><li><code>Ready</code>: The renderer is functioning normally<li><code>Errored</code>: An error has occurred and needs handling<li><code>Reinitializing</code>: The renderer is being recreated after an error</ul><p>When an error occurs, the <code>DeviceErrorHandler</code> captures it and stores it in thread-safe containers. During the next frame’s extract phase, <code>update_state</code> polls for errors and transitions to the <code>Errored</code> state if one exists. At this point, the user’s <code>RenderErrorHandler</code> is invoked with access to both worlds, allowing it to decide on a response policy: ignore the error and continue, stop rendering but keep the app alive, or attempt recovery with new render settings.<p>Recovery involves recreating the render context by unpacking <code>FutureRenderResources</code> that were queued during error handling. This reinitializes the render device, queue, and adapter, then transitions back to <code>Initializing</code> state to run <code>RenderStartup</code> again.<p>A significant architectural change was moving the render schedule execution into a new <code>RenderRecovery</code> schedule that conditionally runs the <code>Render</code> schedule only when the renderer is in <code>Ready</code> state. This prevents rendering attempts during error states or reinitialization. The time synchronization between worlds was also moved to this schedule to ensure it runs regardless of rendering state.<p>The implementation acknowledges current limitations - particularly that GPU resources aren’t properly recreated during recovery, causing crashes. However, this establishes the necessary infrastructure for future improvements to make recovery fully functional.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[RenderErrorHandler Resource] --> B[update_state function]
</span><span>    C[DeviceErrorHandler Resource] --> D[Poll wgpu errors]
</span><span>    D --> E{Error detected?}
</span><span>    E -->|Yes| F[Transition to Errored state]
</span><span>    E -->|No| G[Maintain current state]
</span><span>    F --> H[Invoke RenderErrorHandler]
</span><span>    H --> I{Policy decision}
</span><span>    I -->|Ignore| J[Transition to Ready]
</span><span>    I -->|StopRendering| K[Stay in Errored]
</span><span>    I -->|Recover| L[Transition to Reinitializing]
</span><span>    L --> M[Unpack FutureRenderResources]
</span><span>    M --> N[Transition to Initializing]
</span><span>    N --> O[Run RenderStartup]
</span><span>    O --> J
</span><span>    J --> P[RenderRecovery schedule]
</span><span>    P -->|State = Ready| Q[Run Render schedule]
</span><span>    P -->|State ≠ Ready| R[Skip rendering]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-render-src-error-handler-rs-214-0><code>crates/bevy_render/src/error_handler.rs</code> (+214/-0)</h3><p>This new file contains the core error handling infrastructure:<ul><li><code>RenderErrorPolicy</code>: Enum defining available response policies (Ignore, StopRendering, Recover)<li><code>RenderErrorHandler</code>: Resource holding a user-defined function that decides how to respond to errors<li><code>RenderError</code>: Structured error information including type, description, and source<li><code>RenderState</code>: State machine enum tracking renderer lifecycle<li><code>DeviceErrorHandler</code>: Resource that sets up wgpu error callbacks and polls for captured errors<li><code>update_state</code>: Main function that drives the state machine and invokes error handlers</ul><p>Key implementation details:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Error handler signature providing access to both worlds
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>RenderErrorHandler</span><span>(
</span><span>    pub for<</span><span style=color:#fa6e32>'a</span><span>> </span><span style=color:#fa6e32>fn</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>'a</span><span> RenderError, </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>'a mut</span><span> World, </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>'a mut</span><span> World) </span><span style=color:#61676ccc>-></span><span> RenderErrorPolicy</span><span style=color:#61676ccc>,
</span><span>)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// State machine tracking renderer lifecycle
</span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) </span><span style=color:#fa6e32>enum </span><span style=color:#399ee6>RenderState </span><span>{
</span><span>    Initializing</span><span style=color:#61676ccc>,
</span><span>    Ready</span><span style=color:#61676ccc>,
</span><span>    Errored(RenderError)</span><span style=color:#61676ccc>,
</span><span>    Reinitializing</span><span style=color:#61676ccc>,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Setting up wgpu error callbacks
</span><span>device</span><span style=color:#ed9366>.</span><span style=color:#f07171>set_device_lost_callback</span><span>(</span><span style=color:#fa6e32>move </span><span style=color:#ed9366>|</span><span>reason</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>str</span><span style=color:#ed9366>| </span><span>{
</span><span>    bevy_log</span><span style=color:#ed9366>::</span><span>error</span><span style=color:#ed9366>!</span><span>(</span><span style=color:#86b300>"Caught DeviceLost error: {reason:?} {str}"</span><span>)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#f07171>assert!</span><span>(device_lost</span><span style=color:#ed9366>.</span><span style=color:#f07171>lock</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>replace</span><span>((reason</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>str</span><span>))</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_none</span><span>())</span><span style=color:#61676ccc>;
</span><span>})</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=crates-bevy-render-src-lib-rs-41-15><code>crates/bevy_render/src/lib.rs</code> (+41/-15)</h3><p>This file integrates the error handling system into Bevy’s main rendering infrastructure:<ul><li>Adds the new <code>error_handler</code> module<li>Initializes <code>RenderErrorHandler</code> as a default resource<li>Creates <code>RenderRecovery</code> schedule that conditionally runs the <code>Render</code> schedule<li>Moves time synchronization from render system to recovery schedule<li>Replaces the old startup flag mechanism with <code>error_handler::update_state</code></ul><p>Key changes:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before: Direct render schedule execution
</span><span>render_app</span><span style=color:#ed9366>.</span><span>update_schedule </span><span style=color:#ed9366>= </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(Render</span><span style=color:#ed9366>.</span><span style=color:#f07171>intern</span><span>())</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After: Recovery schedule that conditionally renders
</span><span>render_app</span><span style=color:#ed9366>.</span><span>update_schedule </span><span style=color:#ed9366>= </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(RenderRecovery</span><span style=color:#ed9366>.</span><span style=color:#f07171>intern</span><span>())</span><span style=color:#61676ccc>;
</span><span>render_app</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_schedule</span><span>(Schedule</span><span style=color:#ed9366>::</span><span>new(RenderRecovery))
</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_systems</span><span>(RenderRecovery</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>move </span><span style=color:#ed9366>|</span><span>world</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> World</span><span style=color:#ed9366>| </span><span>{
</span><span>    </span><span style=color:#fa6e32>if </span><span style=color:#f07171>matches!</span><span>(world</span><span style=color:#ed9366>.</span><span>resource</span><span style=color:#ed9366>::</span><span>&LTRenderState>()</span><span style=color:#61676ccc>, </span><span>RenderState</span><span style=color:#ed9366>::</span><span>Ready) {
</span><span>        world</span><span style=color:#ed9366>.</span><span style=color:#f07171>run_schedule</span><span>(Render)</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Time synchronization moved here
</span><span>})</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Extract phase now updates state
</span><span>render_app</span><span style=color:#ed9366>.</span><span style=color:#f07171>set_extract</span><span>(|</span><span style=color:#ff8f40>main_world</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>render_world</span><span>| {
</span><span>    error_handler</span><span style=color:#ed9366>::</span><span>update_state(main_world</span><span style=color:#61676ccc>,</span><span> render_world)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... rest of extraction
</span><span>})</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=examples-app-render-recovery-rs-31-1><code>examples/app/render_recovery.rs</code> (+31/-1)</h3><p>This example demonstrates the error handling system with interactive controls:<ul><li>Shows how to set different <code>RenderErrorHandler</code> policies<li>Provides keyboard controls to trigger different types of wgpu errors<li>Demonstrates error policy switching at runtime</ul><p>Key additions:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Setting different error handlers based on key presses
</span><span style=color:#fa6e32>if</span><span> input</span><span style=color:#ed9366>.</span><span style=color:#f07171>just_pressed</span><span>(Key</span><span style=color:#ed9366>::</span><span>Character(</span><span style=color:#86b300>"1"</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>())) {
</span><span>    </span><span style=color:#ed9366>*</span><span>handler </span><span style=color:#ed9366>=</span><span> RenderErrorHandler(|_</span><span style=color:#61676ccc>,</span><span> _</span><span style=color:#61676ccc>,</span><span> _| RenderErrorPolicy</span><span style=color:#ed9366>::</span><span>Ignore)</span><span style=color:#61676ccc>;
</span><span>}
</span><span style=color:#fa6e32>if</span><span> input</span><span style=color:#ed9366>.</span><span style=color:#f07171>just_pressed</span><span>(Key</span><span style=color:#ed9366>::</span><span>Character(</span><span style=color:#86b300>"4"</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>())) {
</span><span>    </span><span style=color:#ed9366>*</span><span>handler </span><span style=color:#ed9366>=</span><span> RenderErrorHandler(|_</span><span style=color:#61676ccc>,</span><span> _</span><span style=color:#61676ccc>,</span><span> _| RenderErrorPolicy</span><span style=color:#ed9366>::</span><span>StopRendering)</span><span style=color:#61676ccc>;
</span><span>}
</span><span style=color:#fa6e32>if</span><span> input</span><span style=color:#ed9366>.</span><span style=color:#f07171>just_pressed</span><span>(Key</span><span style=color:#ed9366>::</span><span>Character(</span><span style=color:#86b300>"5"</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>())) {
</span><span>    </span><span style=color:#ed9366>*</span><span>handler </span><span style=color:#ed9366>=</span><span> RenderErrorHandler(|_</span><span style=color:#61676ccc>,</span><span> _</span><span style=color:#61676ccc>,</span><span> _| RenderErrorPolicy</span><span style=color:#ed9366>::</span><span>Recover(</span><span style=color:#f07171>default</span><span>()))</span><span style=color:#61676ccc>;
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Triggering a validation error
</span><span style=color:#fa6e32>if let </span><span>RenderError</span><span style=color:#ed9366>::</span><span>Validation </span><span style=color:#ed9366>= *</span><span>error {
</span><span>    </span><span style=color:#fa6e32>let</span><span> buffer </span><span style=color:#ed9366>=</span><span> device</span><span style=color:#ed9366>.</span><span style=color:#f07171>create_buffer</span><span>(</span><span style=color:#ed9366>&</span><span>BufferDescriptor {
</span><span>        size</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>0</span><span style=color:#61676ccc>,
</span><span>        usage</span><span style=color:#61676ccc>: </span><span>BufferUsages</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>VERTEX</span><span style=color:#61676ccc>,
</span><span>        label</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>None</span><span style=color:#61676ccc>,
</span><span>        mapped_at_creation</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>false</span><span style=color:#61676ccc>,
</span><span>    })</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Invalid usage will trigger validation error
</span><span>    queue</span><span style=color:#ed9366>.</span><span style=color:#f07171>write_buffer</span><span>(</span><span style=color:#ed9366>&</span><span>buffer</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>0</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>&</span><span>[</span><span style=color:#ff8f40>0</span><span style=color:#fa6e32>u8</span><span style=color:#61676ccc>; </span><span style=color:#ff8f40>1</span><span>])</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><h3 id=crates-bevy-render-src-renderer-mod-rs-0-15><code>crates/bevy_render/src/renderer/mod.rs</code> (+0/-15)</h3><p>Removes the time synchronization logic that was moved to the <code>RenderRecovery</code> schedule, cleaning up the render system to focus solely on rendering operations.<h3 id=crates-bevy-render-src-settings-rs-various-changes><code>crates/bevy_render/src/settings.rs</code> (various changes)</h3><ul><li>Changes <code>RenderCreation::Automatic</code> to hold <code>Box&LTWgpuSettings></code> to avoid large enum variant warnings<li>Adds <code>DeviceErrorHandler</code> initialization when creating render resources<li>Updates the <code>From&LTWgpuSettings></code> implementation accordingly</ul><h2 id=further-reading>Further Reading</h2><ol><li><strong>wgpu Error Handling</strong>: <a rel="noopener nofollow noreferrer" href=https://docs.rs/wgpu/latest/wgpu/struct.Device.html#method.set_device_lost_callback target=_blank>wgpu::Device documentation</a> for callback mechanisms<li><strong>State Machine Patterns</strong>: Common patterns for managing complex lifecycle states in game engines<li><strong>Graceful Degradation</strong>: Techniques for maintaining application functionality when subsystems fail<li><strong>Previous PRs in the series</strong>: #22714, #22759, #16481 for context on the broader render recovery effort<li><strong>Bevy ECS Resources</strong>: Understanding how resources work across main and render worlds for error handler implementation</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_22761.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>