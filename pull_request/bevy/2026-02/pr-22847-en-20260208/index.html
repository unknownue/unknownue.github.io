<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22847 Small `EasyScreenRecordingPlugin` Usability Improvements: expose system set, more helpful `info`'s
        
    </title><meta content="#22847 Small `EasyScreenRecordingPlugin` Usability Improvements: expose system set, more helpful `info`'s" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-08</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-22847-zh-cn-20260208>中文</a></div></div><div class=pr-content><h1 id=small-easyscreenrecordingplugin-usability-improvements-expose-system-set-more-helpful-info-s>Small <code>EasyScreenRecordingPlugin</code> Usability Improvements: expose system set, more helpful <code>info</code>’s</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Small <code>EasyScreenRecordingPlugin</code> Usability Improvements: expose system set, more helpful <code>info</code>’s<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22847<li><strong>Author</strong>: kfc35<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Usability, S-Ready-For-Final-Review, A-Dev-Tools, D-Straightforward<li><strong>Created</strong>: 2026-02-07T05:55:55Z<li><strong>Merged</strong>: 2026-02-08T01:14:54Z<li><strong>Merged By</strong>: mockersf</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Fixes #22736</ul><h2 id=solution>Solution</h2><ul><li>Add and expose a system set (<code>EasyScreenRecordSystems</code>) for the <code>Update</code> systems run in <code>EasyScreenRecordingPlugin</code>. Users who have apps with behavior that depend on virtual time, and who want that behavior recorded, should have their own <code>Update</code> systems run after <code>EasyScreenRecordSystems</code>.<li>While testing out recording, I found the <code>info</code> statements could be improved slightly, so I added one and edited another.</ul><h2 id=testing>Testing</h2><ul><li>I tested the reproduction example in #22736 and waited very patiently for the video to process (A 6 second video took 5 minutes to save! Don’t know if it’s just me… Maybe worth making an issue…). I used ffmpeg to process the h264 file into an mp4, and it looks like I expect.</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a specific usability issue in Bevy’s screen recording functionality. When users record their applications, they may encounter unexpected behavior if their game logic depends on virtual time and runs concurrently with the screen recording systems. The core problem is that the <code>EasyScreenRecordingPlugin</code> manipulates virtual time to capture frames at a consistent rate, but there was no clear way for application developers to ensure their own systems run in the correct order relative to these time manipulations.<p>The issue (#22736) likely manifested as applications behaving differently during recording versus normal playback, particularly for systems that depend on <code>bevy_time::Virtual</code> time. When recording, the plugin pauses virtual time to capture frames, then advances it in discrete steps. If application systems run before the recording systems have adjusted the time, they’ll see an incorrect time state.<p>The solution approach is straightforward and follows Bevy’s established patterns for system ordering. The developer added a public system set <code>EasyScreenRecordSystems</code> that contains all the update systems from the screen recording plugin. This allows users to explicitly order their own systems relative to the recording systems using Bevy’s scheduling API, specifically by making their systems run <code>after(EasyScreenRecordSystems)</code>.<p>From an implementation perspective, the changes are minimal but effective. The new system set is defined with the standard Bevy system set derive macro and includes comprehensive documentation explaining when and why users should order their systems after it. The documentation explicitly states that while the application may run slower during recording due to time manipulation, the resulting video will play back at normal speed.<p>The second set of changes improves the user experience by making the logging more informative. Originally, when stopping a recording, the system would log “stopping recording” at the beginning of the stop process. The new implementation provides better feedback by:<ol><li>Logging “stopped recording. still processing video” immediately when the user initiates the stop command<li>Logging “finished processing video” only after the video encoding is complete and the file is written</ol><p>This distinction is important because, as noted in the PR description, video processing can take significantly longer than the recording itself (5 minutes to save a 6-second video in the developer’s testing). The updated logs give users clear feedback about what stage the system is in, preventing confusion about whether the system is still working or has hung.<p>The implementation changes are technically sound. The system set is added to the chain of systems using <code>.in_set(EasyScreenRecordSystems)</code>, which integrates cleanly with Bevy’s existing system chaining pattern. The logging changes are simple but thoughtful, moving the “stopping recording” log to a more appropriate location and adding a completion log.<p>One technical insight from this PR is the importance of clear system ordering in time-sensitive applications. By exposing the system set, the plugin follows the principle of making implicit dependencies explicit, which is crucial for a game engine where timing can affect gameplay, physics, and visual effects.<p>The impact of these changes is primarily improved developer experience. Users who need precise control over system ordering relative to screen recording now have the tools to achieve it. The better logging reduces confusion during what can be a lengthy video processing operation. These are small quality-of-life improvements that make the screen recording feature more usable and predictable.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[User presses record key] --> B[EasyScreenRecordSystems]
</span><span>    B --> C[Manipulate Virtual Time]
</span><span>    C --> D[Capture Frame]
</span><span>    D --> E[Send to Encoder]
</span><span>    E --> F{Recording active?}
</span><span>    F -->|Yes| B
</span><span>    F -->|No| G[User presses stop key]
</span><span>    G --> H[Log: stopped recording]
</span><span>    H --> I[Process remaining frames]
</span><span>    I --> J[Flush encoder]
</span><span>    J --> K[Write video file]
</span><span>    K --> L[Log: finished processing video]
</span><span>    
</span><span>    M[User Application Systems] -->|after| B
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-dev-tools-src-easy-screenshot-rs-19-2><code>crates/bevy_dev_tools/src/easy_screenshot.rs</code> (+19/-2)</h3><ol><li><p><strong>What changed and why</strong>: Added a public system set <code>EasyScreenRecordSystems</code> to allow users to order their application systems relative to screen recording systems. Also improved logging messages to provide better user feedback during the recording stop and processing phases.</p><li><p><strong>Key modifications</strong>:</p></ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Added: New system set definition
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(SystemSet</span><span style=color:#61676ccc>,</span><span> Debug</span><span style=color:#61676ccc>,</span><span> Clone</span><span style=color:#61676ccc>,</span><span> Copy</span><span style=color:#61676ccc>,</span><span> PartialEq</span><span style=color:#61676ccc>,</span><span> Eq</span><span style=color:#61676ccc>,</span><span> Hash)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>EasyScreenRecordSystems</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Modified: System chain now includes the system set
</span><span style=color:#ed9366>.</span><span style=color:#f07171>chain</span><span>()
</span><span style=color:#ed9366>.</span><span style=color:#f07171>in_set</span><span>(EasyScreenRecordSystems)</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Modified: Logging improvements in the stop handling
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>// info!("stopping recording");
</span><span style=color:#abb0b6;font-style:italic>// After removing the early log and adding two more informative logs:
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// When user stops recording:
</span><span style=color:#f07171>info!</span><span>(</span><span style=color:#86b300>"stopped recording. still processing video"</span><span>)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After video processing completes:
</span><span style=color:#f07171>info!</span><span>(</span><span style=color:#86b300>"finished processing video"</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><ol start=3><li><strong>How these changes relate to the overall purpose</strong>: The system set addresses the core issue of system ordering for applications that depend on virtual time. The logging improvements provide better user feedback about the recording process state.</ol><h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/ecs/schedule/trait.IntoScheduleConfigs.html target=_blank>Bevy System Sets Documentation</a> - Understanding how to order systems relative to each other<li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/time/index.html target=_blank>Bevy Time Documentation</a> - Working with virtual time and understanding time manipulation<li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/tree/main/examples target=_blank>Bevy Screen Recording Example</a> - Look for examples using screen recording to see practical implementations<li><a rel="noopener nofollow noreferrer" href=https://ffmpeg.org/documentation.html target=_blank>FFmpeg Documentation</a> - Useful for processing the generated h264 files into other video formats</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_22847.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>