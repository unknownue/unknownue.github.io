<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22886 Prepare fullscreen material bind groups in a prepare system
        
    </title><meta content="#22886 Prepare fullscreen material bind groups in a prepare system" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-10</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-22886-zh-cn-20260210>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Prepare fullscreen material bind groups in a prepare system<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22886<li><strong>Author</strong>: IceSentry<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Rendering, C-Code-Quality, S-Ready-For-Final-Review<li><strong>Created</strong>: 2026-02-10T04:11:52Z<li><strong>Merged</strong>: 2026-02-10T18:47:46Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>FullscreenMaterial bind groups can be created ahead of time instead of creating them in the encoding system</ul><h2 id=solution>Solution</h2><ul><li>Create the bind groups in a prepare system</ul><h2 id=testing>Testing</h2><ul><li>I ran the example and it worked</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This pull request addresses a performance optimization in Bevy’s rendering pipeline by restructuring how fullscreen material bind groups are created. The problem was straightforward: bind groups for fullscreen materials were being created during the encoding phase of rendering, which happens just before draw calls are submitted to the GPU. This is a critical path where any unnecessary work can impact frame times.<p>In the original implementation, the <code>fullscreen_material_system</code> used a local cache to store bind groups and would create them on-demand during encoding. This approach worked but had two issues. First, bind group creation is a relatively expensive operation that involves allocating GPU resources. Second, doing this work in the encoding system meant it happened right before drawing, potentially causing CPU-GPU synchronization issues or frame time spikes.<p>The solution moves bind group creation to a prepare system that runs earlier in the render schedule. Prepare systems are designed for this type of work - setting up resources ahead of time so the encoding phase can focus on issuing draw commands efficiently.<p>Looking at the code changes, the implementation introduces a new component <code>FullscreenMaterialBindGroup&LTT></code> that stores bind groups for both possible source textures. This is necessary because we can’t know ahead of time which texture will be the source versus destination - Bevy’s view targets use a double-buffering approach where textures swap roles each frame. The component stores bind groups for both textures identified by their TextureViewId.<p>The new <code>prepare_bind_groups</code> system queries for views with <code>ViewTarget</code> and checks if they already have bind groups. If not, it creates bind groups for both textures using the render device. If bind groups exist but the texture IDs have changed (due to resize or other changes), it updates them. This system runs in the <code>RenderSystems::PrepareBindGroups</code> set, which is specifically designed for this type of preparation work.<p>The <code>fullscreen_material_system</code> is simplified significantly - it no longer needs to create bind groups or manage a local cache. Instead, it retrieves the appropriate bind group from the component based on which texture is currently the source. The system just selects between the two pre-created bind groups using a simple ID comparison.<p>This change follows Bevy’s established patterns for resource preparation. By moving work out of the encoding phase, we reduce the likelihood of frame time spikes and improve overall rendering performance. The implementation is clean and maintainable - it separates concerns clearly between preparation (creating resources) and encoding (using resources to draw).<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[RenderStartup System] --> B[init_pipeline: Creates pipeline]
</span><span>    B --> C[PrepareBindGroups System]
</span><span>    C --> D[prepare_bind_groups: Creates bind groups]
</span><span>    D --> E[FullscreenMaterialBindGroup Component]
</span><span>    E --> F[fullscreen_material_system: Uses bind groups]
</span><span>    F --> G[GPU Draw Commands]
</span><span>    
</span><span>    subgraph "Before PR"
</span><span>        H[fullscreen_material_system] --> I[Creates bind groups during encoding]
</span><span>        I --> J[GPU Draw Commands]
</span><span>    end
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-core-pipeline-src-fullscreen-material-rs-86-31><code>crates/bevy_core_pipeline/src/fullscreen_material.rs</code> (+86/-31)</h3><p>This file contains the core changes that move bind group creation from the encoding system to a prepare system.<p><strong>Before the change</strong>, the system used a local cache and created bind groups on-demand:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Default)]
</span><span style=color:#fa6e32>struct </span><span style=color:#399ee6>FullscreenMaterialBindGroupCache </span><span>{
</span><span>    cached</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span><(TextureViewId, BindGroup)>,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>fullscreen_material_system</span><span>&LTT</span><span style=color:#61676ccc>:</span><span> FullscreenMaterial>(
</span><span>    </span><span style=color:#ff8f40>view</span><span style=color:#61676ccc>: </span><span>ViewQuery<(</span><span style=color:#ed9366>&</span><span>ViewTarget, </span><span style=color:#ed9366>&</span><span>DynamicUniformIndex&LTT>)>,
</span><span>    </span><span style=color:#ff8f40>fullscreen_pipeline</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTRes&LTFullscreenMaterialPipeline&LTT>>>,
</span><span>    </span><span style=color:#ff8f40>pipeline_cache</span><span style=color:#61676ccc>: </span><span>Res&LTPipelineCache>,
</span><span>    </span><span style=color:#ff8f40>data_uniforms</span><span style=color:#61676ccc>: </span><span>Res&LTComponentUniforms&LTT>>,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>cache</span><span style=color:#61676ccc>: </span><span>Local&LTFullscreenMaterialBindGroupCache>,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>ctx</span><span style=color:#61676ccc>:</span><span> RenderContext,
</span><span>) {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    </span><span style=color:#fa6e32>let</span><span> bind_group </span><span style=color:#ed9366>= </span><span style=color:#fa6e32>match </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> cache</span><span style=color:#ed9366>.</span><span>cached {
</span><span>        </span><span style=color:#55b4d4;font-style:italic>Some</span><span>((texture_id</span><span style=color:#61676ccc>,</span><span> bind_group)) </span><span style=color:#fa6e32>if</span><span> source</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>() </span><span style=color:#ed9366>== *</span><span>texture_id </span><span style=color:#ed9366>=></span><span> bind_group</span><span style=color:#61676ccc>,
</span><span>        cached </span><span style=color:#ed9366>=> </span><span>{
</span><span>            </span><span style=color:#fa6e32>let</span><span> bind_group </span><span style=color:#ed9366>=</span><span> ctx</span><span style=color:#ed9366>.</span><span style=color:#f07171>render_device</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>create_bind_group</span><span>(
</span><span>                </span><span style=color:#86b300>"fullscreen_material_bind_group"</span><span style=color:#61676ccc>,
</span><span>                </span><span style=color:#ed9366>&</span><span>pipeline_cache</span><span style=color:#ed9366>.</span><span style=color:#f07171>get_bind_group_layout</span><span>(</span><span style=color:#ed9366>&</span><span>fullscreen_pipeline</span><span style=color:#ed9366>.</span><span>layout)</span><span style=color:#61676ccc>,
</span><span>                </span><span style=color:#ed9366>&</span><span>BindGroupEntries</span><span style=color:#ed9366>::</span><span>sequential((
</span><span>                    source</span><span style=color:#61676ccc>,
</span><span>                    </span><span style=color:#ed9366>&</span><span>fullscreen_pipeline</span><span style=color:#ed9366>.</span><span>sampler</span><span style=color:#61676ccc>,
</span><span>                    settings_binding</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>,
</span><span>                ))</span><span style=color:#61676ccc>,
</span><span>            )</span><span style=color:#61676ccc>;
</span><span>
</span><span>            </span><span style=color:#fa6e32>let </span><span>(</span><span style=color:#ed9366>_</span><span style=color:#61676ccc>,</span><span> bind_group) </span><span style=color:#ed9366>=</span><span> cached</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>((source</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()</span><span style=color:#61676ccc>,</span><span> bind_group))</span><span style=color:#61676ccc>;
</span><span>            bind_group
</span><span>        }
</span><span>    }</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span></code></pre><p><strong>After the change</strong>, a new component stores pre-created bind groups:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Component)]
</span><span style=color:#fa6e32>struct </span><span style=color:#399ee6>FullscreenMaterialBindGroup</span><span>&LTT</span><span style=color:#61676ccc>:</span><span> FullscreenMaterial> {
</span><span>    a</span><span style=color:#61676ccc>: </span><span>(TextureViewId, BindGroup),
</span><span>    b</span><span style=color:#61676ccc>: </span><span>(TextureViewId, BindGroup),
</span><span>    _marker</span><span style=color:#61676ccc>: </span><span>PhantomData&LTT>,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>prepare_bind_groups</span><span>&LTT</span><span style=color:#61676ccc>:</span><span> FullscreenMaterial>(
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>commands</span><span style=color:#61676ccc>:</span><span> Commands,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>view</span><span style=color:#61676ccc>: </span><span>Query<(
</span><span>        Entity,
</span><span>        </span><span style=color:#ed9366>&</span><span>ViewTarget,
</span><span>        </span><span style=color:#55b4d4;font-style:italic>Option</span><span><</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>FullscreenMaterialBindGroup&LTT>>,
</span><span>    )>,
</span><span>    </span><span style=color:#ff8f40>fullscreen_pipeline</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTRes&LTFullscreenMaterialPipeline&LTT>>>,
</span><span>    </span><span style=color:#ff8f40>pipeline_cache</span><span style=color:#61676ccc>: </span><span>Res&LTPipelineCache>,
</span><span>    </span><span style=color:#ff8f40>data_uniforms</span><span style=color:#61676ccc>: </span><span>Res&LTComponentUniforms&LTT>>,
</span><span>    </span><span style=color:#ff8f40>render_device</span><span style=color:#61676ccc>: </span><span>Res&LTRenderDevice>,
</span><span>) {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    </span><span style=color:#fa6e32>for </span><span>(entity</span><span style=color:#61676ccc>,</span><span> view_target</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>mut</span><span> maybe_bind_groups) </span><span style=color:#ed9366>in &</span><span style=color:#fa6e32>mut</span><span> view {
</span><span>        </span><span style=color:#fa6e32>let</span><span> main_texture_view </span><span style=color:#ed9366>=</span><span> view_target</span><span style=color:#ed9366>.</span><span style=color:#f07171>main_texture_view</span><span>()</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#fa6e32>let</span><span> main_texture_other_view </span><span style=color:#ed9366>=</span><span> view_target</span><span style=color:#ed9366>.</span><span style=color:#f07171>main_texture_other_view</span><span>()</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>let </span><span style=color:#f29718>create_bind_group </span><span style=color:#ed9366>= </span><span>|</span><span style=color:#ff8f40>texture</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>TextureView| {
</span><span>            (
</span><span>                texture</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()</span><span style=color:#61676ccc>,
</span><span>                render_device</span><span style=color:#ed9366>.</span><span style=color:#f07171>create_bind_group</span><span>(
</span><span>                    </span><span style=color:#86b300>"fullscreen_material_bind_group"</span><span style=color:#61676ccc>,
</span><span>                    </span><span style=color:#ed9366>&</span><span>pipeline_cache</span><span style=color:#ed9366>.</span><span style=color:#f07171>get_bind_group_layout</span><span>(</span><span style=color:#ed9366>&</span><span>fullscreen_pipeline</span><span style=color:#ed9366>.</span><span>layout)</span><span style=color:#61676ccc>,
</span><span>                    </span><span style=color:#ed9366>&</span><span>BindGroupEntries</span><span style=color:#ed9366>::</span><span>sequential((
</span><span>                        texture</span><span style=color:#61676ccc>,
</span><span>                        </span><span style=color:#ed9366>&</span><span>fullscreen_pipeline</span><span style=color:#ed9366>.</span><span>sampler</span><span style=color:#61676ccc>,
</span><span>                        settings_binding</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>,
</span><span>                    ))</span><span style=color:#61676ccc>,
</span><span>                )</span><span style=color:#61676ccc>,
</span><span>            )
</span><span>        }</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>if let </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(bind_groups) </span><span style=color:#ed9366>= &</span><span style=color:#fa6e32>mut</span><span> maybe_bind_groups {
</span><span>            </span><span style=color:#fa6e32>if</span><span> bind_groups</span><span style=color:#ed9366>.</span><span>a</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>0 </span><span style=color:#ed9366>!=</span><span> main_texture_view</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>() {
</span><span>                bind_groups</span><span style=color:#ed9366>.</span><span>a </span><span style=color:#ed9366>= </span><span style=color:#f07171>create_bind_group</span><span>(main_texture_view)</span><span style=color:#61676ccc>;
</span><span>            }
</span><span>            </span><span style=color:#fa6e32>if</span><span> bind_groups</span><span style=color:#ed9366>.</span><span>b</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>0 </span><span style=color:#ed9366>!=</span><span> main_texture_other_view</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>() {
</span><span>                bind_groups</span><span style=color:#ed9366>.</span><span>b </span><span style=color:#ed9366>= </span><span style=color:#f07171>create_bind_group</span><span>(main_texture_other_view)</span><span style=color:#61676ccc>;
</span><span>            }
</span><span>        } </span><span style=color:#fa6e32>else </span><span>{
</span><span>            commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>entity</span><span>(entity)</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>(FullscreenMaterialBindGroup {
</span><span>                a</span><span style=color:#61676ccc>: </span><span style=color:#f07171>create_bind_group</span><span>(main_texture_view)</span><span style=color:#61676ccc>,
</span><span>                b</span><span style=color:#61676ccc>: </span><span style=color:#f07171>create_bind_group</span><span>(main_texture_other_view)</span><span style=color:#61676ccc>,
</span><span>                _marker</span><span style=color:#61676ccc>: </span><span>PhantomData</span><span style=color:#ed9366>::</span><span>&LTT></span><span style=color:#61676ccc>,
</span><span>            })</span><span style=color:#61676ccc>;
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre><p>And the main system is simplified to just use the pre-created bind groups:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>fn </span><span style=color:#f29718>fullscreen_material_system</span><span>&LTT</span><span style=color:#61676ccc>:</span><span> FullscreenMaterial>(
</span><span>    </span><span style=color:#ff8f40>view</span><span style=color:#61676ccc>: </span><span>ViewQuery<(
</span><span>        </span><span style=color:#ed9366>&</span><span>ViewTarget,
</span><span>        </span><span style=color:#ed9366>&</span><span>DynamicUniformIndex&LTT>,
</span><span>        </span><span style=color:#ed9366>&</span><span>FullscreenMaterialBindGroup&LTT>,
</span><span>    )>,
</span><span>    </span><span style=color:#ff8f40>fullscreen_pipeline</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTRes&LTFullscreenMaterialPipeline&LTT>>>,
</span><span>    </span><span style=color:#ff8f40>pipeline_cache</span><span style=color:#61676ccc>: </span><span>Res&LTPipelineCache>,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>ctx</span><span style=color:#61676ccc>:</span><span> RenderContext,
</span><span>) {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    </span><span style=color:#fa6e32>let </span><span>(view_target</span><span style=color:#61676ccc>,</span><span> settings_index</span><span style=color:#61676ccc>,</span><span> bind_groups) </span><span style=color:#ed9366>=</span><span> view</span><span style=color:#ed9366>.</span><span style=color:#f07171>into_inner</span><span>()</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>    </span><span style=color:#fa6e32>let </span><span>(</span><span style=color:#ed9366>_</span><span style=color:#61676ccc>,</span><span> bind_group) </span><span style=color:#ed9366>= </span><span style=color:#fa6e32>if</span><span> bind_groups</span><span style=color:#ed9366>.</span><span>a</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>0 </span><span style=color:#ed9366>==</span><span> source</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>() {
</span><span>        </span><span style=color:#ed9366>&</span><span>bind_groups</span><span style=color:#ed9366>.</span><span>a
</span><span>    } </span><span style=color:#fa6e32>else </span><span>{
</span><span>        </span><span style=color:#ed9366>&</span><span>bind_groups</span><span style=color:#ed9366>.</span><span>b
</span><span>    }</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/rendering/render-schedule/ target=_blank>Bevy Render Schedule Documentation</a> - Explains the different phases of Bevy’s render schedule including Prepare, Queue, and Render phases<li><a rel="noopener nofollow noreferrer" href=https://wgpu.rs/explainer/bindgroups.html target=_blank>WGPU Bind Groups</a> - Technical details on what bind groups are and why they’re important for GPU performance<li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/ecs/components/ target=_blank>Bevy ECS Components</a> - Background on how components work in Bevy’s Entity Component System<li><a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Multiple_buffering target=_blank>Double Buffering in Graphics</a> - Explanation of why view targets use two textures and how they swap roles</ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_22886.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>