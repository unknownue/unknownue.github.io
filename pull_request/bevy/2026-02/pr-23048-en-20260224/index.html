<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #23048 Enable `debug` feature when `trace_tracy` is enabled
        
    </title><meta content="#23048 Enable `debug` feature when `trace_tracy` is enabled" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-24</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-23048-zh-cn-20260224>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Enable <code>debug</code> feature when <code>trace_tracy</code> is enabled<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/23048<li><strong>Author</strong>: IceSentry<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, C-Usability, S-Ready-For-Final-Review, A-Dev-Tools<li><strong>Created</strong>: 2026-02-19T01:28:01Z<li><strong>Merged</strong>: 2026-02-24T00:57:53Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>When running tracy you generally want to be able to see the full names of things</ul><h2 id=solution>Solution</h2><ul><li>Enable <code>debug</code> when <code>trace_tracy</code> is enabled.</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This pull request addresses a straightforward but important quality-of-life issue for developers using Tracy, a real-time performance profiler, with the Bevy game engine. The core problem was that when using the <code>trace_tracy</code> feature to profile Bevy applications, developers couldn’t see the full, human-readable names of Rust types, functions, and other identifiers in the Tracy profiler interface. Instead, they would see mangled or abbreviated names, making it harder to interpret profiling data.<p>The root cause was that the <code>trace_tracy</code> feature didn’t automatically enable the <code>debug</code> feature in Bevy’s Cargo.toml. In Rust, the <code>debug</code> feature typically controls whether debug symbols and full type names are included in the compiled output. When disabled for optimization, the compiler strips out or mangles these names to reduce binary size. Tracy relies on these debug symbols to display meaningful names in its profiling UI.<p>The solution implemented in this PR is minimal and surgical. The developer modified the feature definitions in Cargo.toml to add the <code>debug</code> feature as a dependency of both <code>trace_chrome</code> and <code>trace_tracy</code> features. This ensures that when developers enable either tracing feature, they automatically get debug symbols without needing to manually enable the <code>debug</code> feature separately.<p>The implementation approach is correct for several technical reasons. First, it uses Cargo’s feature dependency mechanism correctly - adding <code>"debug"</code> to the feature’s dependency list means it gets enabled whenever the parent feature is enabled. Second, it applies the fix to both tracing features (<code>trace_chrome</code> and <code>trace_tracy</code>) for consistency, even though the PR description only mentions Tracy. This prevents the same issue from affecting Chrome tracing users. Third, the change is backward compatible - existing code continues to work, but now with better profiling visibility when tracing is enabled.<p>One important consideration is that enabling debug symbols increases binary size and may slightly impact performance. However, this is an acceptable trade-off for profiling scenarios, where developers prioritize diagnostic information over optimal performance. The debug symbols are only included when explicitly opting into profiling via the tracing features, not in release builds by default.<p>The impact of this change is significant for developers using Tracy with Bevy. They can now immediately see clear, readable names in their profiling sessions without additional configuration steps. This reduces friction in the profiling workflow and makes performance analysis more efficient. The change also establishes a sensible default - when you’re profiling, you almost always want debug symbols available.<p>From an architectural perspective, this change demonstrates good feature flag design. It creates a logical dependency between features that are commonly used together, reducing the cognitive load on developers who need to remember which feature combinations work correctly. It’s a small example of how thoughtful feature flag management can improve developer experience in large codebases.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Developer enables trace_tracy] --> B[Cargo.toml feature resolution]
</span><span>    B --> C[debug feature automatically enabled]
</span><span>    C --> D[Compiler includes debug symbols]
</span><span>    D --> E[Tracy displays readable type names]
</span><span>    
</span><span>    F[Developer enables trace_chrome] --> B
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><p><strong>Cargo.toml</strong> (+2/-2)<p>This is the only file changed in this PR. The modifications are in the feature definitions section where the <code>trace_chrome</code> and <code>trace_tracy</code> features are defined.<ol><li><p><strong>What changed and why</strong>: The <code>debug</code> feature was added as a dependency to both <code>trace_chrome</code> and <code>trace_tracy</code> features. This ensures that when either tracing feature is enabled, debug symbols are automatically included in the build, allowing profiling tools to display readable type and function names.</p><li><p><strong>Code snippets showing the key modifications</strong>:</p></ol><pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># File: Cargo.toml
</span><span style=color:#abb0b6;font-style:italic># Before:
</span><span style=color:#399ee6>trace_chrome </span><span>= [</span><span style=color:#86b300>"trace"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"bevy_internal/trace_chrome"</span><span>]
</span><span style=color:#399ee6>trace_tracy </span><span>= [</span><span style=color:#86b300>"trace"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"bevy_internal/trace_tracy"</span><span>]
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span style=color:#399ee6>trace_chrome </span><span>= [</span><span style=color:#86b300>"trace"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"bevy_internal/trace_chrome"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"debug"</span><span>]
</span><span style=color:#399ee6>trace_tracy </span><span>= [</span><span style=color:#86b300>"trace"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"bevy_internal/trace_tracy"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"debug"</span><span>]
</span></code></pre><ol start=3><li><strong>How these changes relate to the overall purpose</strong>: These two lines are the entire implementation of the PR. By adding <code>"debug"</code> to each feature’s dependency array, Cargo automatically enables the debug feature whenever either tracing feature is enabled. This solves the problem described in the PR where Tracy couldn’t display full names because debug symbols were missing.</ol><h2 id=further-reading>Further Reading</h2><ol><li><p><strong>Rust Features Documentation</strong>: The official Cargo documentation on features provides detailed information about feature dependencies and resolution: https://doc.rust-lang.org/cargo/reference/features.html</p><li><p><strong>Tracy Profiler</strong>: The official Tracy website and documentation for understanding how the profiler works and uses debug symbols: https://github.com/wolfpld/tracy</p><li><p><strong>Debug Symbols in Rust</strong>: Rust Reference section on debug symbols and how they affect binary output: https://doc.rust-lang.org/rustc/codegen-options/index.html#debuginfo</p><li><p><strong>Bevy Profiling Guide</strong>: The Bevy book’s section on profiling and performance analysis: https://bevyengine.org/learn/books/introduction/profiling</p><li><p><strong>Feature Flags Best Practices</strong>: An article on effective use of feature flags in Rust projects: https://bennetthardwick.com/blog/rust-feature-flags-best-practices/</p></ol><h1 id=full-code-diff>Full Code Diff</h1><pre style=color:#61676c;background-color:#fafafa><code><span>diff --git a/Cargo.toml b/Cargo.toml
</span><span>index 036057fa254cf..3fb7d3923262a 100644
</span><span>--- a/Cargo.toml
</span><span>+++ b/Cargo.toml
</span><span>@@ -426,10 +426,10 @@ raw_vulkan_init = ["bevy_internal/raw_vulkan_init"]
</span><span> type_label_buffers = ["bevy_internal/type_label_buffers"]
</span><span> 
</span><span> # Tracing support, saving a file in Chrome Tracing format
</span><span>-trace_chrome = ["trace", "bevy_internal/trace_chrome"]
</span><span>+trace_chrome = ["trace", "bevy_internal/trace_chrome", "debug"]
</span><span> 
</span><span> # Tracing support, exposing a port for Tracy
</span><span>-trace_tracy = ["trace", "bevy_internal/trace_tracy"]
</span><span>+trace_tracy = ["trace", "bevy_internal/trace_tracy", "debug"]
</span><span> 
</span><span> # Tracing support, with memory profiling, exposing a port for Tracy
</span><span> trace_tracy_memory = ["bevy_internal/trace_tracy_memory"]
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_23048.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>