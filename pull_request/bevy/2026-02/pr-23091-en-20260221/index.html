<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #23091 Fix `DynamicTextureAtlasBuilder` incorrectly padding added textures.
        
    </title><meta content="#23091 Fix `DynamicTextureAtlasBuilder` incorrectly padding added textures." property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-21</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-23091-zh-cn-20260221>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Fix <code>DynamicTextureAtlasBuilder</code> incorrectly padding added textures.<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/23091<li><strong>Author</strong>: andriyDev<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Bug, A-UI, S-Ready-For-Final-Review, D-Straightforward, M-Deliberate-Rendering-Change<li><strong>Created</strong>: 2026-02-21T01:37:24Z<li><strong>Merged</strong>: 2026-02-21T21:03:17Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>#22939 has been introducing diffs in the testbed_ui Text example, but the only thing that was changing was the order that glyphs are allocated to the font atlas. The font atlas <strong>should be</strong> resilient to this and produce no diffs in that case.<li>Another PR had similar diffs and also seemed to be due to changing the order of glyphs being allocated.</ul><h2 id=solution>Solution</h2><ul><li>Previously <code>DynamicTextureAtlasBuilder</code> would allocate glyph size + padding, and then copy the glyph into that rectangle - but this means that copying would start at (0,0) meaning we would “blend” with the top and left edges (which breaks things).<li>Now we copy to (padding, padding).<li>Remove (padding, padding) allocate-able space from the bottom and right to ensure we don’t accidentally put textures on the right or bottom edges.</ul><h2 id=testing>Testing</h2><ul><li>Added unit tests to ensure that allocation works and that padding works.<li>The rendering change here is quite interesting! https://pixel-eagle.com/project/B04F67C0-C054-4A6F-92EC-F599FEC2FD1D?filter=PR-23091 Some cases, like the <code>l</code> in <code>black</code> in the Text screenshot look <strong>substantially</strong> better!</ul><p>Note this is orthogonal to #23056 which is about <code>TextureAtlasBuilder</code>, not <code>DynamicTextureAtlasBuilder</code>.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a subtle bug in Bevy’s <code>DynamicTextureAtlasBuilder</code> where texture padding was incorrectly handled. The issue manifested as visual artifacts when glyphs were allocated to the font atlas in different orders, causing unexpected rendering diffs in UI text.<p>The problem stemmed from how the atlas builder managed the padding between textures. In texture atlases, padding is essential to prevent bleeding artifacts during texture sampling - when a texture is sampled at its edges, hardware bilinear filtering can sample from neighboring textures if there’s no padding. The <code>DynamicTextureAtlasBuilder</code> was designed to add padding around each texture, but the implementation had two critical flaws.<p>First, when allocating space for a texture, the builder would request a rectangle of size <code>texture dimensions + padding</code>, but then copy the texture data starting at coordinate (0,0) within that allocated rectangle. This meant the texture was positioned at the top-left corner of the allocated space, leaving the top and left padding effectively unused. More importantly, this caused the texture to potentially “blend” with whatever was already in the atlas at those coordinates, leading to visual corruption.<p>Second, the builder was subtracting padding from the right and bottom edges after allocation, but this approach was inconsistent with how the allocation actually worked. The correct approach needed to ensure padding on all sides of each texture.<p>The fix involved three key changes to the implementation logic:<ol><li><p><strong>Initialize the atlas allocator with reduced size</strong>: The <code>AtlasAllocator</code> (from the <code>guillotiere</code> crate) is now created with dimensions <code>size - padding</code>, ensuring there’s always padding space at the right and bottom edges of the entire atlas. This prevents textures from being placed at the very edges where they would lack padding on those sides.</p><li><p><strong>Offset texture placement within allocations</strong>: When copying texture data into the atlas, the implementation now starts at coordinate <code>(padding, padding)</code> within the allocated rectangle. This ensures the texture is centered within its allocated space with padding on all sides.</p><li><p><strong>Simplify rectangle handling</strong>: The rectangle stored in the <code>TextureAtlasLayout</code> now represents the actual texture area (without padding), making the API more intuitive for consumers.</p></ol><p>The implementation changes are minimal but impactful. Here’s the core logic in the <code>add_texture</code> method:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>if let </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(</span><span style=color:#fa6e32>mut</span><span> allocation) </span><span style=color:#ed9366>=</span><span> allocation {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... validation code ...
</span><span>    
</span><span>    </span><span style=color:#fa6e32>let</span><span> rect </span><span style=color:#ed9366>= &</span><span style=color:#fa6e32>mut</span><span> allocation</span><span style=color:#ed9366>.</span><span>rectangle</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Remove the padding from the top and left (bottom and right padding is taken care of
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// by the "next" allocation and the border restriction).
</span><span>    rect</span><span style=color:#ed9366>.</span><span>min</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>+= </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>padding </span><span style=color:#ed9366>as </span><span style=color:#fa6e32>i32</span><span style=color:#61676ccc>;
</span><span>    rect</span><span style=color:#ed9366>.</span><span>min</span><span style=color:#ed9366>.</span><span>y </span><span style=color:#ed9366>+= </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>padding </span><span style=color:#ed9366>as </span><span style=color:#fa6e32>i32</span><span style=color:#61676ccc>;
</span><span>
</span><span>    </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>place_texture</span><span>(atlas_texture</span><span style=color:#61676ccc>,</span><span> allocation</span><span style=color:#61676ccc>,</span><span> texture)</span><span style=color:#ed9366>?</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#55b4d4;font-style:italic>Ok</span><span>(atlas_layout</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_texture</span><span>(</span><span style=color:#f07171>to_rect</span><span>(allocation</span><span style=color:#ed9366>.</span><span>rectangle)))
</span><span>}
</span></code></pre><p>The <code>place_texture</code> method was also simplified - it no longer needs to adjust the rectangle’s maximum coordinates since the rectangle already represents the correct texture area.<p>From a technical perspective, this fix demonstrates the importance of clear coordinate system management in graphics code. The bug occurred because of mismatched assumptions about whether coordinates represented texture area or allocated area (including padding). The solution establishes a consistent convention: allocated rectangles include padding, but texture placement is offset within them, and the layout stores only the texture area.<p>The PR also adds comprehensive unit tests that verify both allocation without padding and with padding. The padding test is particularly valuable because it demonstrates the edge-case behavior: when padding is applied, textures that would otherwise fit in a row get pushed to the next row to maintain proper padding on the right edge.<p>The visual impact is significant, especially for text rendering. As noted in the PR description, characters like the ‘l’ in “black” show substantial improvement because their thin vertical strokes no longer suffer from bleeding artifacts from adjacent glyphs. This improvement is orthogonal to another similar fix (#23056) for the non-dynamic <code>TextureAtlasBuilder</code>, highlighting that both atlas implementations needed the same correction.<p>This fix makes the font atlas truly resilient to allocation order changes, which is important for deterministic rendering and for preventing visual regressions when unrelated code changes affect the order in which glyphs are processed.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[DynamicTextureAtlasBuilder] --> B[AtlasAllocator]
</span><span>    B --> C[Allocation Rectangle]
</span><span>    C --> D[Texture Placement]
</span><span>    D --> E[TextureAtlasLayout]
</span><span>    
</span><span>    F[Padding Parameter] --> A
</span><span>    F --> B
</span><span>    F --> D
</span><span>    
</span><span>    G[Input Texture] --> D
</span><span>    H[Atlas Texture] --> D
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-image-src-dynamic-texture-atlas-builder-rs-220-9><code>crates/bevy_image/src/dynamic_texture_atlas_builder.rs</code> (+220/-9)</h3><p>This is the only file modified in the PR. The changes fix the padding logic in <code>DynamicTextureAtlasBuilder</code> and add comprehensive unit tests.<p><strong>Key changes:</strong><ol><li><strong>Constructor documentation and validation</strong>: Updated documentation to clarify that padding applies to atlas edges too, and added a debug assertion.</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>/// * `padding` - gap added between textures in the atlas, both in x axis and y axis
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>/// * `padding` - gap added between textures in the atlas (and the atlas edge), both in x axis
</span><span style=color:#abb0b6;font-style:italic>///   and y axis
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>size</span><span style=color:#61676ccc>:</span><span> UVec2, </span><span style=color:#ff8f40>padding</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>u32</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// This doesn't need to be >= since `AtlasAllocator` requires non-zero size.
</span><span>    </span><span style=color:#f07171>debug_assert!</span><span>(size</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>></span><span> padding </span><span style=color:#ed9366>&&</span><span> size</span><span style=color:#ed9366>.</span><span>y </span><span style=color:#ed9366>></span><span> padding)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// Leave out padding at the right and bottom, so we don't put textures on the edge of
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// atlas.
</span><span>        atlas_allocator</span><span style=color:#61676ccc>: </span><span>AtlasAllocator</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#f07171>to_size2</span><span>(size </span><span style=color:#ed9366>-</span><span> padding))</span><span style=color:#61676ccc>,
</span><span>        padding</span><span style=color:#61676ccc>,
</span><span>    }
</span><span>}
</span></code></pre><ol start=2><li><strong>Fixed texture allocation logic</strong>: The <code>add_texture</code> method now properly offsets the texture within the allocated rectangle.</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>if let </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(allocation) </span><span style=color:#ed9366>=</span><span> allocation {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... code ...
</span><span>    </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>place_texture</span><span>(atlas_texture</span><span style=color:#61676ccc>,</span><span> allocation</span><span style=color:#61676ccc>,</span><span> texture)</span><span style=color:#ed9366>?</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let mut</span><span> rect</span><span style=color:#61676ccc>:</span><span> URect </span><span style=color:#ed9366>= </span><span style=color:#f07171>to_rect</span><span>(allocation</span><span style=color:#ed9366>.</span><span>rectangle)</span><span style=color:#61676ccc>;
</span><span>    rect</span><span style=color:#ed9366>.</span><span>max </span><span style=color:#ed9366>=</span><span> rect</span><span style=color:#ed9366>.</span><span>max</span><span style=color:#ed9366>.</span><span style=color:#f07171>saturating_sub</span><span>(UVec2</span><span style=color:#ed9366>::</span><span>splat(</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>padding))</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#55b4d4;font-style:italic>Ok</span><span>(atlas_layout</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_texture</span><span>(rect))
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>if let </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(</span><span style=color:#fa6e32>mut</span><span> allocation) </span><span style=color:#ed9366>=</span><span> allocation {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... code ...
</span><span>    </span><span style=color:#fa6e32>let</span><span> rect </span><span style=color:#ed9366>= &</span><span style=color:#fa6e32>mut</span><span> allocation</span><span style=color:#ed9366>.</span><span>rectangle</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Remove the padding from the top and left (bottom and right padding is taken care of
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// by the "next" allocation and the border restriction).
</span><span>    rect</span><span style=color:#ed9366>.</span><span>min</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>+= </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>padding </span><span style=color:#ed9366>as </span><span style=color:#fa6e32>i32</span><span style=color:#61676ccc>;
</span><span>    rect</span><span style=color:#ed9366>.</span><span>min</span><span style=color:#ed9366>.</span><span>y </span><span style=color:#ed9366>+= </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>padding </span><span style=color:#ed9366>as </span><span style=color:#fa6e32>i32</span><span style=color:#61676ccc>;
</span><span>
</span><span>    </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>place_texture</span><span>(atlas_texture</span><span style=color:#61676ccc>,</span><span> allocation</span><span style=color:#61676ccc>,</span><span> texture)</span><span style=color:#ed9366>?</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#55b4d4;font-style:italic>Ok</span><span>(atlas_layout</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_texture</span><span>(</span><span style=color:#f07171>to_rect</span><span>(allocation</span><span style=color:#ed9366>.</span><span>rectangle)))
</span><span>}
</span></code></pre><ol start=3><li><strong>Simplified texture placement</strong>: The <code>place_texture</code> method no longer needs to adjust the rectangle bounds.</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>let mut</span><span> rect </span><span style=color:#ed9366>=</span><span> allocation</span><span style=color:#ed9366>.</span><span>rectangle</span><span style=color:#61676ccc>;
</span><span>rect</span><span style=color:#ed9366>.</span><span>max</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>-= </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>padding </span><span style=color:#ed9366>as </span><span style=color:#fa6e32>i32</span><span style=color:#61676ccc>;
</span><span>rect</span><span style=color:#ed9366>.</span><span>max</span><span style=color:#ed9366>.</span><span>y </span><span style=color:#ed9366>-= </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>padding </span><span style=color:#ed9366>as </span><span style=color:#fa6e32>i32</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>let</span><span> rect </span><span style=color:#ed9366>= &</span><span>allocation</span><span style=color:#ed9366>.</span><span>rectangle</span><span style=color:#61676ccc>;
</span></code></pre><ol start=4><li><strong>Added comprehensive unit tests</strong>: The PR adds 220 lines of unit tests covering allocation with and without padding, verifying both layout correctness and actual pixel data.</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>test</span><span>]
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>allocate_textures</span><span>() {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Tests basic allocation without padding
</span><span>}
</span><span>
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>test</span><span>]
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>allocate_textures_with_padding</span><span>() {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Tests allocation with padding, including edge-case behavior
</span><span>}
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><strong>Texture Atlas Fundamentals</strong>: Learn about texture atlasing techniques and why padding is necessary to prevent texture bleeding artifacts.<li><strong>Guillotiere Algorithm</strong>: The <code>guillotiere</code> crate implements the Guillotine algorithm for rectangle packing, which is what Bevy uses for dynamic texture atlas allocation.<li><strong>Bilinear Filtering and Texture Borders</strong>: Understanding how GPU texture sampling works helps explain why padding is critical for correct rendering.<li><strong>PR #23056</strong>: The related fix for the non-dynamic <code>TextureAtlasBuilder</code> that addresses similar padding issues.<li><strong>Bevy’s UI System</strong>: How text rendering works in Bevy’s UI system and the role of font atlases in efficient text rendering.</ol><h1 id=full-code-diff>Full Code Diff</h1><p>(See original PR for full diff)</div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_23091.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>