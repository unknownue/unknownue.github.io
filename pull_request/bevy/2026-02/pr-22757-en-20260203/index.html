<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22757 Add example for triggering and recovering from rendering errors
        
    </title><meta content="#22757 Add example for triggering and recovering from rendering errors" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-03</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-22757-zh-cn-20260203>中文</a></div></div><div class=pr-content><h1 id=title-add-example-for-triggering-and-recovering-from-rendering-errors>Title: Add example for triggering and recovering from rendering errors</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Add example for triggering and recovering from rendering errors<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22757<li><strong>Author</strong>: atlv24<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Rendering, C-Examples, S-Ready-For-Final-Review, D-Modest<li><strong>Created</strong>: 2026-01-31T21:36:19Z<li><strong>Merged</strong>: 2026-02-02T23:54:29Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p><strong>Objective</strong><ul><li>Test suite/demonstration for render recovery</ul><p><strong>Solution</strong><ul><li>Add an example that has ways to trigger various rendering errors</ul><p><strong>Testing</strong><ul><li>run it</ul><p>Note: im opening this separately so that behavior on bevy main can be compared to upcoming render recovery pr. It doesn’t have to merge first though.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This pull request adds a new example to the Bevy game engine that serves as both a test suite and demonstration for rendering error recovery. The author created this example as a standalone tool to compare the behavior of the current main branch with an upcoming render recovery PR. This approach allows for isolated testing of rendering error scenarios without needing the recovery features to be merged first.<p>The core problem addressed is the lack of a systematic way to test how Bevy handles rendering errors. Rendering errors can occur for various reasons: GPU out-of-memory conditions, validation errors from incorrect API usage, device lost events, or shader execution issues. Without a controlled way to trigger these errors, testing recovery mechanisms becomes difficult and inconsistent.<p>The solution approach is straightforward: create a self-contained example that provides keyboard-triggered mechanisms to intentionally cause different types of rendering errors. This example serves multiple purposes: it demonstrates the types of errors that can occur in real applications, provides a testbed for recovery features, and documents how developers might handle similar situations in their own code.<p>The implementation is clean and focused. The example creates a simple 3D scene with a circular base, a cube, and a moving camera. A help text overlay explains the keyboard controls for triggering different error types. The <code>RenderError</code> resource, implemented as an enum, tracks which error to trigger based on user input. This resource is extracted to the render world using Bevy’s <code>ExtractResourcePlugin</code>, allowing the render system to access it.<p>The <code>cause_error</code> system runs in the <code>Render</code> schedule and contains the actual error-triggering logic. Each error type uses different WGPU API calls to generate specific failure conditions:<ul><li><strong>OutOfMemory</strong>: Creates 64 large 8192x8192 RGBA16Float textures in a loop<li><strong>Validation</strong>: Attempts to create a buffer with an impossibly large size (1 << 63 bytes)<li><strong>DeviceLost (destroy)</strong>: Calls <code>destroy()</code> on the WGPU device<li><strong>DeviceLost (loop)</strong>: Creates a compute shader with an infinite loop and dispatches it</ul><p>The code demonstrates proper use of Bevy’s render abstractions like <code>RenderDevice</code>, <code>RenderQueue</code>, and the render app architecture. The error-triggering logic is isolated to the render world, which makes sense since these operations directly interact with the graphics API.<p>From an engineering perspective, this example is well-structured. It separates concerns clearly: the main app handles input and scene setup, while the render app handles the error generation. The use of Bevy’s <code>ExtractResourcePlugin</code> shows how to pass data from the main world to the render world, a pattern that’s essential for many rendering operations.<p>The impact of this PR is primarily educational and diagnostic. It provides a valuable tool for developers to understand rendering error scenarios and test recovery mechanisms. The example also serves as documentation for the types of errors that can occur when working with GPU APIs directly through Bevy’s render abstraction layer.<p>One technical insight worth noting is how the example triggers device lost errors in two different ways: by explicitly destroying the device and by submitting a compute shader that will never complete. This demonstrates that device loss can occur from both explicit actions and problematic shader execution.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Main App] -->|ExtractResourcePlugin| B[RenderError Resource]
</span><span>    A --> C[Setup Systems]
</span><span>    A --> D[Input System]
</span><span>    C --> E[3D Scene]
</span><span>    D --> B
</span><span>    B -->|Extracted to| F[Render App]
</span><span>    F --> G[cause_error System]
</span><span>    G --> H[OutOfMemory Error]
</span><span>    G --> I[Validation Error]
</span><span>    G --> J[DeviceLost Error]
</span><span>    G --> K[Loop Error]
</span><span>    
</span><span>    subgraph "Error Types"
</span><span>        H
</span><span>        I
</span><span>        J
</span><span>        K
</span><span>    end
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><p><strong>1. <code>examples/app/render_recovery.rs</code> (+182/-0)</strong> This is the main example file that demonstrates rendering error triggering and recovery. It sets up a 3D scene, handles user input, and contains systems for causing different types of rendering errors.<p>Key code snippets:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// The RenderError enum defines the different error types that can be triggered
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Resource</span><span style=color:#61676ccc>,</span><span> ExtractResource</span><span style=color:#61676ccc>,</span><span> Clone</span><span style=color:#61676ccc>,</span><span> Default)]
</span><span style=color:#fa6e32>enum </span><span style=color:#399ee6>RenderError </span><span>{
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>default</span><span>]
</span><span>    </span><span style=color:#55b4d4;font-style:italic>None</span><span style=color:#61676ccc>,
</span><span>    OutOfMemory</span><span style=color:#61676ccc>,
</span><span>    Validation</span><span style=color:#61676ccc>,
</span><span>    DeviceLost</span><span style=color:#61676ccc>,
</span><span>    Loop</span><span style=color:#61676ccc>,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Input system that maps keyboard keys to error types
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>input</span><span>(</span><span style=color:#ff8f40>input</span><span style=color:#61676ccc>: </span><span>Res&LTButtonInput&LTKey>>, </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>error</span><span style=color:#61676ccc>: </span><span>ResMut&LTRenderError>) {
</span><span>    </span><span style=color:#ed9366>*</span><span>error </span><span style=color:#ed9366>= </span><span>RenderError</span><span style=color:#ed9366>::</span><span>None</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>if</span><span> input</span><span style=color:#ed9366>.</span><span style=color:#f07171>just_pressed</span><span>(Key</span><span style=color:#ed9366>::</span><span>Character(</span><span style=color:#86b300>"o"</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>())) {
</span><span>        </span><span style=color:#ed9366>*</span><span>error </span><span style=color:#ed9366>= </span><span>RenderError</span><span style=color:#ed9366>::</span><span>OutOfMemory</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... similar for other keys
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Render system that actually causes the errors based on the RenderError resource
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>cause_error</span><span>(</span><span style=color:#ff8f40>error</span><span style=color:#61676ccc>: </span><span>If&LTRes&LTRenderError>>, </span><span style=color:#ff8f40>device</span><span style=color:#61676ccc>: </span><span>Res&LTRenderDevice>, </span><span style=color:#ff8f40>queue</span><span style=color:#61676ccc>: </span><span>Res&LTRenderQueue>) {
</span><span>    </span><span style=color:#fa6e32>match </span><span style=color:#ed9366>**</span><span>error {
</span><span>        RenderError</span><span style=color:#ed9366>::</span><span>None </span><span style=color:#ed9366>=> </span><span>{}
</span><span>        RenderError</span><span style=color:#ed9366>::</span><span>OutOfMemory </span><span style=color:#ed9366>=> </span><span>{
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// Create many large textures to exhaust GPU memory
</span><span>            </span><span style=color:#fa6e32>let mut</span><span> textures </span><span style=color:#ed9366>= </span><span style=color:#55b4d4;font-style:italic>Vec</span><span style=color:#ed9366>::</span><span>new()</span><span style=color:#61676ccc>;
</span><span>            </span><span style=color:#fa6e32>for </span><span style=color:#ed9366>_ in </span><span style=color:#ff8f40>0</span><span style=color:#ed9366>..</span><span style=color:#ff8f40>64 </span><span>{
</span><span>                textures</span><span style=color:#ed9366>.</span><span style=color:#f07171>push</span><span>(device</span><span style=color:#ed9366>.</span><span style=color:#f07171>create_texture</span><span>(</span><span style=color:#ed9366>&</span><span>TextureDescriptor {
</span><span>                    label</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>None</span><span style=color:#61676ccc>,
</span><span>                    size</span><span style=color:#61676ccc>:</span><span> Extent3d {
</span><span>                        width</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>8192</span><span style=color:#61676ccc>,
</span><span>                        height</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>8192</span><span style=color:#61676ccc>,
</span><span>                        depth_or_array_layers</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>1</span><span style=color:#61676ccc>,
</span><span>                    }</span><span style=color:#61676ccc>,
</span><span>                    </span><span style=color:#abb0b6;font-style:italic>// ... more texture configuration
</span><span>                }))</span><span style=color:#61676ccc>;
</span><span>            }
</span><span>        }
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ... other error cases
</span><span>    }
</span><span>}
</span></code></pre><p><strong>2. <code>Cargo.toml</code> (+11/-0)</strong> Adds the new example to the Bevy workspace configuration, making it available through <code>cargo run --example render_recovery</code>.<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span>[[</span><span style=color:#399ee6>example</span><span>]]
</span><span style=color:#399ee6>name </span><span>= </span><span style=color:#86b300>"render_recovery"
</span><span style=color:#399ee6>path </span><span>= </span><span style=color:#86b300>"examples/app/render_recovery.rs"
</span><span style=color:#399ee6>doc-scrape-examples </span><span>= </span><span style=color:#ff8f40>true
</span><span>
</span><span>[</span><span style=color:#399ee6>package</span><span style=color:#61676ccc>.</span><span style=color:#399ee6>metadata</span><span style=color:#61676ccc>.</span><span style=color:#399ee6>example</span><span style=color:#61676ccc>.</span><span style=color:#399ee6>render_recovery</span><span>]
</span><span style=color:#399ee6>name </span><span>= </span><span style=color:#86b300>"Render Recovery"
</span><span style=color:#399ee6>description </span><span>= </span><span style=color:#86b300>"Demonstrates how bevy can recover from rendering failures."
</span><span style=color:#399ee6>category </span><span>= </span><span style=color:#86b300>"Application"
</span><span style=color:#399ee6>wasm </span><span>= </span><span style=color:#ff8f40>false
</span></code></pre><p><strong>3. <code>examples/README.md</code> (+1/-0)</strong> Adds documentation for the new example in the examples list.<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span>[Render Recovery](</span><span style=color:#4cbf99;font-style:italic;text-decoration:underline>../examples/app/render_recovery.rs</span><span>) | Demonstrates how bevy can recover from rendering failures.
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><strong>Bevy Rendering Documentation</strong>: The official Bevy book’s rendering section covers the basics of Bevy’s render architecture<li><strong>WGPU Error Handling</strong>: Understanding WGPU’s error model is essential for working with rendering errors in Bevy<li><strong>GPU Memory Management</strong>: Resources on GPU memory allocation and out-of-memory conditions<li><strong>Compute Shaders</strong>: Documentation on compute shader execution and potential pitfalls like infinite loops<li><strong>Bevy’s Render World Architecture</strong>: Understanding how Bevy separates main and render worlds is crucial for implementing similar examples</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_22757.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>