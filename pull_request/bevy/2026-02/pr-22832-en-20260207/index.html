<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22832 `SystemBuffer` `apply()` delegates to `queue()`, which now must be implemented
        
    </title><meta content="#22832 `SystemBuffer` `apply()` delegates to `queue()`, which now must be implemented" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-07</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-22832-zh-cn-20260207>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><p><code>SystemBuffer</code> <code>apply()</code> delegates to <code>queue()</code>, which now must be implemented<h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: <code>SystemBuffer</code> <code>apply()</code> delegates to <code>queue()</code>, which now must be implemented<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22832<li><strong>Author</strong>: kfc35<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-ECS, C-Usability, S-Ready-For-Final-Review, M-Migration-Guide, D-Straightforward<li><strong>Created</strong>: 2026-02-06T21:23:31Z<li><strong>Merged</strong>: 2026-02-07T19:50:40Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p>The PR description is already in English, so it’s included exactly as-is:<h1 id=objective>Objective</h1><ul><li>Prevent footguns related to not implementing <code>queue()</code> when <code>SystemBuffer</code>s are used in <code>Observer</code> (and related) patterns. If not implemented, it results in changes to the world not being applied, which can be confusing, and it isn’t obvious to users that they also have to implement <code>queue()</code> to resolve the problem.<li>Address some of #14597</ul><h2 id=solution>Solution</h2><ul><li>The <code>SystemBuffer</code> trait now has its <code>apply()</code> default implementation delegate to <code>queue()</code>. This should cover the majority of cases where users want <code>apply()</code> and <code>queue()</code> to have the same behavior, particularly when <code>apply()</code> does not apply any structural changes to ECS.<li><code>queue()</code> has its empty default implementation removed, requiring implementers to implement it.<li>Other <code>SystemBuffer</code>s in the codebase have been updated to the best of my ability and understanding of ECS.</ul><h2 id=testing>Testing</h2><p>CI, and ran the following examples: <code>bloom_3d</code>, <code>3d_gizmos</code>, and <code>lighting</code> to ensure rendering was OK (they look fine)<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a subtle but significant issue in Bevy’s ECS system buffer implementation. The problem stems from how <code>SystemBuffer</code> traits interact with different system execution contexts, particularly Observers.<p>In Bevy, <code>SystemBuffer</code> is a trait that allows systems to accumulate changes and apply them later. It has two key methods: <code>apply()</code> which applies changes immediately, and <code>queue()</code> which queues changes for deferred application via <code>ApplyDeferred</code>. The issue was that when <code>SystemBuffer</code> was used in Observer systems, only the <code>queue()</code> method was called, not <code>apply()</code>. If a developer implemented only <code>apply()</code> without realizing they also needed <code>queue()</code>, their buffer changes would silently fail to apply in Observer contexts.<p>The root of the problem was the default implementation of <code>queue()</code> as an empty method. This meant developers could implement only <code>apply()</code> and their code would work in regular systems but fail silently in Observers. The confusion was compounded because there was no clear indication that both methods needed implementation for full compatibility.<p>The solution takes a pragmatic approach: since most <code>SystemBuffer</code> implementations don’t make structural ECS changes (adding/removing components, spawning entities), their <code>apply()</code> and <code>queue()</code> methods typically have identical behavior. The PR changes the trait so that <code>apply()</code> now has a default implementation that delegates to <code>queue()</code>, and <code>queue()</code> becomes a required method that must be implemented.<p>This design change ensures that:<ol><li>Developers must think about both execution paths when implementing <code>SystemBuffer</code><li>The default behavior (delegating <code>apply()</code> to <code>queue()</code>) works correctly for the majority of use cases<li>Observer systems will properly apply buffer changes since they now call <code>queue()</code>, which must be implemented</ol><p>The implementation required updating several existing <code>SystemBuffer</code> implementations throughout the codebase. In most cases, this meant simply renaming <code>apply()</code> to <code>queue()</code> and adjusting the method signature to accept <code>DeferredWorld</code> instead of <code>&mut World</code>. The key insight is that <code>DeferredWorld</code> can be used similarly to <code>&mut World</code> for non-structural changes, while structural changes require using the command queue via <code>world.commands()</code>.<p>For example, in <code>DiagnosticsBuffer</code>, the change was straightforward:<ul><li>Before: <code>fn apply(&mut self, _system_meta: &SystemMeta, world: &mut World)</code><li>After: <code>fn queue(&mut self, _system_meta: &SystemMeta, mut world: DeferredWorld)</code></ul><p>The same pattern applied to <code>GizmoBuffer</code> and <code>RenderContextState</code>. For <code>ParallelCommandQueue</code>, a new <code>queue()</code> implementation was added that properly handles the command queues from parallel execution.<p>The migration guide clearly explains the change: developers should implement <code>queue()</code> instead of <code>apply()</code>, and if their <code>apply()</code> doesn’t make structural changes, they can simply rename it and adjust the parameter type. For buffers that do make structural changes, both methods need implementation, with <code>queue()</code> using the command queue for structural modifications.<p>This change improves the API’s safety by eliminating a silent failure mode while maintaining backward compatibility through the default <code>apply()</code> implementation. It’s a good example of making APIs harder to misuse by requiring explicit consideration of all execution paths.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[SystemBuffer Trait] --> B[apply method]
</span><span>    A --> C[queue method]
</span><span>    
</span><span>    B --> D[Default implementation]
</span><span>    D --> E[Delegates to queue]
</span><span>    
</span><span>    C --> F[Must be implemented]
</span><span>    F --> G[Handles Observer contexts]
</span><span>    
</span><span>    E --> H[Ensures changes apply in all contexts]
</span><span>    
</span><span>    I[Existing Implementations] --> J[DiagnosticsBuffer]
</span><span>    I --> K[GizmoBuffer]
</span><span>    I --> L[RenderContextState]
</span><span>    I --> M[ParallelCommandQueue]
</span><span>    
</span><span>    J --> N[Renamed apply to queue]
</span><span>    K --> N
</span><span>    L --> N
</span><span>    M --> O[Added queue implementation]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-ecs-src-system-system-param-rs-9-3><code>crates/bevy_ecs/src/system/system_param.rs</code> (+9/-3)</h3><p>This is the core change that modifies the <code>SystemBuffer</code> trait definition. The <code>apply()</code> method now has a default implementation that delegates to <code>queue()</code>, and <code>queue()</code> becomes a required method.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub trait </span><span style=color:#399ee6>SystemBuffer</span><span>: FromWorld + Send + 'static {
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>apply</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>system_meta</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>SystemMeta, </span><span style=color:#ff8f40>world</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> World)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>queue</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>_system_meta</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>SystemMeta, </span><span style=color:#ff8f40>_world</span><span style=color:#61676ccc>:</span><span> DeferredWorld) {}
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub trait </span><span style=color:#399ee6>SystemBuffer</span><span>: FromWorld + Send + 'static {
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>apply</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>system_meta</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>SystemMeta, </span><span style=color:#ff8f40>world</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> World) {
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>queue</span><span>(system_meta</span><span style=color:#61676ccc>,</span><span> world</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>())</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>queue</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>_system_meta</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>SystemMeta, </span><span style=color:#ff8f40>_world</span><span style=color:#61676ccc>:</span><span> DeferredWorld)</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><p>The trait documentation was also updated to clarify that structural changes should use the command queue via <code>DeferredWorld::commands()</code> in the <code>queue()</code> method.<h3 id=crates-bevy-diagnostic-src-diagnostic-rs-2-2><code>crates/bevy_diagnostic/src/diagnostic.rs</code> (+2/-2)</h3><p>Updated <code>DiagnosticsBuffer</code> to implement <code>queue()</code> instead of <code>apply()</code>, with appropriate parameter type changes.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>impl </span><span>SystemBuffer </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>DiagnosticsBuffer </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>apply</span><span>(
</span><span>        </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>,
</span><span>        </span><span style=color:#ff8f40>_system_meta</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>bevy_ecs</span><span style=color:#ed9366>::</span><span>system</span><span style=color:#ed9366>::</span><span>SystemMeta,
</span><span>        </span><span style=color:#ff8f40>world</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>bevy_ecs</span><span style=color:#ed9366>::</span><span>world</span><span style=color:#ed9366>::</span><span>World,
</span><span>    ) { </span><span style=color:#abb0b6;font-style:italic>/* ... */ </span><span>}
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>impl </span><span>SystemBuffer </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>DiagnosticsBuffer </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>queue</span><span>(
</span><span>        </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>,
</span><span>        </span><span style=color:#ff8f40>_system_meta</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>bevy_ecs</span><span style=color:#ed9366>::</span><span>system</span><span style=color:#ed9366>::</span><span>SystemMeta,
</span><span>        </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>world</span><span style=color:#61676ccc>: </span><span>bevy_ecs</span><span style=color:#ed9366>::</span><span>world</span><span style=color:#ed9366>::</span><span>DeferredWorld,
</span><span>    ) { </span><span style=color:#abb0b6;font-style:italic>/* ... */ </span><span>}
</span><span>}
</span></code></pre><h3 id=crates-bevy-ecs-src-system-commands-parallel-scope-rs-10-0><code>crates/bevy_ecs/src/system/commands/parallel_scope.rs</code> (+10/-0)</h3><p>Added a <code>queue()</code> implementation for <code>ParallelCommandQueue</code> that properly handles command queues from parallel execution contexts.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>impl </span><span>SystemBuffer </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>ParallelCommandQueue </span><span>{
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>inline</span><span>]
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>queue</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>_system_meta</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>SystemMeta, </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>world</span><span style=color:#61676ccc>:</span><span> DeferredWorld) {
</span><span>        </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>cfg</span><span>(feature </span><span style=color:#ed9366>= </span><span style=color:#86b300>"trace"</span><span>)]
</span><span>        </span><span style=color:#fa6e32>let</span><span> _system_span </span><span style=color:#ed9366>=</span><span> _system_meta</span><span style=color:#ed9366>.</span><span>commands_span</span><span style=color:#ed9366>.</span><span style=color:#f07171>enter</span><span>()</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#fa6e32>for</span><span> cq </span><span style=color:#ed9366>in </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>thread_queues</span><span style=color:#ed9366>.</span><span style=color:#f07171>iter_mut</span><span>() {
</span><span>            world</span><span style=color:#ed9366>.</span><span style=color:#f07171>commands</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>append</span><span>(cq)</span><span style=color:#61676ccc>;
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre><h3 id=crates-bevy-gizmos-src-gizmos-rs-2-2><code>crates/bevy_gizmos/src/gizmos.rs</code> (+2/-2)</h3><p>Updated <code>GizmoBuffer</code> to implement <code>queue()</code> instead of <code>apply()</code>.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>impl</span><span>&LTConfig, Clear> SystemBuffer </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>GizmoBuffer</span><span>&LTConfig, Clear>
</span><span style=color:#fa6e32>where
</span><span>    Config</span><span style=color:#61676ccc>:</span><span> GizmoConfigGroup,
</span><span>    Clear</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>'static</span><span> + Send + Sync,
</span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>apply</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>_system_meta</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>SystemMeta, </span><span style=color:#ff8f40>world</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> World) { </span><span style=color:#abb0b6;font-style:italic>/* ... */ </span><span>}
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>impl</span><span>&LTConfig, Clear> SystemBuffer </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>GizmoBuffer</span><span>&LTConfig, Clear>
</span><span style=color:#fa6e32>where
</span><span>    Config</span><span style=color:#61676ccc>:</span><span> GizmoConfigGroup,
</span><span>    Clear</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>'static</span><span> + Send + Sync,
</span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>queue</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>_system_meta</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>SystemMeta, </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>world</span><span style=color:#61676ccc>:</span><span> DeferredWorld) { </span><span style=color:#abb0b6;font-style:italic>/* ... */ </span><span>}
</span><span>}
</span></code></pre><h3 id=crates-bevy-render-src-renderer-render-context-rs-not-in-provided-diff-but-mentioned><code>crates/bevy_render/src/renderer/render_context.rs</code> (not in provided diff but mentioned)</h3><p>Similar changes were made to <code>RenderContextState</code> to implement <code>queue()</code> and remove the empty <code>queue()</code> method.<h3 id=release-content-migration-guides-system-buffer-queue-md-33-0><code>release-content/migration-guides/system_buffer_queue.md</code> (+33/-0)</h3><p>Added a comprehensive migration guide explaining the change and providing code examples for updating custom <code>SystemBuffer</code> implementations.<h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/ecs/system-parameters/ target=_blank>Bevy ECS System Parameters Documentation</a> - Understanding the broader context of system parameters<li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/ecs/observers/ target=_blank>Observer Pattern in Bevy</a> - How observers work and why they require <code>queue()</code> implementation<li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/ecs/commands/ target=_blank>Deferred World and Commands</a> - Working with deferred execution and command queues<li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/issues/14597 target=_blank>Issue #14597</a> - The original issue that identified problems with system buffer implementation patterns</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_22832.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>