<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22970 Add font hinting example to `testbed_ui`'s text scene
        
    </title><meta content="#22970 Add font hinting example to `testbed_ui`'s text scene" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-17</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-22970-zh-cn-20260217>中文</a></div></div><div class=pr-content><h1 id=add-font-hinting-example-to-testbed-ui-s-text-scene>Add font hinting example to <code>testbed_ui</code>’s text scene</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Add font hinting example to <code>testbed_ui</code>’s text scene<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22970<li><strong>Author</strong>: ickshonpe<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, A-UI, S-Ready-For-Final-Review, A-Text, M-Deliberate-Rendering-Change<li><strong>Created</strong>: 2026-02-15T23:58:50Z<li><strong>Merged</strong>: 2026-02-17T01:47:20Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Add font hinting to the UI testbed text scene.<h2 id=solution>Solution</h2><p>Draw all the cases again without hinting:</p><img alt="Screenshot 2026-02-15 235523" height=1127 src=https://github.com/user-attachments/assets/bbd581b4-1249-4f23-939a-0d59e8cccf75 width=1924><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR extends the existing text demonstration scene in Bevy’s testbed UI to showcase font hinting, a feature that was already implemented in the engine but not yet visualized in the examples. The <code>testbed_ui</code> example serves as a comprehensive visual testing ground for Bevy’s UI system, allowing developers to see how various text rendering features behave under different configurations.<p>The developer identified that while Bevy’s text rendering system supported font hinting (a technique that adjusts character shapes to align with pixel grids for improved legibility at small sizes), there was no visual demonstration of this feature in the examples. Without such a demonstration, developers would need to manually test font hinting behavior or read through source code to understand its visual impact.<p>The solution approach is straightforward: modify the existing text scene generation code to create two parallel sets of all text examples - one with font hinting enabled and one with font hinting disabled. This side-by-side comparison allows developers to immediately see the visual differences hinting makes across various text scenarios. The implementation avoids duplicating code by wrapping the existing text entity creation logic in a loop that iterates over both <code>FontHinting::Enabled</code> and <code>FontHinting::Disabled</code> variants.<p>The implementation centers around a structural refactoring of the text scene setup. Previously, the code created a series of text entities with hardcoded positions. The new implementation introduces a loop that runs twice - once for each hinting state - and conditionally offsets the x-position of the second column to create a side-by-side layout. Each text entity now receives the <code>hinting</code> component, which determines whether font hinting is applied during rendering.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>for</span><span> hinting </span><span style=color:#ed9366>in </span><span>[FontHinting</span><span style=color:#ed9366>::</span><span>Enabled</span><span style=color:#61676ccc>, </span><span>FontHinting</span><span style=color:#ed9366>::</span><span>Disabled] {
</span><span>    </span><span style=color:#fa6e32>let mut</span><span> top </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>230.</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let</span><span> left </span><span style=color:#ed9366>= </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>5.
</span><span>        </span><span style=color:#ed9366>+ </span><span style=color:#fa6e32>if</span><span> hinting </span><span style=color:#ed9366>== </span><span>FontHinting</span><span style=color:#ed9366>::</span><span>Disabled {
</span><span>            </span><span style=color:#ff8f40>650.
</span><span>        } </span><span style=color:#fa6e32>else </span><span>{
</span><span>            </span><span style=color:#ff8f40>0.
</span><span>        })</span><span style=color:#61676ccc>;
</span><span>    
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Text entity creation with hinting component
</span><span>    commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>        Node {
</span><span>            left</span><span style=color:#61676ccc>,
</span><span>            top</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(top)</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#ed9366>..</span><span style=color:#55b4d4;font-style:italic>Default</span><span style=color:#ed9366>::</span><span>default()
</span><span>        }</span><span style=color:#61676ccc>,
</span><span>        Text</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#f07171>format!</span><span>(</span><span style=color:#86b300>"FontHinting::</span><span style=color:#ff8f40>{:?}</span><span style=color:#86b300>"</span><span style=color:#61676ccc>,</span><span> hinting))</span><span style=color:#61676ccc>,
</span><span>        hinting</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// Component added here
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ... other components
</span><span>    ))</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><p>The key technical insight here is that Bevy’s ECS (Entity Component System) allows the same component type (<code>FontHinting</code>) to be added to multiple entities, and the text rendering system automatically respects this setting for each entity. The implementation demonstrates proper use of Bevy’s component system by passing the <code>hinting</code> variable (which holds either <code>FontHinting::Enabled</code> or <code>FontHinting::Disabled</code>) as a component in each entity’s bundle.<p>The changes are purely additive and don’t break any existing functionality. All previous text examples are preserved and now rendered twice - once with hinting and once without. The spatial layout ensures the two columns don’t overlap, with the disabled hinting examples positioned 650 pixels to the right of the enabled ones.<p>The impact of this PR is primarily educational and demonstrative. It provides immediate visual feedback on how font hinting affects text rendering across different fonts, weights, colors, and formatting scenarios. Developers can now run the <code>testbed_ui</code> example, navigate to the text scene, and directly compare the visual quality of text with and without hinting. This is particularly useful for understanding when to enable or disable hinting based on specific use cases, such as when rendering text at very small sizes versus large display text.<p>The PR also demonstrates a good pattern for extending existing examples: rather than creating a separate example or scene, the existing demonstration was enhanced to show more features without increasing complexity for users. The side-by-side comparison is an effective way to visualize the impact of rendering settings without requiring users to toggle options or modify code.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[testbed_ui Example] --> B[Text Scene Setup]
</span><span>    B --> C{For Each Hinting State}
</span><span>    C --> D[FontHinting::Enabled]
</span><span>    C --> E[FontHinting::Disabled]
</span><span>    D --> F[Create Text Column 1&LTbr/>Left: 5px]
</span><span>    E --> G[Create Text Column 2&LTbr/>Left: 655px]
</span><span>    F --> H[All Text Examples&LTbr/>with hinting component]
</span><span>    G --> I[All Text Examples&LTbr/>without hinting component]
</span><span>    H --> J[Rendered Text&LTbr/>With Hinting]
</span><span>    I --> K[Rendered Text&LTbr/>Without Hinting]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=examples-testbed-ui-rs-478-439><code>examples/testbed/ui.rs</code> (+478/-439)</h3><p>This file contains the testbed UI example that showcases various UI features. The changes refactor the text scene setup to demonstrate font hinting by creating two parallel columns of text examples.<p><strong>Key modifications:</strong><ol><li>The entire text scene generation is wrapped in a loop that iterates over <code>FontHinting::Enabled</code> and <code>FontHinting::Disabled</code><li>Each text entity now includes the <code>hinting</code> component<li>The x-position is conditionally offset to create a side-by-side layout</ol><p><strong>Before (simplified structure):</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span>commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>    Node {
</span><span>        left</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>100.</span><span>)</span><span style=color:#61676ccc>,
</span><span>        top</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>230.</span><span>)</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#ed9366>..</span><span style=color:#55b4d4;font-style:italic>Default</span><span style=color:#ed9366>::</span><span>default()
</span><span>    }</span><span style=color:#61676ccc>,
</span><span>    Text</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#86b300>"white "</span><span>)</span><span style=color:#61676ccc>,
</span><span>    TextFont {
</span><span>        font</span><span style=color:#61676ccc>:</span><span> asset_server</span><span style=color:#ed9366>.</span><span style=color:#f07171>load</span><span>(</span><span style=color:#86b300>"fonts/FiraSans-Bold.ttf"</span><span>)</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>()</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>    }</span><span style=color:#61676ccc>,
</span><span>    DespawnOnExit(</span><span style=color:#fa6e32>super</span><span style=color:#ed9366>::</span><span>Scene</span><span style=color:#ed9366>::</span><span>Text)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#f07171>children!</span><span>[</span><span style=color:#abb0b6;font-style:italic>/* ... */</span><span>]</span><span style=color:#61676ccc>,
</span><span>))</span><span style=color:#61676ccc>;
</span></code></pre><p><strong>After (simplified structure):</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>for</span><span> hinting </span><span style=color:#ed9366>in </span><span>[FontHinting</span><span style=color:#ed9366>::</span><span>Enabled</span><span style=color:#61676ccc>, </span><span>FontHinting</span><span style=color:#ed9366>::</span><span>Disabled] {
</span><span>    </span><span style=color:#fa6e32>let mut</span><span> top </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>230.</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let</span><span> left </span><span style=color:#ed9366>= </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>5.
</span><span>        </span><span style=color:#ed9366>+ </span><span style=color:#fa6e32>if</span><span> hinting </span><span style=color:#ed9366>== </span><span>FontHinting</span><span style=color:#ed9366>::</span><span>Disabled {
</span><span>            </span><span style=color:#ff8f40>650.
</span><span>        } </span><span style=color:#fa6e32>else </span><span>{
</span><span>            </span><span style=color:#ff8f40>0.
</span><span>        })</span><span style=color:#61676ccc>;
</span><span>    
</span><span>    commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>        Node {
</span><span>            left</span><span style=color:#61676ccc>,
</span><span>            top</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(top)</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#ed9366>..</span><span style=color:#55b4d4;font-style:italic>Default</span><span style=color:#ed9366>::</span><span>default()
</span><span>        }</span><span style=color:#61676ccc>,
</span><span>        Text</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#86b300>"white "</span><span>)</span><span style=color:#61676ccc>,
</span><span>        TextFont {
</span><span>            font</span><span style=color:#61676ccc>:</span><span> asset_server</span><span style=color:#ed9366>.</span><span style=color:#f07171>load</span><span>(</span><span style=color:#86b300>"fonts/FiraSans-Bold.ttf"</span><span>)</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>()</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>        }</span><span style=color:#61676ccc>,
</span><span>        hinting</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// Added component
</span><span>        DespawnOnExit(</span><span style=color:#fa6e32>super</span><span style=color:#ed9366>::</span><span>Scene</span><span style=color:#ed9366>::</span><span>Text)</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#f07171>children!</span><span>[</span><span style=color:#abb0b6;font-style:italic>/* ... */</span><span>]</span><span style=color:#61676ccc>,
</span><span>    ))</span><span style=color:#61676ccc>;
</span><span>    
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// More text entities follow with same pattern
</span><span>}
</span></code></pre><p>The changes relate to the overall purpose by providing a visual demonstration of font hinting’s effects within the existing testbed framework, making it easy for developers to understand and test this feature.<h2 id=further-reading>Further Reading</h2><ol><li><strong>Bevy UI Documentation</strong>: Official Bevy UI guide for understanding the text rendering system<li><strong>Font Hinting Explained</strong>: Technical articles on font hinting and its impact on text legibility<li><strong>Bevy Examples Repository</strong>: Other examples demonstrating text rendering features<li><strong>FreeType Documentation</strong>: Details on font rendering and hinting algorithms (Bevy uses FreeType via <code>ab_glyph</code>)<li><strong>Digital Typography Resources</strong>: Books and articles on type rendering techniques for screens</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_22970.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>