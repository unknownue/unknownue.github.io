<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22879 `bevy_text` parley migration
        
    </title><meta content="#22879 `bevy_text` parley migration" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-11</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-22879-zh-cn-20260211>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: <code>bevy_text</code> parley migration<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22879<li><strong>Author</strong>: ickshonpe<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Feature, C-Dependencies, S-Ready-For-Final-Review, D-Complex, A-Text, X-Blessed, M-Deliberate-Rendering-Change<li><strong>Created</strong>: 2026-02-09T20:18:12Z<li><strong>Merged</strong>: 2026-02-11T06:25:13Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p><strong>Objective</strong><p>Migrate <code>bevy_text</code> from Cosmic Text to Parley.<p>Closes #21940. Fixes #21767, fixes #21768. Part of #21676.<p><strong>Solution</strong><p>I came down with the flu yesterday when I was about halfway done. I managed to work through it and drag this to a sort of finished state anyway but there’s probably some weird decisions because I haven’t been entirely coherent.<p>Most of the significant changes are to the pipeline module. There is also a new <code>parley_context</code> module. <code>FontAtlasKey</code> has a bunch of new fields, I can’t remember why there’s both an <code>id</code> and a <code>index</code> now.<p><strong>Testing</strong><p>Weird bug in <code>testbed_2d</code>:</p><img alt=symbols height=168 src=https://github.com/user-attachments/assets/29288e16-9c3a-4aee-9ec5-638179b0bac0 width=893><p>Most other things seem to work the same as main, ymmv.<p><strong>Showcase</strong><p><code>testbed_2d</code>’s text scene on main with Cosmic Text:</p><img alt=main-text2d-layout height=1127 src=https://github.com/user-attachments/assets/55d0c7b7-7517-4a50-b76f-2a24e7cdc28f width=1924><p><code>testbed_2d</code>’s text scene on this PR with Parley:</p><img alt=testbed-2d-text height=1127 src=https://github.com/user-attachments/assets/c87265fa-6e5f-4c03-aa5e-730f09f83ca3 width=1924><p><code>testbed_ui</code>’s text scene on main with Cosmic Text:</p><img alt=testbed-ui-main height=1127 src=https://github.com/user-attachments/assets/ce764891-3ca6-4c63-83af-8fe285a4a229 width=1924><p><code>testbed_ui</code>’s text scene on this PR with Parley:</p><img alt=testbed_ui_parley height=1127 src=https://github.com/user-attachments/assets/45bcbfe7-1ce4-44f7-bad7-7fa8f46c66ce width=1924><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This pull request implements a major architectural change to Bevy’s text rendering system by migrating from Cosmic Text to Parley. The migration addresses several issues with the previous implementation while modernizing the text layout engine.<p>The core problem was that Cosmic Text had limitations in terms of API flexibility, performance characteristics, and maintenance burden. The migration to Parley provides better font fallback handling, more flexible text styling options, and a cleaner API integration with Bevy’s existing systems.<p>The implementation approach involved replacing the entire text pipeline infrastructure. Instead of using Cosmic Text’s <code>FontSystem</code> and <code>Buffer</code> types, the new implementation uses Parley’s three-context architecture: <code>FontContext</code> for font management, <code>LayoutContext</code> for text layout, and <code>ScaleContext</code> for glyph scaling. This separation of concerns allows for more modular and maintainable code.<p>One of the key technical decisions was to create new wrapper types (<code>FontCx</code>, <code>LayoutCx</code>, <code>ScaleCx</code>) that encapsulate Parley’s contexts while integrating with Bevy’s ECS system. These resources replace the previous <code>CosmicFontSystem</code> and <code>SwashCache</code> resources. The migration also required significant changes to how fonts are loaded and managed, moving from Cosmic Text’s font database to Parley’s font collection system.<p>The glyph rasterization process was rewritten to use Swash directly through Parley’s APIs rather than through Cosmic Text’s intermediary layer. This change provides more control over the rasterization process and eliminates some of the complexity in the previous implementation.<p>The font atlas system was updated to work with Parley’s font identification scheme. <code>FontAtlasKey</code> now includes additional fields (<code>id</code>, <code>index</code>, <code>variations_hash</code>, <code>hinting</code>) to uniquely identify font instances with their specific variations and rendering settings.<p>From a performance perspective, the migration introduces some changes to the caching strategy. The shape run cache from Cosmic Text is replaced with Parley’s source cache, which is pruned every few frames to manage memory usage while maintaining performance for dynamic text.<p>The impact of these changes is significant but largely transparent to users of the high-level text APIs. The visual comparisons show that text rendering remains consistent, with minor differences in layout and glyph positioning due to the different layout algorithms used by Parley versus Cosmic Text.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TB
</span><span>    subgraph "Previous Architecture (Cosmic Text)"
</span><span>        A[Text/Text2d Components] --> B[CosmicFontSystem]
</span><span>        B --> C[Buffer Layout]
</span><span>        C --> D[SwashCache]
</span><span>        D --> E[Font Atlas]
</span><span>    end
</span><span>
</span><span>    subgraph "New Architecture (Parley)"
</span><span>        F[Text/Text2d Components] --> G[FontCx]
</span><span>        F --> H[LayoutCx]
</span><span>        F --> I[ScaleCx]
</span><span>        G --> J[Parley Layout]
</span><span>        H --> J
</span><span>        J --> K[Swash Scaler]
</span><span>        I --> K
</span><span>        K --> L[Font Atlas]
</span><span>    end
</span><span>
</span><span>    E --> M[Rendering]
</span><span>    L --> M
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=1-crates-bevy-text-src-pipeline-rs-269-380>1. <code>crates/bevy_text/src/pipeline.rs</code> (+269/-380)</h3><p>This file underwent the most significant changes, replacing Cosmic Text’s text layout pipeline with Parley’s.<p><strong>Key modifications:</strong><ul><li>Replaced <code>CosmicFontSystem</code> and <code>SwashCache</code> with <code>FontCx</code>, <code>LayoutCx</code>, and <code>ScaleCx</code><li>Rewrote <code>update_buffer</code> to use Parley’s <code>LayoutContext</code> for text layout<li>Updated <code>update_text_layout_info</code> to process Parley’s layout results</ul><p><strong>Code example:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before (Cosmic Text):
</span><span style=color:#fa6e32>let</span><span> cosmic_buffer </span><span style=color:#ed9366>= &</span><span style=color:#fa6e32>mut</span><span> computed</span><span style=color:#ed9366>.</span><span>buffer</span><span style=color:#61676ccc>;
</span><span>cosmic_buffer</span><span style=color:#ed9366>.</span><span style=color:#f07171>set_rich_text</span><span>(
</span><span>    font_system</span><span style=color:#61676ccc>,
</span><span>    sections</span><span style=color:#ed9366>.</span><span style=color:#f07171>drain</span><span>(</span><span style=color:#ed9366>..</span><span>)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#ed9366>&</span><span>Attrs</span><span style=color:#ed9366>::</span><span>new()</span><span style=color:#61676ccc>,
</span><span>    Shaping</span><span style=color:#ed9366>::</span><span>Advanced</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(justify</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>())</span><span style=color:#61676ccc>,
</span><span>)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After (Parley):
</span><span style=color:#fa6e32>let</span><span> layout </span><span style=color:#ed9366>= &</span><span style=color:#fa6e32>mut</span><span> computed</span><span style=color:#ed9366>.</span><span>layout</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>let mut</span><span> builder </span><span style=color:#ed9366>=</span><span> layout_cx
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#ff8f40>0
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>ranged_builder</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> font_system</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>0</span><span style=color:#61676ccc>,</span><span> text</span><span style=color:#61676ccc>,</span><span> scale_factor</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>true</span><span>)</span><span style=color:#61676ccc>;
</span><span>builder</span><span style=color:#ed9366>.</span><span style=color:#f07171>build_into</span><span>(layout</span><span style=color:#61676ccc>,</span><span> text)</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=2-crates-bevy-text-src-text-rs-123-120>2. <code>crates/bevy_text/src/text.rs</code> (+123/-120)</h3><p>Updated text components and styling to work with Parley.<p><strong>Key modifications:</strong><ul><li>Replaced <code>CosmicBuffer</code> with Parley’s <code>Layout<(u32, FontSmoothing)></code><li>Extended <code>Justify</code> enum with <code>Start</code> and <code>End</code> for bidirectional text support<li>Updated <code>FontStyle::Oblique</code> to optionally accept an angle parameter</ul><p><strong>Code example:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>ComputedTextBlock </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) buffer</span><span style=color:#61676ccc>:</span><span> CosmicBuffer,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>ComputedTextBlock </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) layout</span><span style=color:#61676ccc>: </span><span>Layout<(</span><span style=color:#fa6e32>u32</span><span>, FontSmoothing)>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span></code></pre><h3 id=3-crates-bevy-text-src-parley-context-rs-138-0>3. <code>crates/bevy_text/src/parley_context.rs</code> (+138/-0)</h3><p>New module providing Parley context wrappers for Bevy’s ECS.<p><strong>Key components:</strong><ul><li><code>FontCx</code>: Wraps <code>parley::FontContext</code> for font management<li><code>LayoutCx</code>: Wraps <code>parley::LayoutContext</code> for text layout<li><code>ScaleCx</code>: Wraps <code>swash::scale::ScaleContext</code> for glyph scaling</ul><p><strong>Code example:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Resource</span><span style=color:#61676ccc>,</span><span> Default</span><span style=color:#61676ccc>,</span><span> Deref</span><span style=color:#61676ccc>,</span><span> DerefMut)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>FontCx</span><span>(pub FontContext)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>FontCx </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>get_family</span><span><</span><span style=color:#fa6e32>'a</span><span>>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>'a mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>source</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>'a</span><span> FontSource) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span><</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>'a str</span><span>> {
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// Resolve font source to family name
</span><span>    }
</span><span>}
</span></code></pre><h3 id=4-crates-bevy-text-src-font-atlas-rs-61-60>4. <code>crates/bevy_text/src/font_atlas.rs</code> (+61/-60)</h3><p>Updated font atlas management for Parley integration.<p><strong>Key modifications:</strong><ul><li>Changed glyph cache key from <code>cosmic_text::CacheKey</code> to custom <code>GlyphCacheKey</code><li>Updated <code>get_outlined_glyph_texture</code> to use Swash directly via Parley<li>Modified font atlas key to include additional font variation data</ul><p><strong>Code example:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>let</span><span> image </span><span style=color:#ed9366>=</span><span> swash_cache
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>get_image_uncached</span><span>(font_system</span><span style=color:#61676ccc>,</span><span> physical_glyph</span><span style=color:#ed9366>.</span><span>cache_key)
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>ok_or</span><span>(TextError</span><span style=color:#ed9366>::</span><span>FailedToGetGlyphImage(physical_glyph</span><span style=color:#ed9366>.</span><span>cache_key))</span><span style=color:#ed9366>?</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>let</span><span> image </span><span style=color:#ed9366>= </span><span>swash</span><span style=color:#ed9366>::</span><span>scale</span><span style=color:#ed9366>::</span><span>Render</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#ed9366>&</span><span>[
</span><span>    swash</span><span style=color:#ed9366>::</span><span>scale</span><span style=color:#ed9366>::</span><span>Source</span><span style=color:#ed9366>::</span><span>ColorOutline(</span><span style=color:#ff8f40>0</span><span>)</span><span style=color:#61676ccc>,
</span><span>    swash</span><span style=color:#ed9366>::</span><span>scale</span><span style=color:#ed9366>::</span><span>Source</span><span style=color:#ed9366>::</span><span>ColorBitmap(swash</span><span style=color:#ed9366>::</span><span>scale</span><span style=color:#ed9366>::</span><span>StrikeWith</span><span style=color:#ed9366>::</span><span>BestFit)</span><span style=color:#61676ccc>,
</span><span>    swash</span><span style=color:#ed9366>::</span><span>scale</span><span style=color:#ed9366>::</span><span>Source</span><span style=color:#ed9366>::</span><span>Outline</span><span style=color:#61676ccc>,
</span><span>])
</span><span style=color:#ed9366>.</span><span style=color:#f07171>format</span><span>(swash</span><span style=color:#ed9366>::</span><span>zeno</span><span style=color:#ed9366>::</span><span>Format</span><span style=color:#ed9366>::</span><span>Alpha)
</span><span style=color:#ed9366>.</span><span style=color:#f07171>render</span><span>(scaler</span><span style=color:#61676ccc>,</span><span> glyph_id)
</span><span style=color:#ed9366>.</span><span style=color:#f07171>ok_or</span><span>(TextError</span><span style=color:#ed9366>::</span><span>FailedToGetGlyphImage(glyph_id))</span><span style=color:#ed9366>?</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=5-crates-bevy-text-src-font-rs-24-40>5. <code>crates/bevy_text/src/font.rs</code> (+24/-40)</h3><p>Updated font asset handling for Parley compatibility.<p><strong>Key modifications:</strong><ul><li>Changed <code>Font</code> struct to use Parley’s <code>Blob&LTu8></code> for font data<li>Updated font loading system to register fonts with Parley’s collection<li>Removed Cosmic Text-specific font ID tracking</ul><p><strong>Code example:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Font </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>data</span><span style=color:#61676ccc>: </span><span>Arc<</span><span style=color:#55b4d4;font-style:italic>Vec</span><span><</span><span style=color:#fa6e32>u8</span><span>>>,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>ids</span><span style=color:#61676ccc>: </span><span>SmallVec<[ID</span><span style=color:#61676ccc>; </span><span style=color:#ff8f40>8</span><span>]>,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>family_name</span><span style=color:#61676ccc>:</span><span> SmolStr,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Font </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>data</span><span style=color:#61676ccc>: </span><span>Blob<</span><span style=color:#fa6e32>u8</span><span>>,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>family_name</span><span style=color:#61676ccc>:</span><span> SmolStr,
</span><span>}
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/parley/latest/parley/ target=_blank>Parley Documentation</a> - The text layout library used in this migration<li><a rel="noopener nofollow noreferrer" href=https://docs.rs/swash/latest/swash/ target=_blank>Swash Documentation</a> - Font rendering library used by Parley<li><a href=https://unknownue.github.io/pull_request/bevy/2026-02/pr-22879-en-20260211/release-content/migration-guides/bevy_text_now_uses_parley.md>Bevy Text Migration Guide</a> - Guide for migrating from Cosmic Text to Parley<li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/issues/21676 target=_blank>Issue #21676</a> - Epic tracking text system improvements<li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/issues/21940 target=_blank>Issue #21940</a> - Main issue for migrating to Parley</ul><h2 id=full-code-diff>Full Code Diff</h2><p>See the original PR for the complete diff: https://github.com/bevyengine/bevy/pull/22879</div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_22879.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>