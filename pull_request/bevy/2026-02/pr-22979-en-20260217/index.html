<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22979 Font hinting fixes
        
    </title><meta content="#22979 Font hinting fixes" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-17</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-22979-zh-cn-20260217>中文</a></div></div><div class=pr-content><h1 id=font-hinting-fixes>Font hinting fixes</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Font hinting fixes<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22979<li><strong>Author</strong>: ickshonpe<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Bug, A-Rendering, A-UI, S-Ready-For-Final-Review, P-Regression, A-Text, D-Straightforward, M-Deliberate-Rendering-Change<li><strong>Created</strong>: 2026-02-16T11:57:02Z<li><strong>Merged</strong>: 2026-02-17T03:14:41Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Follow up to the parley migration PR #22879, fixing some hinting issues:<ol><li>The <code>font_hinting</code> field on <code>ComputedTextBlock</code> is redundant.<li>Hinting should be enabled by default for UI text (was disabled before due to a bug in the cosmic text implementation).<li>Hinting should only be applied to antialiased text.<li>Changes to hinting no longer require reshaping.<li><code>TextLayoutInfo</code> needs to be regenerated on changes to hinting.</ol><h2 id=solution>Solution</h2><p>Changes:<ol><li>Removed the <code>font_hinting</code> field from <code>ComputedTextBlock</code> as redundant.<li>Enabled hinting by default for UI <code>Text</code> as it’s normally pixel aligned.<li>In <code>update_text_layout_info</code> only hint antialiased text sections. Fixes #22977<li><code>Text</code> and <code>Text2d</code> text is no longer reshaped on <code>FontHinting</code> component changes.<li><code>Text</code> and <code>Text2d</code> entity’s <code>TextLayoutInfo</code>s are regenerated on <code>FontHinting</code> component changes.</ol><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses several font hinting issues that emerged after the parley text layout migration in PR #22879. The core problem was that font hinting—a technique for adjusting glyph shapes to align with pixel grids—wasn’t working correctly in certain scenarios.<p>The first issue was architectural redundancy. The <code>ComputedTextBlock</code> struct contained a <code>font_hinting</code> field, but this duplicated information already available in the <code>FontHinting</code> component. This redundancy meant changes to hinting could potentially cause inconsistencies between the component state and the computed text block state.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before (in bevy_text/src/text.rs):
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>ComputedTextBlock </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... other fields
</span><span>    </span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) font_hinting</span><span style=color:#61676ccc>:</span><span> FontHinting,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>ComputedTextBlock </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... other fields
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// font_hinting field removed
</span><span>}
</span></code></pre><p>The second issue was incorrect defaults. UI text previously had hinting disabled due to a bug in the cosmic text implementation. Since UI text is typically pixel-aligned for sharp rendering, hinting should be enabled by default. The fix was straightforward:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Default</span><span style=color:#61676ccc>,</span><span> Reflect)]
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>reflect</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Default)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Text</span><span>(pub String)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Default</span><span style=color:#61676ccc>,</span><span> Reflect)]
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>reflect</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Default)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Text</span><span>(pub String)</span><span style=color:#61676ccc>;
</span><span style=color:#abb0b6;font-style:italic>// Hinting is now enabled by default as UI text is normally pixel-aligned
</span></code></pre><p>The third issue was that hinting was being applied to all text, regardless of antialiasing settings. Font hinting only makes sense for antialiased text—for pixel-perfect aliased text, hinting can actually distort the intended appearance. The fix was to conditionally apply hinting based on the font smoothing setting:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// In bevy_text/src/pipeline.rs:
</span><span style=color:#fa6e32>let</span><span> hint </span><span style=color:#ed9366>=</span><span> hinting</span><span style=color:#ed9366>.</span><span style=color:#f07171>should_hint</span><span>() </span><span style=color:#ed9366>&&</span><span> font_smoothing </span><span style=color:#ed9366>== </span><span>FontSmoothing</span><span style=color:#ed9366>::</span><span>AntiAliased</span><span style=color:#61676ccc>;
</span></code></pre><p>The fourth issue was performance-related. When the <code>FontHinting</code> component changed, the system was triggering a complete text reshape—recalculating line breaks, positioning, and layout. This was unnecessary because hinting only affects glyph rasterization, not layout. The PR optimized this by separating layout changes from hinting changes.<p>The key insight was distinguishing between when text needs to be reshaped versus when only the rasterization parameters need updating. Text reshaping is expensive and should only happen when text content, font size, or layout constraints change. Hinting changes, however, only affect how existing glyphs are rendered at the pixel level.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before (in bevy_sprite/src/text2d.rs):
</span><span style=color:#fa6e32>let</span><span> text_changed </span><span style=color:#ed9366>=</span><span> scale_factor </span><span style=color:#ed9366>!=</span><span> text_layout_info</span><span style=color:#ed9366>.</span><span>scale_factor
</span><span>    </span><span style=color:#ed9366>||</span><span> block</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>()
</span><span>    </span><span style=color:#ed9366>||</span><span> hinting</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>()  </span><span style=color:#abb0b6;font-style:italic>// Hinting changes triggered reshape
</span><span>    </span><span style=color:#ed9366>||</span><span> computed</span><span style=color:#ed9366>.</span><span style=color:#f07171>needs_rerender</span><span>(viewport_size_changed</span><span style=color:#61676ccc>,</span><span> rem_size</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>())
</span><span>    </span><span style=color:#ed9366>|| </span><span>(</span><span style=color:#ed9366>!</span><span>reprocess_queue</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_empty</span><span>() </span><span style=color:#ed9366>&&</span><span> reprocess_queue</span><span style=color:#ed9366>.</span><span style=color:#f07171>remove</span><span>(</span><span style=color:#ed9366>&</span><span>entity))</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>let</span><span> text_changed </span><span style=color:#ed9366>=</span><span> scale_factor </span><span style=color:#ed9366>!=</span><span> text_layout_info</span><span style=color:#ed9366>.</span><span>scale_factor
</span><span>    </span><span style=color:#ed9366>||</span><span> block</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>()
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// hinting.is_changed() removed from reshape condition
</span><span>    </span><span style=color:#ed9366>||</span><span> computed</span><span style=color:#ed9366>.</span><span style=color:#f07171>needs_rerender</span><span>(viewport_size_changed</span><span style=color:#61676ccc>,</span><span> rem_size</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>())
</span><span>    </span><span style=color:#ed9366>|| </span><span>(</span><span style=color:#ed9366>!</span><span>reprocess_queue</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_empty</span><span>() </span><span style=color:#ed9366>&&</span><span> reprocess_queue</span><span style=color:#ed9366>.</span><span style=color:#f07171>remove</span><span>(</span><span style=color:#ed9366>&</span><span>entity))</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// But still trigger layout update for hinting changes:
</span><span style=color:#fa6e32>if </span><span style=color:#ed9366>!</span><span>(text_changed </span><span style=color:#ed9366>||</span><span> bounds</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>() </span><span style=color:#ed9366>||</span><span> hinting</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>()) {
</span><span>    </span><span style=color:#fa6e32>continue</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><p>The final issue was that while hinting changes shouldn’t trigger reshaping, they do require regenerating the <code>TextLayoutInfo</code> which contains the actual glyph rasterization data. The systems needed to be updated to regenerate layout information when hinting changes.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// In bevy_ui/src/widget/text.rs:
</span><span style=color:#fa6e32>for </span><span>(node</span><span style=color:#61676ccc>,</span><span> block</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>mut</span><span> text_layout_info</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>mut</span><span> text_flags</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>mut</span><span> computed</span><span style=color:#61676ccc>,</span><span> hinting) </span><span style=color:#ed9366>in
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> text_query
</span><span>{
</span><span>    </span><span style=color:#fa6e32>if</span><span> node</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>() </span><span style=color:#ed9366>||</span><span> text_flags</span><span style=color:#ed9366>.</span><span>needs_recompute </span><span style=color:#ed9366>||</span><span> hinting</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>() {
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// Regenerate TextLayoutInfo when hinting changes
</span></code></pre><p>These changes work together to create a more efficient and correct font rendering pipeline. The system now properly distinguishes between layout changes (which require expensive reshaping) and rendering parameter changes (which only require regenerating glyph data). This separation is crucial for performance, especially in UI-heavy applications where text properties might change frequently.<p>The architectural cleanup—removing the redundant <code>font_hinting</code> field from <code>ComputedTextBlock</code>—also simplifies the data flow. All hinting state now flows through the <code>FontHinting</code> component, making the system easier to reason about and maintain.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[FontHinting Component] --> B{System Detection}
</span><span>    B --> C[Text Reshape?]
</span><span>    B --> D[Layout Regeneration?]
</span><span>    C --> E[No: Only affects rasterization]
</span><span>    D --> F[Yes: Updates glyph data]
</span><span>    E --> G[Performance optimization]
</span><span>    F --> H[Correct visual rendering]
</span><span>    G --> I[Efficient UI updates]
</span><span>    H --> I
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-ui-src-widget-text-rs-5-10><code>crates/bevy_ui/src/widget/text.rs</code> (+5/-10)</h3><p>This file contains the UI text widget implementation. The changes fix the default hinting setting and optimize when text layout needs to be regenerated.<p><strong>Key changes:</strong><ol><li>Changed default <code>FontHinting</code> from <code>Disabled</code> to <code>Enabled</code> for UI text<li>Removed hinting changes from the reshape trigger condition<li>Added hinting changes to the layout regeneration condition</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before (default hinting):
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Default</span><span style=color:#61676ccc>,</span><span> Reflect)]
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>reflect</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Default)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Text</span><span>(pub String)</span><span style=color:#61676ccc>;
</span><span style=color:#abb0b6;font-style:italic>// Disable hinting for UI text
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After (default hinting):
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Default</span><span style=color:#61676ccc>,</span><span> Reflect)]
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>reflect</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Default)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Text</span><span>(pub String)</span><span style=color:#61676ccc>;
</span><span style=color:#abb0b6;font-style:italic>// Hinting is enabled by default as UI text is normally pixel-aligned
</span></code></pre><h3 id=crates-bevy-text-src-pipeline-rs-2-6><code>crates/bevy_text/src/pipeline.rs</code> (+2/-6)</h3><p>This file handles the text layout and rendering pipeline. The changes remove redundant hinting parameters and fix when hinting is applied.<p><strong>Key changes:</strong><ol><li>Removed <code>hinting</code> parameter from <code>create_text_measure</code> and <code>measure</code> methods<li>Removed setting of <code>computed.font_hinting</code> field<li>Fixed hinting to only apply to antialiased text</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before (applying hinting):
</span><span style=color:#fa6e32>let</span><span> hint </span><span style=color:#ed9366>=</span><span> computed</span><span style=color:#ed9366>.</span><span>font_hinting</span><span style=color:#ed9366>.</span><span style=color:#f07171>should_hint</span><span>()</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After (conditional hinting):
</span><span style=color:#fa6e32>let</span><span> hint </span><span style=color:#ed9366>=</span><span> hinting</span><span style=color:#ed9366>.</span><span style=color:#f07171>should_hint</span><span>() </span><span style=color:#ed9366>&&</span><span> font_smoothing </span><span style=color:#ed9366>== </span><span>FontSmoothing</span><span style=color:#ed9366>::</span><span>AntiAliased</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=crates-bevy-sprite-src-text2d-rs-1-3><code>crates/bevy_sprite/src/text2d.rs</code> (+1/-3)</h3><p>This file handles 2D text rendering. The changes optimize the text update logic to avoid unnecessary reshaping.<p><strong>Key changes:</strong><ol><li>Removed <code>hinting.is_changed()</code> from text reshape condition<li>Still checks for hinting changes to trigger layout updates</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before (trigger logic):
</span><span style=color:#fa6e32>let</span><span> text_changed </span><span style=color:#ed9366>=</span><span> scale_factor </span><span style=color:#ed9366>!=</span><span> text_layout_info</span><span style=color:#ed9366>.</span><span>scale_factor
</span><span>    </span><span style=color:#ed9366>||</span><span> block</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>()
</span><span>    </span><span style=color:#ed9366>||</span><span> hinting</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>()  </span><span style=color:#abb0b6;font-style:italic>// Causes reshape
</span><span>    </span><span style=color:#ed9366>||</span><span> computed</span><span style=color:#ed9366>.</span><span style=color:#f07171>needs_rerender</span><span>(viewport_size_changed</span><span style=color:#61676ccc>,</span><span> rem_size</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>())
</span><span>    </span><span style=color:#ed9366>|| </span><span>(</span><span style=color:#ed9366>!</span><span>reprocess_queue</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_empty</span><span>() </span><span style=color:#ed9366>&&</span><span> reprocess_queue</span><span style=color:#ed9366>.</span><span style=color:#f07171>remove</span><span>(</span><span style=color:#ed9366>&</span><span>entity))</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After (optimized trigger):
</span><span style=color:#fa6e32>let</span><span> text_changed </span><span style=color:#ed9366>=</span><span> scale_factor </span><span style=color:#ed9366>!=</span><span> text_layout_info</span><span style=color:#ed9366>.</span><span>scale_factor
</span><span>    </span><span style=color:#ed9366>||</span><span> block</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>()
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// hinting.is_changed() removed here
</span><span>    </span><span style=color:#ed9366>||</span><span> computed</span><span style=color:#ed9366>.</span><span style=color:#f07171>needs_rerender</span><span>(viewport_size_changed</span><span style=color:#61676ccc>,</span><span> rem_size</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>())
</span><span>    </span><span style=color:#ed9366>|| </span><span>(</span><span style=color:#ed9366>!</span><span>reprocess_queue</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_empty</span><span>() </span><span style=color:#ed9366>&&</span><span> reprocess_queue</span><span style=color:#ed9366>.</span><span style=color:#f07171>remove</span><span>(</span><span style=color:#ed9366>&</span><span>entity))</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// But still check for hinting changes separately:
</span><span style=color:#fa6e32>if </span><span style=color:#ed9366>!</span><span>(text_changed </span><span style=color:#ed9366>||</span><span> bounds</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>() </span><span style=color:#ed9366>||</span><span> hinting</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>()) {
</span><span>    </span><span style=color:#fa6e32>continue</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><h3 id=crates-bevy-text-src-text-rs-0-4><code>crates/bevy_text/src/text.rs</code> (+0/-4)</h3><p>This file defines text data structures. The changes remove redundant state.<p><strong>Key changes:</strong><ol><li>Removed <code>font_hinting</code> field from <code>ComputedTextBlock</code> struct<li>Updated <code>Debug</code> and <code>Default</code> implementations accordingly</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>ComputedTextBlock </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... other fields
</span><span>    </span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) font_hinting</span><span style=color:#61676ccc>:</span><span> FontHinting,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>ComputedTextBlock </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... other fields
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// font_hinting field removed
</span><span>}
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_text/latest/bevy_text/ target=_blank>Bevy Text Documentation</a> - Official Bevy text rendering API<li><a rel="noopener nofollow noreferrer" href=https://github.com/dfrg/parley target=_blank>Parley Text Layout</a> - The text layout library used by Bevy<li><a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Font_hinting target=_blank>Font Hinting Explained</a> - Technical background on font hinting techniques<li><a rel="noopener nofollow noreferrer" href=https://developer.nvidia.com/gpugems/gpugems2/part-iv-image-oriented-computing/chapter-40-incremental-and-compute-caching target=_blank>GPU Glyph Rasterization</a> - Modern approaches to text rendering<li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/pull/22879 target=_blank>PR #22879 - Parley Migration</a> - The original migration that introduced these text systems</ul><h1 id=full-code-diff>Full Code Diff</h1><details><summary>Click to expand full diff</summary> <pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_sprite/src/text2d.rs b/crates/bevy_sprite/src/text2d.rs
</span><span>index 18d1657dbcebb..1920adf81acb6 100644
</span><span style=color:#c594c5>--- a/crates/bevy_sprite/src/text2d.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_sprite/src/text2d.rs
</span><span style=color:#c594c5>@@ -241,11 +241,10 @@ </span><span style=color:#399ee6>pub fn update_text2d_layout(
</span><span> 
</span><span>         let text_changed = scale_factor != text_layout_info.scale_factor
</span><span>             || block.is_changed()
</span><span style=color:#f07171>-            || hinting.is_changed()
</span><span>             || computed.needs_rerender(viewport_size_changed, rem_size.is_changed())
</span><span>             || (!reprocess_queue.is_empty() && reprocess_queue.remove(&entity));
</span><span> 
</span><span style=color:#f07171>-        if !(text_changed || bounds.is_changed()) {
</span><span style=color:#86b300>+        if !(text_changed || bounds.is_changed() || hinting.is_changed()) {
</span><span>             continue;
</span><span>         }
</span><span> 
</span><span style=color:#c594c5>@@ -269,7 +268,6 @@ </span><span style=color:#399ee6>pub fn update_text2d_layout(
</span><span>                 &mut computed,
</span><span>                 &mut font_system,
</span><span>                 &mut layout_cx,
</span><span style=color:#f07171>-                *hinting,
</span><span>                 logical_viewport_size,
</span><span>                 rem_size.0,
</span><span>             ) {
</span><span>diff --git a/crates/bevy_text/src/pipeline.rs b/crates/bevy_text/src/pipeline.rs
</span><span>index fd5d1e2da5ef3..a6e28fc038e1e 100644
</span><span style=color:#c594c5>--- a/crates/bevy_text/src/pipeline.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_text/src/pipeline.rs
</span><span style=color:#c594c5>@@ -55,7 +55,6 @@ </span><span style=color:#399ee6>impl TextPipeline {
</span><span>         computed: &mut ComputedTextBlock,
</span><span>         font_system: &mut FontCx,
</span><span>         layout_cx: &mut LayoutCx,
</span><span style=color:#f07171>-        hinting: FontHinting,
</span><span>         logical_viewport_size: Vec2,
</span><span>         base_rem_size: f32,
</span><span>     ) -> Result<(), TextError> {
</span><span style=color:#c594c5>@@ -63,7 +62,6 @@ </span><span style=color:#399ee6>impl TextPipeline {
</span><span>         computed.needs_rerender = false;
</span><span>         computed.uses_rem_sizes = false;
</span><span>         computed.uses_viewport_sizes = false;
</span><span style=color:#f07171>-        computed.font_hinting = hinting;
</span><span> 
</span><span>         if scale_factor <= 0.0 {
</span><span>             warn_once!("Text scale factor is <= 0.0. No text will be displayed.");
</span><span style=color:#c594c5>@@ -227,7 +225,6 @@ </span><span style=color:#399ee6>impl TextPipeline {
</span><span>         computed: &mut ComputedTextBlock,
</span><span>         font_system: &mut FontCx,
</span><span>         layout_cx: &mut LayoutCx,
</span><span style=color:#f07171>-        hinting: FontHinting,
</span><span>         logical_viewport_size: Vec2,
</span><span>         base_rem_size: f32,
</span><span>     ) -> Result&LTTextMeasureInfo, TextError> {
</span><span style=color:#c594c5>@@ -245,7 +242,6 @@ </span><span style=color:#399ee6>impl TextPipeline {
</span><span>             computed,
</span><span>             font_system,
</span><span>             layout_cx,
</span><span style=color:#f07171>-            hinting,
</span><span>             logical_viewport_size,
</span><span>             base_rem_size,
</span><span>         )?;
</span><span style=color:#c594c5>@@ -282,8 +278,6 @@ </span><span style=color:#399ee6>impl TextPipeline {
</span><span>         let layout = &mut computed.layout;
</span><span>         layout_with_bounds(layout, bounds, justify);
</span><span> 
</span><span style=color:#f07171>-        let hint = computed.font_hinting.should_hint();
</span><span style=color:#f07171>-
</span><span>         for (line_index, line) in layout.lines().enumerate() {
</span><span>             for item in line.items() {
</span><span>                 if let PositionedLayoutItem::GlyphRun(glyph_run) = item {
</span><span style=color:#c594c5>@@ -310,6 +304,8 @@ </span><span style=color:#399ee6>impl TextPipeline {
</span><span>                         return Err(TextError::NoSuchFont);
</span><span>                     };
</span><span> 
</span><span style=color:#86b300>+                    let hint =
</span><span style=color:#86b300>+                        hinting.should_hint() && font_smoothing == FontSmoothing::AntiAliased;
</span><span>                     let mut scaler = scale_cx
</span><span>                         .0
</span><span>                         .builder(font_ref)
</span><span>diff --git a/crates/bevy_text/src/text.rs b/crates/bevy_text/src/text.rs
</span><span>index cdc399a580489..17e9a2f86c47e 100644
</span><span style=color:#c594c5>--- a/crates/bevy_text/src/text.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_text/src/text.rs
</span><span style=color:#c594c5>@@ -64,8 +64,6 @@ </span><span style=color:#399ee6>pub struct ComputedTextBlock {
</span><span>     // Used by dependents to determine if they should update a text block on changes to
</span><span>     // the rem size.
</span><span>     pub(crate) uses_rem_sizes: bool,
</span><span style=color:#f07171>-    /// Hinting mode to use when rasterizing glyphs for this block.
</span><span style=color:#f07171>-    pub(crate) font_hinting: FontHinting,
</span><span> }
</span><span> 
</span><span> impl Debug for ComputedTextBlock {
</span><span style=color:#c594c5>@@ -76,7 +74,6 @@ </span><span style=color:#399ee6>impl Debug for ComputedTextBlock {
</span><span>             .field("needs_rerender", &self.needs_rerender)
</span><span>             .field("uses_viewport_sizes", &self.uses_viewport_sizes)
</span><span>             .field("uses_rem_sizes", &self.uses_rem_sizes)
</span><span style=color:#f07171>-            .field("font_hinting", &self.font_hinting)
</span><span>             .finish()
</span><span>     }
</span><span> }
</span><span style=color:#c594c5>@@ -118,7 +115,6 @@ </span><span style=color:#399ee6>impl Default for ComputedTextBlock {
</span><span>             needs_rerender: true,
</span><span>             uses_rem_sizes: false,
</span><span>             uses_viewport_sizes: false,
</span><span style=color:#f07171>-            font_hinting: FontHinting::Disabled,
</span><span>         }
</span><span>     }
</span><span> }
</span><span>diff --git a/crates/bevy_ui/src/widget/text.rs b/crates/bevy_ui/src/widget/text.rs
</span><span>index 99726004b542f..f8735e62b683a 100644
</span><span style=color:#c594c5>--- a/crates/bevy_ui/src/widget/text.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_ui/src/widget/text.rs
</span><span style=color:#c594c5>@@ -104,9 +104,8 @@ </span><span style=color:#399ee6>impl Default for TextNodeFlags {
</span><span>     LineHeight,
</span><span>     TextNodeFlags,
</span><span>     ContentSize,
</span><span style=color:#f07171>-    // Disable hinting.
</span><span style=color:#f07171>-    // UI text is normally pixel-aligned, but with hinting enabled sometimes the text bounds are miscalculated slightly.
</span><span style=color:#f07171>-    FontHinting::Disabled
</span><span style=color:#86b300>+    // Hinting is enabled by default as UI text is normally pixel.
</span><span style=color:#86b300>+    FontHinting::Enabled
</span><span> )]
</span><span> pub struct Text(pub String);
</span><span> 
</span><span style=color:#c594c5>@@ -248,7 +247,6 @@ </span><span style=color:#399ee6>pub fn measure_text_system(
</span><span>             &mut ComputedTextBlock,
</span><span>             Ref&LTComputedUiRenderTargetInfo>,
</span><span>             &ComputedNode,
</span><span style=color:#f07171>-            Ref&LTFontHinting>,
</span><span>         ),
</span><span>         With&LTNode>,
</span><span>     >,
</span><span style=color:#c594c5>@@ -266,7 +264,6 @@ </span><span style=color:#399ee6>pub fn measure_text_system(
</span><span>         mut computed,
</span><span>         computed_target,
</span><span>         computed_node,
</span><span style=color:#f07171>-        hinting,
</span><span>     ) in &mut text_query
</span><span>     {
</span><span>         // Note: the ComputedTextBlock::needs_rerender bool is cleared in create_text_measure().
</span><span style=color:#c594c5>@@ -275,8 +272,7 @@ </span><span style=color:#399ee6>pub fn measure_text_system(
</span><span>             < (computed_target.scale_factor() - computed_node.inverse_scale_factor.recip()).abs()
</span><span>             || computed.needs_rerender(computed_target.is_changed(), rem_size.is_changed())
</span><span>             || text_flags.needs_measure_fn
</span><span style=color:#f07171>-            || content_size.is_added()
</span><span style=color:#f07171>-            || hinting.is_changed())
</span><span style=color:#86b300>+            || content_size.is_added())
</span><span>         {
</span><span>             continue;
</span><span>         }
</span><span style=color:#c594c5>@@ -290,7 +286,6 @@ </span><span style=color:#399ee6>pub fn measure_text_system(
</span><span>             computed.as_mut(),
</span><span>             &mut font_system,
</span><span>             &mut layout_cx,
</span><span style=color:#f07171>-            *hinting,
</span><span>             computed_target.logical_size(),
</span><span>             rem_size.0,
</span><span>         ) {
</span><span style=color:#c594c5>@@ -345,14 +340,14 @@ </span><span style=color:#399ee6>pub fn text_system(
</span><span>         &mut TextLayoutInfo,
</span><span>         &mut TextNodeFlags,
</span><span>         &mut ComputedTextBlock,
</span><span style=color:#f07171>-        &FontHinting,
</span><span style=color:#86b300>+        Ref&LTFontHinting>,
</span><span>     )>,
</span><span>     mut scale_cx: ResMut&LTScaleCx>,
</span><span> ) {
</span><span>     for (node, block, mut text_layout_info, mut text_flags, mut computed, hinting) in
</span><span>         &mut text_query
</span><span>     {
</span><span style=color:#f07171>-</span></code></pre>    <div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_22979.patch id=patch-info style=display:none></div>  <div class=bottom-spacer></div>