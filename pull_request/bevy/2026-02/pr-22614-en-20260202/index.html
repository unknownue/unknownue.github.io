<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22614 Minimal responsive `FontSize` support
        
    </title><meta content="#22614 Minimal responsive `FontSize` support" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-02</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-22614-zh-cn-20260202>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Minimal responsive <code>FontSize</code> support<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22614<li><strong>Author</strong>: ickshonpe<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Feature, A-UI, S-Ready-For-Review, A-Text, M-Release-Note, D-Modest, M-Deliberate-Rendering-Change<li><strong>Created</strong>: 2026-01-20T23:39:11Z<li><strong>Merged</strong>: 2026-02-02T23:26:53Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p>The PR description is in English, so we include it exactly as-is without translation.<h1 id=the-story-of-this-pull-request>The Story of This Pull Request</h1><p>This PR addresses a practical need in Bevy’s text rendering system: the ability to specify font sizes using responsive units like viewport percentages and rem units, rather than just static pixel values. The core problem was that text rendering was limited to pixel-based sizes, which made it difficult to create UIs that adapt properly to different screen sizes and user preferences.<h2 id=the-problem-and-context>The Problem and Context</h2><p>Before this PR, Bevy’s <code>TextFont</code> component had a simple <code>font_size: f32</code> field that only accepted pixel values. This worked fine for basic use cases, but didn’t support the responsive sizing patterns common in modern UI development. Developers couldn’t create text that scales with the window size or use relative units that adapt to user preferences.<p>The technical constraints were significant. The text rendering system uses Cosmic Text internally, and any changes needed to be minimal to avoid breaking existing code. The implementation also had to handle both UI text (rendered through <code>bevy_ui</code>) and 2D text (rendered through <code>Text2d</code>), which have different viewport resolution contexts.<h2 id=the-solution-approach>The Solution Approach</h2><p>The developer chose to implement a new <code>FontSize</code> enum that supports multiple unit types while maintaining backward compatibility. The approach was deliberately minimal - instead of reusing Bevy’s existing <code>Val</code> type (used for other UI measurements), they created a dedicated <code>FontSize</code> type to avoid pulling in unnecessary dependencies and to ensure clear semantic meaning for font sizing specifically.<p>The solution needed to handle three main technical challenges:<ol><li>Evaluating different unit types to actual pixel sizes at render time<li>Detecting when text needs to be re-rendered due to viewport or rem size changes<li>Providing sensible defaults for cases where viewport size isn’t clearly defined</ol><h2 id=the-implementation>The Implementation</h2><p>The core of the implementation is the new <code>FontSize</code> enum in <code>crates/bevy_text/src/text.rs</code>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub enum </span><span style=color:#399ee6>FontSize </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Font Size in logical pixels.
</span><span>    Px(</span><span style=color:#fa6e32>f32</span><span>)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Font size as a percentage of the viewport width.
</span><span>    Vw(</span><span style=color:#fa6e32>f32</span><span>)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Font size as a percentage of the viewport height.
</span><span>    Vh(</span><span style=color:#fa6e32>f32</span><span>)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Font size as a percentage of the smaller of the viewport width and height.
</span><span>    VMin(</span><span style=color:#fa6e32>f32</span><span>)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Font size as a percentage of the larger of the viewport width and height.
</span><span>    VMax(</span><span style=color:#fa6e32>f32</span><span>)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Font Size relative to the value of the `RemSize` resource.
</span><span>    Rem(</span><span style=color:#fa6e32>f32</span><span>)</span><span style=color:#61676ccc>,
</span><span>}
</span></code></pre><p>This replaces the <code>f32</code> in <code>TextFont</code>, and the enum provides an <code>eval()</code> method that converts any variant to logical pixels given a viewport size and rem base size. The implementation carefully handles edge cases like zero or negative font sizes, maintaining existing warning behavior.<p>The <code>TextPipeline</code> in <code>crates/bevy_text/src/pipeline.rs</code> was updated to track which text blocks use viewport or rem units. Two new boolean fields were added to <code>ComputedTextBlock</code>:<ul><li><code>uses_viewport_sizes</code>: true if any text section uses viewport-based units (Vw, Vh, VMin, VMax)<li><code>uses_rem_sizes</code>: true if any text section uses rem units</ul><p>These fields enable efficient change detection. The <code>needs_rerender()</code> method was updated to accept two parameters:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>needs_rerender</span><span>(
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>,
</span><span>    </span><span style=color:#ff8f40>is_viewport_size_changed</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>bool</span><span>,
</span><span>    </span><span style=color:#ff8f40>is_rem_size_changed</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>bool</span><span>,
</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>bool </span><span>{
</span><span>    </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>needs_rerender
</span><span>        </span><span style=color:#ed9366>|| </span><span>(is_viewport_size_changed </span><span style=color:#ed9366>&& </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>uses_viewport_sizes)
</span><span>        </span><span style=color:#ed9366>|| </span><span>(is_rem_size_changed </span><span style=color:#ed9366>&& </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>uses_rem_sizes)
</span><span>}
</span></code></pre><p>This ensures text only re-renders when necessary - if the viewport size changes but the text block doesn’t use viewport units, no re-render is triggered.<p>For <code>Text2d</code>, there’s an interesting design decision: viewport units are resolved using the primary window’s size (or a default of 1000x1000 if no primary window exists). This is a pragmatic compromise because a single <code>Text2d</code> entity can be rendered to multiple viewports via <code>RenderLayers</code>, making it unclear which viewport size should be authoritative.<h2 id=technical-insights>Technical Insights</h2><p>The implementation shows several thoughtful engineering decisions:<ol><li><p><strong>Minimal API surface</strong>: The change is mostly transparent to users. Existing code using <code>f32</code> for font size automatically converts to <code>FontSize::Px(f32)</code> via the <code>From&LTf32></code> implementation.</p><li><p><strong>Efficient change detection</strong>: By tracking which text blocks actually use responsive units, the system avoids unnecessary work when viewport or rem sizes change.</p><li><p><strong>Separation of concerns</strong>: The <code>FontSize</code> enum handles unit conversion independently of the text rendering logic, making the code more maintainable.</p><li><p><strong>Backward compatibility</strong>: The <code>RemSize</code> resource defaults to 20.0, matching the previous default font size, so existing code continues to work as expected.</p></ol><p>The PR also reveals current limitations in Bevy’s text system. As noted by the author, “rem” units aren’t true CSS rem units because there’s no font style inheritance yet - they’re just multiplied by a global <code>RemSize</code> resource value. Similarly, “em” units can’t be implemented without inheritance support.<h2 id=the-impact>The Impact</h2><p>The changes enable responsive text sizing with minimal performance overhead. Developers can now create text that scales with window size using viewport units, or create consistent sizing relationships using rem units. The implementation affects 81 example files, demonstrating the widespread utility of this feature.<p>One notable aspect is how the changes propagate through the codebase. The <code>TextPipeline</code> now requires viewport and rem size parameters, which means any system using it (like <code>Text2d</code> and UI text systems) must provide these values. This creates a clear contract between text consumers and the text rendering system.<p>The PR also includes migration guides and release notes, showing good documentation practices. The author acknowledges that most example migrations were automated with regular expressions, which is a pragmatic approach given the scale of changes.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[FontSize Enum] --> B[Unit Types]
</span><span>    B --> C[Px]
</span><span>    B --> D[Vw/Vh/VMin/VMax]
</span><span>    B --> E[Rem]
</span><span>    
</span><span>    F[TextPipeline] --> G[Evaluation Context]
</span><span>    G --> H[Viewport Size]
</span><span>    G --> I[Rem Size]
</span><span>    
</span><span>    D --> H
</span><span>    E --> I
</span><span>    C --> J[Logical Pixels]
</span><span>    D --> J
</span><span>    E --> J
</span><span>    
</span><span>    J --> K[Cosmic Text]
</span><span>    K --> L[Render Output]
</span><span>    
</span><span>    M[Change Detection] --> N[uses_viewport_sizes]
</span><span>    M --> O[uses_rem_sizes]
</span><span>    N --> P[Trigger on viewport change]
</span><span>    O --> Q[Trigger on rem change]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-text-src-text-rs-129-6><code>crates/bevy_text/src/text.rs</code> (+129/-6)</h3><p><strong>What changed</strong>: Added the <code>FontSize</code> enum and <code>RemSize</code> resource, updated <code>TextFont</code> to use <code>FontSize</code> instead of <code>f32</code>.<p><strong>Key code</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>TextFont </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>font</span><span style=color:#61676ccc>:</span><span> FontSource,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>font_size</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>TextFont </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>font</span><span style=color:#61676ccc>:</span><span> FontSource,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>font_size</span><span style=color:#61676ccc>:</span><span> FontSize,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span><span>
</span><span style=color:#fa6e32>pub enum </span><span style=color:#399ee6>FontSize </span><span>{
</span><span>    Px(</span><span style=color:#fa6e32>f32</span><span>)</span><span style=color:#61676ccc>,
</span><span>    Vw(</span><span style=color:#fa6e32>f32</span><span>)</span><span style=color:#61676ccc>,
</span><span>    Vh(</span><span style=color:#fa6e32>f32</span><span>)</span><span style=color:#61676ccc>,
</span><span>    VMin(</span><span style=color:#fa6e32>f32</span><span>)</span><span style=color:#61676ccc>,
</span><span>    VMax(</span><span style=color:#fa6e32>f32</span><span>)</span><span style=color:#61676ccc>,
</span><span>    Rem(</span><span style=color:#fa6e32>f32</span><span>)</span><span style=color:#61676ccc>,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>FontSize </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>eval</span><span>(
</span><span>        </span><span style=color:#ff8f40>self</span><span>,
</span><span>        </span><span style=color:#ff8f40>logical_viewport_size</span><span style=color:#61676ccc>:</span><span> Vec2,
</span><span>        </span><span style=color:#ff8f40>rem_size</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>,
</span><span>    ) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>f32 </span><span>{
</span><span>        </span><span style=color:#fa6e32>match </span><span style=color:#55b4d4;font-style:italic>self </span><span>{
</span><span>            FontSize</span><span style=color:#ed9366>::</span><span>Px(s) </span><span style=color:#ed9366>=></span><span> s</span><span style=color:#61676ccc>,
</span><span>            FontSize</span><span style=color:#ed9366>::</span><span>Vw(s) </span><span style=color:#ed9366>=></span><span> logical_viewport_size</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>*</span><span> s </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>100.</span><span style=color:#61676ccc>,
</span><span>            FontSize</span><span style=color:#ed9366>::</span><span>Vh(s) </span><span style=color:#ed9366>=></span><span> logical_viewport_size</span><span style=color:#ed9366>.</span><span>y </span><span style=color:#ed9366>*</span><span> s </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>100.</span><span style=color:#61676ccc>,
</span><span>            FontSize</span><span style=color:#ed9366>::</span><span>VMin(s) </span><span style=color:#ed9366>=></span><span> logical_viewport_size</span><span style=color:#ed9366>.</span><span style=color:#f07171>min_element</span><span>() </span><span style=color:#ed9366>*</span><span> s </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>100.</span><span style=color:#61676ccc>,
</span><span>            FontSize</span><span style=color:#ed9366>::</span><span>VMax(s) </span><span style=color:#ed9366>=></span><span> logical_viewport_size</span><span style=color:#ed9366>.</span><span style=color:#f07171>max_element</span><span>() </span><span style=color:#ed9366>*</span><span> s </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>100.</span><span style=color:#61676ccc>,
</span><span>            FontSize</span><span style=color:#ed9366>::</span><span>Rem(s) </span><span style=color:#ed9366>=></span><span> rem_size </span><span style=color:#ed9366>*</span><span> s</span><span style=color:#61676ccc>,
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre><h3 id=crates-bevy-text-src-pipeline-rs-34-5><code>crates/bevy_text/src/pipeline.rs</code> (+34/-5)</h3><p><strong>What changed</strong>: Updated <code>TextPipeline</code> methods to accept viewport and rem size parameters, added tracking of which text blocks use responsive units.<p><strong>Key code</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>update_buffer</span><span>(
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>,
</span><span>    </span><span style=color:#ff8f40>scale_factor</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>,
</span><span>    </span><span style=color:#ff8f40>computed</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> ComputedTextBlock,
</span><span>    </span><span style=color:#ff8f40>font_system</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> CosmicFontSystem,
</span><span>    </span><span style=color:#ff8f40>hinting</span><span style=color:#61676ccc>:</span><span> FontHinting,
</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Result</span><span><(), TextError> {
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>update_buffer</span><span>(
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>,
</span><span>    </span><span style=color:#ff8f40>scale_factor</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>,
</span><span>    </span><span style=color:#ff8f40>computed</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> ComputedTextBlock,
</span><span>    </span><span style=color:#ff8f40>font_system</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> CosmicFontSystem,
</span><span>    </span><span style=color:#ff8f40>hinting</span><span style=color:#61676ccc>:</span><span> FontHinting,
</span><span>    </span><span style=color:#ff8f40>logical_viewport_size</span><span style=color:#61676ccc>:</span><span> Vec2,
</span><span>    </span><span style=color:#ff8f40>base_rem_size</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>,
</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Result</span><span><(), TextError> {
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Inside update_buffer:
</span><span style=color:#fa6e32>for </span><span>(span_index</span><span style=color:#61676ccc>, </span><span>(entity</span><span style=color:#61676ccc>,</span><span> depth</span><span style=color:#61676ccc>,</span><span> span</span><span style=color:#61676ccc>,</span><span> text_font</span><span style=color:#61676ccc>,</span><span> _color</span><span style=color:#61676ccc>,</span><span> line_height)) </span><span style=color:#ed9366>in</span><span> text_spans</span><span style=color:#ed9366>.</span><span style=color:#f07171>enumerate</span><span>() {
</span><span>    </span><span style=color:#fa6e32>match</span><span> text_font</span><span style=color:#ed9366>.</span><span>font_size {
</span><span>        </span><span style=color:#fa6e32>crate</span><span style=color:#ed9366>::</span><span>FontSize</span><span style=color:#ed9366>::</span><span>Vw(</span><span style=color:#ed9366>_</span><span>)
</span><span>        </span><span style=color:#ed9366>| </span><span style=color:#fa6e32>crate</span><span style=color:#ed9366>::</span><span>FontSize</span><span style=color:#ed9366>::</span><span>Vh(</span><span style=color:#ed9366>_</span><span>)
</span><span>        </span><span style=color:#ed9366>| </span><span style=color:#fa6e32>crate</span><span style=color:#ed9366>::</span><span>FontSize</span><span style=color:#ed9366>::</span><span>VMin(</span><span style=color:#ed9366>_</span><span>)
</span><span>        </span><span style=color:#ed9366>| </span><span style=color:#fa6e32>crate</span><span style=color:#ed9366>::</span><span>FontSize</span><span style=color:#ed9366>::</span><span>VMax(</span><span style=color:#ed9366>_</span><span>) </span><span style=color:#ed9366>=></span><span> computed</span><span style=color:#ed9366>.</span><span>uses_viewport_sizes </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>true</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#fa6e32>crate</span><span style=color:#ed9366>::</span><span>FontSize</span><span style=color:#ed9366>::</span><span>Rem(</span><span style=color:#ed9366>_</span><span>) </span><span style=color:#ed9366>=></span><span> computed</span><span style=color:#ed9366>.</span><span>uses_rem_sizes </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>true</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#ed9366>_ => </span><span>()</span><span style=color:#61676ccc>,
</span><span>    }</span><span style=color:#61676ccc>;
</span><span>    
</span><span>    </span><span style=color:#fa6e32>let</span><span> font_size </span><span style=color:#ed9366>=</span><span> text_font</span><span style=color:#ed9366>.</span><span>font_size</span><span style=color:#ed9366>.</span><span style=color:#f07171>eval</span><span>(logical_viewport_size</span><span style=color:#61676ccc>,</span><span> base_rem_size)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span></code></pre><h3 id=crates-bevy-sprite-src-text2d-rs><code>crates/bevy_sprite/src/text2d.rs</code></h3><p><strong>What changed</strong>: Updated <code>Text2d</code> rendering to pass viewport size from primary window and handle responsive font size change detection.<p><strong>Key code</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Get viewport size from primary window
</span><span style=color:#fa6e32>let</span><span> logical_viewport_size </span><span style=color:#ed9366>=</span><span> primary_window
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(|</span><span style=color:#ff8f40>window</span><span>| window</span><span style=color:#ed9366>.</span><span>resolution</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>())
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap_or</span><span>(Vec2</span><span style=color:#ed9366>::</span><span>splat(</span><span style=color:#ff8f40>1000.</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Update change detection
</span><span style=color:#fa6e32>let</span><span> text_changed </span><span style=color:#ed9366>=</span><span> scale_factor </span><span style=color:#ed9366>!=</span><span> text_layout_info</span><span style=color:#ed9366>.</span><span>scale_factor
</span><span>    </span><span style=color:#ed9366>||</span><span> block</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>()
</span><span>    </span><span style=color:#ed9366>||</span><span> hinting</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>()
</span><span>    </span><span style=color:#ed9366>||</span><span> computed</span><span style=color:#ed9366>.</span><span style=color:#f07171>needs_rerender</span><span>(viewport_size_changed</span><span style=color:#61676ccc>,</span><span> rem_size</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_changed</span><span>())
</span><span>    </span><span style=color:#ed9366>|| </span><span>(</span><span style=color:#ed9366>!</span><span>reprocess_queue</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_empty</span><span>() </span><span style=color:#ed9366>&&</span><span> reprocess_queue</span><span style=color:#ed9366>.</span><span style=color:#f07171>remove</span><span>(</span><span style=color:#ed9366>&</span><span>entity))</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=examples-ui-text-font-weights-rs-14-102><code>examples/ui/text/font_weights.rs</code> (+14/-102)</h3><p><strong>What changed</strong>: Example updated to use new <code>FontSize</code> type and simplified with iterator-based spawning.<p><strong>Key code</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before: Individual text entries for each weight
</span><span style=color:#abb0b6;font-style:italic>// After: Using SpawnIter with iterator
</span><span>Children</span><span style=color:#ed9366>::</span><span>spawn(SpawnIter(
</span><span>    [</span><span style=color:#ff8f40>100</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>134</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>200</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>300</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>400</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>500</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>600</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>700</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>800</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>900</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>950</span><span>]
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>into_iter</span><span>()
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(</span><span style=color:#fa6e32>move </span><span style=color:#ed9366>|</span><span>weight</span><span style=color:#ed9366>| </span><span>(
</span><span>            Text(</span><span style=color:#f07171>format!</span><span>(</span><span style=color:#86b300>"Weight </span><span style=color:#ff8f40>{weight}</span><span style=color:#86b300>"</span><span>))</span><span style=color:#61676ccc>,
</span><span>            TextFont {
</span><span>                font</span><span style=color:#61676ccc>:</span><span> font</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>,
</span><span>                font_size</span><span style=color:#61676ccc>: </span><span>FontSize</span><span style=color:#ed9366>::</span><span>Px(</span><span style=color:#ff8f40>32.0</span><span>)</span><span style=color:#61676ccc>,
</span><span>                weight</span><span style=color:#61676ccc>:</span><span> FontWeight(weight)</span><span style=color:#61676ccc>,
</span><span>                </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>            }</span><span style=color:#61676ccc>,
</span><span>        ))
</span><span>))
</span></code></pre><h3 id=examples-ui-text-text-rs><code>examples/ui/text/text.rs</code></h3><p><strong>What changed</strong>: Modified to demonstrate responsive font sizing with <code>Vh</code> units.<p><strong>Key code</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>TextFont {
</span><span>    font</span><span style=color:#61676ccc>:</span><span> asset_server</span><span style=color:#ed9366>.</span><span style=color:#f07171>load</span><span>(</span><span style=color:#86b300>"fonts/FiraSans-Bold.ttf"</span><span>)</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>()</span><span style=color:#61676ccc>,
</span><span>    font_size</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>67.0</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>}</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>TextFont {
</span><span>    font</span><span style=color:#61676ccc>:</span><span> asset_server</span><span style=color:#ed9366>.</span><span style=color:#f07171>load</span><span>(</span><span style=color:#86b300>"fonts/FiraSans-Bold.ttf"</span><span>)</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>()</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// The size of the text will be 20% of the viewport height.
</span><span>    font_size</span><span style=color:#61676ccc>: </span><span>FontSize</span><span style=color:#ed9366>::</span><span>Vh(</span><span style=color:#ff8f40>20.0</span><span>)</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>}</span><span style=color:#61676ccc>,
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://developer.mozilla.org/en-US/docs/Web/CSS/length#viewport-percentage_lengths target=_blank>CSS Viewport Units</a> - The web standard that inspired Vw/Vh/VMin/VMax units<li><a rel="noopener nofollow noreferrer" href=https://developer.mozilla.org/en-US/docs/Learn/CSS/Building_blocks/Values_and_units#relative_length_units target=_blank>CSS Relative Units</a> - Background on rem, em, and other relative units<li><a rel="noopener nofollow noreferrer" href=https://docs.rs/cosmic-text/latest/cosmic_text/ target=_blank>Cosmic Text Documentation</a> - The text layout engine used by Bevy<li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/quick-start/ui/ target=_blank>Bevy UI System</a> - Bevy’s UI framework that uses this text system</ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_22614.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>