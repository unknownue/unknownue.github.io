<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #23095 Remove `bevy_gltf` dependency on `bevy_render`
        
    </title><meta content="#23095 Remove `bevy_gltf` dependency on `bevy_render`" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-24</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-23095-zh-cn-20260224>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Remove <code>bevy_gltf</code> dependency on <code>bevy_render</code><li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/23095<li><strong>Author</strong>: Zeophlite<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, A-Rendering, S-Ready-For-Final-Review<li><strong>Created</strong>: 2026-02-21T10:59:04Z<li><strong>Merged</strong>: 2026-02-24T02:18:02Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Remove <code>bevy_gltf</code> dependency on <code>bevy_render</code></ul><h2 id=solution>Solution</h2><ul><li>Remove <code>Face</code> re-export from <code>bevy_render</code></ul><h2 id=testing>Testing</h2><ul><li><code>cargo run --example animated_mesh</code></ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a straightforward but meaningful architectural improvement: eliminating an unnecessary dependency between the <code>bevy_gltf</code> crate and the <code>bevy_render</code> crate. The core issue was that <code>bevy_gltf</code> was importing the <code>Face</code> type from <code>bevy_render::render_resource::Face</code>, when <code>bevy_render</code> itself was re-exporting this type from the underlying graphics API crate, <code>wgpu_types</code>.<p>The problem context involves dependency management in a modular game engine. <code>bevy_gltf</code> handles loading and parsing GLTF files, which includes processing materials with properties like face culling. The <code>Face</code> enum (representing culling faces like Front, Back, or None) is needed for material configuration when loading GLTF assets. However, <code>bevy_gltf</code> doesn’t actually need the full rendering engine functionality; it just needs this specific type definition.<p>The solution approach was simple: instead of going through <code>bevy_render</code> as an intermediary, import <code>Face</code> directly from <code>wgpu_types</code>. This removes the transitive dependency chain and makes the crate dependencies more accurate. <code>wgpu_types</code> is already a direct dependency of <code>bevy_gltf</code>, so there’s no additional dependency burden.<p>Looking at the implementation details, the change required three modifications:<ol><li>Removing <code>bevy_render</code> from the Cargo.toml dependencies<li>Updating a documentation comment that referenced the old import path<li>Changing the import statement in the loader module</ol><p>The technical insight here is about proper layering in a modular architecture. When a type is re-exported through multiple layers, downstream crates should import from the most direct source that provides the required functionality. This reduces coupling and compile times, and makes the dependency graph more transparent. The <code>Face</code> type is a good example - it’s a fundamental graphics concept defined by the WebGPU API (<code>wgpu_types</code>), not something specific to Bevy’s rendering system.<p>The impact of this change is primarily architectural rather than functional. It doesn’t change runtime behavior, but it improves the codebase organization by eliminating an unnecessary dependency edge. This makes the build graph cleaner and potentially reduces compilation times by avoiding pulling in the entire <code>bevy_render</code> crate just for one type. It also makes the intent clearer - <code>bevy_gltf</code> depends on the graphics API types directly, not on the rendering engine’s higher-level abstractions.<p>From an engineering perspective, this is a good example of “dependency hygiene” - regularly reviewing and minimizing crate dependencies to maintain a clean, understandable architecture. The change is low-risk because it doesn’t alter any logic, just import paths and documentation.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    subgraph "Before PR"
</span><span>        A[bevy_gltf] --> B[bevy_render]
</span><span>        B --> C[wgpu_types]
</span><span>    end
</span><span>    
</span><span>    subgraph "After PR"
</span><span>        D[bevy_gltf] --> E[wgpu_types]
</span><span>    end
</span><span>    
</span><span>    style A fill:#f9f,stroke:#333
</span><span>    style D fill:#9f9,stroke:#333
</span><span>    style B fill:#ccf,stroke:#333
</span><span>    style C fill:#ccf,stroke:#333
</span><span>    style E fill:#ccf,stroke:#333
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=1-crates-bevy-gltf-cargo-toml>1. <code>crates/bevy_gltf/Cargo.toml</code></h3><p><strong>What changed</strong>: Removed <code>bevy_render</code> from the dependency list. <strong>Why</strong>: The crate no longer needs to depend on <code>bevy_render</code> since it imports <code>Face</code> directly from <code>wgpu_types</code>.<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># Before:
</span><span style=color:#399ee6>bevy_render </span><span>= { </span><span style=color:#399ee6>path </span><span>= </span><span style=color:#86b300>"../bevy_render"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>version </span><span>= </span><span style=color:#86b300>"0.19.0-dev" </span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span style=color:#abb0b6;font-style:italic># (line removed)
</span></code></pre><h3 id=2-crates-bevy-gltf-src-label-rs>2. <code>crates/bevy_gltf/src/label.rs</code></h3><p><strong>What changed</strong>: Updated a documentation comment to reference <code>wgpu_types::Face</code> instead of <code>bevy_render::render_resource::Face</code>. <strong>Why</strong>: The documentation should point to the actual source of the type now that the import path has changed.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>/// Used to set the [`Face`](bevy_render::render_resource::Face) of the material,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>/// Used to set the [`Face`](wgpu_types::Face) of the material,
</span></code></pre><h3 id=3-crates-bevy-gltf-src-loader-mod-rs>3. <code>crates/bevy_gltf/src/loader/mod.rs</code></h3><p><strong>What changed</strong>: Replaced the import of <code>Face</code> from <code>bevy_render::render_resource</code> with an import from <code>wgpu_types</code>. <strong>Why</strong>: This is the core change that enables removing the <code>bevy_render</code> dependency.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>use </span><span>bevy_render</span><span style=color:#ed9366>::</span><span>render_resource</span><span style=color:#ed9366>::</span><span>Face</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>use </span><span>wgpu_types</span><span style=color:#ed9366>::</span><span>Face</span><span style=color:#61676ccc>;
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/quick-start/introduction/ target=_blank>Bevy Engine Architecture</a> - Understanding Bevy’s modular crate structure<li><a rel="noopener nofollow noreferrer" href=https://docs.rs/wgpu-types/ target=_blank>wgpu-types Documentation</a> - The WebGPU types crate that provides fundamental graphics API types<li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html target=_blank>Rust Dependency Management</a> - How to specify and manage dependencies in Cargo.toml<li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/book/ch07-00-managing-growing-projects-with-packages-crates-and-modules.html target=_blank>Module System in Rust</a> - Understanding Rust’s module and crate system</ul><h1 id=full-code-diff>Full Code Diff</h1><p>diff –git a/crates/bevy_gltf/Cargo.toml b/crates/bevy_gltf/Cargo.toml index d1e3aa8605a6c..40629bf4cf393 100644 — a/crates/bevy_gltf/Cargo.toml +++ b/crates/bevy_gltf/Cargo.toml @@ -32,7 +32,6 @@ bevy_mesh = { path = “../bevy_mesh”, version = “0.19.0-dev”, features = [ “bevy_mikktspace”, ] } bevy_reflect = { path = “../bevy_reflect”, version = “0.19.0-dev” } -bevy_render = { path = “../bevy_render”, version = “0.19.0-dev” } bevy_material = { path = “../bevy_material”, version = “0.19.0-dev” } bevy_scene = { path = “../bevy_scene”, version = “0.19.0-dev” } bevy_transform = { path = “../bevy_transform”, version = “0.19.0-dev” } diff –git a/crates/bevy_gltf/src/label.rs b/crates/bevy_gltf/src/label.rs index a1e6d900c3ee9..94492e283fd45 100644 — a/crates/bevy_gltf/src/label.rs +++ b/crates/bevy_gltf/src/label.rs @@ -58,7 +58,7 @@ pub enum GltfAssetLabel { Material { /// Index of this material index: usize,<ul><li><pre style=color:#61676c;background-color:#fafafa><code><span>   /// Used to set the [`Face`](bevy_render::render_resource::Face) of the material,
</span></code></pre></ul><ul><li><pre style=color:#61676c;background-color:#fafafa><code><span>   /// Used to set the [`Face`](wgpu_types::Face) of the material,
</span><span>   /// useful if it is used with negative scale
</span><span>   is_scale_inverted: bool,
</span></code></pre> }, diff –git a/crates/bevy_gltf/src/loader/mod.rs b/crates/bevy_gltf/src/loader/mod.rs index 48395c746cba0..7225335eb6b35 100644 — a/crates/bevy_gltf/src/loader/mod.rs +++ b/crates/bevy_gltf/src/loader/mod.rs @@ -36,7 +36,6 @@ use bevy_mesh::{ }; use bevy_platform::collections::{HashMap, HashSet}; use bevy_reflect::TypePath; -use bevy_render::render_resource::Face; use bevy_scene::Scene; #[cfg(not(target_arch = “wasm32”))] use bevy_tasks::IoTaskPool; @@ -53,6 +52,7 @@ use smallvec::SmallVec; use std::{io::Error, sync::Mutex}; use thiserror::Error; use tracing::{error, info_span, warn}; +use wgpu_types::Face;</ul><p>use crate::{ convert_coordinates::ConvertCoordinates as _, vertex_attributes::convert_attribute, Gltf,</div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_23095.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>