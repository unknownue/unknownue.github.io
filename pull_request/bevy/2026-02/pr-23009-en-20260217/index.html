<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #23009 Fix comments still referring to `on_change` callbacks
        
    </title><meta content="#23009 Fix comments still referring to `on_change` callbacks" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-17</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-23009-zh-cn-20260217>中文</a></div></div><div class=pr-content><h1 id=fix-comments-still-referring-to-on-change-callbacks>Fix comments still referring to <code>on_change</code> callbacks</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Fix comments still referring to <code>on_change</code> callbacks<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/23009<li><strong>Author</strong>: goodartistscopy<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, A-UI, C-Code-Quality, S-Ready-For-Final-Review<li><strong>Created</strong>: 2026-02-17T19:40:04Z<li><strong>Merged</strong>: 2026-02-17T20:40:53Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description>Description</h2><p>PR #21247 removed <code>on_change</code> callbacks but left some mentions of them in comments. This removes them.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a straightforward but important code quality issue in the Bevy UI widgets system. The problem originated from PR #21247, which removed the old <code>on_change</code> callback system but left behind documentation comments that still referenced the removed functionality. These outdated comments created confusion for developers trying to understand how the UI widgets currently work.<p>The issue was identified in two key UI components: radio buttons and sliders. In both cases, comments in the source code were still describing behavior that no longer existed in the codebase. The <code>on_change</code> callback system had been replaced with a more modern event-driven approach using <code>ValueChange</code> events, but the documentation hadn’t been updated to reflect this architectural change.<p>Looking at the <code>slider.rs</code> file, we can see the core of the problem. A large block of comments (lines 51-58) was still explaining how the <code>on_change</code> property worked, describing concepts like “internal or external state management” and “one-shot system which is passed the new slider value.” This documentation was completely obsolete since the actual code no longer contained any <code>on_change</code> property or callback mechanism. The comment was essentially describing a phantom feature that didn’t exist, which could mislead developers trying to understand the slider implementation.<p>The solution was surgical and precise: simply remove the outdated comments. In <code>slider.rs</code>, the developer deleted the entire block of text that described the old <code>on_change</code> system. Additionally, they updated another comment that mentioned “using the <code>on_change</code> callback” to instead explain the current reality: the <code>SetSliderValue</code> event triggers a <code>ValueChange</code> event, and the application remains responsible for hooking up the corresponding change to <code>SliderValue</code> via the <code>slider_self_update</code> system.<p>The change in <code>radio.rs</code> was similarly focused. The comment on line 146 originally referred to triggering “the on_change event” but was updated to correctly reference “the <code>ValueChange</code> event.” This small change ensures consistency in terminology throughout the codebase.<p>From an engineering perspective, this PR demonstrates the importance of maintaining documentation hygiene during architectural migrations. When PR #21247 removed the <code>on_change</code> callback system, it represented a significant shift in how UI components communicate state changes. However, without updating the accompanying documentation, the knowledge transfer to other developers remained incomplete. This kind of documentation drift is a common technical debt that accumulates during rapid codebase evolution.<p>The implementation approach here is correct for the problem scope. Since the comments were describing functionality that no longer exists, complete removal was the appropriate action rather than attempting to rewrite them. The alternative approach would have been to update the comments to describe the new event system, but given that other documentation likely covers the <code>ValueChange</code> event system more comprehensively, removing the obsolete explanations reduces duplication and potential inconsistency.<p>The impact of these changes is primarily on developer experience and code maintainability. New developers exploring the UI widget code will no longer be misled by documentation describing a deprecated system. This reduces cognitive load and prevents potential misunderstandings that could lead to incorrect implementations when extending or modifying these components. Additionally, by cleaning up these comments, the codebase becomes slightly easier to search - developers looking for references to the current event system won’t be distracted by false positives from old documentation.<p>The technical lesson here is about the importance of comprehensive cleanup during architectural migrations. When removing a significant feature like <code>on_change</code> callbacks, it’s not enough to just delete the code; all references in documentation, comments, and examples must also be updated. This PR serves as a follow-up cleanup that completes the work started in PR #21247.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[PR #21247 removes on_change system] --> B[Comments remain referencing old system]
</span><span>    B --> C[This PR cleans up outdated comments]
</span><span>    D[Slider component] --> E[Remove on_change documentation block]
</span><span>    F[Radio component] --> G[Update on_change to ValueChange in comment]
</span><span>    C --> D
</span><span>    C --> F
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-ui-widgets-src-slider-rs-3-8><code>crates/bevy_ui_widgets/src/slider.rs</code> (+3/-8)</h3><p>This file contained the most significant outdated documentation about the removed <code>on_change</code> callback system.<p><strong>Before:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// The presence of the `on_change` property controls whether the slider uses internal or external
</span><span style=color:#abb0b6;font-style:italic>/// state management. If the `on_change` property is `None`, then the slider updates its own state
</span><span style=color:#abb0b6;font-style:italic>/// automatically. Otherwise, the `on_change` property contains the id of a one-shot system which is
</span><span style=color:#abb0b6;font-style:italic>/// passed the new slider value. In this case, the slider value is not modified, it is the
</span><span style=color:#abb0b6;font-style:italic>/// responsibility of the callback to trigger whatever data-binding mechanism is used to update the
</span><span style=color:#abb0b6;font-style:italic>/// slider's value.
</span></code></pre><p><strong>After:</strong> (Entire block removed)<p><strong>Before:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// An [`EntityEvent`] that can be triggered on a slider to modify its value (using the `on_change` callback).
</span></code></pre><p><strong>After:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// An [`EntityEvent`] that can be triggered on a slider to modify its value (it will actually trigger
</span><span style=color:#abb0b6;font-style:italic>/// a [`ValueChange`] event, hooking up a corresponding change to [`SliderValue`] is still the app's responsibility,
</span><span style=color:#abb0b6;font-style:italic>/// see [`slider_self_update`]).
</span></code></pre><h3 id=crates-bevy-ui-widgets-src-radio-rs-1-1><code>crates/bevy_ui_widgets/src/radio.rs</code> (+1/-1)</h3><p>This file had a single comment that needed updating to use the correct terminology.<p><strong>Before:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Trigger the on_change event for the newly checked radio button on radio group
</span></code></pre><p><strong>After:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Trigger the `ValueChange` event for the newly checked radio button on radio group
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><strong>PR #21247</strong>: The original PR that removed the <code>on_change</code> callback system, providing context for why these comments were outdated.<li><strong>Bevy UI Event System Documentation</strong>: For understanding the current <code>ValueChange</code> event system that replaced the old callback approach.<li><strong>Code Comment Hygiene Best Practices</strong>: Resources on maintaining accurate documentation during codebase evolution and architectural migrations.<li><strong>Technical Debt Management</strong>: Strategies for identifying and addressing accumulated technical debt like outdated documentation.</ol><h2 id=full-code-diff>Full Code Diff</h2><pre style=color:#61676c;background-color:#fafafa><code><span>diff --git a/crates/bevy_ui_widgets/src/radio.rs b/crates/bevy_ui_widgets/src/radio.rs
</span><span>index ec625bc0a74fa..ca6b056e74203 100644
</span><span>--- a/crates/bevy_ui_widgets/src/radio.rs
</span><span>+++ b/crates/bevy_ui_widgets/src/radio.rs
</span><span>@@ -143,7 +143,7 @@ fn radio_group_on_key_input(
</span><span>                 source: next_id,
</span><span>                 value: true,
</span><span>             });
</span><span>-            // Trigger the on_change event for the newly checked radio button on radio group
</span><span>+            // Trigger the `ValueChange` event for the newly checked radio button on radio group
</span><span>             commands.trigger(ValueChange::&LTEntity> {
</span><span>                 source: ev.focused_entity,
</span><span>                 value: next_id,
</span><span>diff --git a/crates/bevy_ui_widgets/src/slider.rs b/crates/bevy_ui_widgets/src/slider.rs
</span><span>index 453aaa12e65ed..92bd1e37ca166 100644
</span><span>--- a/crates/bevy_ui_widgets/src/slider.rs
</span><span>+++ b/crates/bevy_ui_widgets/src/slider.rs
</span><span>@@ -51,13 +51,6 @@ pub enum TrackClick {
</span><span> /// You can also control the slider remotely by triggering a [`SetSliderValue`] event on it. This
</span><span> /// can be useful in a console environment for controlling the value gamepad inputs.
</span><span> ///
</span><span>-/// The presence of the `on_change` property controls whether the slider uses internal or external
</span><span>-/// state management. If the `on_change` property is `None`, then the slider updates its own state
</span><span>-/// automatically. Otherwise, the `on_change` property contains the id of a one-shot system which is
</span><span>-/// passed the new slider value. In this case, the slider value is not modified, it is the
</span><span>-/// responsibility of the callback to trigger whatever data-binding mechanism is used to update the
</span><span>-/// slider's value.
</span><span>-///
</span><span> /// Typically a slider will contain entities representing the "track" and "thumb" elements. The core
</span><span> /// slider makes no assumptions about the hierarchical structure of these elements, but expects that
</span><span> /// the thumb will be marked with a [`SliderThumb`] component.
</span><span>@@ -502,7 +495,9 @@ pub(crate) fn slider_on_insert_step(insert: On&LTInsert, SliderStep>, mut world: D
</span><span>     }
</span><span> }
</span><span> 
</span><span>-/// An [`EntityEvent`] that can be triggered on a slider to modify its value (using the `on_change` callback).
</span><span>+/// An [`EntityEvent`] that can be triggered on a slider to modify its value (it will actually trigger
</span><span>+/// a [`ValueChange`] event, hooking up a corresponding change to [`SliderValue`] is still the app's responsibility,
</span><span>+/// see [`slider_self_update`]).
</span><span> /// This can be used to control the slider via gamepad buttons or other inputs. The value will be
</span><span> /// clamped when the event is processed.
</span><span> ///
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_23009.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>