<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22762 Adds Frustum Gizmo
        
    </title><meta content="#22762 Adds Frustum Gizmo" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-04</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-22762-zh-cn-20260204>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Adds Frustum Gizmo<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22762<li><strong>Author</strong>: kfc35<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Feature, S-Ready-For-Final-Review, A-Math, A-Gizmos, D-Straightforward<li><strong>Created</strong>: 2026-02-01T02:49:48Z<li><strong>Merged</strong>: 2026-02-04T01:14:37Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Adopts #10038 by @tim-blackbird<li>Half of #19468 (no camera gizmo, just frustum)<li>Does Part 3 of and fixes #13878</ul><h2 id=solution>Solution</h2><p>I stand on the shoulders of giants and have updated #10038 to main, with the following changes:<ul><li>The frustum gizmos are now immediate gizmos, not retained<li>The current view’s frustum is drawn around the border of the screen as a color like so (note the green border at the left, bottom, and right edges of the screen). <img alt="Screenshot 2026-01-31 at 9 18 41 PM" height=752 src=https://github.com/user-attachments/assets/7ed2b4db-1710-4be1-b6ca-00725d09944f width=1286></ul><p>Also thanks to @RCoder01 for their github gist attached to the original PR; my updates basically ended up being the same although code is more or less in its proper place now.<h2 id=testing>Testing</h2><ul><li>I ran some scene_viewer gltf files in the bevy repo (e.g. <code>cargo run --example scene_viewer --features "free_camera" -- assets/models/cubes/Cubes.glb</code>). I guess none have multiple cameras though to cycle through though as far as I could tell? But at least this shows you that toggling the frusta shows the faint border around the screen.<li>I ran the light_gizmos example <code>cargo run --example light_gizmos</code>. Only <code>SpotLight</code> has gizmos drawn (<code>PointLight</code> and <code>DirectionalLight</code> have components that wrap <code>Frustum</code> but not <code>Frustum</code> itself). It’s the yellow gizmo in the following screenshot. Since there are dedicated light gizmos, using a Frustum gizmo on a light seems unnecessary. <img alt="Screenshot 2026-01-31 at 9 36 54 PM" height=740 src=https://github.com/user-attachments/assets/6e676bb8-32d4-4d90-9225-ee3a878745a6 width=1278><li>Like the original author, I modified the <code>split_screen</code> example to see a camera frustum gizmo from one player on another player’s screen. I removed players 3 and 4, added a frustum gizmo for player 2’s camera, and moved player 1’s camera far enough so that you can see the frustum. <img alt="Screenshot 2026-01-31 at 9 09 46 PM" height=740 src=https://github.com/user-attachments/assets/fff38469-9d00-46ba-9098-fdf8418b54fa width=1274></ul><hr><h2 id=showcase>Showcase</h2><details><summary>Modified `split_screen` example code</summary> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>//! Renders four cameras to the same window to accomplish "split screen".
</span><span>
</span><span style=color:#fa6e32>use </span><span>std</span><span style=color:#ed9366>::</span><span>f32</span><span style=color:#ed9366>::</span><span>consts</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>PI</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>use </span><span>bevy</span><span style=color:#ed9366>::</span><span>{
</span><span>    camera</span><span style=color:#ed9366>::</span><span>Viewport</span><span style=color:#61676ccc>, </span><span>light</span><span style=color:#ed9366>::</span><span>CascadeShadowConfigBuilder</span><span style=color:#61676ccc>, </span><span>prelude</span><span style=color:#ed9366>::*</span><span style=color:#61676ccc>, </span><span>window</span><span style=color:#ed9366>::</span><span>WindowResized</span><span style=color:#61676ccc>,
</span><span>}</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>main</span><span>() {
</span><span>    App</span><span style=color:#ed9366>::</span><span>new()
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>add_plugins</span><span>(DefaultPlugins)
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>add_systems</span><span>(Startup</span><span style=color:#61676ccc>,</span><span> setup)
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>add_systems</span><span>(Update</span><span style=color:#61676ccc>, </span><span>(set_camera_viewports</span><span style=color:#61676ccc>,</span><span> button_system))
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>run</span><span>()</span><span style=color:#61676ccc>;
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>/// set up a simple 3D scene
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>setup</span><span>(
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>commands</span><span style=color:#61676ccc>:</span><span> Commands,
</span><span>    </span><span style=color:#ff8f40>asset_server</span><span style=color:#61676ccc>: </span><span>Res&LTAssetServer>,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>meshes</span><span style=color:#61676ccc>: </span><span>ResMut&LTAssets&LTMesh>>,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>materials</span><span style=color:#61676ccc>: </span><span>ResMut&LTAssets&LTStandardMaterial>>,
</span><span>) {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// plane
</span><span>    commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>        Mesh3d(meshes</span><span style=color:#ed9366>.</span><span style=color:#f07171>add</span><span>(Plane3d</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#ed9366>.</span><span style=color:#f07171>mesh</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>size</span><span>(</span><span style=color:#ff8f40>100.0</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>100.0</span><span>)))</span><span style=color:#61676ccc>,
</span><span>        MeshMaterial3d(materials</span><span style=color:#ed9366>.</span><span style=color:#f07171>add</span><span>(Color</span><span style=color:#ed9366>::</span><span>srgb(</span><span style=color:#ff8f40>0.3</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>0.5</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>0.3</span><span>)))</span><span style=color:#61676ccc>,
</span><span>    ))</span><span style=color:#61676ccc>;
</span><span>
</span><span>    commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>(SceneRoot(
</span><span>        asset_server</span><span style=color:#ed9366>.</span><span style=color:#f07171>load</span><span>(GltfAssetLabel</span><span style=color:#ed9366>::</span><span>Scene(</span><span style=color:#ff8f40>0</span><span>)</span><span style=color:#ed9366>.</span><span style=color:#f07171>from_asset</span><span>(</span><span style=color:#86b300>"models/animated/Fox.glb"</span><span>))</span><span style=color:#61676ccc>,
</span><span>    ))</span><span style=color:#61676ccc>;
</span><span>
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Light
</span><span>    commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>        Transform</span><span style=color:#ed9366>::</span><span>from_rotation(Quat</span><span style=color:#ed9366>::</span><span>from_euler(EulerRot</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>ZYX</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>0.0</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>1.0</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>-</span><span style=color:#ff8f40>PI </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>4.</span><span>))</span><span style=color:#61676ccc>,
</span><span>        DirectionalLight {
</span><span>            shadow_maps_enabled</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>true</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>        }</span><span style=color:#61676ccc>,
</span><span>        CascadeShadowConfigBuilder {
</span><span>            num_cascades</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>if </span><span style=color:#f07171>cfg!</span><span>(</span><span style=color:#f07171>all</span><span>(
</span><span>                feature </span><span style=color:#ed9366>= </span><span style=color:#86b300>"webgl2"</span><span style=color:#61676ccc>,
</span><span>                target_arch </span><span style=color:#ed9366>= </span><span style=color:#86b300>"wasm32"</span><span style=color:#61676ccc>,
</span><span>                </span><span style=color:#f07171>not</span><span>(feature </span><span style=color:#ed9366>= </span><span style=color:#86b300>"webgpu"</span><span>)
</span><span>            )) {
</span><span>                </span><span style=color:#abb0b6;font-style:italic>// Limited to 1 cascade in WebGL
</span><span>                </span><span style=color:#ff8f40>1
</span><span>            } </span><span style=color:#fa6e32>else </span><span>{
</span><span>                </span><span style=color:#ff8f40>2
</span><span>            }</span><span style=color:#61676ccc>,
</span><span>            first_cascade_far_bound</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>200.0</span><span style=color:#61676ccc>,
</span><span>            maximum_distance</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>280.0</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>        }
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>build</span><span>()</span><span style=color:#61676ccc>,
</span><span>    ))</span><span style=color:#61676ccc>;
</span><span>
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Cameras and their dedicated UI
</span><span>    </span><span style=color:#fa6e32>for </span><span>(index</span><span style=color:#61676ccc>, </span><span>(camera_name</span><span style=color:#61676ccc>,</span><span> camera_pos)) </span><span style=color:#ed9366>in </span><span>[
</span><span>        (</span><span style=color:#86b300>"Player 1"</span><span style=color:#61676ccc>, </span><span>Vec3</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#ff8f40>300.0</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>300.0</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>-</span><span style=color:#ff8f40>150.0</span><span>))</span><span style=color:#61676ccc>,
</span><span>        (</span><span style=color:#86b300>"Player 2"</span><span style=color:#61676ccc>, </span><span>Vec3</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#ff8f40>150.0</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>150.</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>50.0</span><span>))</span><span style=color:#61676ccc>,
</span><span>    ]
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>iter</span><span>()
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>enumerate</span><span>()
</span><span>    {
</span><span>        </span><span style=color:#fa6e32>let</span><span> camera </span><span style=color:#ed9366>=</span><span> commands
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>                Camera3d</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>,
</span><span>                Transform</span><span style=color:#ed9366>::</span><span>from_translation(</span><span style=color:#ed9366>*</span><span>camera_pos)</span><span style=color:#ed9366>.</span><span style=color:#f07171>looking_at</span><span>(Vec3</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>ZERO</span><span style=color:#61676ccc>, </span><span>Vec3</span><span style=color:#ed9366>::</span><span>Y)</span><span style=color:#61676ccc>,
</span><span>                Camera {
</span><span>                    </span><span style=color:#abb0b6;font-style:italic>// Renders cameras with different priorities to prevent ambiguities
</span><span>                    order</span><span style=color:#61676ccc>:</span><span> index </span><span style=color:#ed9366>as </span><span style=color:#fa6e32>isize</span><span style=color:#61676ccc>,
</span><span>                    </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>                }</span><span style=color:#61676ccc>,
</span><span>                CameraPosition {
</span><span>                    pos</span><span style=color:#61676ccc>:</span><span> index </span><span style=color:#ed9366>as </span><span style=color:#fa6e32>u32 </span><span style=color:#ed9366>% </span><span style=color:#ff8f40>2</span><span style=color:#61676ccc>,
</span><span>                }</span><span style=color:#61676ccc>,
</span><span>                ShowFrustumGizmo {
</span><span>                    color</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>if</span><span> index </span><span style=color:#ed9366>== </span><span style=color:#ff8f40>0 </span><span>{ </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(Color</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>NONE</span><span>) } </span><span style=color:#fa6e32>else </span><span>{ </span><span style=color:#55b4d4;font-style:italic>None </span><span>}</span><span style=color:#61676ccc>,
</span><span>                }</span><span style=color:#61676ccc>,
</span><span>            ))
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// Set up UI
</span><span>        </span><span style=color:#fa6e32>if</span><span> index </span><span style=color:#ed9366>== </span><span style=color:#ff8f40>0 </span><span>{
</span><span>        commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>            UiTargetCamera(camera)</span><span style=color:#61676ccc>,
</span><span>            Node {
</span><span>                width</span><span style=color:#61676ccc>: </span><span style=color:#f07171>percent</span><span>(</span><span style=color:#ff8f40>100</span><span>)</span><span style=color:#61676ccc>,
</span><span>                height</span><span style=color:#61676ccc>: </span><span style=color:#f07171>percent</span><span>(</span><span style=color:#ff8f40>100</span><span>)</span><span style=color:#61676ccc>,
</span><span>                </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>            }</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#f07171>children!</span><span>[
</span><span>                (
</span><span>                    Text</span><span style=color:#ed9366>::</span><span>new(</span><span style=color:#ed9366>*</span><span>camera_name)</span><span style=color:#61676ccc>,
</span><span>                    Node {
</span><span>                        position_type</span><span style=color:#61676ccc>: </span><span>PositionType</span><span style=color:#ed9366>::</span><span>Absolute</span><span style=color:#61676ccc>,
</span><span>                        top</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>12</span><span>)</span><span style=color:#61676ccc>,
</span><span>                        left</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>12</span><span>)</span><span style=color:#61676ccc>,
</span><span>                        </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>                    }</span><span style=color:#61676ccc>,
</span><span>                )</span><span style=color:#61676ccc>,
</span><span>                </span><span style=color:#f07171>buttons_panel</span><span>()</span><span style=color:#61676ccc>,
</span><span>            ]</span><span style=color:#61676ccc>,
</span><span>        ))</span><span style=color:#61676ccc>;
</span><span>        }
</span><span>    }
</span><span>
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>buttons_panel</span><span>() </span><span style=color:#61676ccc>-></span><span> impl Bundle {
</span><span>        (
</span><span>            Node {
</span><span>                position_type</span><span style=color:#61676ccc>: </span><span>PositionType</span><span style=color:#ed9366>::</span><span>Absolute</span><span style=color:#61676ccc>,
</span><span>                width</span><span style=color:#61676ccc>: </span><span style=color:#f07171>percent</span><span>(</span><span style=color:#ff8f40>100</span><span>)</span><span style=color:#61676ccc>,
</span><span>                height</span><span style=color:#61676ccc>: </span><span style=color:#f07171>percent</span><span>(</span><span style=color:#ff8f40>100</span><span>)</span><span style=color:#61676ccc>,
</span><span>                display</span><span style=color:#61676ccc>: </span><span>Display</span><span style=color:#ed9366>::</span><span>Flex</span><span style=color:#61676ccc>,
</span><span>                flex_direction</span><span style=color:#61676ccc>: </span><span>FlexDirection</span><span style=color:#ed9366>::</span><span>Row</span><span style=color:#61676ccc>,
</span><span>                justify_content</span><span style=color:#61676ccc>: </span><span>JustifyContent</span><span style=color:#ed9366>::</span><span>SpaceBetween</span><span style=color:#61676ccc>,
</span><span>                align_items</span><span style=color:#61676ccc>: </span><span>AlignItems</span><span style=color:#ed9366>::</span><span>Center</span><span style=color:#61676ccc>,
</span><span>                padding</span><span style=color:#61676ccc>: </span><span>UiRect</span><span style=color:#ed9366>::</span><span>all(</span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>20</span><span>))</span><span style=color:#61676ccc>,
</span><span>                </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>            }</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#f07171>children!</span><span>[
</span><span>                </span><span style=color:#f07171>rotate_button</span><span>(</span><span style=color:#86b300>"<"</span><span style=color:#61676ccc>, </span><span>Direction</span><span style=color:#ed9366>::</span><span>Left)</span><span style=color:#61676ccc>,
</span><span>                </span><span style=color:#f07171>rotate_button</span><span>(</span><span style=color:#86b300>">"</span><span style=color:#61676ccc>, </span><span>Direction</span><span style=color:#ed9366>::</span><span>Right)</span><span style=color:#61676ccc>,
</span><span>            ]</span><span style=color:#61676ccc>,
</span><span>        )
</span><span>    }
</span><span>
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>rotate_button</span><span>(</span><span style=color:#ff8f40>caption</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>, </span><span style=color:#ff8f40>direction</span><span style=color:#61676ccc>:</span><span> Direction) </span><span style=color:#61676ccc>-></span><span> impl Bundle {
</span><span>        (
</span><span>            RotateCamera(direction)</span><span style=color:#61676ccc>,
</span><span>            Button</span><span style=color:#61676ccc>,
</span><span>            Node {
</span><span>                width</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>40</span><span>)</span><span style=color:#61676ccc>,
</span><span>                height</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>40</span><span>)</span><span style=color:#61676ccc>,
</span><span>                border</span><span style=color:#61676ccc>: </span><span>UiRect</span><span style=color:#ed9366>::</span><span>all(</span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>2</span><span>))</span><span style=color:#61676ccc>,
</span><span>                justify_content</span><span style=color:#61676ccc>: </span><span>JustifyContent</span><span style=color:#ed9366>::</span><span>Center</span><span style=color:#61676ccc>,
</span><span>                align_items</span><span style=color:#61676ccc>: </span><span>AlignItems</span><span style=color:#ed9366>::</span><span>Center</span><span style=color:#61676ccc>,
</span><span>                </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>            }</span><span style=color:#61676ccc>,
</span><span>            BorderColor</span><span style=color:#ed9366>::</span><span>all(Color</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>WHITE</span><span>)</span><span style=color:#61676ccc>,
</span><span>            BackgroundColor(Color</span><span style=color:#ed9366>::</span><span>srgb(</span><span style=color:#ff8f40>0.25</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>0.25</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>0.25</span><span>))</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#f07171>children!</span><span>[Text</span><span style=color:#ed9366>::</span><span>new(caption)]</span><span style=color:#61676ccc>,
</span><span>        )
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Component)]
</span><span style=color:#fa6e32>struct </span><span style=color:#399ee6>CameraPosition </span><span>{
</span><span>    pos</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>u32</span><span>,
</span><span>}
</span><span>
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Component)]
</span><span style=color:#fa6e32>struct </span><span style=color:#399ee6>RotateCamera</span><span>(Direction)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>enum </span><span style=color:#399ee6>Direction </span><span>{
</span><span>    Left</span><span style=color:#61676ccc>,
</span><span>    Right</span><span style=color:#61676ccc>,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>set_camera_viewports</span><span>(
</span><span>    </span><span style=color:#ff8f40>windows</span><span style=color:#61676ccc>: </span><span>Query<</span><span style=color:#ed9366>&</span><span>Window>,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>window_resized_reader</span><span style=color:#61676ccc>: </span><span>MessageReader&LTWindowResized>,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>query</span><span style=color:#61676ccc>: </span><span>Query<(</span><span style=color:#ed9366>&</span><span>CameraPosition, </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> Camera)>,
</span><span>) {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// We need to dynamically resize the camera's viewports whenever the window size changes
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// so then each camera always takes up half the screen.
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// A resize_event is sent when the window is first created, allowing us to reuse this system for initial setup.
</span><span>    </span><span style=color:#fa6e32>for</span><span> window_resized </span><span style=color:#ed9366>in</span><span> window_resized_reader</span><span style=color:#ed9366>.</span><span style=color:#f07171>read</span><span>() {
</span><span>        </span><span style=color:#fa6e32>let</span><span> window </span><span style=color:#ed9366>=</span><span> windows</span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(window_resized</span><span style=color:#ed9366>.</span><span>window)</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap</span><span>()</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#fa6e32>let</span><span> size </span><span style=color:#ed9366>=</span><span> window</span><span style=color:#ed9366>.</span><span style=color:#f07171>physical_size</span><span>()</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#fa6e32>for </span><span>(camera_position</span><span style=color:#61676ccc>, </span><span style=color:#fa6e32>mut</span><span> camera) </span><span style=color:#ed9366>in &</span><span style=color:#fa6e32>mut</span><span> query {
</span><span>            camera</span><span style=color:#ed9366>.</span><span>viewport </span><span style=color:#ed9366>= </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(Viewport {
</span><span>                physical_position</span><span style=color:#61676ccc>:</span><span> camera_position</span><span style=color:#ed9366>.</span><span>pos </span><span style=color:#ed9366>*</span><span> size</span><span style=color:#61676ccc>,
</span><span>                physical_size</span><span style=color:#61676ccc>:</span><span> size</span><span style=color:#61676ccc>,
</span><span>                </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>()
</span><span>            })</span><span style=color:#61676ccc>;
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>button_system</span><span>(
</span><span>    </span><span style=color:#ff8f40>interaction_query</span><span style=color:#61676ccc>: </span><span>Query<
</span><span>        (</span><span style=color:#ed9366>&</span><span>Interaction, </span><span style=color:#ed9366>&</span><span>ComputedUiTargetCamera, </span><span style=color:#ed9366>&</span><span>RotateCamera),
</span><span>        (Changed&LTInteraction>, With&LTButton>),
</span><span>    >,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>camera_query</span><span style=color:#61676ccc>: </span><span>Query<</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> Transform, With&LTCamera>>,
</span><span>) {
</span><span>    </span><span style=color:#fa6e32>for </span><span>(interaction</span><span style=color:#61676ccc>,</span><span> computed_target</span><span style=color:#61676ccc>,</span><span> RotateCamera(direction)) </span><span style=color:#ed9366>in &</span><span>interaction_query {
</span><span>        </span><span style=color:#fa6e32>if let </span><span>Interaction</span><span style=color:#ed9366>::</span><span>Pressed </span><span style=color:#ed9366>= *</span><span>interaction {
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// Since TargetCamera propagates to the children, we can use it to find
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// which side of the screen the button is on.
</span><span>            </span><span style=color:#fa6e32>if let </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(</span><span style=color:#fa6e32>mut</span><span> camera_transform) </span><span style=color:#ed9366>=</span><span> computed_target
</span><span>                </span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>()
</span><span>                </span><span style=color:#ed9366>.</span><span style=color:#f07171>and_then</span><span>(|</span><span style=color:#ff8f40>camera</span><span>| camera_query</span><span style=color:#ed9366>.</span><span style=color:#f07171>get_mut</span><span>(camera)</span><span style=color:#ed9366>.</span><span style=color:#f07171>ok</span><span>())
</span><span>            {
</span><span>                </span><span style=color:#fa6e32>let</span><span> angle </span><span style=color:#ed9366>= </span><span style=color:#fa6e32>match</span><span> direction {
</span><span>                    Direction</span><span style=color:#ed9366>::</span><span>Left </span><span style=color:#ed9366>=> -</span><span style=color:#ff8f40>0.1</span><span style=color:#61676ccc>,
</span><span>                    Direction</span><span style=color:#ed9366>::</span><span>Right </span><span style=color:#ed9366>=> </span><span style=color:#ff8f40>0.1</span><span style=color:#61676ccc>,
</span><span>                }</span><span style=color:#61676ccc>;
</span><span>                camera_transform</span><span style=color:#ed9366>.</span><span style=color:#f07171>rotate_around</span><span>(Vec3</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>ZERO</span><span style=color:#61676ccc>, </span><span>Quat</span><span style=color:#ed9366>::</span><span>from_axis_angle(Vec3</span><span style=color:#ed9366>::</span><span>Y</span><span style=color:#61676ccc>,</span><span> angle))</span><span style=color:#61676ccc>;
</span><span>            }
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span></code></pre></details><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a long-standing need for visualizing camera frustums in the Bevy engine. Before this change, developers working with cameras and frustum culling had to rely on mental models or external tools to understand the spatial relationships between cameras and visible geometry. The implementation builds upon previous work from community contributors, specifically PR #10038, while updating the approach to use immediate-mode gizmos instead of retained gizmos for better performance and consistency with Bevy’s existing gizmo system.<p>The core problem was straightforward: cameras and lights in Bevy have Frustum components that define their field of view, but there was no built-in way to visualize these geometric shapes for debugging purposes. This made it difficult to debug camera positioning, understand why certain objects weren’t rendering, or visualize spatial relationships in multi-camera setups like split-screen games.<p>The solution follows a consistent pattern already established in Bevy for other debug visualizations like AABBs (Axis-Aligned Bounding Boxes). The implementation adds a new <code>FrustumGizmoPlugin</code> that provides two ways to enable frustum visualization: either by adding a <code>ShowFrustumGizmo</code> component to individual camera entities, or by globally enabling frustum drawing through configuration. This dual approach gives developers flexibility - they can debug specific cameras while avoiding visual clutter from all cameras in complex scenes.<p>A key technical challenge was computing the 8 corners of a frustum from its mathematical representation. Frustums in Bevy are defined by 6 half-spaces (planes), and calculating the intersection points where three planes meet gives us the corners. The implementation needed to handle edge cases like infinite far planes (used in directional lights) and degenerate frustums. The solution involved adding two new mathematical primitives:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// In bevy_math/src/primitives/half_space.rs
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>intersection_point</span><span>(</span><span style=color:#ff8f40>a</span><span style=color:#61676ccc>:</span><span> HalfSpace, </span><span style=color:#ff8f40>b</span><span style=color:#61676ccc>:</span><span> HalfSpace, </span><span style=color:#ff8f40>c</span><span style=color:#61676ccc>:</span><span> HalfSpace) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTVec3>
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// In bevy_math/src/primitives/view_frustum.rs  
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>corners</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span><[Vec3</span><span style=color:#61676ccc>; </span><span style=color:#ff8f40>8</span><span>]>
</span></code></pre><p>The <code>intersection_point</code> function computes where three planes meet using linear algebra. For planes defined by equations <code>n·x + d = 0</code>, we can solve for the intersection point using determinants. The implementation handles cases where planes are parallel or coincident by returning <code>None</code> when the determinant is near zero.<p>The frustum visualization system integrates cleanly with Bevy’s existing architecture. It runs in the <code>PostUpdate</code> schedule, specifically after <code>VisibilitySystems::UpdateFrusta</code> to ensure frustums are up-to-date before drawing them. For spotlights (which also have frustums), the system ordering was adjusted so that light frustum updates happen before gizmo drawing when the <code>bevy_gizmos</code> feature is enabled.<p>Performance considerations were addressed by making the frustum corners computation lazy - corners are only computed when actually drawing the gizmo. The immediate-mode gizmo API ensures that frustum lines are only generated and submitted to the GPU when actually needed, avoiding overhead when frustum visualization is disabled.<p>The implementation also includes comprehensive testing for the mathematical functions, with test cases covering normal frustums, degenerate cases, and frustums with infinite far planes. These tests ensure that the corner computation handles edge cases correctly and returns appropriate values (including NaN for corners that don’t exist, like with infinite far planes).<p>For developers, this feature significantly improves the debugging experience. The scene viewer example was updated to include a toggle (F key) for visualizing camera frustums, making it immediately useful. In multi-camera setups like split-screen games, developers can now see exactly what each camera can see, which is particularly valuable for debugging viewport configuration and frustum culling issues.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[FrustumGizmoPlugin] --> B[FrustumGizmoSystems]
</span><span>    B --> C[draw_frustum_gizmos]
</span><span>    B --> D[draw_all_frustum_gizmos]
</span><span>    
</span><span>    E[ShowFrustumGizmo component] --> C
</span><span>    F[FrustumGizmoConfigGroup] --> D
</span><span>    
</span><span>    G[ViewFrustum::corners()] --> H[HalfSpace::intersection_point()]
</span><span>    H --> I[Compute 8 corners]
</span><span>    I --> C
</span><span>    I --> D
</span><span>    
</span><span>    C --> J[Gizmos::linestrip/line]
</span><span>    D --> J
</span><span>    J --> K[Rendered frustum wireframe]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=1-crates-bevy-gizmos-src-frustum-rs-149-0>1. <code>crates/bevy_gizmos/src/frustum.rs</code> (+149/-0)</h3><p>This new file contains the core frustum visualization system. It defines:<ul><li><code>FrustumGizmoPlugin</code> - registers the frustum gizmo systems<li><code>FrustumGizmoConfigGroup</code> - configuration for controlling frustum visualization<li><code>ShowFrustumGizmo</code> component - marker component for entities whose frustums should be drawn<li>Drawing systems that query entities with <code>Frustum</code> components and draw them as gizmos</ul><p>Key code snippet:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// The drawing system for entities with ShowFrustumGizmo component
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>draw_frustum_gizmos</span><span>(
</span><span>    </span><span style=color:#ff8f40>query</span><span style=color:#61676ccc>: </span><span>Query<(Entity, </span><span style=color:#ed9366>&</span><span>Frustum, </span><span style=color:#ed9366>&</span><span>ShowFrustumGizmo)>,
</span><span>    </span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>gizmos</span><span style=color:#61676ccc>: </span><span>Gizmos&LTFrustumGizmoConfigGroup>,
</span><span>) {
</span><span>    </span><span style=color:#fa6e32>for </span><span>(entity</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>&</span><span>frustum</span><span style=color:#61676ccc>,</span><span> gizmo) </span><span style=color:#ed9366>in &</span><span>query {
</span><span>        </span><span style=color:#fa6e32>let</span><span> color </span><span style=color:#ed9366>=</span><span> gizmo
</span><span>            </span><span style=color:#ed9366>.</span><span>color
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>or</span><span>(gizmos</span><span style=color:#ed9366>.</span><span>config_ext</span><span style=color:#ed9366>.</span><span>default_color)
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap_or_else</span><span>(|| </span><span style=color:#f07171>color_from_entity</span><span>(entity))</span><span style=color:#61676ccc>;
</span><span>
</span><span>        </span><span style=color:#f07171>frustum_inner</span><span>(</span><span style=color:#ed9366>&</span><span>frustum</span><span style=color:#61676ccc>,</span><span> color</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> gizmos)</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>}
</span></code></pre><h3 id=2-crates-bevy-math-src-primitives-view-frustum-rs-165-0>2. <code>crates/bevy_math/src/primitives/view_frustum.rs</code> (+165/-0)</h3><p>Adds the <code>corners()</code> method to <code>ViewFrustum</code> that computes the 8 corners from the 6 half-spaces. This is the mathematical foundation for the visualization.<p>Key code snippet:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>corners</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span><[Vec3</span><span style=color:#61676ccc>; </span><span style=color:#ff8f40>8</span><span>]> {
</span><span>    </span><span style=color:#fa6e32>let </span><span>[left</span><span style=color:#61676ccc>,</span><span> right</span><span style=color:#61676ccc>,</span><span> top</span><span style=color:#61676ccc>,</span><span> bottom</span><span style=color:#61676ccc>,</span><span> near</span><span style=color:#61676ccc>,</span><span> far] </span><span style=color:#ed9366>= </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>half_spaces</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#55b4d4;font-style:italic>Some</span><span>([
</span><span>        HalfSpace</span><span style=color:#ed9366>::</span><span>intersection_point(top</span><span style=color:#61676ccc>,</span><span> left</span><span style=color:#61676ccc>,</span><span> near)</span><span style=color:#ed9366>?</span><span style=color:#61676ccc>,
</span><span>        HalfSpace</span><span style=color:#ed9366>::</span><span>intersection_point(top</span><span style=color:#61676ccc>,</span><span> right</span><span style=color:#61676ccc>,</span><span> near)</span><span style=color:#ed9366>?</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ... 6 more corners computed similarly
</span><span>    ])
</span><span>}
</span></code></pre><h3 id=3-crates-bevy-math-src-primitives-half-space-rs-76-1>3. <code>crates/bevy_math/src/primitives/half_space.rs</code> (+76/-1)</h3><p>Adds the <code>intersection_point()</code> method that computes where three planes intersect using linear algebra.<p>Key code snippet:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>intersection_point</span><span>(</span><span style=color:#ff8f40>a</span><span style=color:#61676ccc>:</span><span> HalfSpace, </span><span style=color:#ff8f40>b</span><span style=color:#61676ccc>:</span><span> HalfSpace, </span><span style=color:#ff8f40>c</span><span style=color:#61676ccc>:</span><span> HalfSpace) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTVec3> {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Set up matrices and solve using determinants
</span><span>    </span><span style=color:#fa6e32>let</span><span> denom </span><span style=color:#ed9366>=</span><span> x</span><span style=color:#ed9366>.</span><span style=color:#f07171>dot</span><span>(u)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>if </span><span>ops</span><span style=color:#ed9366>::</span><span>abs(denom) </span><span style=color:#ed9366>< </span><span style=color:#fa6e32>f32</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>EPSILON </span><span>{
</span><span>        </span><span style=color:#fa6e32>return </span><span style=color:#55b4d4;font-style:italic>None</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>    </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(Vec3</span><span style=color:#ed9366>::</span><span>new(d</span><span style=color:#ed9366>.</span><span style=color:#f07171>dot</span><span>(u)</span><span style=color:#61676ccc>,</span><span> z</span><span style=color:#ed9366>.</span><span style=color:#f07171>dot</span><span>(v)</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>-</span><span>y</span><span style=color:#ed9366>.</span><span style=color:#f07171>dot</span><span>(v)) </span><span style=color:#ed9366>/</span><span> denom)
</span><span>}
</span></code></pre><h3 id=4-crates-bevy-gizmos-src-lib-rs-14-1>4. <code>crates/bevy_gizmos/src/lib.rs</code> (+14/-1)</h3><p>Integrates the new frustum module into the gizmo system and moves the <code>color_from_entity</code> function to be shared between AABB and frustum gizmos.<p>Key changes:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Added to prelude
</span><span style=color:#fa6e32>pub use crate</span><span style=color:#ed9366>::</span><span>frustum</span><span style=color:#ed9366>::</span><span>{FrustumGizmoConfigGroup</span><span style=color:#61676ccc>,</span><span> ShowFrustumGizmo}</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Added to plugins
</span><span>app</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_plugins</span><span>((
</span><span>    aabb</span><span style=color:#ed9366>::</span><span>AabbGizmoPlugin</span><span style=color:#61676ccc>,
</span><span>    frustum</span><span style=color:#ed9366>::</span><span>FrustumGizmoPlugin</span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// New
</span><span>    global</span><span style=color:#ed9366>::</span><span>GlobalGizmosPlugin</span><span style=color:#61676ccc>,
</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Shared color generation function
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>color_from_entity</span><span>(</span><span style=color:#ff8f40>entity</span><span style=color:#61676ccc>:</span><span> Entity) </span><span style=color:#61676ccc>-></span><span> Color {
</span><span>    Oklcha</span><span style=color:#ed9366>::</span><span>sequential_dispersed(entity</span><span style=color:#ed9366>.</span><span style=color:#f07171>index_u32</span><span>())</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>()
</span><span>}
</span></code></pre><h3 id=5-crates-bevy-light-src-lib-rs-9-0>5. <code>crates/bevy_light/src/lib.rs</code> (+9/-0)</h3><p>Updates the light system ordering to ensure spot light frustums are updated before being drawn by the gizmo system.<p>Key change:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// When bevy_gizmos feature is enabled, run before FrustumGizmoSystems
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>cfg</span><span>(feature </span><span style=color:#ed9366>= </span><span style=color:#86b300>"bevy_gizmos"</span><span>)]
</span><span>update_spot_light_frusta
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>in_set</span><span>(SimulationLightSystems</span><span style=color:#ed9366>::</span><span>UpdateLightFrusta)
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>before</span><span>(FrustumGizmoSystems)
</span></code></pre><h3 id=6-examples-tools-scene-viewer-scene-viewer-plugin-rs>6. <code>examples/tools/scene_viewer/scene_viewer_plugin.rs</code></h3><p>Adds a toggle for frustum visualization in the scene viewer example (F key).<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>fn </span><span style=color:#f29718>toggle_camera_frusta</span><span>(</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>config</span><span style=color:#61676ccc>: </span><span>ResMut&LTGizmoConfigStore>) {
</span><span>    config</span><span style=color:#ed9366>.</span><span>config_mut</span><span style=color:#ed9366>::</span><span>&LTFrustumGizmoConfigGroup>()</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>1.</span><span>draw_all </span><span style=color:#ed9366>^= </span><span style=color:#ff8f40>true</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><strong>Frustum Culling</strong>: The mathematical concept behind frustums and their use in graphics<li><strong>Half-space representation</strong>: How planes are represented in 3D graphics and computational geometry<li><strong>Immediate Mode vs Retained Mode Rendering</strong>: The design philosophy behind Bevy’s gizmo system<li><strong>Bevy’s ECS (Entity Component System)</strong>: How components and systems work together in Bevy<li><strong>Linear Algebra for Game Development</strong>: Specifically plane equations and solving linear systems</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_22762.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>