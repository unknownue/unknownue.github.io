<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #23125 TODO should not be a doc comment
        
    </title><meta content="#23125 TODO should not be a doc comment" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-24</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-23125-zh-cn-20260224>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: TODO should not be a doc comment<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/23125<li><strong>Author</strong>: micttyoid<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, D-Trivial, S-Ready-For-Final-Review<li><strong>Created</strong>: 2026-02-24T01:42:18Z<li><strong>Merged</strong>: 2026-02-24T03:28:19Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li><code>TODO</code> should not appear in docs.rs generated documentation</ul><h2 id=solution>Solution</h2><ul><li><code>///</code> -> <code>//</code></ul><h2 id=testing>Testing</h2><ul><li>Untested, pushed with faith</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a straightforward documentation hygiene issue in the Bevy game engine codebase. The problem was that a <code>TODO</code> comment was incorrectly formatted as a doc comment (using <code>///</code>), which caused it to appear in the public API documentation generated by Rustdoc and published on docs.rs.<p>The issue centers around a function called <code>get_current_videomode</code> in the winit integration module. This function has a temporary implementation that should be replaced once Winit 0.31 releases. The developer originally wrote the TODO comment as a doc comment, which is appropriate for documenting public API behavior but inappropriate for internal notes about future implementation changes.<p>When Rustdoc processes the code, it includes all doc comments (<code>///</code>) in the generated documentation. This means that the TODO comment was appearing in the public documentation at docs.rs, which creates two problems. First, it exposes internal implementation details that aren’t relevant to users of the API. Second, it creates noise in the documentation that distracts from actual API documentation. For users reading the documentation, seeing TODO comments can create confusion about the stability and completeness of the API.<p>The fix is simple but important for maintaining clean public documentation. By changing the comment from <code>///</code> to <code>//</code>, the TODO note becomes a regular code comment that Rustdoc ignores during documentation generation. This keeps internal development notes internal while still preserving the important context for developers working on the codebase.<p>The PR demonstrates good documentation hygiene practices. In Rust, doc comments serve a specific purpose: to document public API behavior for users of the library. Internal notes, implementation details, and development todos should use regular comments (<code>//</code> or <code>/* */</code>) to avoid polluting the public documentation. This distinction helps maintain clean, focused documentation that serves its intended audience without exposing internal development artifacts.<p>The change is minimal but significant for documentation quality. The developer recognized that even small issues like this affect the professionalism and clarity of the project’s public documentation. By fixing it, they ensure that users reading the Bevy documentation see only relevant API information, not internal development notes.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Code Comment] --> B{Doc Comment?};
</span><span>    B -->|Yes| C[Appears in Public Docs];
</span><span>    B -->|No| D[Internal Only];
</span><span>    C --> E[Problem: TODO in public API];
</span><span>    D --> F[Correct: TODO internal];
</span><span>    
</span><span>    G[Fix Applied] --> H[Change /// to //];
</span><span>    H --> I[TODO now internal];
</span><span>    I --> J[Clean public docs];
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><p><strong>crates/bevy_winit/src/winit_windows.rs</strong> (+2/-3)<p>This file contains the winit window system integration for Bevy. The change modifies a single TODO comment in a helper function.<p><strong>What changed and why:</strong> The <code>get_current_videomode</code> function has a TODO comment explaining that it should be replaced with <code>MonitorHandle::current_video_mode()</code> when Winit 0.31 releases. This comment was incorrectly formatted as a doc comment, causing it to appear in public documentation. The fix changes it to a regular comment to keep it internal.<p><strong>Code modification:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>/// Gets a monitor's current video-mode.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// TODO: When Winit 0.31 releases this function can be removed and replaced with
</span><span style=color:#abb0b6;font-style:italic>/// `MonitorHandle::current_video_mode()`
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>get_current_videomode</span><span>(</span><span style=color:#ff8f40>monitor</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>MonitorHandle) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTVideoModeHandle> {
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>/// Gets a monitor's current video-mode.
</span><span style=color:#abb0b6;font-style:italic>// TODO: When Winit 0.31 releases this function can be removed and replaced with
</span><span style=color:#abb0b6;font-style:italic>// `MonitorHandle::current_video_mode()`
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>get_current_videomode</span><span>(</span><span style=color:#ff8f40>monitor</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>MonitorHandle) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTVideoModeHandle> {
</span></code></pre><p>The key change is the comment prefix for the TODO line and its continuation. The function’s actual documentation (<code>/// Gets a monitor's current video-mode.</code>) correctly remains a doc comment since it describes what the function does for API users. Only the internal TODO note is changed to a regular comment.<p><strong>Relation to PR purpose:</strong> This change directly implements the PR’s objective: preventing TODO comments from appearing in public documentation by converting doc comments to regular comments for internal notes.<h2 id=further-reading>Further Reading</h2><ol><li><p><strong>Rust Documentation Comments</strong>: The Rust Book chapter on documentation explains the difference between doc comments (<code>///</code>) and regular comments, and when to use each: https://doc.rust-lang.org/book/ch14-02-publishing-to-crates-io.html#making-useful-documentation-comments</p><li><p><strong>Rustdoc Documentation</strong>: Official Rustdoc documentation explains how comments are processed and what appears in generated documentation: https://doc.rust-lang.org/rustdoc/what-is-rustdoc.html</p><li><p><strong>Bevy Documentation Guide</strong>: Bevy’s own documentation guidelines would provide project-specific conventions for comments and documentation: https://github.com/bevyengine/bevy/blob/main/docs/DEVELOPMENT.md</p><li><p><strong>Semantic Versioning and Documentation</strong>: How documentation quality affects library usability and version stability: https://semver.org/</p></ol><h1 id=full-code-diff>Full Code Diff</h1><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_winit/src/winit_windows.rs b/crates/bevy_winit/src/winit_windows.rs
</span><span>index 3afc49bac85cb..9e3b6f345ce54 100644
</span><span style=color:#c594c5>--- a/crates/bevy_winit/src/winit_windows.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_winit/src/winit_windows.rs
</span><span style=color:#c594c5>@@ -385,9 +385,8 @@ </span><span style=color:#399ee6>pub fn get_selected_videomode(
</span><span> }
</span><span> 
</span><span> /// Gets a monitor's current video-mode.
</span><span style=color:#f07171>-///
</span><span style=color:#f07171>-/// TODO: When Winit 0.31 releases this function can be removed and replaced with
</span><span style=color:#f07171>-/// `MonitorHandle::current_video_mode()`
</span><span style=color:#86b300>+// TODO: When Winit 0.31 releases this function can be removed and replaced with
</span><span style=color:#86b300>+// `MonitorHandle::current_video_mode()`
</span><span> fn get_current_videomode(monitor: &MonitorHandle) -> Option&LTVideoModeHandle> {
</span><span>     monitor
</span><span>         .video_modes()
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_23125.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>