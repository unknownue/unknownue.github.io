<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22569 Invert `bevy_gltf` dependency with `bevy_pbr`
        
    </title><meta content="#22569 Invert `bevy_gltf` dependency with `bevy_pbr`" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-06</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-22569-zh-cn-20260206>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Invert <code>bevy_gltf</code> dependency with <code>bevy_pbr</code><li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22569<li><strong>Author</strong>: Zeophlite<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Rendering, S-Ready-For-Final-Review, D-Modest<li><strong>Created</strong>: 2026-01-17T16:59:59Z<li><strong>Merged</strong>: 2026-02-06T20:11:17Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li><code>bevy_gltf</code> depends on <code>bevy_pbr</code> , with a tight coupling between the scene definition and the rendering of the scene. This prevents artistic rendering of GLTFs.</ul><h2 id=solution>Solution</h2><ul><li><code>bevy_gltf</code> loads as a <code>GltfMaterial</code> , and <code>PbrPlugin</code> inserts an extension to translator to <code>StandardMaterial</code><li>Based on feedback from https://github.com/Zeophlite/bevy/pull/6</ul><h2 id=testing>Testing</h2><ul><li><code>cargo run --example animated_mesh</code></ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a fundamental architectural issue in Bevy’s rendering pipeline: the tight coupling between glTF scene loading and PBR (Physically Based Rendering). Previously, <code>bevy_gltf</code> directly depended on <code>bevy_pbr</code>, which meant that loading a glTF file would always produce entities with <code>StandardMaterial</code> components. This coupling prevented alternative rendering approaches, such as using 2D materials, custom shaders, or non-PBR 3D rendering for glTF assets.<p>The core problem was that <code>bevy_gltf</code>’s loader was hardcoded to create <code>StandardMaterial</code> assets. This design choice limited flexibility because any glTF file loaded into Bevy would be forced through the PBR rendering pipeline, regardless of the user’s needs. For example, developers wanting to render glTF models in 2D or with stylized materials had to work around this limitation.<p>The solution introduces a new abstraction layer: <code>GltfMaterial</code>. Instead of creating <code>StandardMaterial</code> assets directly, <code>bevy_gltf</code> now loads glTF material data into <code>GltfMaterial</code> assets, which serve as an intermediate representation. This decouples the scene definition (the glTF data) from the rendering implementation (PBR or otherwise).<p>The <code>PbrPlugin</code> can then register a <code>GltfExtensionHandler</code> that converts <code>GltfMaterial</code> to <code>StandardMaterial</code> at load time and attaches the necessary <code>MeshMaterial3d&LTStandardMaterial></code> components to entities. This inversion of dependency means <code>bevy_gltf</code> no longer depends on <code>bevy_pbr</code> - instead, <code>bevy_pbr</code> depends on <code>bevy_gltf</code> and extends its functionality.<p>From an implementation perspective, this required several coordinated changes:<ol><li><strong>New <code>GltfMaterial</code> asset type</strong>: A struct in <code>bevy_gltf</code> that mirrors all the material properties from glTF files<li><strong>Updated loader logic</strong>: The glTF loader now produces <code>GltfMaterial</code> assets instead of <code>StandardMaterial</code> assets<li><strong>Extension handler system</strong>: <code>bevy_pbr</code> registers an extension that converts materials and adds rendering components<li><strong>Feature flag adjustments</strong>: PBR-related feature flags are moved to <code>bevy_gltf</code> since they affect material loading<li><strong>Dependency inversion</strong>: The Cargo.toml files are updated to reflect the new dependency direction</ol><p>The <code>GltfMaterial</code> struct contains all the same fields as <code>StandardMaterial</code>, allowing for a straightforward conversion. When the PBR plugin is enabled with <code>gltf_render_enabled: true</code> (the default), it registers <code>GltfExtensionHandlerPbr</code> which performs this conversion during asset loading and adds the <code>MeshMaterial3d&LTStandardMaterial></code> component to mesh entities.<p>This architectural change has several benefits. It allows <code>bevy_gltf</code> to function without any rendering stack, enabling use cases like asset processing tools or servers that need to parse glTF files without rendering them. It also makes the codebase more modular and follows the principle of separation of concerns - scene loading is separate from scene rendering.<p>The migration path for existing users is straightforward. By default, everything works as before because <code>PbrPlugin</code> enables the conversion extension. Users who want to disable PBR rendering for glTF files can set <code>gltf_render_enabled: false</code> on the <code>PbrPlugin</code>. Extension authors need to update their <code>GltfExtensionHandler</code> implementations to account for the new <code>material_label</code> parameter and the change from <code>StandardMaterial</code> to <code>GltfMaterial</code>.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    subgraph "Before PR"
</span><span>        A[bevy_gltf] --> B[bevy_pbr]
</span><span>        B --> C[StandardMaterial]
</span><span>    end
</span><span>    
</span><span>    subgraph "After PR"
</span><span>        D[bevy_gltf] --> E[GltfMaterial]
</span><span>        F[bevy_pbr] --> D
</span><span>        F --> G[GltfExtensionHandlerPbr]
</span><span>        G --> H[StandardMaterial]
</span><span>    end
</span><span>    
</span><span>    style D fill:#e1f5e1
</span><span>    style E fill:#e1f5e1
</span><span>    style F fill:#e1f5e1
</span><span>    style G fill:#e1f5e1
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-gltf-src-material-rs-266-0><code>crates/bevy_gltf/src/material.rs</code> (+266/-0)</h3><p>This new file defines the <code>GltfMaterial</code> struct, which serves as an intermediate representation for glTF material data. It contains all the properties needed for PBR rendering but doesn’t depend on <code>bevy_pbr</code>.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_gltf/src/material.rs
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Asset</span><span style=color:#61676ccc>,</span><span> Debug</span><span style=color:#61676ccc>,</span><span> Clone</span><span style=color:#61676ccc>,</span><span> TypePath)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>GltfMaterial </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// The color of the surface of the material before lighting.
</span><span>    </span><span style=color:#fa6e32>pub </span><span>base_color</span><span style=color:#61676ccc>:</span><span> Color,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// The UV channel to use for the [`GltfMaterial::base_color_texture`].
</span><span>    </span><span style=color:#fa6e32>pub </span><span>base_color_channel</span><span style=color:#61676ccc>:</span><span> UvChannel,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// The texture component of the material's color before lighting.
</span><span>    </span><span style=color:#fa6e32>pub </span><span>base_color_texture</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTHandle&LTImage>>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... (all other PBR material properties)
</span><span>}
</span></code></pre><h3 id=crates-bevy-pbr-src-lib-rs-108-0><code>crates/bevy_pbr/src/lib.rs</code> (+108/-0)</h3><p>The PbrPlugin now registers a <code>GltfExtensionHandlerPbr</code> that converts <code>GltfMaterial</code> to <code>StandardMaterial</code> and adds the necessary rendering components to entities.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_pbr/src/lib.rs
</span><span style=color:#fa6e32>impl </span><span>Plugin </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>PbrPlugin </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>build</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>app</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> App) {
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ... other setup code
</span><span>        
</span><span>        </span><span style=color:#fa6e32>if </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>gltf_render_enabled {
</span><span>            app</span><span style=color:#ed9366>.</span><span style=color:#f07171>world_mut</span><span>()
</span><span>                </span><span style=color:#ed9366>.</span><span>resource_mut</span><span style=color:#ed9366>::</span><span>&LTGltfExtensionHandlers>()
</span><span>                </span><span style=color:#ed9366>.</span><span style=color:#ff8f40>0
</span><span>                </span><span style=color:#ed9366>.</span><span style=color:#f07171>write_blocking</span><span>()
</span><span>                </span><span style=color:#ed9366>.</span><span style=color:#f07171>push</span><span>(</span><span style=color:#55b4d4;font-style:italic>Box</span><span style=color:#ed9366>::</span><span>new(GltfExtensionHandlerPbr))</span><span style=color:#61676ccc>;
</span><span>        }
</span><span>        
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ... rest of plugin setup
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Default</span><span style=color:#61676ccc>,</span><span> Clone)]
</span><span style=color:#fa6e32>struct </span><span style=color:#399ee6>GltfExtensionHandlerPbr</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>impl </span><span>GltfExtensionHandler </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>GltfExtensionHandlerPbr </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>on_material</span><span>(
</span><span>        </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>,
</span><span>        </span><span style=color:#ff8f40>load_context</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>LoadContext<'</span><span style=color:#ed9366>_</span><span>>,
</span><span>        </span><span style=color:#ff8f40>_gltf_material</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>gltf</span><span style=color:#ed9366>::</span><span>Material,
</span><span>        </span><span style=color:#ff8f40>_material</span><span style=color:#61676ccc>: </span><span>Handle&LTGltfMaterial>,
</span><span>        </span><span style=color:#ff8f40>material_asset</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>GltfMaterial,
</span><span>        </span><span style=color:#ff8f40>material_label</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>,
</span><span>    ) {
</span><span>        </span><span style=color:#fa6e32>let</span><span> std_label </span><span style=color:#ed9366>= </span><span style=color:#f07171>format!</span><span>(</span><span style=color:#86b300>"</span><span style=color:#ff8f40>{:?}</span><span style=color:#86b300>#std"</span><span style=color:#61676ccc>,</span><span> material_label)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#fa6e32>let</span><span> _t </span><span style=color:#ed9366>=</span><span> load_context</span><span style=color:#ed9366>.</span><span>labeled_asset_scope</span><span style=color:#ed9366>::</span><span><</span><span style=color:#ed9366>_</span><span>, ()>(std_label</span><span style=color:#61676ccc>, </span><span>|</span><span style=color:#ff8f40>_load_context</span><span>| {
</span><span>            </span><span style=color:#55b4d4;font-style:italic>Ok</span><span>(</span><span style=color:#f07171>standard_material_from_gltf_material</span><span>(material_asset))
</span><span>        })</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>    
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>on_spawn_mesh_and_material</span><span>(
</span><span>        </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>,
</span><span>        </span><span style=color:#ff8f40>load_context</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>LoadContext<'</span><span style=color:#ed9366>_</span><span>>,
</span><span>        </span><span style=color:#ff8f40>_primitive</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>gltf</span><span style=color:#ed9366>::</span><span>Primitive,
</span><span>        </span><span style=color:#ff8f40>_mesh</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>gltf</span><span style=color:#ed9366>::</span><span>Mesh,
</span><span>        </span><span style=color:#ff8f40>_material</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>gltf</span><span style=color:#ed9366>::</span><span>Material,
</span><span>        </span><span style=color:#ff8f40>entity</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> EntityWorldMut,
</span><span>        </span><span style=color:#ff8f40>material_label</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>,
</span><span>    ) {
</span><span>        </span><span style=color:#fa6e32>let</span><span> std_label </span><span style=color:#ed9366>= </span><span style=color:#f07171>format!</span><span>(</span><span style=color:#86b300>"</span><span style=color:#ff8f40>{:?}</span><span style=color:#86b300>#std"</span><span style=color:#61676ccc>,</span><span> material_label)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#fa6e32>let</span><span> handle </span><span style=color:#ed9366>=</span><span> load_context</span><span style=color:#ed9366>.</span><span>get_label_handle</span><span style=color:#ed9366>::</span><span>&LTStandardMaterial>(std_label)</span><span style=color:#61676ccc>;
</span><span>        entity</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>(MeshMaterial3d(handle))</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>}
</span></code></pre><h3 id=crates-bevy-gltf-src-loader-mod-rs-35-32><code>crates/bevy_gltf/src/loader/mod.rs</code> (+35/-32)</h3><p>The loader now creates <code>GltfMaterial</code> assets instead of <code>StandardMaterial</code> assets and passes the material label to extension handlers.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_gltf/src/loader/mod.rs
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>// let (label, material) = load_material(...);
</span><span style=color:#abb0b6;font-style:italic>// load_context.add_labeled_asset(label, material);
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>let </span><span>(label</span><span style=color:#61676ccc>,</span><span> gltf_material) </span><span style=color:#ed9366>= </span><span style=color:#f07171>load_material</span><span>(</span><span style=color:#ed9366>...</span><span>)</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>let</span><span> handle </span><span style=color:#ed9366>=</span><span> load_context</span><span style=color:#ed9366>.</span><span style=color:#f07171>add_labeled_asset</span><span>(label</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>,</span><span> gltf_material</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>())</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Pass to extensions
</span><span style=color:#fa6e32>for</span><span> extension </span><span style=color:#ed9366>in</span><span> extensions</span><span style=color:#ed9366>.</span><span style=color:#f07171>iter_mut</span><span>() {
</span><span>    extension</span><span style=color:#ed9366>.</span><span style=color:#f07171>on_material</span><span>(
</span><span>        load_context</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#ed9366>&</span><span>material</span><span style=color:#61676ccc>,
</span><span>        handle</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#ed9366>&</span><span>gltf_material</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#ed9366>&</span><span>label</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>,
</span><span>    )</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><h3 id=crates-bevy-mesh-src-mesh-rs><code>crates/bevy_mesh/src/mesh.rs</code></h3><p>The <code>UvChannel</code> enum was moved from <code>bevy_pbr</code> to <code>bevy_mesh</code> since it’s now used by <code>GltfMaterial</code> in <code>bevy_gltf</code>.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_mesh/src/mesh.rs
</span><span style=color:#abb0b6;font-style:italic>/// An enum to define which UV attribute to use for a texture.
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Reflect</span><span style=color:#61676ccc>,</span><span> Default</span><span style=color:#61676ccc>,</span><span> Debug</span><span style=color:#61676ccc>,</span><span> Clone</span><span style=color:#61676ccc>,</span><span> PartialEq</span><span style=color:#61676ccc>,</span><span> Eq)]
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>reflect</span><span>(Default</span><span style=color:#61676ccc>,</span><span> Debug</span><span style=color:#61676ccc>,</span><span> Clone</span><span style=color:#61676ccc>,</span><span> PartialEq)]
</span><span style=color:#fa6e32>pub enum </span><span style=color:#399ee6>UvChannel </span><span>{
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>default</span><span>]
</span><span>    Uv0</span><span style=color:#61676ccc>,
</span><span>    Uv1</span><span style=color:#61676ccc>,
</span><span>}
</span></code></pre><h3 id=examples-gltf-gltf-extension-mesh-2d-rs-21-14><code>examples/gltf/gltf_extension_mesh_2d.rs</code> (+21/-14)</h3><p>This example demonstrates how to use the new architecture to render glTF meshes in 2D instead of with PBR. It shows how to disable PBR rendering and register a custom extension handler.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: examples/gltf/gltf_extension_mesh_2d.rs
</span><span style=color:#abb0b6;font-style:italic>// Disable PBR rendering for glTF
</span><span style=color:#ed9366>.</span><span style=color:#f07171>set</span><span>(PbrPlugin {
</span><span>    gltf_render_enabled</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>false</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#ed9366>..</span><span style=color:#55b4d4;font-style:italic>Default</span><span style=color:#ed9366>::</span><span>default()
</span><span>})
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Custom extension handler converts 3D meshes to 2D
</span><span style=color:#fa6e32>impl </span><span>GltfExtensionHandler </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>GltfExtensionHandlerToMesh2d </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>on_spawn_mesh_and_material</span><span>(
</span><span>        </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>,
</span><span>        </span><span style=color:#ff8f40>load_context</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span>LoadContext<'</span><span style=color:#ed9366>_</span><span>>,
</span><span>        </span><span style=color:#ff8f40>_primitive</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>gltf</span><span style=color:#ed9366>::</span><span>Primitive,
</span><span>        </span><span style=color:#ff8f40>_mesh</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>gltf</span><span style=color:#ed9366>::</span><span>Mesh,
</span><span>        </span><span style=color:#ff8f40>_material</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>gltf</span><span style=color:#ed9366>::</span><span>Material,
</span><span>        </span><span style=color:#ff8f40>entity</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> EntityWorldMut,
</span><span>        </span><span style=color:#ff8f40>_material_label</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>,
</span><span>    ) {
</span><span>        </span><span style=color:#fa6e32>if let </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(mesh3d) </span><span style=color:#ed9366>=</span><span> entity</span><span style=color:#ed9366>.</span><span>get</span><span style=color:#ed9366>::</span><span>&LTMesh3d>() {
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// Convert to 2D mesh with custom material
</span><span>            entity
</span><span>                </span><span style=color:#ed9366>.</span><span>remove</span><span style=color:#ed9366>::</span><span>&LTMesh3d>()
</span><span>                </span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>((Mesh2d(mesh_handle)</span><span style=color:#61676ccc>,</span><span> MeshMaterial2d(material_handle</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>())))</span><span style=color:#61676ccc>;
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre><h3 id=release-content-migration-guides-gltf-pbr-md-22-0><code>release-content/migration-guides/gltf_pbr.md</code> (+22/-0)</h3><p>This new migration guide explains the changes and how to update code.<h2 id=further-reading>Further Reading</h2><ol><li><strong>glTF Specification</strong>: https://github.com/KhronosGroup/glTF/tree/main/specification/2.0<li><strong>Bevy Asset System</strong>: https://bevyengine.org/learn/book/assets/<li><strong>Extension Systems in Bevy</strong>: https://bevyengine.org/learn/book/plugins/<li><strong>Physically Based Rendering Theory</strong>: https://pbr-book.org/<li><strong>Dependency Inversion Principle</strong>: https://en.wikipedia.org/wiki/Dependency_inversion_principle</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_22569.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>