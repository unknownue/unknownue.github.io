<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22841 make acquire_focus possible to use from outside of bevy
        
    </title><meta content="#22841 make acquire_focus possible to use from outside of bevy" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-09</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-22841-zh-cn-20260209>中文</a></div></div><div class=pr-content><h1 id=make-acquire-focus-possible-to-use-from-outside-of-bevy>make acquire_focus possible to use from outside of bevy</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: make acquire_focus possible to use from outside of bevy<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22841<li><strong>Author</strong>: ada-x64<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, A-UI, C-Usability, S-Ready-For-Final-Review<li><strong>Created</strong>: 2026-02-07T02:32:22Z<li><strong>Merged</strong>: 2026-02-09T22:40:25Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>fixes #22837<h2 id=solution>Solution</h2><p>add pub<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a simple but important API usability issue in Bevy’s input focus system. The problem centered around the <code>AcquireFocus</code> struct, which is used to programmatically set focus on UI elements. The struct had inconsistent visibility modifiers that prevented external code from constructing instances.<p>Looking at the original implementation, the <code>AcquireFocus</code> struct was defined with two fields:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>AcquireFocus </span><span>{
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>event_target</span><span>]
</span><span>    </span><span style=color:#fa6e32>pub </span><span>focused_entity</span><span style=color:#61676ccc>:</span><span> Entity,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// The primary window entity.
</span><span>    window</span><span style=color:#61676ccc>:</span><span> Entity,
</span><span>}
</span></code></pre><p>The issue was immediately apparent: while <code>focused_entity</code> was marked as <code>pub</code> (public), the <code>window</code> field remained private. This created a problem because Rust structs require all fields to be accessible when constructing an instance using struct literal syntax. When developers attempted to create an <code>AcquireFocus</code> event from outside the <code>bevy_input_focus</code> crate, they encountered a compilation error because they couldn’t specify the <code>window</code> field.<p>The solution was straightforward: add the <code>pub</code> keyword to the <code>window</code> field. This change aligns with the existing pattern in the struct where <code>focused_entity</code> was already public, and it makes sense for an event struct to be fully constructible by external code. Events in Bevy’s ECS system are meant to be created and sent by various systems, so restricting their construction would defeat their purpose.<p>The technical insight here is about API design consistency. When designing public-facing structs in Rust, especially those meant to be constructed by users, all fields should typically be public or the struct should provide a public constructor function. In this case, since <code>AcquireFocus</code> is an event type that users need to instantiate, making both fields public is the correct approach. The alternative would have been to add a <code>new()</code> method, but that would add unnecessary boilerplate for a simple data transfer object.<p>This change also highlights an important principle in API design: visibility should match the intended usage pattern. If a struct is meant to be constructed by external code, either all fields need to be public, or the struct needs to provide a constructor. The previous state where one field was public and another private created an unusable API - the struct looked constructible but wasn’t.<p>The impact of this change is that developers can now properly create and send <code>AcquireFocus</code> events from their own code. This enables programmatic focus management in UI systems, which is essential for features like keyboard navigation, accessibility tools, and game menus that need to manage focus state based on game logic.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[External Code] -->|Constructs| B[AcquireFocus Event]
</span><span>    B --> C[Event System]
</span><span>    C --> D[Focus System]
</span><span>    D -->|Sets Focus| E[UI Entity]
</span><span>    D -->|Targets Window| F[Window Entity]
</span><span>    
</span><span>    style B fill:#e1f5fe
</span><span>    style F fill:#f3e5f5
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><p><strong>File</strong>: <code>crates/bevy_input_focus/src/lib.rs</code><p><strong>Change description</strong>: Made the <code>window</code> field of the <code>AcquireFocus</code> struct public to allow external code to construct instances.<p><strong>Code diff</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_input_focus/src/lib.rs
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>AcquireFocus </span><span>{
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>event_target</span><span>]
</span><span>    </span><span style=color:#fa6e32>pub </span><span>focused_entity</span><span style=color:#61676ccc>:</span><span> Entity,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// The primary window entity.
</span><span>    window</span><span style=color:#61676ccc>:</span><span> Entity,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>AcquireFocus </span><span>{
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>event_target</span><span>]
</span><span>    </span><span style=color:#fa6e32>pub </span><span>focused_entity</span><span style=color:#61676ccc>:</span><span> Entity,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// The primary window entity.
</span><span>    </span><span style=color:#fa6e32>pub </span><span>window</span><span style=color:#61676ccc>:</span><span> Entity,
</span><span>}
</span></code></pre><p><strong>Relationship to PR purpose</strong>: This single-character change (<code>pub</code>) enables the entire purpose of the PR - allowing external code to use the <code>acquire_focus</code> functionality by making the struct fully constructible.<h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/reference/visibility-and-privacy.html target=_blank>Rust Visibility and Privacy Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/quick-start/events/ target=_blank>Bevy Events System Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://rust-lang.github.io/api-guidelines/type-safety.html#visibility-is-used-to-hide-trait-implementations-c-impl-private target=_blank>Rust Struct Field Visibility Patterns</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_ui/latest/bevy_ui/focus/index.html target=_blank>Bevy UI Focus System</a></ul><h1 id=full-code-diff>Full Code Diff</h1><pre style=color:#61676c;background-color:#fafafa><code><span>diff --git a/crates/bevy_input_focus/src/lib.rs b/crates/bevy_input_focus/src/lib.rs
</span><span>index 03d46a2a3c157..47efd05797875 100644
</span><span>--- a/crates/bevy_input_focus/src/lib.rs
</span><span>+++ b/crates/bevy_input_focus/src/lib.rs
</span><span>@@ -169,7 +169,7 @@ pub struct AcquireFocus {
</span><span>     #[event_target]
</span><span>     pub focused_entity: Entity,
</span><span>     /// The primary window entity.
</span><span>-    window: Entity,
</span><span>+    pub window: Entity,
</span><span> }
</span><span> 
</span><span> #[derive(QueryData)]
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_22841.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>