<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #22933 Condense bevy_picking (input focus) feature into bevy_ui_picking feature
        
    </title><meta content="#22933 Condense bevy_picking (input focus) feature into bevy_ui_picking feature" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2026-02/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2026-02-17</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2026-02/pr-22933-zh-cn-20260217>中文</a></div></div><div class=pr-content><h1 id=title-condense-bevy-picking-input-focus-feature-into-bevy-ui-picking-feature>Title: Condense bevy_picking (input focus) feature into bevy_ui_picking feature</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Condense bevy_picking (input focus) feature into bevy_ui_picking feature<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/22933<li><strong>Author</strong>: alice-i-cecile<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-UI, C-Usability, S-Ready-For-Final-Review, M-Migration-Guide, X-Contentious, D-Straightforward, A-Picking<li><strong>Created</strong>: 2026-02-13T01:36:56Z<li><strong>Merged</strong>: 2026-02-17T01:47:20Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>The feature flags “bevy_picking” and “picking” have the same description despite fulfilling different goals. This is very confusing!<p>Fixes #22931.<p>The status quo before this PR.<blockquote><ul><li>picking is a feature collection in bevy, which enables [“bevy_picking”, “mesh_picking”, “sprite_picking”, “ui_picking”].<li>the ui feature collection enables picking itself<li>bevy_picking is defined in bevy, which defers to [“bevy_internal/bevy_picking”]<li>in bevy_internal, this toggles bevy_picking = [“dep:bevy_picking”, “bevy_input_focus?/bevy_picking”]<li>this then toggles the bevy_picking dependency (apparently that works as if it were a feature?) in bevy_input_focus<li>which is ultimately used to enable mouse / virtual cursor based input focus selection<li>@viridia is concerned about making this mandatory because of worries about observer overhead</ul></blockquote><h2 id=solution>Solution</h2><p>Condense bevy_picking at the bevy_internal level into bevy_ui_picking. There’s no way someone wants general UI picking but not input focus picking. This fixes the redundancy, and groups functionality more reasonably, while still making it possible to avoid UI picking as a whole off if you’re concerned for whatever reason.<p>Users who want even more granularity than that can of course compose the various Bevy crates however they please.<h2 id=alternative>Alternative</h2><ol><li>Keep this feature around, renaming it to <code>input_focus_picking</code>.<li>Enable that feature inside of <code>ui_picking</code>.</ol><p>This adds another niche feature flag at the top level, but makes it easier for users who want to use <code>bevy_input_focus</code> without <code>bevy_ui</code>. I have never met such a user, but maybe they exist!<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a confusing feature flag situation in Bevy’s picking system. The core issue was that the <code>bevy_picking</code> feature flag and the <code>picking</code> feature collection had identical descriptions but served different purposes, creating confusion for developers trying to understand and use the picking functionality.<p>Before this change, the feature hierarchy was complex and redundant. The <code>picking</code> collection enabled four features: <code>bevy_picking</code>, <code>mesh_picking</code>, <code>sprite_picking</code>, and <code>ui_picking</code>. However, <code>bevy_picking</code> itself didn’t provide general picking functionality - it specifically enabled mouse/virtual cursor input focus selection through the <code>bevy_input_focus</code> crate. This distinction wasn’t clear from the feature descriptions.<p>The developer recognized that this confusion needed resolution. The <code>bevy_picking</code> feature was essentially a specialized component that only made sense in the context of UI picking - specifically for input focus selection. It didn’t make logical sense for someone to want UI picking capabilities but not input focus picking, since input focus is a fundamental aspect of UI interaction.<p>The solution implemented consolidates the <code>bevy_picking</code> functionality into the <code>bevy_ui_picking</code> feature. This approach simplifies the feature structure by eliminating the redundant top-level <code>bevy_picking</code> feature while maintaining the same functionality. The <code>ui_picking</code> feature now includes the input focus picking capability directly:<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># From crates/bevy_internal/Cargo.toml
</span><span style=color:#399ee6>ui_picking </span><span>= [
</span><span>  </span><span style=color:#86b300>"bevy_picking"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"bevy_ui?/bevy_picking"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"bevy_input_focus?/bevy_picking"</span><span style=color:#61676ccc>,
</span><span>]
</span></code></pre><p>This change required updates in multiple places. The root <code>Cargo.toml</code> no longer lists <code>bevy_picking</code> as a standalone feature or as part of the <code>picking</code> collection. Examples that previously depended on <code>bevy_picking</code> were updated to use <code>ui_picking</code> instead, since they needed UI interaction capabilities.<p>The technical implementation demonstrates an understanding of Cargo’s feature system. The <code>?</code> syntax in <code>bevy_input_focus?/bevy_picking</code> means the <code>bevy_picking</code> feature from <code>bevy_input_focus</code> is only enabled if the <code>bevy_input_focus</code> dependency itself is enabled (through the <code>?</code> conditional). This maintains flexibility while reducing complexity.<p>An alternative approach considered was renaming <code>bevy_picking</code> to <code>input_focus_picking</code> and keeping it as a separate feature. This would have made the purpose clearer but would have added another niche feature flag. The chosen approach simplifies the API surface while preserving the necessary functionality.<p>The PR also includes a migration guide that clearly explains the change and provides guidance for users who might have unusual requirements, such as wanting input focus picking without UI picking. These users can add <code>bevy_input_focus</code> as a separate dependency and enable its <code>bevy_picking</code> feature directly.<p>The changes are relatively small but address a significant usability issue. By consolidating related features and eliminating redundancy, the PR makes Bevy’s picking system more intuitive and maintainable. The fact that this was labeled as “contentious” suggests there were different perspectives on the best approach, but the final solution represents a reasonable balance between simplicity and flexibility.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[picking feature collection] --> B[mesh_picking]
</span><span>    A --> C[sprite_picking]
</span><span>    A --> D[ui_picking]
</span><span>    D --> E[bevy_picking crate]
</span><span>    D --> F[bevy_ui?/bevy_picking]
</span><span>    D --> G[bevy_input_focus?/bevy_picking]
</span><span>    
</span><span>    style A fill:#e1f5fe
</span><span>    style D fill:#f3e5f5
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=cargo-toml-3-6><code>Cargo.toml</code> (+3/-6)</h3><p>This file contains the root-level feature definitions for the Bevy crate.<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># Before:
</span><span style=color:#399ee6>picking </span><span>= [</span><span style=color:#86b300>"bevy_picking"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"mesh_picking"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"sprite_picking"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"ui_picking"</span><span>]
</span><span style=color:#abb0b6;font-style:italic># ... 
</span><span style=color:#abb0b6;font-style:italic># Provides picking functionality
</span><span style=color:#399ee6>bevy_picking </span><span>= [</span><span style=color:#86b300>"bevy_internal/bevy_picking"</span><span>]
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span style=color:#399ee6>picking </span><span>= [</span><span style=color:#86b300>"mesh_picking"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"sprite_picking"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"ui_picking"</span><span>]
</span><span style=color:#abb0b6;font-style:italic># (bevy_picking feature definition removed)
</span></code></pre><p>The <code>picking</code> feature collection no longer includes <code>bevy_picking</code>, and the standalone <code>bevy_picking</code> feature is completely removed. Two examples are updated to use <code>ui_picking</code> instead of <code>bevy_picking</code> since they need UI interaction capabilities.<h3 id=crates-bevy-internal-cargo-toml-5-4><code>crates/bevy_internal/Cargo.toml</code> (+5/-4)</h3><p>This file defines the internal feature structure.<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#abb0b6;font-style:italic># Before:
</span><span style=color:#abb0b6;font-style:italic># Provides picking functionality
</span><span style=color:#399ee6>bevy_picking </span><span>= [</span><span style=color:#86b300>"dep:bevy_picking"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"bevy_input_focus?/bevy_picking"</span><span>]
</span><span>
</span><span style=color:#abb0b6;font-style:italic># Provides a UI picking backend
</span><span style=color:#399ee6>ui_picking </span><span>= [</span><span style=color:#86b300>"bevy_picking"</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"bevy_ui?/bevy_picking"</span><span>]
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span style=color:#abb0b6;font-style:italic># (bevy_picking feature removed entirely)
</span><span>
</span><span style=color:#abb0b6;font-style:italic># Provides a UI picking backend
</span><span style=color:#399ee6>ui_picking </span><span>= [
</span><span>  </span><span style=color:#86b300>"bevy_picking"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"bevy_ui?/bevy_picking"</span><span style=color:#61676ccc>,
</span><span>  </span><span style=color:#86b300>"bevy_input_focus?/bevy_picking"</span><span style=color:#61676ccc>,
</span><span>]
</span></code></pre><p>The <code>bevy_picking</code> feature is removed, and its functionality (specifically the <code>bevy_input_focus?/bevy_picking</code> dependency) is moved into the <code>ui_picking</code> feature.<h3 id=docs-cargo-features-md-1-2><code>docs/cargo_features.md</code> (+1/-2)</h3><p>Documentation updates to reflect the changes.<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span style=color:#fa6e32;font-weight:700># </span><span style=color:#399ee6;font-weight:700>Before:
</span><span style=color:#61676ccc>|</span><span>picking</span><span style=color:#61676ccc>|</span><span>Enables picking functionality. </span><span style=color:#f07171;font-weight:700>**Feature set:** </span><span style=color:#ed9366;background-color:#61676c10>`bevy_picking`</span><span>, </span><span style=color:#ed9366;background-color:#61676c10>`mesh_picking`</span><span>, </span><span style=color:#ed9366;background-color:#61676c10>`sprite_picking`</span><span>, </span><span style=color:#ed9366;background-color:#61676c10>`ui_picking`</span><span>.</span><span style=color:#61676ccc>|
</span><span>
</span><span style=color:#fa6e32;font-weight:700># </span><span style=color:#399ee6;font-weight:700>After:
</span><span style=color:#61676ccc>|</span><span>picking</span><span style=color:#61676ccc>|</span><span>Enables picking functionality. </span><span style=color:#f07171;font-weight:700>**Feature set:** </span><span style=color:#ed9366;background-color:#61676c10>`mesh_picking`</span><span>, </span><span style=color:#ed9366;background-color:#61676c10>`sprite_picking`</span><span>, </span><span style=color:#ed9366;background-color:#61676c10>`ui_picking`</span><span>.</span><span style=color:#61676ccc>|
</span></code></pre><p>The documentation is updated to remove references to the <code>bevy_picking</code> feature in both the picking collection description and the individual feature list.<h3 id=release-content-migration-guides-bevy-picking-feature-md-12-0><code>release-content/migration-guides/bevy_picking_feature.md</code> (+12/-0)</h3><p>A new migration guide explains the change and provides guidance for users.<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span style=color:#abb0b6;background-color:#61676c10;font-weight:700>---
</span><span>title: "</span><span style=color:#ed9366;background-color:#61676c10>`bevy_picking`</span><span> feature flag removed"
</span><span>pull_requests: [22933]
</span><span style=color:#fa6e32;font-weight:700>---
</span><span>
</span><span>The </span><span style=color:#ed9366;background-color:#61676c10>`bevy/bevy_picking`</span><span> feature flag has been removed. This previously enabled picking functionality in </span><span style=color:#ed9366;background-color:#61676c10>`bevy_input_focus`</span><span>,
</span><span>allowing users to select elements to focus using their mouse.
</span><span>
</span><span>This is now exposed as part of the existing </span><span style=color:#ed9366;background-color:#61676c10>`bevy/bevy_ui_picking`</span><span> feature, which is itself part of the </span><span style=color:#ed9366;background-color:#61676c10>`ui`</span><span> feature collection.
</span><span>In most cases, you should add the </span><span style=color:#ed9366;background-color:#61676c10>`ui`</span><span> feature collection to your project if you are using </span><span style=color:#ed9366;background-color:#61676c10>`bevy_ui`</span><span>.
</span><span>
</span><span>If you want to enable </span><span style=color:#ed9366;background-color:#61676c10>`bevy_input_focus`</span><span>'s picking functionality, but do </span><span style=color:#f07171;font-style:italic>*not*</span><span> want to use </span><span style=color:#ed9366;background-color:#61676c10>`bevy_ui`</span><span>, add a separate dependency to the same version of </span><span style=color:#ed9366;background-color:#61676c10>`bevy_input_focus`</span><span> in your project and enable the optional </span><span style=color:#ed9366;background-color:#61676c10>`bevy_picking`</span><span> feature there.
</span></code></pre><p>This guide provides clear instructions for users affected by the change, including edge cases where someone might want input focus picking without UI picking.<h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/cargo/reference/features.html target=_blank>Cargo Features Documentation</a> - Official Rust documentation on Cargo’s feature system<li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/quick-start/features/ target=_blank>Bevy’s Feature Flags Guide</a> - Bevy’s official documentation on using feature flags<li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/cargo/reference/features.html#dependency-features target=_blank>Conditional Feature Dependencies in Cargo</a> - How to use the <code>?</code> syntax for conditional feature dependencies<li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/tree/main/crates/bevy_picking target=_blank>Bevy Picking System</a> - The bevy_picking crate repository for understanding the underlying implementation</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2026-02/pr_22933.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>