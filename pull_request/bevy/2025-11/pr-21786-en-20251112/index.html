<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #21786 Make `WinitMonitors` public
        
    </title><meta content="#21786 Make `WinitMonitors` public" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-11/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-11-12</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-11/pr-21786-zh-cn-20251112>中文</a></div></div><div class=pr-content><h1 id=make-winitmonitors-public>Make <code>WinitMonitors</code> public</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Make <code>WinitMonitors</code> public<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/21786<li><strong>Author</strong>: SludgePhD<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Bug, A-Windowing, S-Ready-For-Final-Review<li><strong>Created</strong>: 2025-11-08T23:42:59Z<li><strong>Merged</strong>: 2025-11-09T18:46:09Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Allow third-party code to integrate with winit <code>MonitorHandle</code>s represented by bevy <code>Monitor</code> entities.</ul><h2 id=solution>Solution</h2><ul><li>Reexport this resource type, just like <code>WinitWindows</code>.<li>It was already part of the public API through the system types.</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a straightforward but important consistency issue in Bevy’s windowing API. The problem was that while <code>WinitMonitors</code> was technically accessible through Bevy’s system types, it wasn’t properly re-exported in the public API, making it difficult for third-party code to work with monitor entities.<p>The core issue stems from how Bevy organizes its windowing functionality. The <code>bevy_winit</code> crate bridges Bevy’s ECS architecture with the platform-specific winit library. Within this crate, <code>WinitMonitors</code> serves as a resource that tracks available monitors and their corresponding Bevy entities. However, despite being part of the public-facing system API, the type itself wasn’t exported from the crate’s main module.<p>Looking at the existing codebase, we can see a clear pattern: <code>WinitWindows</code> was already properly re-exported, providing external developers with access to window management functionality. The <code>WinitMonitors</code> resource followed a similar architectural pattern but lacked the same level of API exposure.<p>The solution implemented here is minimal and follows established conventions. By adding a single line to re-export the <code>winit_monitors</code> module and removing the now-redundant internal import, the PR brings monitor handling into parity with window handling. This change doesn’t modify any behavior - it simply makes existing functionality properly accessible.<p>Additionally, the PR adds documentation to two key methods on the <code>WinitMonitors</code> struct:<ul><li><code>nth(&self, n: usize)</code> for retrieving a monitor by index<li><code>find_entity(&self, entity: Entity)</code> for finding a monitor handle associated with a specific Bevy entity</ul><p>These documentation improvements help clarify the purpose of these methods, which is particularly important now that they’re part of the public API.<p>The implementation is technically sound because <code>WinitMonitors</code> was already designed to be part of the public surface - it just wasn’t properly exported. This is evidenced by the fact that it was already accessible through system parameters. The change simply makes the direct type usage as straightforward as the system parameter usage.<p>From an architectural perspective, this change enhances the consistency of Bevy’s windowing API. Third-party developers can now directly work with monitor resources in the same way they work with window resources, enabling more sophisticated multi-monitor applications and tools.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[bevy_winit crate] --> B[WinitWindows - public]
</span><span>    A --> C[WinitMonitors - now public]
</span><span>    A --> D[Other winit types - public]
</span><span>    
</span><span>    C --> E[MonitorHandle access]
</span><span>    C --> F[Entity mapping]
</span><span>    
</span><span>    E --> G[nth() method]
</span><span>    F --> H[find_entity() method]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-winit-src-lib-rs-1-1><code>crates/bevy_winit/src/lib.rs</code> (+1/-1)</h3><p>This file received two key changes that work together to properly expose the <code>WinitMonitors</code> type:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_winit/src/lib.rs
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Added re-export (line 38):
</span><span style=color:#fa6e32>pub use </span><span>winit_monitors</span><span style=color:#ed9366>::*</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Removed internal import (lines 42-44):
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>use crate</span><span style=color:#61676ccc>::</span><span>{
</span><span>    accessibility</span><span style=color:#ed9366>::</span><span>{AccessKitPlugin</span><span style=color:#61676ccc>,</span><span> WinitActionRequestHandlers}</span><span style=color:#61676ccc>,
</span><span>    state</span><span style=color:#ed9366>::</span><span>winit_runner</span><span style=color:#61676ccc>,
</span><span>    winit_monitors</span><span style=color:#ed9366>::</span><span>WinitMonitors</span><span style=color:#61676ccc>,
</span><span>}</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>use crate</span><span style=color:#61676ccc>::</span><span>{
</span><span>    accessibility</span><span style=color:#ed9366>::</span><span>{AccessKitPlugin</span><span style=color:#61676ccc>,</span><span> WinitActionRequestHandlers}</span><span style=color:#61676ccc>,
</span><span>    state</span><span style=color:#ed9366>::</span><span>winit_runner</span><span style=color:#61676ccc>,
</span><span>}</span><span style=color:#61676ccc>;
</span></code></pre><p>The re-export makes all types from the <code>winit_monitors</code> module available at the crate root, while removing the internal import eliminates redundancy since the type is now available through the public API.<h3 id=crates-bevy-winit-src-winit-monitors-rs-2-0><code>crates/bevy_winit/src/winit_monitors.rs</code> (+2/-0)</h3><p>This file received documentation improvements for the public methods:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_winit/src/winit_monitors.rs
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Added method documentation:
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>WinitMonitors </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Gets the [`MonitorHandle`] at index `n`.
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>nth</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>n</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>usize</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTMonitorHandle> {
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>monitors</span><span style=color:#ed9366>.</span><span style=color:#f07171>get</span><span>(n)</span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(|(</span><span style=color:#ff8f40>monitor</span><span style=color:#61676ccc>,</span><span> _)| monitor</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>())
</span><span>    }
</span><span>
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// Gets the [`MonitorHandle`] associated with a `Monitor` entity.
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>find_entity</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>entity</span><span style=color:#61676ccc>:</span><span> Entity) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTMonitorHandle> {
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>monitors
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>iter</span><span>()
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>find_map</span><span>(|(</span><span style=color:#ff8f40>monitor</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>monitor_entity</span><span>)| (</span><span style=color:#ed9366>*</span><span>monitor_entity </span><span style=color:#ed9366>==</span><span> entity)</span><span style=color:#ed9366>.</span><span style=color:#f07171>then_some</span><span>(monitor</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()))
</span><span>    }
</span><span>}
</span></code></pre><p>These documentation comments clarify the purpose of each method, which is essential now that they’re part of the public API that third-party developers will use.<h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/window/index.html target=_blank>Bevy Window Management Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/winit/latest/winit/monitor/struct.MonitorHandle.html target=_blank>winit MonitorHandle API</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/book/ch07-02-defining-modules-to-control-scope-and-privacy.html target=_blank>Rust Module System and Visibility</a><li><a rel="noopener nofollow noreferrer" href=https://bevy-cheatbook.github.io/programming/res.html target=_blank>Bevy ECS Resources</a></ul><h1 id=full-code-diff>Full Code Diff</h1><pre style=color:#61676c;background-color:#fafafa><code><span>diff --git a/crates/bevy_winit/src/lib.rs b/crates/bevy_winit/src/lib.rs
</span><span>index 6c3521b1e2708..20ec4c198680c 100644
</span><span>--- a/crates/bevy_winit/src/lib.rs
</span><span>+++ b/crates/bevy_winit/src/lib.rs
</span><span>@@ -35,12 +35,12 @@ pub use winit::{
</span><span>     window::{CustomCursor as WinitCustomCursor, CustomCursorSource},
</span><span> };
</span><span> pub use winit_config::*;
</span><span>+pub use winit_monitors::*;
</span><span> pub use winit_windows::*;
</span><span> 
</span><span> use crate::{
</span><span>     accessibility::{AccessKitPlugin, WinitActionRequestHandlers},
</span><span>     state::winit_runner,
</span><span>-    winit_monitors::WinitMonitors,
</span><span> };
</span><span> 
</span><span> pub mod accessibility;
</span><span>diff --git a/crates/bevy_winit/src/winit_monitors.rs b/crates/bevy_winit/src/winit_monitors.rs
</span><span>index 46c62038e2cd4..518c3dc394ba9 100644
</span><span>--- a/crates/bevy_winit/src/winit_monitors.rs
</span><span>+++ b/crates/bevy_winit/src/winit_monitors.rs
</span><span>@@ -21,10 +21,12 @@ pub struct WinitMonitors {
</span><span> }
</span><span> 
</span><span> impl WinitMonitors {
</span><span>+    /// Gets the [`MonitorHandle`] at index `n`.
</span><span>     pub fn nth(&self, n: usize) -> Option&LTMonitorHandle> {
</span><span>         self.monitors.get(n).map(|(monitor, _)| monitor.clone())
</span><span>     }
</span><span> 
</span><span>+    /// Gets the [`MonitorHandle`] associated with a `Monitor` entity.
</span><span>     pub fn find_entity(&self, entity: Entity) -> Option&LTMonitorHandle> {
</span><span>         self.monitors
</span><span>             .iter()
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-11/pr_21786.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>