<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19518 Mention in the docs for pointer events that these are in screen-space.
        
    </title><meta content="#19518 Mention in the docs for pointer events that these are in screen-space." property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-06/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-06-06</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-06/pr-19518-zh-cn-20250606>中文</a></div></div><div class=pr-content><h2 id=technical-analysis-report-pr-19518-mention-in-the-docs-for-pointer-events-that-these-are-in-screen-space>Technical Analysis Report: PR #19518 - Mention in the docs for pointer events that these are in screen-space</h2><h3 id=basic-information>Basic Information</h3><ul><li><strong>Title</strong>: Mention in the docs for pointer events that these are in screen-space.<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19518<li><strong>Author</strong>: andriyDev<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, D-Trivial, S-Ready-For-Final-Review, A-Picking<li><strong>Created</strong>: 2025-06-06T22:01:32Z<li><strong>Merged</strong>: 2025-06-06T22:37:25Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h3 id=description-translation>Description Translation</h3><h1 id=objective>Objective</h1><ul><li>Fixes #18109.</ul><h2 id=solution>Solution</h2><ul><li>All these docs now mention screen-space vs world-space.<li><code>start_pos</code> and <code>latest_pos</code> both link to <code>viewport_to_world</code> and <code>viewport_to_world_2d</code>.<li>The remaining cases are all deltas. Unfortunately <code>Camera</code> doesn’t have an appropriate method for these cases, and implementing one would be non-trivial (e.g., the delta could have a different world-space size based on the depth). For these cases, I just link to <code>Camera</code> and suggest using some of its methods. Not a great solution, but at least it gets users on the correct track.</ul><h3 id=the-story-of-this-pull-request>The Story of This Pull Request</h3><p>The core issue (#18109) stemmed from ambiguity in Bevy’s pointer event documentation. Several event structs contained position and delta fields without clearly specifying their coordinate system. This was problematic because Bevy uses two distinct coordinate systems:<ul><li>Screen-space (pixels, top-left origin)<li>World-space (scene coordinates, bottom-left origin in 2D)</ul><p>Without explicit documentation, developers could misinterpret these values, leading to incorrect calculations for interactions like drag distances or object positioning. For example, a developer might directly use a screen-space delta to move a world-space object, resulting in unexpected behavior due to the coordinate system mismatch.<p>The solution approach focused on documentation enhancements rather than API changes. For absolute position fields (<code>start_pos</code> and <code>latest_pos</code> in <code>DragEntry</code>), we added direct links to <code>Camera</code>’s conversion methods since these map cleanly from viewport coordinates to world space. For relative movement fields (deltas), the conversion is more complex because:<ol><li>Deltas represent movement vectors rather than absolute positions<li>World-space delta magnitude varies by depth in 3D contexts<li>Bevy’s Camera API lacks direct delta conversion methods</ol><p>The implementation added consistent documentation blocks across six fields in four event structs. Each documentation block:<ol><li>Explicitly states the coordinate system (screen pixels)<li>Explains the coordinate orientation (top-left vs bottom-left)<li>Provides conversion guidance with appropriate Camera method links</ol><p>For delta fields, the documentation acknowledges the conversion complexity and suggests developers explore Camera methods as a starting point, while noting that a complete solution might require custom logic. This pragmatic approach balances clarity with practicality - it addresses the immediate documentation gap without introducing new API surface area or complex conversion utilities.<p>The changes improve developer experience by:<ol><li>Preventing misinterpretation of coordinate systems<li>Providing direct links to relevant conversion methods<li>Setting accurate expectations about coordinate conversion complexity<li>Maintaining backward compatibility (pure documentation change)</ol><p>From an architectural perspective, this change reinforces Bevy’s pattern of using screen-space coordinates for input events while keeping world-space transformations in the render/camera systems. The documentation bridges these domains by explicitly connecting input events to existing camera transformation utilities.<h3 id=visual-representation>Visual Representation</h3><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph LR
</span><span>    A[Pointer Events] --> B[Screen-space coordinates]
</span><span>    B --> C[Camera System]
</span><span>    C --> D[World-space coordinates]
</span><span>    C --> E[2D Viewport]
</span><span>    C --> F[3D Viewport]
</span><span>    D --> G[Game Objects]
</span><span>    E --> G
</span><span>    F --> G
</span></code></pre><h3 id=key-files-changed>Key Files Changed</h3><p><strong>File</strong>: <code>crates/bevy_picking/src/events.rs</code><br> <strong>Changes</strong>: Added documentation clarifying coordinate systems for pointer event fields<br> <strong>Rationale</strong>: Fixes ambiguity in coordinate system usage for pointer events<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before (example for Move::delta):
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Move </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>delta</span><span style=color:#61676ccc>:</span><span> Vec2,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Move </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// The change in position since the last move event.
</span><span>    </span><span style=color:#abb0b6;font-style:italic>///
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// This is stored in screen pixels, not world coordinates. Screen pixels go from top-left to
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// bottom-right, whereas (in 2D) world coordinates go from bottom-left to top-right. Consider
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// using methods on [`Camera`](bevy_render::camera::Camera) to convert from screen-space to
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// world-space.
</span><span>    </span><span style=color:#fa6e32>pub </span><span>delta</span><span style=color:#61676ccc>:</span><span> Vec2,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Before (example for DragEntry::start_pos):
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>DragEntry </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>start_pos</span><span style=color:#61676ccc>:</span><span> Vec2,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>DragEntry </span><span>{
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// The position of the pointer at drag start.
</span><span>    </span><span style=color:#abb0b6;font-style:italic>///
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// This is stored in screen pixels, not world coordinates. Screen pixels go from top-left to
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// bottom-right, whereas (in 2D) world coordinates go from bottom-left to top-right. Consider
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// using [`Camera::viewport_to_world`](bevy_render::camera::Camera::viewport_to_world) or
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// [`Camera::viewport_to_world_2d`](bevy_render::camera::Camera::viewport_to_world_2d) to
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// convert from screen-space to world-space.
</span><span>    </span><span style=color:#fa6e32>pub </span><span>start_pos</span><span style=color:#61676ccc>:</span><span> Vec2,
</span><span>}
</span></code></pre><h3 id=further-reading>Further Reading</h3><ol><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/getting-started/cameras/ target=_blank>Bevy Camera and Coordinates Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://gamedev.stackexchange.com/questions/148338/inconsistent-use-of-screen-space-and-world-space-coordinates target=_blank>Screen vs World Space in Game Development</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/blob/main/crates/bevy_render/src/camera/camera.rs#L104-L124 target=_blank>Bevy Viewport to World Conversion</a></ol><h3 id=full-code-diff>Full Code Diff</h3><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_picking/src/events.rs b/crates/bevy_picking/src/events.rs
</span><span>index 9a5bc51babe79..72c0f06c46b97 100644
</span><span style=color:#c594c5>--- a/crates/bevy_picking/src/events.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_picking/src/events.rs
</span><span style=color:#c594c5>@@ -208,6 +208,11 @@ </span><span style=color:#399ee6>pub struct Move {
</span><span>     /// Information about the picking intersection.
</span><span>     pub hit: HitData,
</span><span>     /// The change in position since the last move event.
</span><span style=color:#86b300>+    ///
</span><span style=color:#86b300>+    /// This is stored in screen pixels, not world coordinates. Screen pixels go from top-left to
</span><span style=color:#86b300>+    /// bottom-right, whereas (in 2D) world coordinates go from bottom-left to top-right. Consider
</span><span style=color:#86b300>+    /// using methods on [`Camera`](bevy_render::camera::Camera) to convert from screen-space to
</span><span style=color:#86b300>+    /// world-space.
</span><span>     pub delta: Vec2,
</span><span> }
</span><span> 
</span><span style=color:#c594c5>@@ -228,8 +233,18 @@ </span><span style=color:#399ee6>pub struct Drag {
</span><span>     /// Pointer button pressed and moved to trigger this event.
</span><span>     pub button: PointerButton,
</span><span>     /// The total distance vector of a drag, measured from drag start to the current position.
</span><span style=color:#86b300>+    ///
</span><span style=color:#86b300>+    /// This is stored in screen pixels, not world coordinates. Screen pixels go from top-left to
</span><span style=color:#86b300>+    /// bottom-right, whereas (in 2D) world coordinates go from bottom-left to top-right. Consider
</span><span style=color:#86b300>+    /// using methods on [`Camera`](bevy_render::camera::Camera) to convert from screen-space to
</span><span style=color:#86b300>+    /// world-space.
</span><span>     pub distance: Vec2,
</span><span>     /// The change in position since the last drag event.
</span><span style=color:#86b300>+    ///
</span><span style=color:#86b300>+    /// This is stored in screen pixels, not world coordinates. Screen pixels go from top-left to
</span><span style=color:#86b300>+    /// bottom-right, whereas (in 2D) world coordinates go from bottom-left to top-right. Consider
</span><span style=color:#86b300>+    /// using methods on [`Camera`](bevy_render::camera::Camera) to convert from screen-space to
</span><span style=color:#86b300>+    /// world-space.
</span><span>     pub delta: Vec2,
</span><span> }
</span><span> 
</span><span style=color:#c594c5>@@ -240,6 +255,11 @@ </span><span style=color:#399ee6>pub struct DragEnd {
</span><span>     /// Pointer button pressed, moved, and released to trigger this event.
</span><span>     pub button: PointerButton,
</span><span>     /// The vector of drag movement measured from start to final pointer position.
</span><span style=color:#86b300>+    ///
</span><span style=color:#86b300>+    /// This is stored in screen pixels, not world coordinates. Screen pixels go from top-left to
</span><span style=color:#86b300>+    /// bottom-right, whereas (in 2D) world coordinates go from bottom-left to top-right. Consider
</span><span style=color:#86b300>+    /// using methods on [`Camera`](bevy_render::camera::Camera) to convert from screen-space to
</span><span style=color:#86b300>+    /// world-space.
</span><span>     pub distance: Vec2,
</span><span> }
</span><span> 
</span><span style=color:#c594c5>@@ -296,8 +316,20 @@ </span><span style=color:#399ee6>pub struct DragDrop {
</span><span> #[reflect(Clone, PartialEq)]
</span><span> pub struct DragEntry {
</span><span>     /// The position of the pointer at drag start.
</span><span style=color:#86b300>+    ///
</span><span style=color:#86b300>+    /// This is stored in screen pixels, not world coordinates. Screen pixels go from top-left to
</span><span style=color:#86b300>+    /// bottom-right, whereas (in 2D) world coordinates go from bottom-left to top-right. Consider
</span><span style=color:#86b300>+    /// using [`Camera::viewport_to_world`](bevy_render::camera::Camera::viewport_to_world) or
</span><span style=color:#86b300>+    /// [`Camera::viewport_to_world_2d`](bevy_render::camera::Camera::viewport_to_world_2d) to
</span><span style=color:#86b300>+    /// convert from screen-space to world-space.
</span><span>     pub start_pos: Vec2,
</span><span>     /// The latest position of the pointer during this drag, used to compute deltas.
</span><span style=color:#86b300>+    ///
</span><span style=color:#86b300>+    /// This is stored in screen pixels, not world coordinates. Screen pixels go from top-left to
</span><span style=color:#86b300>+    /// bottom-right, whereas (in 2D) world coordinates go from bottom-left to top-right. Consider
</span><span style=color:#86b300>+    /// using [`Camera::viewport_to_world`](bevy_render::camera::Camera::viewport_to_world) or
</span><span style=color:#86b300>+    /// [`Camera::viewport_to_world_2d`](bevy_render::camera::Camera::viewport_to_world_2d) to
</span><span style=color:#86b300>+    /// convert from screen-space to world-space.
</span><span>     pub latest_pos: Vec2,
</span><span> }
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-06/pr_19518.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>