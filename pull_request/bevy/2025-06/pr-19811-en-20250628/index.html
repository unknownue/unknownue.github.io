<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19811 Doc for X11 CursorGrabMode support
        
    </title><meta content="#19811 Doc for X11 CursorGrabMode support" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-06/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-06-28</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-06/pr-19811-zh-cn-20250628>中文</a></div></div><div class=pr-content><h1 id=doc-for-x11-cursorgrabmode-support>Doc for X11 CursorGrabMode support</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Doc for X11 CursorGrabMode support<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19811<li><strong>Author</strong>: jf908<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, A-Input, O-Linux, S-Ready-For-Final-Review<li><strong>Created</strong>: 2025-06-25T14:38:22Z<li><strong>Merged</strong>: 2025-06-28T19:13:54Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Clarify that <code>CursorGrabMode::Locked</code> isn’t supported on X11</ul><p>Source: https://docs.rs/winit/latest/winit/window/enum.CursorGrabMode.html#variant.Locked<h2 id=solution>Solution</h2><ul><li>Add it to the platform-specific docs</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The PR addresses a documentation gap in Bevy’s windowing system related to cursor grab mode support on X11. The <code>CursorGrabMode::Locked</code> variant, which locks the cursor position to the window center while still allowing relative mouse movement, wasn’t properly documented as unsupported on X11 platforms.<p>This documentation update was necessary because developers targeting Linux/X11 environments might otherwise expect <code>CursorGrabMode::Locked</code> to function correctly, leading to confusion when it didn’t work as expected. The PR author referenced winit’s documentation which clearly states this limitation.<p>The solution involved updating two documentation blocks in the Bevy window module:<ol><li>The documentation for the <code>grab_mode</code> field in the <code>CursorOptions</code> struct<li>The documentation for the <code>CursorGrabMode</code> enum itself</ol><p>Both documentation blocks previously only mentioned macOS limitations (<code>CursorGrabMode::Confined</code> unsupported) and mobile platform constraints (no cursors). The PR adds explicit mention that X11 doesn’t support <code>CursorGrabMode::Locked</code>, providing accurate platform-specific behavior information.<p>Additionally, the explanatory note about fallback behavior was updated from focusing solely on macOS to include X11 as well. This note explains that when the requested grab mode isn’t fully supported, Bevy will first attempt to use it anyway before falling back to an alternate mode. This fallback mechanism ensures applications remain functional even when platform limitations exist.<p>The changes are purely documentation updates with no code logic modifications. They improve the developer experience by accurately reflecting platform constraints, helping developers make informed decisions about cursor handling in cross-platform applications.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph LR
</span><span>    A[CursorGrabMode Enum] --> B[Documentation]
</span><span>    C[CursorOptions Struct] --> B
</span><span>    D[X11 Platform] -->|Lacks Support For| E[CursorGrabMode::Locked]
</span><span>    F[macOS Platform] -->|Lacks Support For| G[CursorGrabMode::Confined]
</span><span>    B -->|Describes| D
</span><span>    B -->|Describes| F
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-window-src-window-rs><code>crates/bevy_window/src/window.rs</code></h3><p><strong>Change Summary</strong>: Added X11 platform limitation to documentation for cursor grab modes.<p><strong>Context</strong>: This file contains core windowing functionality including cursor management. The documentation updates clarify platform-specific limitations of cursor grab modes.<p><strong>Code Changes</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>/// ## Platform-specific
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// - **`macOS`** doesn't support [`CursorGrabMode::Confined`]
</span><span style=color:#abb0b6;font-style:italic>/// - **`iOS/Android`** don't have cursors.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// Since `macOS` doesn't have full [`CursorGrabMode`] support, we first try to set the grab mode that was asked for. If it doesn't work then use the alternate grab mode.
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>/// ## Platform-specific
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// - **`macOS`** doesn't support [`CursorGrabMode::Confined`]
</span><span style=color:#abb0b6;font-style:italic>/// - **`X11`** doesn't support [`CursorGrabMode::Locked`]
</span><span style=color:#abb0b6;font-style:italic>/// - **`iOS/Android`** don't have cursors.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// Since `macOS` and `X11` don't have full [`CursorGrabMode`] support, we first try to set the grab mode that was asked for. If it doesn't work then use the alternate grab mode.
</span></code></pre><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>/// ## Platform-specific
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// - **`macOS`** doesn't support [`CursorGrabMode::Confined`]
</span><span style=color:#abb0b6;font-style:italic>/// - **`iOS/Android`** don't have cursors.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// Since `macOS` doesn't have full [`CursorGrabMode`] support, we first try to set the grab mode that was asked for. If it doesn't work then use the alternate grab mode.
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>/// ## Platform-specific
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// - **`macOS`** doesn't support [`CursorGrabMode::Confined`]
</span><span style=color:#abb0b6;font-style:italic>/// - **`X11`** doesn't support [`CursorGrabMode::Locked`]
</span><span style=color:#abb0b6;font-style:italic>/// - **`iOS/Android`** don't have cursors.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// Since `macOS` and `X11` don't have full [`CursorGrabMode`] support, we first try to set the grab mode that was asked for. If it doesn't work then use the alternate grab mode.
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/winit/latest/winit/window/enum.CursorGrabMode.html target=_blank>winit CursorGrabMode Documentation</a> - Source documentation for platform-specific cursor grab behavior<li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/getting-started/input/ target=_blank>Bevy Input Handling Documentation</a> - General input handling concepts in Bevy<li><a rel="noopener nofollow noreferrer" href=https://www.x.org/releases/current/doc/inputproto/inputproto.html target=_blank>XInput Extension Documentation</a> - Technical details of X11 input handling</ol><h2 id=full-code-diff>Full Code Diff</h2><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_window/src/window.rs b/crates/bevy_window/src/window.rs
</span><span>index 77728543e72f2..94d0e112b3858 100644
</span><span style=color:#c594c5>--- a/crates/bevy_window/src/window.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_window/src/window.rs
</span><span style=color:#c594c5>@@ -752,9 +752,10 @@ </span><span style=color:#399ee6>pub struct CursorOptions {
</span><span>     /// ## Platform-specific
</span><span>     ///
</span><span>     /// - **`macOS`** doesn't support [`CursorGrabMode::Confined`]
</span><span style=color:#86b300>+    /// - **`X11`** doesn't support [`CursorGrabMode::Locked`]
</span><span>     /// - **`iOS/Android`** don't have cursors.
</span><span>     ///
</span><span style=color:#f07171>-    /// Since `macOS` doesn't have full [`CursorGrabMode`] support, we first try to set the grab mode that was asked for. If it doesn't work then use the alternate grab mode.
</span><span style=color:#86b300>+    /// Since `macOS` and `X11` don't have full [`CursorGrabMode`] support, we first try to set the grab mode that was asked for. If it doesn't work then use the alternate grab mode.
</span><span>     pub grab_mode: CursorGrabMode,
</span><span> 
</span><span>     /// Set whether or not mouse events within *this* window are captured or fall through to the Window below.
</span><span style=color:#c594c5>@@ -1064,9 +1065,10 @@ </span><span style=color:#399ee6>impl From&LTDVec2> for WindowResolution {
</span><span> /// ## Platform-specific
</span><span> ///
</span><span> /// - **`macOS`** doesn't support [`CursorGrabMode::Confined`]
</span><span style=color:#86b300>+/// - **`X11`** doesn't support [`CursorGrabMode::Locked`]
</span><span> /// - **`iOS/Android`** don't have cursors.
</span><span> ///
</span><span style=color:#f07171>-/// Since `macOS` doesn't have full [`CursorGrabMode`] support, we first try to set the grab mode that was asked for. If it doesn't work then use the alternate grab mode.
</span><span style=color:#86b300>+/// Since `macOS` and `X11` don't have full [`CursorGrabMode`] support, we first try to set the grab mode that was asked for. If it doesn't work then use the alternate grab mode.
</span><span> #[derive(Default, Debug, Clone, Copy, PartialEq, Eq)]
</span><span> #[cfg_attr(
</span><span>     feature = "bevy_reflect",
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-06/pr_19811.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>