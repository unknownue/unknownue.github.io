<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19756 don't allow nightly lints
        
    </title><meta content="#19756 don't allow nightly lints" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-06/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-06-21</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-06/pr-19756-zh-cn-20250621>中文</a></div></div><div class=pr-content><h1 id=technical-analysis-of-pr-19756-don-t-allow-nightly-lints>Technical Analysis of PR #19756: “don’t allow nightly lints”</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: don’t allow nightly lints<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19756<li><strong>Author</strong>: mockersf<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Build-System, S-Ready-For-Final-Review, X-Blessed<li><strong>Created</strong>: 2025-06-20T23:16:57Z<li><strong>Merged</strong>: 2025-06-21T00:01:15Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>A nightly only lint is allowed in cargo.toml, making all stable builds issue warning<li>Fixes #19528</ul><h2 id=solution>Solution</h2><ul><li>Don’t allow nightly lints</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The problem started when developers using stable Rust toolchains encountered unnecessary compiler warnings during Bevy builds. The root cause was a lint configuration in the project’s Cargo.toml file that specified <code>mismatched_lifetime_syntaxes = "allow"</code>. This lint is only available in nightly Rust builds, but was being applied to stable builds as well. When stable Rust encountered this configuration, it generated a warning about an unknown lint option since stable Rust doesn’t recognize <code>mismatched_lifetime_syntaxes</code>.<p>This situation violated the principle of keeping builds clean and warning-free by default. The issue (#19528) specifically reported that stable builds were producing warnings that couldn’t be fixed by users since they originated from project configuration. This created noise in build outputs and could mask legitimate warnings.<p>The solution approach was straightforward: remove the nightly-specific lint configuration. Since this lint isn’t applicable to stable Rust and only served to generate false warnings, it didn’t provide value to most users. The developer considered alternative approaches like conditional compilation based on toolchain version, but determined that was unnecessarily complex for this specific case. The simplest and most maintainable solution was complete removal of the problematic configuration line.<p>The implementation consisted of a single-line deletion in the workspace lints section of Cargo.toml. By removing <code>mismatched_lifetime_syntaxes = "allow"</code>, the configuration no longer references a nightly-only lint. This change eliminated the warning for stable Rust users without affecting nightly users, as nightly Rust would simply apply its default behavior for this lint.<p>The impact of this change is immediately beneficial: stable Rust users no longer see extraneous warnings during builds. This maintains the integrity of the warning system and prevents false positives from cluttering build outputs. The change also simplifies the configuration by removing an unnecessary, toolchain-specific setting.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph LR
</span><span>    A[Cargo.toml] --> B[Workspace Lints]
</span><span>    B --> C[Nightly Rust]
</span><span>    B --> D[Stable Rust]
</span><span>    E[Removed nightly-only lint] -.-> B
</span><span>    D --> F[Clean Build Output]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=cargo-toml><code>Cargo.toml</code></h3><p>This file defines the project’s Rust workspace and build configuration. The change removes a nightly-only lint configuration that was causing warnings in stable Rust builds.<p>Before:<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span>[</span><span style=color:#399ee6>workspace</span><span style=color:#61676ccc>.</span><span style=color:#399ee6>lints</span><span style=color:#61676ccc>.</span><span style=color:#399ee6>rust</span><span>]
</span><span style=color:#399ee6>missing_docs </span><span>= </span><span style=color:#86b300>"warn"
</span><span style=color:#399ee6>mismatched_lifetime_syntaxes </span><span>= </span><span style=color:#86b300>"allow"
</span><span style=color:#399ee6>unexpected_cfgs </span><span>= { </span><span style=color:#399ee6>level </span><span>= </span><span style=color:#86b300>"warn"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>check-cfg </span><span>= [</span><span style=color:#86b300>'cfg(docsrs_dep)'</span><span>] }
</span></code></pre><p>After:<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span>[</span><span style=color:#399ee6>workspace</span><span style=color:#61676ccc>.</span><span style=color:#399ee6>lints</span><span style=color:#61676ccc>.</span><span style=color:#399ee6>rust</span><span>]
</span><span style=color:#399ee6>missing_docs </span><span>= </span><span style=color:#86b300>"warn"
</span><span style=color:#399ee6>unexpected_cfgs </span><span>= { </span><span style=color:#399ee6>level </span><span>= </span><span style=color:#86b300>"warn"</span><span style=color:#61676ccc>, </span><span style=color:#399ee6>check-cfg </span><span>= [</span><span style=color:#86b300>'cfg(docsrs_dep)'</span><span>] }
</span></code></pre><p>The removal of the <code>mismatched_lifetime_syntaxes</code> line addresses the core issue by eliminating the reference to a nightly-only lint that wasn’t recognized by stable Rust compilers.<h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/rustc/lints/index.html target=_blank>Rust Lint Documentation</a> - Official reference for Rust lints<li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/cargo/reference/workspaces.html target=_blank>Cargo Workspace Configuration</a> - How to configure Rust workspaces<li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/issues/19528 target=_blank>Issue #19528</a> - Original issue report describing the problem<li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/edition-guide/ target=_blank>Rust Edition Guide</a> - Understanding Rust editions and compatibility</ol><h2 id=full-code-diff>Full Code Diff</h2><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/Cargo.toml b/Cargo.toml
</span><span>index d2e5b92258d79..532860125e28e 100644
</span><span style=color:#c594c5>--- a/Cargo.toml
</span><span style=color:#c594c5>+++ b/Cargo.toml
</span><span style=color:#c594c5>@@ -72,7 +72,6 @@ </span><span style=color:#399ee6>allow_attributes_without_reason = "warn"
</span><span> 
</span><span> [workspace.lints.rust]
</span><span> missing_docs = "warn"
</span><span style=color:#f07171>-mismatched_lifetime_syntaxes = "allow"
</span><span> unexpected_cfgs = { level = "warn", check-cfg = ['cfg(docsrs_dep)'] }
</span><span> unsafe_code = "deny"
</span><span> unsafe_op_in_unsafe_fn = "warn"
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-06/pr_19756.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>