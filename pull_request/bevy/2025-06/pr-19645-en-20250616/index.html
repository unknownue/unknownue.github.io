<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19645 Clarify GlobalTransform::to_isometry doc
        
    </title><meta content="#19645 Clarify GlobalTransform::to_isometry doc" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-06/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-06-16</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-06/pr-19645-zh-cn-20250616>中文</a></div></div><div class=pr-content><h1 id=documentation-clarification-for-globaltransform-to-isometry>Documentation Clarification for GlobalTransform::to_isometry</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Clarify GlobalTransform::to_isometry doc<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19645<li><strong>Author</strong>: atlv24<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, D-Trivial, S-Ready-For-Final-Review, A-Math<li><strong>Created</strong>: 2025-06-14T19:36:41Z<li><strong>Merged</strong>: 2025-06-16T22:20:39Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>to_isometry is not a direct conversion, it involves computation. the docs could be clearer</ul><h2 id=solution>Solution</h2><ul><li>Improve docs</ul><h2 id=testing>Testing</h2><ul><li>its docs</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><h3 id=the-problem>The Problem</h3><p>The <code>GlobalTransform::to_isometry</code> method in Bevy’s transform system had documentation that didn’t fully convey the computational characteristics of the operation. While the existing docs mentioned that scaling would be ignored, they didn’t explicitly state that the method performs a non-trivial decomposition calculation. This could lead to misunderstandings about performance implications, as users might assume it was a simple accessor rather than an operation with computational cost.<h3 id=the-solution-approach>The Solution Approach</h3><p>The author identified that the documentation needed to more accurately describe:<ol><li>The specific computation being performed (Scale-Rotation-Translation decomposition)<li>The performance characteristics (costly operation)<li>The data implications (lossy conversion)</ol><p>Instead of changing the implementation, the solution focused on improving documentation clarity. The approach maintains backward compatibility while setting clearer expectations for users.<h3 id=implementation-details>Implementation Details</h3><p>The changes are localized to the method’s documentation comments. The key improvements are:<ul><li>Replaced “Returns” with “Computes” to emphasize the active operation<li>Added explicit mention of Scale-Rotation-Translation decomposition<li>Included a note about computational cost and data loss</ul><h3 id=technical-insights>Technical Insights</h3><p>The <code>to_isometry</code> method converts a 3D transformation (which may include scale) into an isometry (translation + rotation without scale). This requires:<ol><li>Decomposing the transformation matrix<li>Discarding scale components<li>Reconstructing the isometry</ol><p>The operation is considered costly because matrix decomposition involves numerical operations that are more expensive than simple field access. The “lossy” aspect refers to the deliberate discarding of scale information during the conversion.<h3 id=impact>Impact</h3><p>These documentation changes:<ul><li>Help users make informed decisions about performance-sensitive code<li>Prevent potential misuse by clarifying the method’s behavior<li>Improve API discoverability by better describing the operation<li>Maintain full backward compatibility as no runtime behavior changes</ul><h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[GlobalTransform] --> B[to_isometry]
</span><span>    B --> C[Perform SRT Decomposition]
</span><span>    C --> D[Extract Translation]
</span><span>    C --> E[Extract Rotation]
</span><span>    D --> F[Construct Isometry]
</span><span>    E --> F
</span><span>    F --> G[Return Isometry]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-transform-src-components-global-transform-rs-3-2><code>crates/bevy_transform/src/components/global_transform.rs</code> (+3/-2)</h3><p><strong>What changed and why:</strong><br> Updated documentation for <code>to_isometry</code> method to clarify computational characteristics and data transformation.<p><strong>Code diff:</strong><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_transform/src/components/global_transform.rs b/crates/bevy_transform/src/components/global_transform.rs
</span><span>index b10d5a9d1aba3..d9fcf80737f8b 100644
</span><span style=color:#c594c5>--- a/crates/bevy_transform/src/components/global_transform.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_transform/src/components/global_transform.rs
</span><span style=color:#c594c5>@@ -139,8 +139,9 @@ </span><span style=color:#399ee6>impl GlobalTransform {
</span><span>         }
</span><span>     }
</span><span> 
</span><span style=color:#f07171>-    /// Returns the isometric part of the transformation as an [isometry]. Any scaling done by the
</span><span style=color:#f07171>-    /// transformation will be ignored.
</span><span style=color:#86b300>+    /// Computes a Scale-Rotation-Translation decomposition of the transformation and returns
</span><span style=color:#86b300>+    /// the isometric part as an [isometry]. Any scaling done by the transformation will be ignored.
</span><span style=color:#86b300>+    /// Note: this is a somewhat costly and lossy conversion.
</span><span>     ///
</span><span>     /// The transform is expected to be non-degenerate and without shearing, or the output
</span><span>     /// will be invalid.
</span></code></pre><p><strong>Relationship to PR purpose:</strong><br> This is the sole change that implements the documentation improvements described in the PR objectives.<h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_transform/latest/bevy_transform/ target=_blank>Bevy Transform Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Affine_transformation target=_blank>Affine transformations in computer graphics</a><li><a rel="noopener nofollow noreferrer" href=https://www.scratchapixel.com/lessons/mathematics-physics-for-computer-graphics/geometry target=_blank>Matrix Decomposition Techniques</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/glam/latest/glam/ target=_blank>glam crate Isometry implementation</a></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-06/pr_19645.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>