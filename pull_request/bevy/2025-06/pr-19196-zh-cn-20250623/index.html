<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19196 Explanation for the 'classic' fog example
        
    </title><meta content="#19196 Explanation for the 'classic' fog example" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-06/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-06-23</span><div class=language-switcher><a class=lang-link data-lang=en href=/pull_request/bevy/2025-06/pr-19196-en-20250623>English</a> / <span class="lang-link active" data-lang=zh-cn>中文</span></div></div><div class=pr-content><h1 id=explanation-for-the-classic-fog-example>Explanation for the ‘classic’ fog example</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Explanation for the ‘classic’ fog example<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19196<li><strong>Author</strong>: fallible-algebra<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Rendering, C-Examples, S-Ready-For-Final-Review, D-Straightforward<li><strong>Created</strong>: 2025-05-12T21:25:55Z<li><strong>Merged</strong>: 2025-06-23T21:14:58Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p>这是一个测试案例，用于为示例编写<a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/contribute/helping-out/explaining-examples/ target=_blank>说明文档</a>，该示例的核心主题（在摄像机上的<code>DistanceFog</code>组件）是焦点，但本身并不复杂。不确定这是否可以成为例外或更常见的做法。<p>将控制说明放在解释下方，因为它们更像是屏幕信息的备用方案（这也是它们之前的位置）。<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>该PR专注于改进Bevy引擎中3D雾效示例的文档说明。主要目标是提升开发者对距离雾效功能的理解和使用体验。原示例的文档较为简短，仅简单提及这是交互式示例并列出控制操作，没有充分解释距离雾效的核心概念和实现机制。<p>修改方案采用分层说明结构：首先解释距离雾效的基本原理和实现方式，随后详细说明<code>FogFalloff</code>枚举的不同雾效衰减模式，最后保留原有的控制说明作为补充参考。这种结构使开发者能先理解核心概念，再查看具体操作方式。<p>技术实现上，PR完全重构了示例文件的文档注释部分。主要新增内容包括：<ol><li>明确距离雾效的核心目的：通过颜色混合实现远距离物体的视觉衰减<li>说明基本使用方法：将<code>DistanceFog</code>组件添加到<code>Camera3d</code>实体<li>解释<code>FogFalloff</code>枚举的关键参数： <ul><li><code>Linear</code>模式使用起止距离控制雾效范围<li><code>Exponential</code>模式使用密度值控制衰减曲线</ul><li>区分经典雾效与大气雾效的不同应用场景</ol><p>PR特意将控制说明移至文档末尾，因为这些操作细节更多作为屏幕显示的补充信息，而非核心概念。这种结构调整使文档层次更清晰，开发者能快速定位核心概念说明。<p>修改后的文档注释保持了Bevy示例文档的标准格式，使用Markdown语法确保在生成的文档网站中正确渲染。所有代码引用都使用正确的Rustdoc链接语法，如[<code>DistanceFog</code>]和[<code>Camera3d</code>]，确保文档网站能正确生成API链接。<p>这些修改显著提升了示例的教育价值：<ol><li>开发者能更快理解距离雾效的核心机制<li>明确不同雾效衰减模式的适用场景<li>保持与Bevy文档风格的一致性<li>提供足够技术细节而不影响可读性</ol><p>该PR展示了良好的示例文档实践：优先解释核心概念和技术实现，再提供操作细节。这种模式值得在其它示例文档中复用。<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[DistanceFog Component] --> B[Camera3d Entity]
</span><span>    B --> C[FogFalloff Enum]
</span><span>    C --> D[Linear Mode]
</span><span>    C --> E[Exponential Mode]
</span><span>    D --> F[start/end distance]
</span><span>    E --> G[density value]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=examples-3d-fog-rs-9-2>examples/3d/fog.rs (+9/-2)</h3><p>该文件是3D雾效示例的主要实现，修改聚焦于改进文档说明而非功能逻辑。<p><strong>变更说明：</strong><ol><li>重写文档注释，添加距离雾效的技术说明<li>将控制说明移至文档末尾<li>添加大气雾效的对比参考</ol><p><strong>关键代码变更：</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>//! This interactive example shows how to use distance fog,
</span><span style=color:#abb0b6;font-style:italic>//! and allows playing around with different fog settings.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! ## Controls
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>//! Distance-based fog visual effects are used in many games to give a soft falloff of visibility to the player for performance and/or visual design reasons. The further away something in a 3D world is from the camera, the more it's mixed or completely overwritten by a given color.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! In Bevy we can add the [`DistanceFog`] component to the same entity as our [`Camera3d`] to apply a distance fog effect. It has fields for color, directional light parameters, and how the fog falls off over distance. And that's it! The distance fog is now applied to the camera.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! The [`FogFalloff`] field controls most of the behavior of the fog through different descriptions of fog "curves". I.e. [`FogFalloff::Linear`] lets us define a start and end distance where up until the start distance none of the fog color is mixed in and by the end distance the fog color is as mixed in as it can be. [`FogFalloff::Exponential`] on the other hand uses an exponential curve to drive how "visible" things are with a density value.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! [Atmospheric fog](https://bevyengine.org/examples/3d-rendering/atmospheric-fog/) is another fog type that uses this same method of setup, but isn't covered here as it is a kind of fog that is most often used to imply distance and size in clear weather, while the ones shown off here are much more "dense".
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! The bulk of this example is spent building a scene that suites showing off that the fog is working as intended by creating a pyramid (a 3D structure with clear delineations), a light source, input handling to modify fog settings, and UI to show what the current fog settings are.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! ## Controls
</span><span style=color:#abb0b6;font-style:italic>//!
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/core_pipeline/fog/index.html target=_blank>Bevy Fog 官方文档</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/examples/3d-rendering/atmospheric-fog/ target=_blank>Bevy 大气雾效示例</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/contribute/helping-out/explaining-examples/ target=_blank>Bevy 示例文档指南</a><li><a rel="noopener nofollow noreferrer" href=https://lettier.github.io/3d-game-shaders-for-beginners/fog.html target=_blank>距离雾效技术解析</a></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-06/pr_19196.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>