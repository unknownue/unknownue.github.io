<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19719 deny(missing_docs) for bevy_asset_macros
        
    </title><meta content="#19719 deny(missing_docs) for bevy_asset_macros" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-06/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-06-19</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-06/pr-19719-zh-cn-20250619>中文</a></div></div><div class=pr-content><h1 id=deny-missing-docs-for-bevy-asset-macros>deny(missing_docs) for bevy_asset_macros</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: deny(missing_docs) for bevy_asset_macros<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19719<li><strong>Author</strong>: theotherphil<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, D-Trivial, S-Ready-For-Final-Review<li><strong>Created</strong>: 2025-06-18T16:51:46Z<li><strong>Merged</strong>: 2025-06-19T02:23:04Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>More boilerplate docs, towards https://github.com/bevyengine/bevy/issues/3492.<p>Another place where https://github.com/bevyengine/bevy/issues/19537 might be worth doing as a follow up - I’ve added a comment on that issue.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The <code>bevy_asset_macros</code> crate contained public macros without documentation, which violated Bevy’s documentation standards. This was temporarily allowed using an <code>expect</code> lint attribute referencing issue #3492 (“Not all docs are written yet”). The goal was to improve documentation coverage while working toward enabling <code>deny(missing_docs)</code> across the codebase.<p>The solution approach was straightforward: remove the temporary lint exception and add basic documentation for the crate’s public items. This required:<ol><li>Removing the <code>#![expect(missing_docs)]</code> attribute that suppressed documentation warnings<li>Adding a module-level doc comment explaining the crate’s purpose<li>Adding doc comments for both public macros (<code>Asset</code> and <code>VisitAssetDependencies</code>)</ol><p>The implementation modified only the crate’s root module file. The <code>expect</code> attribute was completely removed rather than replaced with <code>deny</code>, since the actual enforcement would be handled in a separate PR (referenced in issue #19537). The added doc comments provide basic explanations of each macro’s functionality:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#61676ccc>#!</span><span>[</span><span style=color:#f29718>expect</span><span>(missing_docs</span><span style=color:#61676ccc>,</span><span> reason </span><span style=color:#ed9366>= </span><span style=color:#86b300>"Not all docs are written yet, see #3492."</span><span>)]
</span><span style=color:#61676ccc>#!</span><span>[</span><span style=color:#f29718>cfg_attr</span><span>(docsrs</span><span style=color:#61676ccc>, </span><span style=color:#f29718>feature</span><span>(doc_auto_cfg))]
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#61676ccc>#!</span><span>[</span><span style=color:#f29718>cfg_attr</span><span>(docsrs</span><span style=color:#61676ccc>, </span><span style=color:#f29718>feature</span><span>(doc_auto_cfg))]
</span><span>
</span><span style=color:#abb0b6;font-style:italic>//! Macros for deriving asset traits.
</span></code></pre><p>For each macro, a single-line doc comment was added describing its purpose:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>proc_macro_derive</span><span>(Asset</span><span style=color:#61676ccc>, </span><span style=color:#f29718>attributes</span><span>(dependency))]
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>derive_asset</span><span>(</span><span style=color:#ff8f40>input</span><span style=color:#61676ccc>:</span><span> TokenStream) </span><span style=color:#61676ccc>-></span><span> TokenStream {
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>/// Implement the `Asset` trait.
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>proc_macro_derive</span><span>(Asset</span><span style=color:#61676ccc>, </span><span style=color:#f29718>attributes</span><span>(dependency))]
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>derive_asset</span><span>(</span><span style=color:#ff8f40>input</span><span style=color:#61676ccc>:</span><span> TokenStream) </span><span style=color:#61676ccc>-></span><span> TokenStream {
</span></code></pre><p>These changes follow standard Rust documentation practices while keeping the docs concise. The “boilerplate” nature of these docs acknowledges they’re minimal starting points that can be expanded later, as noted in the PR description’s reference to issue #3492.<p>The impact is immediate documentation coverage for public interfaces in this crate. This change:<ol><li>Removes technical debt by eliminating the temporary lint exception<li>Provides basic documentation for macro users<li>Enables future enforcement of <code>deny(missing_docs)</code> in this crate<li>Maintains consistency with Bevy’s documentation standards</ol><p>The changes are simple but important for long-term code health. They demonstrate incremental progress toward project-wide documentation goals while maintaining backwards compatibility.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[bevy_asset_macros] --> B[Remove lint exception]
</span><span>    A --> C[Add module docs]
</span><span>    A --> D[Add macro docs]
</span><span>    B --> E[Enables stricter linting]
</span><span>    C --> F[Documents crate purpose]
</span><span>    D --> G[Documents public interfaces]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-asset-macros-src-lib-rs>crates/bevy_asset/macros/src/lib.rs</h3><p>This is the only modified file. Changes prepare the crate for <code>deny(missing_docs)</code> by adding documentation and removing the temporary lint exception.<p><strong>Key modifications:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#61676ccc>#!</span><span>[</span><span style=color:#f29718>expect</span><span>(missing_docs</span><span style=color:#61676ccc>,</span><span> reason </span><span style=color:#ed9366>= </span><span style=color:#86b300>"Not all docs are written yet, see #3492."</span><span>)]
</span><span style=color:#61676ccc>#!</span><span>[</span><span style=color:#f29718>cfg_attr</span><span>(docsrs</span><span style=color:#61676ccc>, </span><span style=color:#f29718>feature</span><span>(doc_auto_cfg))]
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#61676ccc>#!</span><span>[</span><span style=color:#f29718>cfg_attr</span><span>(docsrs</span><span style=color:#61676ccc>, </span><span style=color:#f29718>feature</span><span>(doc_auto_cfg))]
</span><span>
</span><span style=color:#abb0b6;font-style:italic>//! Macros for deriving asset traits.
</span></code></pre><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>proc_macro_derive</span><span>(Asset</span><span style=color:#61676ccc>, </span><span style=color:#f29718>attributes</span><span>(dependency))]
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>derive_asset</span><span>(</span><span style=color:#ff8f40>input</span><span style=color:#61676ccc>:</span><span> TokenStream) </span><span style=color:#61676ccc>-></span><span> TokenStream {
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>/// Implement the `Asset` trait.
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>proc_macro_derive</span><span>(Asset</span><span style=color:#61676ccc>, </span><span style=color:#f29718>attributes</span><span>(dependency))]
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>derive_asset</span><span>(</span><span style=color:#ff8f40>input</span><span style=color:#61676ccc>:</span><span> TokenStream) </span><span style=color:#61676ccc>-></span><span> TokenStream {
</span></code></pre><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>proc_macro_derive</span><span>(VisitAssetDependencies</span><span style=color:#61676ccc>, </span><span style=color:#f29718>attributes</span><span>(dependency))]
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>derive_asset_dependency_visitor</span><span>(</span><span style=color:#ff8f40>input</span><span style=color:#61676ccc>:</span><span> TokenStream) </span><span style=color:#61676ccc>-></span><span> TokenStream {
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>/// Implement the `VisitAssetDependencies` trait.
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>proc_macro_derive</span><span>(VisitAssetDependencies</span><span style=color:#61676ccc>, </span><span style=color:#f29718>attributes</span><span>(dependency))]
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>derive_asset_dependency_visitor</span><span>(</span><span style=color:#ff8f40>input</span><span style=color:#61676ccc>:</span><span> TokenStream) </span><span style=color:#61676ccc>-></span><span> TokenStream {
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://rust-lang.github.io/api-guidelines/documentation.html target=_blank>Rust Documentation Guidelines</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/issues/3492 target=_blank>Bevy’s Documentation Issue #3492</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/issues/19537 target=_blank>Tracking Issue for deny(missing_docs) #19537</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/rustc/lints/levels.html target=_blank>Rust’s lint attributes documentation</a></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-06/pr_19719.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>