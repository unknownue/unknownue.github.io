<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19423 fix: Ensure linear volume subtraction does not go below zero
        
    </title><meta content="#19423 fix: Ensure linear volume subtraction does not go below zero" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-06/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-06-05</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-06/pr-19423-zh-cn-20250605>中文</a></div></div><div class=pr-content><h1 id=technical-analysis-of-pr-19423-fix-ensure-linear-volume-subtraction-does-not-go-below-zero>Technical Analysis of PR #19423: fix: Ensure linear volume subtraction does not go below zero</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: fix: Ensure linear volume subtraction does not go below zero<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19423<li><strong>Author</strong>: foxzool<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, A-Audio, S-Ready-For-Final-Review, M-Needs-Migration-Guide<li><strong>Created</strong>: 2025-05-29T03:24:50Z<li><strong>Merged</strong>: 2025-06-05T04:21:33Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p>fix: <a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/issues/19417 target=_blank>Ensure linear volume subtraction does not go below zero</a><h2 id=solution>Solution</h2><ul><li>Clamp the result of linear volume subtraction to a minimum of 0.0<li>Add a new test case to verify behavior when subtracting beyond zero</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The core problem addressed in this PR was that volume subtraction operations could produce negative values, which are invalid in audio systems. Volume levels must remain at or above zero, as negative volumes have no physical meaning in audio processing. The issue (#19417) specifically identified that subtracting volumes could result in negative linear scale values.<p>Instead of simply clamping subtraction results, the author recognized a deeper architectural issue: arithmetic operations (addition/subtraction) on volume values are fundamentally problematic because audio volumes operate multiplicatively rather than additively. Volumes represent relative scaling factors where 1.0 is unity gain, 0.5 is half volume (-6dB), and 0.0 is silence.<p>The solution involved completely removing the <code>Add</code> and <code>Sub</code> trait implementations for the <code>Volume</code> type. This prevents misuse of arithmetic operations that don’t align with audio volume semantics. To replace these operations, the author introduced four new clearly named methods that better reflect audio manipulation concepts:<ol><li><code>increase_by_percentage</code> - Multiplies volume by (1 + percentage/100)<li><code>decrease_by_percentage</code> - Multiplies volume by (1 - percentage/100) clamped to 0.0<li><code>scale_to_factor</code> - Directly multiplies volume by a scaling factor<li><code>fade_towards</code> - Linearly interpolates between current and target volume</ol><p>The implementation ensures all operations stay in the linear domain, which maintains audio quality during adjustments. For example, the <code>decrease_by_percentage</code> method prevents negative volumes by clamping the result:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>decrease_by_percentage</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>percentage</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>    </span><span style=color:#fa6e32>let</span><span> factor </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>1.0 </span><span style=color:#ed9366>- </span><span>(percentage </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>100.0</span><span>)</span><span style=color:#ed9366>.</span><span style=color:#f07171>clamp</span><span>(</span><span style=color:#ff8f40>0.0</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>1.0</span><span>)</span><span style=color:#61676ccc>;
</span><span>    Volume</span><span style=color:#ed9366>::</span><span>Linear(</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>to_linear</span><span>() </span><span style=color:#ed9366>*</span><span> factor)
</span><span>}
</span></code></pre><p>The PR includes comprehensive tests for all new functionality, such as verifying that a 100% decrease results in silence:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>test</span><span>]
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>test_decrease_by_percentage</span><span>() {
</span><span>    </span><span style=color:#fa6e32>let</span><span> volume </span><span style=color:#ed9366>=</span><span> Linear(</span><span style=color:#ff8f40>1.0</span><span>)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let</span><span> decreased </span><span style=color:#ed9366>=</span><span> volume</span><span style=color:#ed9366>.</span><span style=color:#f07171>decrease_by_percentage</span><span>(</span><span style=color:#ff8f40>100.0</span><span>)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#f07171>assert_eq!</span><span>(decreased</span><span style=color:#ed9366>.</span><span style=color:#f07171>to_linear</span><span>()</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>0.0</span><span>)</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><p>The changes required updates to two audio examples that previously used volume subtraction. The <code>audio_control</code> example now uses percentage-based adjustments:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span>sink</span><span style=color:#ed9366>.</span><span style=color:#f07171>set_volume</span><span>(current_volume</span><span style=color:#ed9366>.</span><span style=color:#f07171>increase_by_percentage</span><span>(</span><span style=color:#ff8f40>10.0</span><span>))</span><span style=color:#61676ccc>;
</span></code></pre><p>While the <code>soundtrack</code> example uses the new fading method:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span>audio</span><span style=color:#ed9366>.</span><span style=color:#f07171>set_volume</span><span>(
</span><span>    current_volume</span><span style=color:#ed9366>.</span><span style=color:#f07171>fade_towards</span><span>(Volume</span><span style=color:#ed9366>::</span><span>Linear(</span><span style=color:#ff8f40>1.0</span><span>)</span><span style=color:#61676ccc>,</span><span> time</span><span style=color:#ed9366>.</span><span style=color:#f07171>delta_secs</span><span>() </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>FADE_TIME
</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><p>Since this is a breaking change (removing public trait implementations), the PR includes a migration guide that clearly explains how to update code that previously used addition or subtraction with volume values.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Volume Type] --> B[New Methods]
</span><span>    B --> C[increase_by_percentage]
</span><span>    B --> D[decrease_by_percentage]
</span><span>    B --> E[scale_to_factor]
</span><span>    B --> F[fade_towards]
</span><span>    C --> G[Audio Control Example]
</span><span>    D --> G
</span><span>    F --> H[Soundtrack Example]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=1-crates-bevy-audio-src-volume-rs-155-94>1. <code>crates/bevy_audio/src/volume.rs</code> (+155/-94)</h3><p>The core changes to the Volume implementation:<ul><li>Removed Add/Sub trait implementations<li>Added new volume adjustment methods<li>Added comprehensive tests</ul><p>Key changes:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>impl </span><span>core</span><span style=color:#ed9366>::</span><span>ops</span><span style=color:#ed9366>::</span><span>Sub<</span><span style=color:#fa6e32>Self</span><span>> </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>Volume </span><span>{
</span><span>    </span><span style=color:#fa6e32>type </span><span style=color:#399ee6>Output </span><span style=color:#ed9366>= </span><span style=color:#fa6e32>Self</span><span style=color:#61676ccc>;
</span><span>
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>sub</span><span>(</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>rhs</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>Self</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#fa6e32>use </span><span>Volume</span><span style=color:#ed9366>::</span><span>{Decibels</span><span style=color:#61676ccc>,</span><span> Linear}</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#fa6e32>match </span><span>(</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#61676ccc>,</span><span> rhs) {
</span><span>            (Linear(a)</span><span style=color:#61676ccc>,</span><span> Linear(b)) </span><span style=color:#ed9366>=></span><span> Linear(a </span><span style=color:#ed9366>-</span><span> b)</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// ... other cases ...
</span><span>        }
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>decrease_by_percentage</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>percentage</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>    </span><span style=color:#fa6e32>let</span><span> factor </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>1.0 </span><span style=color:#ed9366>- </span><span>(percentage </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>100.0</span><span>)</span><span style=color:#ed9366>.</span><span style=color:#f07171>clamp</span><span>(</span><span style=color:#ff8f40>0.0</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>1.0</span><span>)</span><span style=color:#61676ccc>;
</span><span>    Volume</span><span style=color:#ed9366>::</span><span>Linear(</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>to_linear</span><span>() </span><span style=color:#ed9366>*</span><span> factor)
</span><span>}
</span><span>
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>fade_towards</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>target</span><span style=color:#61676ccc>:</span><span> Volume, </span><span style=color:#ff8f40>factor</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>    </span><span style=color:#fa6e32>let</span><span> current_linear </span><span style=color:#ed9366>= </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>to_linear</span><span>()</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let</span><span> target_linear </span><span style=color:#ed9366>=</span><span> target</span><span style=color:#ed9366>.</span><span style=color:#f07171>to_linear</span><span>()</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let</span><span> factor_clamped </span><span style=color:#ed9366>=</span><span> factor</span><span style=color:#ed9366>.</span><span style=color:#f07171>clamp</span><span>(</span><span style=color:#ff8f40>0.0</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>1.0</span><span>)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let</span><span> interpolated </span><span style=color:#ed9366>=</span><span> current_linear </span><span style=color:#ed9366>+ </span><span>(target_linear </span><span style=color:#ed9366>-</span><span> current_linear) </span><span style=color:#ed9366>*</span><span> factor_clamped</span><span style=color:#61676ccc>;
</span><span>    Volume</span><span style=color:#ed9366>::</span><span>Linear(interpolated)
</span><span>}
</span></code></pre><h3 id=2-release-content-migration-guides-remove-the-add-sub-impls-on-volume-md-25-0>2. <code>release-content/migration-guides/remove_the_add_sub_impls_on_volume.md</code> (+25/-0)</h3><p>New migration guide explaining how to update code:<pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span>Linear volumes are like percentages, and it does not make sense to add or subtract percentages.
</span><span>As such, use the new </span><span style=color:#ed9366;background-color:#61676c10>`increase_by_percentage`</span><span> function instead of addition or subtraction.
</span><span>
</span><span>```</span><span style=color:#ff8f40>rust
</span><span style=color:#abb0b6;background-color:#61676c07;font-style:italic>// 0.16
</span><span style=color:#fa6e32;background-color:#61676c07>fn </span><span style=color:#f29718;background-color:#61676c07>audio_system</span><span style=color:#61676c;background-color:#61676c07>() {
</span><span style=color:#61676c;background-color:#61676c07>    </span><span style=color:#fa6e32;background-color:#61676c07>let</span><span style=color:#61676c;background-color:#61676c07> linear_a </span><span style=color:#ed9366;background-color:#61676c07>= </span><span style=color:#61676c;background-color:#61676c07>Volume</span><span style=color:#ed9366;background-color:#61676c07>::</span><span style=color:#61676c;background-color:#61676c07>Linear(</span><span style=color:#ff8f40;background-color:#61676c07>0.5</span><span style=color:#61676c;background-color:#61676c07>)</span><span style=color:#61676ccc;background-color:#61676c07>;
</span><span style=color:#61676c;background-color:#61676c07>    </span><span style=color:#fa6e32;background-color:#61676c07>let</span><span style=color:#61676c;background-color:#61676c07> linear_b </span><span style=color:#ed9366;background-color:#61676c07>= </span><span style=color:#61676c;background-color:#61676c07>Volume</span><span style=color:#ed9366;background-color:#61676c07>::</span><span style=color:#61676c;background-color:#61676c07>Linear(</span><span style=color:#ff8f40;background-color:#61676c07>0.1</span><span style=color:#61676c;background-color:#61676c07>)</span><span style=color:#61676ccc;background-color:#61676c07>;
</span><span style=color:#61676c;background-color:#61676c07>    </span><span style=color:#fa6e32;background-color:#61676c07>let</span><span style=color:#61676c;background-color:#61676c07> linear_c </span><span style=color:#ed9366;background-color:#61676c07>=</span><span style=color:#61676c;background-color:#61676c07> linear_a </span><span style=color:#ed9366;background-color:#61676c07>+</span><span style=color:#61676c;background-color:#61676c07> linear_b</span><span style=color:#61676ccc;background-color:#61676c07>;
</span><span style=color:#61676c;background-color:#61676c07>    </span><span style=color:#fa6e32;background-color:#61676c07>let</span><span style=color:#61676c;background-color:#61676c07> linear_d </span><span style=color:#ed9366;background-color:#61676c07>=</span><span style=color:#61676c;background-color:#61676c07> linear_a </span><span style=color:#ed9366;background-color:#61676c07>-</span><span style=color:#61676c;background-color:#61676c07> linear_b</span><span style=color:#61676ccc;background-color:#61676c07>;
</span><span style=color:#61676c;background-color:#61676c07>}
</span><span style=color:#61676c;background-color:#61676c07>
</span><span style=color:#abb0b6;background-color:#61676c07;font-style:italic>// 0.17
</span><span style=color:#fa6e32;background-color:#61676c07>fn </span><span style=color:#f29718;background-color:#61676c07>audio_system</span><span style=color:#61676c;background-color:#61676c07>() {
</span><span style=color:#61676c;background-color:#61676c07>    </span><span style=color:#fa6e32;background-color:#61676c07>let</span><span style=color:#61676c;background-color:#61676c07> linear_a </span><span style=color:#ed9366;background-color:#61676c07>= </span><span style=color:#61676c;background-color:#61676c07>Volume</span><span style=color:#ed9366;background-color:#61676c07>::</span><span style=color:#61676c;background-color:#61676c07>Linear(</span><span style=color:#ff8f40;background-color:#61676c07>0.5</span><span style=color:#61676c;background-color:#61676c07>)</span><span style=color:#61676ccc;background-color:#61676c07>;
</span><span style=color:#61676c;background-color:#61676c07>    </span><span style=color:#fa6e32;background-color:#61676c07>let</span><span style=color:#61676c;background-color:#61676c07> linear_b </span><span style=color:#ed9366;background-color:#61676c07>= </span><span style=color:#61676c;background-color:#61676c07>Volume</span><span style=color:#ed9366;background-color:#61676c07>::</span><span style=color:#61676c;background-color:#61676c07>Linear(</span><span style=color:#ff8f40;background-color:#61676c07>0.1</span><span style=color:#61676c;background-color:#61676c07>)</span><span style=color:#61676ccc;background-color:#61676c07>;
</span><span style=color:#61676c;background-color:#61676c07>    </span><span style=color:#fa6e32;background-color:#61676c07>let</span><span style=color:#61676c;background-color:#61676c07> linear_c </span><span style=color:#ed9366;background-color:#61676c07>=</span><span style=color:#61676c;background-color:#61676c07> linear_a</span><span style=color:#ed9366;background-color:#61676c07>.</span><span style=color:#f07171;background-color:#61676c07>increase_by_percentage</span><span style=color:#61676c;background-color:#61676c07>(</span><span style=color:#ff8f40;background-color:#61676c07>10.0</span><span style=color:#61676c;background-color:#61676c07>)</span><span style=color:#61676ccc;background-color:#61676c07>;
</span><span style=color:#61676c;background-color:#61676c07>    </span><span style=color:#fa6e32;background-color:#61676c07>let</span><span style=color:#61676c;background-color:#61676c07> linear_d </span><span style=color:#ed9366;background-color:#61676c07>=</span><span style=color:#61676c;background-color:#61676c07> linear_a</span><span style=color:#ed9366;background-color:#61676c07>.</span><span style=color:#f07171;background-color:#61676c07>increase_by_percentage</span><span style=color:#61676c;background-color:#61676c07>(</span><span style=color:#ed9366;background-color:#61676c07>-</span><span style=color:#ff8f40;background-color:#61676c07>10.0</span><span style=color:#61676c;background-color:#61676c07>)</span><span style=color:#61676ccc;background-color:#61676c07>;
</span><span style=color:#61676c;background-color:#61676c07>}
</span></code></pre><h3 id=3-examples-audio-soundtrack-rs-6-2>3. <code>examples/audio/soundtrack.rs</code> (+6/-2)</h3><p>Updated fade implementation to use new method:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>audio</span><span style=color:#ed9366>.</span><span style=color:#f07171>set_volume</span><span>(current_volume </span><span style=color:#ed9366>- </span><span>Volume</span><span style=color:#ed9366>::</span><span>Linear(time</span><span style=color:#ed9366>.</span><span style=color:#f07171>delta_secs</span><span>() </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>FADE_TIME</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>audio</span><span style=color:#ed9366>.</span><span style=color:#f07171>set_volume</span><span>(
</span><span>    current_volume</span><span style=color:#ed9366>.</span><span style=color:#f07171>fade_towards</span><span>(Volume</span><span style=color:#ed9366>::</span><span>Linear(</span><span style=color:#ff8f40>0.0</span><span>)</span><span style=color:#61676ccc>,</span><span> time</span><span style=color:#ed9366>.</span><span style=color:#f07171>delta_secs</span><span>() </span><span style=color:#ed9366>/ </span><span style=color:#ff8f40>FADE_TIME
</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=4-examples-audio-audio-control-rs-3-3>4. <code>examples/audio/audio_control.rs</code> (+3/-3)</h3><p>Updated volume controls to use percentage-based adjustment:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>sink</span><span style=color:#ed9366>.</span><span style=color:#f07171>set_volume</span><span>(current_volume </span><span style=color:#ed9366>- </span><span>Volume</span><span style=color:#ed9366>::</span><span>Linear(</span><span style=color:#ff8f40>0.1</span><span>))</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>sink</span><span style=color:#ed9366>.</span><span style=color:#f07171>set_volume</span><span>(current_volume</span><span style=color:#ed9366>.</span><span style=color:#f07171>increase_by_percentage</span><span>(</span><span style=color:#ed9366>-</span><span style=color:#ff8f40>10.0</span><span>))</span><span style=color:#61676ccc>;
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://dsp.stackexchange.com/questions/29919/how-to-control-volume-in-digital-audio-processing target=_blank>Digital Audio Volume Control</a><li><a rel="noopener nofollow noreferrer" href=https://www.animations.physics.unsw.edu.au/jw/dB.htm target=_blank>Decibel Scale Fundamentals</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_audio/latest/bevy_audio/ target=_blank>Bevy Audio Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://www.soundonsound.com/techniques/understanding-decibels target=_blank>Linear vs Logarithmic Audio Scales</a></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-06/pr_19423.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>