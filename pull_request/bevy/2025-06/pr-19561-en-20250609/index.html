<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19561 Fix uninlined format argument lint
        
    </title><meta content="#19561 Fix uninlined format argument lint" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-06/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-06-09</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-06/pr-19561-zh-cn-20250609>中文</a></div></div><div class=pr-content><h1 id=fix-uninlined-format-argument-lint>Fix uninlined format argument lint</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Fix uninlined format argument lint<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19561<li><strong>Author</strong>: ZioKli<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, C-Code-Quality, S-Ready-For-Final-Review<li><strong>Created</strong>: 2025-06-09T20:34:12Z<li><strong>Merged</strong>: 2025-06-09T21:11:26Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Fixes #19370<h2 id=solution>Solution</h2><p>Implemented the lint as suggested by clippy.<h2 id=testing>Testing</h2><p>CI tests passed and lint was resolved.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The PR addresses lint warnings from Clippy about uninlined format arguments. These warnings occur when using the <code>format!</code> macro without directly embedding variables in the format string, which can reduce readability and potentially impact performance. The issue (#19370) specifically identified several instances in Bevy’s ECS scheduling code where logs and warnings used the older <code>"{}"</code> syntax instead of the preferred <code>"{variable}"</code> inline syntax.<p>The solution implemented is straightforward: update all identified logging statements to use Rust’s inline variable formatting syntax. This change doesn’t alter functionality but improves code quality by adhering to modern Rust conventions. The changes are localized to logging statements in two files within Bevy’s ECS scheduling system.<p>In <code>schedule.rs</code>, three logging statements were updated:<ol><li>A schedule information log in <code>log_schedule</code><li>An error about redundant edges in <code>detect_redundant</code><li>A warning about schedule ambiguities in <code>report_ambiguities</code></ol><p>In <code>stepping.rs</code>, four warnings within the <code>apply_stepping_command</code> function were updated. These warnings notify developers when stepping functionality is used without proper initialization. By inlining the <code>label</code> variable, the messages become more concise while maintaining their diagnostic value.<p>The changes required minimal modifications - just 9 lines removed and 9 added across both files. The implementation follows Clippy’s recommendations precisely, demonstrating how automated linting tools can efficiently guide code quality improvements. Since these are logging changes, they don’t affect core functionality but make the codebase more consistent and maintainable.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    PR[PR #19561] --> schedule_rs
</span><span>    PR --> stepping_rs
</span><span>    
</span><span>    schedule_rs[schedule.rs] --> log_schedule[log_schedule function]
</span><span>    schedule_rs --> detect_redundant[detect_redundant function]
</span><span>    schedule_rs --> report_ambiguities[report_ambiguities function]
</span><span>    
</span><span>    stepping_rs[stepping.rs] --> apply_stepping_command[apply_stepping_command function]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-ecs-src-schedule-schedule-rs><code>crates/bevy_ecs/src/schedule/schedule.rs</code></h3><p>Updated logging statements to use inline variable formatting for better readability and consistency with Rust conventions.<p><strong>Changes:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#f07171>info!</span><span>(</span><span style=color:#86b300>"{}"</span><span style=color:#61676ccc>,</span><span> message)</span><span style=color:#61676ccc>;
</span><span style=color:#f07171>error!</span><span>(</span><span style=color:#86b300>"Schedule {schedule_label:?} has redundant edges:</span><span style=color:#4cbf99>\n</span><span style=color:#86b300> {}"</span><span style=color:#61676ccc>,</span><span> message)</span><span style=color:#61676ccc>;
</span><span style=color:#f07171>warn!</span><span>(</span><span style=color:#86b300>"Schedule {schedule_label:?} has ambiguities.</span><span style=color:#4cbf99>\n</span><span style=color:#86b300>{}"</span><span style=color:#61676ccc>,</span><span> message)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#f07171>info!</span><span>(</span><span style=color:#86b300>"{message}"</span><span>)</span><span style=color:#61676ccc>;
</span><span style=color:#f07171>error!</span><span>(</span><span style=color:#86b300>"Schedule {schedule_label:?} has redundant edges:</span><span style=color:#4cbf99>\n</span><span style=color:#86b300> {message}"</span><span>)</span><span style=color:#61676ccc>;
</span><span style=color:#f07171>warn!</span><span>(</span><span style=color:#86b300>"Schedule {schedule_label:?} has ambiguities.</span><span style=color:#4cbf99>\n</span><span style=color:#86b300>{message}"</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=crates-bevy-ecs-src-schedule-stepping-rs><code>crates/bevy_ecs/src/schedule/stepping.rs</code></h3><p>Consolidated stepping warning messages by inlining the <code>label</code> variable, eliminating redundant format arguments.<p><strong>Changes:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#f07171>warn!</span><span>(
</span><span>    </span><span style=color:#86b300>"stepping is not enabled for schedule {:?}; </span><span style=color:#61676ccc>\
</span><span style=color:#86b300>    use `.add_stepping({:?})` to enable stepping"</span><span style=color:#61676ccc>,
</span><span>    label</span><span style=color:#61676ccc>,</span><span> label
</span><span>)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#f07171>warn!</span><span>(
</span><span>    </span><span style=color:#86b300>"stepping is not enabled for schedule {label:?}; </span><span style=color:#61676ccc>\
</span><span style=color:#86b300>    use `.add_stepping({label:?})` to enable stepping"
</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><h2 id=full-code-diff>Full Code Diff</h2><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_ecs/src/schedule/schedule.rs b/crates/bevy_ecs/src/schedule/schedule.rs
</span><span>index 2d559db1dd85c..d7d8584083ffc 100644
</span><span style=color:#c594c5>--- a/crates/bevy_ecs/src/schedule/schedule.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_ecs/src/schedule/schedule.rs
</span><span style=color:#c594c5>@@ -166,7 +166,7 @@ </span><span style=color:#399ee6>impl Schedules {
</span><span>             writeln!(message, "{}", components.get_name(*id).unwrap()).unwrap();
</span><span>         }
</span><span> 
</span><span style=color:#f07171>-        info!("{}", message);
</span><span style=color:#86b300>+        info!("{message}");
</span><span>     }
</span><span> 
</span><span>     /// Adds one or more systems to the [`Schedule`] matching the provided [`ScheduleLabel`].
</span><span style=color:#c594c5>@@ -1705,10 +1705,7 @@ </span><span style=color:#399ee6>impl ScheduleGraph {
</span><span>         match self.settings.hierarchy_detection {
</span><span>             LogLevel::Ignore => unreachable!(),
</span><span>             LogLevel::Warn => {
</span><span style=color:#f07171>-                error!(
</span><span style=color:#f07171>-                    "Schedule {schedule_label:?} has redundant edges:\n {}",
</span><span style=color:#f07171>-                    message
</span><span style=color:#f07171>-                );
</span><span style=color:#86b300>+                error!("Schedule {schedule_label:?} has redundant edges:\n {message}");
</span><span>                 Ok(())
</span><span>             }
</span><span>             LogLevel::Error => Err(ScheduleBuildError::HierarchyRedundancy(message)),
</span><span style=color:#c594c5>@@ -1910,7 +1907,7 @@ </span><span style=color:#399ee6>impl ScheduleGraph {
</span><span>         match self.settings.ambiguity_detection {
</span><span>             LogLevel::Ignore => Ok(()),
</span><span>             LogLevel::Warn => {
</span><span style=color:#f07171>-                warn!("Schedule {schedule_label:?} has ambiguities.\n{}", message);
</span><span style=color:#86b300>+                warn!("Schedule {schedule_label:?} has ambiguities.\n{message}");
</span><span>                 Ok(())
</span><span>             }
</span><span>             LogLevel::Error => Err(ScheduleBuildError::Ambiguity(message)),
</span><span>diff --git a/crates/bevy_ecs/src/schedule/stepping.rs b/crates/bevy_ecs/src/schedule/stepping.rs
</span><span>index 222dfdfcafe15..b6de7c8215463 100644
</span><span style=color:#c594c5>--- a/crates/bevy_ecs/src/schedule/stepping.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_ecs/src/schedule/stepping.rs
</span><span style=color:#c594c5>@@ -475,9 +475,8 @@ </span><span style=color:#399ee6>impl Stepping {
</span><span>                     Some(state) => state.clear_behaviors(),
</span><span>                     None => {
</span><span>                         warn!(
</span><span style=color:#f07171>-                            "stepping is not enabled for schedule {:?}; \
</span><span style=color:#f07171>-                            use `.add_stepping({:?})` to enable stepping",
</span><span style=color:#f07171>-                            label, label
</span><span style=color:#86b300>+                            "stepping is not enabled for schedule {label:?}; \
</span><span style=color:#86b300>+                            use `.add_stepping({label:?})` to enable stepping"
</span><span>                         );
</span><span>                     }
</span><span>                 },
</span><span style=color:#c594c5>@@ -486,9 +485,8 @@ </span><span style=color:#399ee6>impl Stepping {
</span><span>                         Some(state) => state.set_behavior(system, behavior),
</span><span>                         None => {
</span><span>                             warn!(
</span><span style=color:#f07171>-                                "stepping is not enabled for schedule {:?}; \
</span><span style=color:#f07171>-                                use `.add_stepping({:?})` to enable stepping",
</span><span style=color:#f07171>-                                label, label
</span><span style=color:#86b300>+                                "stepping is not enabled for schedule {label:?}; \
</span><span style=color:#86b300>+                                use `.add_stepping({label:?})` to enable stepping"
</span><span>                             );
</span><span>                         }
</span><span>                     }
</span><span style=color:#c594c5>@@ -498,9 +496,8 @@ </span><span style=color:#399ee6>impl Stepping {
</span><span>                         Some(state) => state.clear_behavior(system),
</span><span>                         None => {
</span><span>                             warn!(
</span><span style=color:#f07171>-                                "stepping is not enabled for schedule {:?}; \
</span><span style=color:#f07171>-                                use `.add_stepping({:?})` to enable stepping",
</span><span style=color:#f07171>-                                label, label
</span><span style=color:#86b300>+                                "stepping is not enabled for schedule {label:?}; \
</span><span style=color:#86b300>+                                use `.add_stepping({label:?})` to enable stepping"
</span><span>                             );
</span><span>                         }
</span><span>                     }
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-06/pr_19561.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>