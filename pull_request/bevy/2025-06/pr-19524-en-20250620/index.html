<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19524
        
    </title><meta content=#19524 property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-06/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-06-20</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-06/pr-19524-zh-cn-20250620>中文</a></div></div><div class=pr-content><h2 id=schema-types-metadata-enhancing-bevy-json-schema-extensibility>Schema Types Metadata: Enhancing Bevy JSON Schema Extensibility</h2><h3 id=the-problem-and-context>The Problem and Context</h3><p>Bevy’s JSON schema generation had a critical limitation - it relied on a hardcoded list of supported reflect types (<code>Component</code>, <code>Resource</code>, <code>Default</code>, <code>Serialize</code>, <code>Deserialize</code>) when generating schema metadata. This implementation prevented users from extending the schema with custom reflect traits. The rigid approach required engine modification for any new type data, forcing downstream users to maintain forks for basic customization needs. This was particularly problematic for projects needing specialized reflection metadata in their schemas.<h3 id=the-solution-approach>The Solution Approach</h3><p>Leinnan introduced a flexible registry system through the new <code>SchemaTypesMetadata</code> resource. This approach:<ol><li>Maintains backward compatibility by including default type mappings<li>Provides a clean extension mechanism via <code>map_type_data()</code><li>Decouples schema generation from specific type implementations<li>Adds conditional support for asset-related types via feature flags</ol><p>Key engineering decisions:<ul><li>Implemented as an ECS resource for automatic initialization and access<li>Used <code>TypeId</code> as registry keys for precise type matching<li>Designed zero-cost lookups for schema generation hot paths<li>Added feature-gated asset type support (<code>bevy_asset</code>) to avoid mandatory dependencies</ul><h3 id=the-implementation>The Implementation</h3><p>The core changes centered around three components:<p><strong>1. SchemaTypesMetadata Resource</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// crates/bevy_remote/src/schemas/mod.rs
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Debug</span><span style=color:#61676ccc>,</span><span> Resource</span><span style=color:#61676ccc>,</span><span> Reflect)]
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>reflect</span><span>(Resource)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>SchemaTypesMetadata </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>type_data_map</span><span style=color:#61676ccc>: </span><span>HashMap&LTTypeId, </span><span style=color:#55b4d4;font-style:italic>String</span><span>>,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl </span><span>Default </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>SchemaTypesMetadata </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>default</span><span>() </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#fa6e32>let mut</span><span> data_types </span><span style=color:#ed9366>= </span><span style=color:#fa6e32>Self </span><span>{ type_data_map</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>... </span><span>}</span><span style=color:#61676ccc>;
</span><span>        data_types</span><span style=color:#ed9366>.</span><span>map_type_data</span><span style=color:#ed9366>::</span><span>&LTReflectComponent>(</span><span style=color:#86b300>"Component"</span><span>)</span><span style=color:#61676ccc>;
</span><span>        data_types</span><span style=color:#ed9366>.</span><span>map_type_data</span><span style=color:#ed9366>::</span><span>&LTReflectResource>(</span><span style=color:#86b300>"Resource"</span><span>)</span><span style=color:#61676ccc>;
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ... other defaults
</span><span>        </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>cfg</span><span>(feature </span><span style=color:#ed9366>= </span><span style=color:#86b300>"bevy_asset"</span><span>)]
</span><span>        data_types</span><span style=color:#ed9366>.</span><span>map_type_data</span><span style=color:#ed9366>::</span><span>&LTbevy_asset</span><span style=color:#ed9366>::</span><span>ReflectAsset>(</span><span style=color:#86b300>"Asset"</span><span>)</span><span style=color:#61676ccc>;
</span><span>        data_types
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>SchemaTypesMetadata </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>map_type_data</span><span>&LTT</span><span style=color:#61676ccc>:</span><span> TypeData>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>name</span><span style=color:#61676ccc>:</span><span> impl </span><span style=color:#55b4d4;font-style:italic>Into</span><span><</span><span style=color:#55b4d4;font-style:italic>String</span><span>>) {
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>type_data_map</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>(TypeId</span><span style=color:#ed9366>::</span><span>of</span><span style=color:#ed9366>::</span><span>&LTT>()</span><span style=color:#61676ccc>,</span><span> name</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>())</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>    
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>get_registered_reflect_types</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>reg</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>TypeRegistration) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Vec</span><span><</span><span style=color:#55b4d4;font-style:italic>String</span><span>> {
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>type_data_map</span><span style=color:#ed9366>.</span><span style=color:#f07171>iter</span><span>()
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>filter_map</span><span>(|(</span><span style=color:#ff8f40>id</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>name</span><span>)| reg</span><span style=color:#ed9366>.</span><span style=color:#f07171>data_by_id</span><span>(</span><span style=color:#ed9366>*</span><span>id)</span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(|_| name</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()))
</span><span>            </span><span style=color:#ed9366>.</span><span style=color:#f07171>collect</span><span>()
</span><span>    }
</span><span>}
</span></code></pre><p>This resource maintains the mapping between reflect type data and their string representations, with methods for extension and lookup.<p><strong>2. Schema Generation Integration</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// crates/bevy_remote/src/schemas/json_schema.rs
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>export_type</span><span>(
</span><span>    </span><span style=color:#ff8f40>reg</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>TypeRegistration,
</span><span>    </span><span style=color:#ff8f40>metadata</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>SchemaTypesMetadata,
</span><span>) </span><span style=color:#61676ccc>-> </span><span>(Cow<</span><span style=color:#fa6e32>'static</span><span>, </span><span style=color:#fa6e32>str</span><span>>, JsonSchemaBevyType) {
</span><span>    (reg</span><span style=color:#ed9366>.</span><span style=color:#f07171>type_info</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>type_path</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>()</span><span style=color:#61676ccc>, </span><span>(reg</span><span style=color:#61676ccc>,</span><span> metadata)</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>()
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#55b4d4;font-style:italic>From</span><span><(</span><span style=color:#ed9366>&</span><span>TypeRegistration, </span><span style=color:#ed9366>&</span><span>SchemaTypesMetadata)> </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>JsonSchemaBevyType </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>from</span><span>((</span><span style=color:#ff8f40>reg</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>metadata</span><span>)</span><span style=color:#61676ccc>: </span><span>(</span><span style=color:#ed9366>&</span><span>TypeRegistration</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>&</span><span>SchemaTypesMetadata)) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        JsonSchemaBevyType {
</span><span>            reflect_types</span><span style=color:#61676ccc>:</span><span> metadata</span><span style=color:#ed9366>.</span><span style=color:#f07171>get_registered_reflect_types</span><span>(reg)</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// ... other fields
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre><p>The schema generator now consumes both the type registration and metadata resource, dynamically building the reflect types list.<p><strong>3. Runtime Initialization</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// crates/bevy_remote/src/lib.rs
</span><span style=color:#fa6e32>impl </span><span>Plugin </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>RemotePlugin </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>build</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>app</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> App) {
</span><span>        app</span><span style=color:#ed9366>.</span><span>init_resource</span><span style=color:#ed9366>::</span><span>&LTschemas</span><span style=color:#ed9366>::</span><span>SchemaTypesMetadata>()</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>}
</span></code></pre><p>The plugin system automatically initializes the default metadata resource.<h3 id=technical-insights>Technical Insights</h3><p>The implementation demonstrates several sound engineering practices:<ol><li><p><strong>Extensibility Pattern</strong>: The solution models a classic registry pattern where:</p> <pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph LR
</span><span>    A[Custom TypeData] --> B[SchemaTypesMetadata]
</span><span>    C[TypeRegistration] --> D[export_type]
</span><span>    B --> D
</span><span>    D --> E[JsonSchemaBevyType]
</span></code></pre> <p>Users inject custom mappings (A→B) which automatically propagate to schema output (E)</p><li><p><strong>Efficiency Considerations</strong>:</p> <ul><li><code>get_registered_reflect_types</code> uses lazy filtering (O(n) where n = registered types)<li><code>TypeId</code> comparisons are constant-time operations<li>Avoids allocation for default case through direct mapping</ul><li><p><strong>Conditional Compilation</strong>:</p> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>cfg</span><span>(feature </span><span style=color:#ed9366>= </span><span style=color:#86b300>"bevy_asset"</span><span>)]
</span><span>data_types</span><span style=color:#ed9366>.</span><span>map_type_data</span><span style=color:#ed9366>::</span><span>&LTbevy_asset</span><span style=color:#ed9366>::</span><span>ReflectAsset>(</span><span style=color:#86b300>"Asset"</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre> <p>This pattern keeps the core lightweight while allowing optional integration with Bevy’s asset system</p><li><p><strong>Testing Approach</strong>: Added comprehensive tests verifying:</p> <ul><li>Custom type data registration<li>Correct filtering of reflected types<li>JSON serialization stability<li>Feature-gated type support</ul></ol><h3 id=the-impact>The Impact</h3><p>This change transforms Bevy’s schema generation from a closed system to an extensible framework:<ol><li><strong>Custom Reflect Types</strong>: Users can now mark types with custom traits and have them appear in schemas<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Reflect)]
</span><span style=color:#fa6e32>struct </span><span style=color:#399ee6>CustomTypeData</span><span style=color:#61676ccc>;
</span><span>
</span><span>app</span><span style=color:#ed9366>.</span><span>world</span><span style=color:#ed9366>.</span><span>resource_mut</span><span style=color:#ed9366>::</span><span>&LTSchemaTypesMetadata>()
</span><span>    </span><span style=color:#ed9366>.</span><span>map_type_data</span><span style=color:#ed9366>::</span><span>&LTCustomTypeData>(</span><span style=color:#86b300>"Custom"</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><li><strong>Reduced Maintenance</strong>: Eliminates need for forks when extending schema metadata<li><strong>Ecosystem Alignment</strong>: Matches Bevy’s general philosophy of composability<li><strong>Future-Proofing</strong>: Enables potential community-contributed type data packages</ol><p>The solution maintains backward compatibility while significantly expanding functionality - existing schemas remain unchanged unless explicitly extended.<h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-remote-src-schemas-mod-rs-64-0>crates/bevy_remote/src/schemas/mod.rs (+64/-0)</h3><p>Defines the core metadata storage and extension API:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Debug</span><span style=color:#61676ccc>,</span><span> Resource</span><span style=color:#61676ccc>,</span><span> Reflect)]
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>reflect</span><span>(Resource)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>SchemaTypesMetadata </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>type_data_map</span><span style=color:#61676ccc>: </span><span>HashMap&LTTypeId, </span><span style=color:#55b4d4;font-style:italic>String</span><span>>,
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>SchemaTypesMetadata </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>map_type_data</span><span>&LTT</span><span style=color:#61676ccc>:</span><span> TypeData>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>name</span><span style=color:#61676ccc>:</span><span> impl </span><span style=color:#55b4d4;font-style:italic>Into</span><span><</span><span style=color:#55b4d4;font-style:italic>String</span><span>>) {
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>type_data_map</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>(TypeId</span><span style=color:#ed9366>::</span><span>of</span><span style=color:#ed9366>::</span><span>&LTT>()</span><span style=color:#61676ccc>,</span><span> name</span><span style=color:#ed9366>.</span><span style=color:#f07171>into</span><span>())</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>}
</span></code></pre><h3 id=crates-bevy-remote-src-schemas-json-schema-rs-132-31>crates/bevy_remote/src/schemas/json_schema.rs (+132/-31)</h3><p>Modifies schema generation to use dynamic type metadata:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>get_registered_reflect_types</span><span>(</span><span style=color:#ff8f40>reg</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>TypeRegistration) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Vec</span><span><</span><span style=color:#55b4d4;font-style:italic>String</span><span>> {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Hardcoded type checks
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>impl </span><span style=color:#55b4d4;font-style:italic>From</span><span><(</span><span style=color:#ed9366>&</span><span>TypeRegistration, </span><span style=color:#ed9366>&</span><span>SchemaTypesMetadata)> </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>JsonSchemaBevyType </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>from</span><span>((</span><span style=color:#ff8f40>reg</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>metadata</span><span>): ...) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        reflect_types</span><span style=color:#61676ccc>:</span><span> metadata</span><span style=color:#ed9366>.</span><span style=color:#f07171>get_registered_reflect_types</span><span>(reg)
</span><span>    }
</span><span>}
</span></code></pre><h3 id=crates-bevy-remote-src-builtin-methods-rs-15-10>crates/bevy_remote/src/builtin_methods.rs (+15/-10)</h3><p>Updates type export method to integrate metadata:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(export_type)
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#ed9366>.</span><span style=color:#f07171>filter_map</span><span>(|</span><span style=color:#ff8f40>type_reg</span><span>| {
</span><span>    </span><span style=color:#fa6e32>let </span><span>(id</span><span style=color:#61676ccc>,</span><span> schema) </span><span style=color:#ed9366>= </span><span style=color:#f07171>export_type</span><span>(type_reg</span><span style=color:#61676ccc>,</span><span> extra_info)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Additional filtering
</span><span>})
</span></code></pre><h3 id=crates-bevy-remote-src-lib-rs-3-0>crates/bevy_remote/src/lib.rs (+3/-0)</h3><p>Initializes the metadata resource:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>impl </span><span>Plugin </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>RemotePlugin </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>build</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>app</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> App) {
</span><span>        app</span><span style=color:#ed9366>.</span><span>init_resource</span><span style=color:#ed9366>::</span><span>&LTschemas</span><span style=color:#ed9366>::</span><span>SchemaTypesMetadata>()</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>}
</span></code></pre><h3 id=crates-bevy-remote-cargo-toml-3-1>crates/bevy_remote/Cargo.toml (+3/-1)</h3><p>Adds optional asset support:<pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span>[</span><span style=color:#399ee6>features</span><span>]
</span><span style=color:#399ee6>bevy_asset </span><span>= [</span><span style=color:#86b300>"dep:bevy_asset"</span><span>]
</span><span>
</span><span>[</span><span style=color:#399ee6>dependencies</span><span>]
</span><span style=color:#399ee6>bevy_asset </span><span>= { </span><span style=color:#399ee6>optional </span><span>= </span><span style=color:#ff8f40>true </span><span>}
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/features/reflection/ target=_blank>Bevy Reflection System</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_reflect/latest/bevy_reflect/trait.TypeData.html target=_blank>TypeData Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://json-schema.org/specification.html target=_blank>JSON Schema Specification</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/std/any/struct.TypeId.html target=_blank>Rust Type IDs</a></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-06/pr_19524.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>