<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19196 Explanation for the 'classic' fog example
        
    </title><meta content="#19196 Explanation for the 'classic' fog example" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-06/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-06-23</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-06/pr-19196-zh-cn-20250623>中文</a></div></div><div class=pr-content><h1 id=explanation-for-the-classic-fog-example>Explanation for the ‘classic’ fog example</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Explanation for the ‘classic’ fog example<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19196<li><strong>Author</strong>: fallible-algebra<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Rendering, C-Examples, S-Ready-For-Final-Review, D-Straightforward<li><strong>Created</strong>: 2025-05-12T21:25:55Z<li><strong>Merged</strong>: 2025-06-23T21:14:58Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p>This is a bit of a test case in writing the <a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/contribute/helping-out/explaining-examples/ target=_blank>explanation</a> for an example whose subject (<code>DistanceFog</code> as a component on cameras) is the focus, but isn’t that complicated either. Not certain if this could be an exception or something more common.<p>Putting the controls below the explanation, as they’re more of a fall-back for the on-screen info (also that’s where they were before).<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The fog example in Bevy’s 3D examples directory needed clearer documentation. While functional, its original explanation was brief and didn’t adequately convey the purpose and implementation details of distance-based fog effects. The author recognized that users might struggle to understand both the conceptual foundation and practical implementation of fog in Bevy without more comprehensive documentation.<p>The solution involved rewriting the example’s documentation to provide a thorough technical explanation while maintaining the existing functionality. The approach focused on:<ol><li>Explaining the purpose and benefits of distance fog in game development<li>Demonstrating Bevy’s specific implementation using the <code>DistanceFog</code> component<li>Clarifying how different <code>FogFalloff</code> variants control fog behavior<li>Distinguishing this “classic” fog from atmospheric fog effects<li>Maintaining the interactive controls section but repositioning it</ol><p>The implementation centered on modifying the top-level documentation comment in <code>fog.rs</code>. The new documentation provides a complete conceptual overview before diving into implementation specifics. Key technical points covered include:<ol><li><p>The fundamental behavior of distance fog: “The further away something in a 3D world is from the camera, the more it’s mixed or completely overwritten by a given color.”</p><li><p>The minimal setup required: “add the <code>DistanceFog</code> component to the same entity as our <code>Camera3d</code>”</p><li><p>Configuration parameters: “It has fields for color, directional light parameters, and how the fog falls off over distance.”</p><li><p>Detailed explanation of <code>FogFalloff</code> variants:</p></ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>//! [`FogFalloff::Linear`] lets us define a start and end distance where...
</span><span style=color:#abb0b6;font-style:italic>//! [`FogFalloff::Exponential`] on the other hand uses an exponential curve...
</span></code></pre><ol start=5><li>Clear distinction from atmospheric fog: “<a rel="noopener nofollow noreferrer" href=https://bevyengine.org/examples/3d-rendering/atmospheric-fog/ target=_blank>Atmospheric fog</a>… isn’t covered here”</ol><p>The author made a deliberate structural decision to move the controls section below the explanation. This reflects the relative importance of conceptual understanding versus interactive experimentation in this example. The controls remain available but are positioned as supplementary to the core documentation.<p>From a technical perspective, this change demonstrates effective example documentation practices:<ul><li>It explains both the “why” and “how” of the feature<li>It links related concepts (like atmospheric fog) without duplicating content<li>It maintains technical precision while being accessible<li>It references Bevy components and enums directly with correct markdown syntax</ul><p>The impact is improved clarity for developers learning about Bevy’s fog system. Users encountering this example now gain:<ul><li>Clear understanding of when to use distance fog<li>Immediate knowledge of implementation requirements<li>Awareness of configuration options and their effects<li>Context about how this feature relates to other fog techniques</ul><p>This change also serves as a reference for future example documentation efforts, demonstrating how to balance conceptual explanation with technical implementation details for moderately complex rendering features.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Example Documentation] --> B[Concept Explanation]
</span><span>    A --> C[Technical Implementation]
</span><span>    A --> D[Related Features]
</span><span>    B --> E[Purpose of Distance Fog]
</span><span>    C --> F[DistanceFog Component]
</span><span>    C --> G[FogFalloff Configuration]
</span><span>    D --> H[Atmospheric Fog Comparison]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=examples-3d-fog-rs>examples/3d/fog.rs</h3><p><strong>Changes</strong>: Complete rewrite of documentation comment to provide comprehensive explanation of distance fog concepts and implementation. Repositioned controls section.<p><strong>Reason</strong>: To improve educational value of the example by clearly explaining both the purpose and implementation of distance fog in Bevy.<p><strong>Code Changes</strong>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>//! This interactive example shows how to use distance fog,
</span><span style=color:#abb0b6;font-style:italic>//! and allows playing around with different fog settings.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! ## Controls
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>//! Distance-based fog visual effects are used in many games to give a soft falloff of visibility to the player for performance and/or visual design reasons. The further away something in a 3D world is from the camera, the more it's mixed or completely overwritten by a given color.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! In Bevy we can add the [`DistanceFog`] component to the same entity as our [`Camera3d`] to apply a distance fog effect. It has fields for color, directional light parameters, and how the fog falls off over distance. And that's it! The distance fog is now applied to the camera.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! The [`FogFalloff`] field controls most of the behavior of the fog through different descriptions of fog "curves". I.e. [`FogFalloff::Linear`] lets us define a start and end distance where up until the start distance none of the fog color is mixed in and by the end distance the fog color is as mixed in as it can be. [`FogFalloff::Exponential`] on the other hand uses an exponential curve to drive how "visible" things are with a density value.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! [Atmospheric fog](https://bevyengine.org/examples/3d-rendering/atmospheric-fog/) is another fog type that uses this same method of setup, but isn't covered here as it is a kind of fog that is most often used to imply distance and size in clear weather, while the ones shown off here are much more "dense".
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! The bulk of this example is spent building a scene that suites showing off that the fog is working as intended by creating a pyramid (a 3D structure with clear delineations), a light source, input handling to modify fog settings, and UI to show what the current fog settings are.
</span><span style=color:#abb0b6;font-style:italic>//!
</span><span style=color:#abb0b6;font-style:italic>//! ## Controls
</span><span style=color:#abb0b6;font-style:italic>//!
</span></code></pre><h2 id=further-reading>Further Reading</h2><ol><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/core_pipeline/fog/index.html target=_blank>Bevy Fog Documentation</a> - Official API docs for Bevy’s fog system<li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/blob/main/examples/3d/atmospheric_fog.rs target=_blank>Atmospheric Fog Example</a> - Complementary fog implementation<li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/contribute/helping-out/explaining-examples/ target=_blank>Bevy Examples Contribution Guide</a> - Guidelines for documenting examples<li><a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Fog_(video_games) target=_blank>Distance Fog in Game Development</a> - General concepts of fog in 3D rendering</ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-06/pr_19196.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>