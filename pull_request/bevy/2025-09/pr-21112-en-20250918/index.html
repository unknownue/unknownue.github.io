<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #21112 Improve error message for warn_on_no_render_graph
        
    </title><meta content="#21112 Improve error message for warn_on_no_render_graph" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-09/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-09-18</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-09/pr-21112-zh-cn-20250918>中文</a></div></div><div class=pr-content><h1 id=improve-error-message-for-warn-on-no-render-graph>Improve error message for warn_on_no_render_graph</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Improve error message for warn_on_no_render_graph<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/21112<li><strong>Author</strong>: alice-i-cecile<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Rendering, C-Usability, S-Ready-For-Final-Review<li><strong>Created</strong>: 2025-09-18T00:14:33Z<li><strong>Merged</strong>: 2025-09-18T00:59:10Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p>Fixes #21090.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a usability issue in Bevy’s rendering system where developers encountered unclear error messages when configuring cameras. The problem occurred when an entity had a <code>Camera</code> component but lacked a properly configured render graph, which is essential for the camera to function correctly within Bevy’s rendering pipeline.<p>The original error message was technically correct but insufficiently detailed. It suggested adding either a <code>Camera2d</code> or <code>Camera3d</code> component, or manually adding a <code>CameraRenderGraph</code> component for custom render graphs. However, this guidance didn’t cover all common scenarios that developers might encounter, particularly cases where the necessary render features weren’t enabled due to missing crate dependencies.<p>The solution approach was straightforward: enhance the warning message to provide more comprehensive guidance. The improved message now includes two additional suggestions:<ol><li>Enabling the <code>bevy_core_pipeline</code> crate (which provides the standard 2D and 3D render graphs)<li>Maintaining the existing options for adding standard camera components or custom render graphs</ol><p>This change required minimal code modification but significantly improves the developer experience. The implementation involved updating the warning string in the <code>warn_on_no_render_graph</code> function to provide more specific and actionable guidance. The new message helps developers quickly identify and resolve the underlying issue, whether it’s missing components or missing crate dependencies.<p>The technical insight here is that error messages should not only indicate what’s wrong but also provide clear, actionable solutions. In this case, the improved message covers multiple common scenarios that could lead to the same warning, helping developers navigate Bevy’s modular architecture where rendering features can be optionally included through crate dependencies.<p>The impact of this change is improved developer productivity and reduced frustration when working with Bevy’s camera system. Developers encountering this warning will now receive more specific guidance that helps them resolve the issue faster, whether they need to add components, enable features, or configure custom render graphs.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Camera Entity] --> B{Has CameraRenderGraph?}
</span><span>    B -->|No| C[Trigger Warning]
</span><span>    C --> D[Display Enhanced Error Message]
</span><span>    D --> E[Suggest Solutions]
</span><span>    E --> F[Add Camera2d/Camera3d]
</span><span>    E --> G[Enable bevy_core_pipeline]
</span><span>    E --> H[Add CameraRenderGraph manually]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-render-src-camera-rs-2-1><code>crates/bevy_render/src/camera.rs</code> (+2/-1)</h3><p>This file contains the camera-related functionality in Bevy’s render system. The change modifies the warning message displayed when a camera entity doesn’t have a render graph configured.<p><strong>Before:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#f07171>warn!</span><span>(</span><span style=color:#86b300>"{}Entity {entity} has a `Camera` component, but it doesn't have a render graph configured. Consider adding a `Camera2d` or `Camera3d` component, or manually adding a `CameraRenderGraph` component if you need a custom render graph."</span><span style=color:#61676ccc>,</span><span> caller</span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(|</span><span style=color:#ff8f40>location</span><span>|</span><span style=color:#f07171>format!</span><span>(</span><span style=color:#86b300>"</span><span style=color:#ff8f40>{location}</span><span style=color:#86b300>: "</span><span>))</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap_or_default</span><span>())</span><span style=color:#61676ccc>;
</span></code></pre><p><strong>After:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#f07171>warn!</span><span>(</span><span style=color:#86b300>"{}Entity {entity} has a `Camera` component, but it doesn't have a render graph configured. Usually, adding a `Camera2d` or `Camera3d` component will work.
</span><span style=color:#86b300>        However, you may instead need to enable `bevy_core_pipeline`, or may want to manually add a `CameraRenderGraph` component to create a custom render graph."</span><span style=color:#61676ccc>,</span><span> caller</span><span style=color:#ed9366>.</span><span style=color:#f07171>map</span><span>(|</span><span style=color:#ff8f40>location</span><span>|</span><span style=color:#f07171>format!</span><span>(</span><span style=color:#86b300>"</span><span style=color:#ff8f40>{location}</span><span style=color:#86b300>: "</span><span>))</span><span style=color:#ed9366>.</span><span style=color:#f07171>unwrap_or_default</span><span>())</span><span style=color:#61676ccc>;
</span></code></pre><p>The change improves the error message by:<ol><li>Adding a line break for better readability<li>Including a suggestion to enable <code>bevy_core_pipeline</code> when appropriate<li>Maintaining all previous suggestions while making them more specific</ol><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/introduction/3d-camera/ target=_blank>Bevy Camera Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/introduction/rendering/#render-graphs target=_blank>Bevy Render Graph System</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_core_pipeline/latest/bevy_core_pipeline/ target=_blank>Bevy Core Pipeline Crate</a><li><a rel="noopener nofollow noreferrer" href=https://rust-lang.github.io/api-guidelines/diagnostics.html target=_blank>Rust Error Message Guidelines</a></ul><h2 id=full-code-diff>Full Code Diff</h2><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_render/src/camera.rs b/crates/bevy_render/src/camera.rs
</span><span>index 65b8edfe6eb1f..e1837d2740d16 100644
</span><span style=color:#c594c5>--- a/crates/bevy_render/src/camera.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_render/src/camera.rs
</span><span style=color:#c594c5>@@ -87,7 +87,8 @@ </span><span style=color:#399ee6>impl Plugin for CameraPlugin {
</span><span> 
</span><span> fn warn_on_no_render_graph(world: DeferredWorld, HookContext { entity, caller, .. }: HookContext) {
</span><span>     if !world.entity(entity).contains::&LTCameraRenderGraph>() {
</span><span style=color:#f07171>-        warn!("{}Entity {entity} has a `Camera` component, but it doesn't have a render graph configured. Consider adding a `Camera2d` or `Camera3d` component, or manually adding a `CameraRenderGraph` component if you need a custom render graph.", caller.map(|location|format!("{location}: ")).unwrap_or_default());
</span><span style=color:#86b300>+        warn!("{}Entity {entity} has a `Camera` component, but it doesn't have a render graph configured. Usually, adding a `Camera2d` or `Camera3d` component will work.
</span><span style=color:#86b300>+        However, you may instead need to enable `bevy_core_pipeline`, or may want to manually add a `CameraRenderGraph` component to create a custom render graph.", caller.map(|location|format!("{location}: ")).unwrap_or_default());
</span><span>     }
</span><span> }
</span><span> 
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-09/pr_21112.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>