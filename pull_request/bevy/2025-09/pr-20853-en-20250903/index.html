<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20853 Change edit_gltf_material to use GltfMaterialName
        
    </title><meta content="#20853 Change edit_gltf_material to use GltfMaterialName" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-09/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-09-03</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-09/pr-20853-zh-cn-20250903>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><p>Change edit_gltf_material to use GltfMaterialName<h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Change edit_gltf_material to use GltfMaterialName<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20853<li><strong>Author</strong>: ChristopherBiscardi<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Examples, S-Ready-For-Final-Review<li><strong>Created</strong>: 2025-09-03T18:31:24Z<li><strong>Merged</strong>: 2025-09-03T21:26:07Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>The intention is to make it more obvious how to replace and edit materials from glTF files in a way that is capable of targeting specific materials like a real application would.<p>Partial documentation for #12209<h2 id=solution>Solution</h2><p>Use GltfMaterialName so that it is more obvious how to target specific materials.<h2 id=testing>Testing</h2><pre style=color:#61676c;background-color:#fafafa><code><span>cargo run --example edit_material_on_gltf
</span></code></pre><h2 id=showcase>Showcase</h2><p>The tinting is now only applied to the leather materials.</p><img alt="screenshot-2025-09-03-at-11 21 25@2x" height=1496 src=https://github.com/user-attachments/assets/c5010397-00e7-41cf-864c-bf4632bd1975 width=2560><h2 id=notes>Notes</h2><ul><li>It could be useful to have an extended material that uses the base replacing one of the options, or other material modification examples. I tried to use the existing material extension shader example but it really didn’t look like it fit (and appeared buggy visually, although I don’t believe it was actually buggy).<li>I used the prelude in the example instead of separating out every item like it had previously<li>This is a small improvement, but there are multiple concepts in this example. “Scene-specific overrides” and “editing materials”.<li>This example <em>could</em> have material caches (<code>struct LeatherPartsMat(Handle<..>)</code>) but right now the example has three separate materials that are all used in the scene so it felt like overkill until the problem is actually present.</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a practical issue in Bevy’s material editing example. The original <code>edit_material_on_gltf</code> example demonstrated how to modify materials from glTF files, but it applied color overrides to all materials indiscriminately. This approach didn’t reflect real-world use cases where developers typically need to target specific materials by name.<p>The solution introduces the <code>GltfMaterialName</code> component to enable targeted material editing. Instead of applying color overrides to every material in the scene, the updated example now specifically targets materials named “LeatherPartsMat”. This makes the example more realistic and demonstrates how developers can selectively modify materials based on their original glTF material names.<p>The implementation involved several key changes:<ol><li><p><strong>Import simplification</strong>: The code now uses Bevy’s prelude module instead of individual imports, making the code cleaner and more maintainable.</p><li><p><strong>Enhanced query system</strong>: The material query now includes both <code>MeshMaterial3d&LTStandardMaterial></code> and <code>GltfMaterialName</code>, allowing the system to access material names from the glTF file.</p><li><p><strong>Targeted material processing</strong>: The system now uses a match statement to check material names and only applies color overrides to materials with the specific name “LeatherPartsMat”.</p><li><p><strong>Improved logging</strong>: Added informative log messages that show which materials are being processed and modified, making the example more educational for developers.</p></ol><p>The changes demonstrate a more practical approach to material editing in Bevy, showing how to leverage the <code>GltfMaterialName</code> component that was introduced in previous work. This provides a better foundation for developers who need to implement material overrides in their applications, as it mirrors the real-world scenario of targeting specific materials by name rather than applying global changes.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[SceneInstanceReady event] --> B[change_material system]
</span><span>    B --> C[Query Children recursively]
</span><span>    C --> D[Query MeshMaterial3d and GltfMaterialName]
</span><span>    D --> E{Check material name}
</span><span>    E -->|"LeatherPartsMat"| F[Apply color override]
</span><span>    E -->|Other materials| G[Skip modification]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><ul><li><code>examples/3d/edit_material_on_gltf.rs</code> (+35/-33)</ul><p>The main changes in this file:<ol><li><strong>Import simplification</strong>:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>use </span><span>bevy</span><span style=color:#ed9366>::</span><span>{
</span><span>    app</span><span style=color:#ed9366>::</span><span>{App</span><span style=color:#61676ccc>,</span><span> PluginGroup</span><span style=color:#61676ccc>,</span><span> Startup}</span><span style=color:#61676ccc>,
</span><span>    asset</span><span style=color:#ed9366>::</span><span>{AssetServer</span><span style=color:#61676ccc>,</span><span> Assets}</span><span style=color:#61676ccc>,
</span><span>    audio</span><span style=color:#ed9366>::</span><span>AudioPlugin</span><span style=color:#61676ccc>,
</span><span>    color</span><span style=color:#ed9366>::</span><span>{palettes</span><span style=color:#61676ccc>,</span><span> Color}</span><span style=color:#61676ccc>,
</span><span>    gltf</span><span style=color:#ed9366>::</span><span>GltfAssetLabel</span><span style=color:#61676ccc>,
</span><span>    light</span><span style=color:#ed9366>::</span><span>DirectionalLight</span><span style=color:#61676ccc>,
</span><span>    math</span><span style=color:#ed9366>::</span><span>{Dir3</span><span style=color:#61676ccc>,</span><span> Vec3}</span><span style=color:#61676ccc>,
</span><span>    pbr</span><span style=color:#ed9366>::</span><span>{MeshMaterial3d</span><span style=color:#61676ccc>,</span><span> StandardMaterial}</span><span style=color:#61676ccc>,
</span><span>    prelude</span><span style=color:#ed9366>::</span><span>{Camera3d</span><span style=color:#61676ccc>,</span><span> Children</span><span style=color:#61676ccc>,</span><span> Commands</span><span style=color:#61676ccc>,</span><span> Component</span><span style=color:#61676ccc>,</span><span> On</span><span style=color:#61676ccc>,</span><span> Query</span><span style=color:#61676ccc>,</span><span> Res</span><span style=color:#61676ccc>,</span><span> ResMut</span><span style=color:#61676ccc>,</span><span> Transform}</span><span style=color:#61676ccc>,
</span><span>    scene</span><span style=color:#ed9366>::</span><span>{SceneInstanceReady</span><span style=color:#61676ccc>,</span><span> SceneRoot}</span><span style=color:#61676ccc>,
</span><span>    DefaultPlugins</span><span style=color:#61676ccc>,
</span><span>}</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>use </span><span>bevy</span><span style=color:#ed9366>::</span><span>{
</span><span>    audio</span><span style=color:#ed9366>::</span><span>AudioPlugin</span><span style=color:#61676ccc>, </span><span>color</span><span style=color:#ed9366>::</span><span>palettes</span><span style=color:#61676ccc>, </span><span>gltf</span><span style=color:#ed9366>::</span><span>GltfMaterialName</span><span style=color:#61676ccc>, </span><span>prelude</span><span style=color:#ed9366>::*</span><span style=color:#61676ccc>,
</span><span>    scene</span><span style=color:#ed9366>::</span><span>SceneInstanceReady</span><span style=color:#61676ccc>,
</span><span>}</span><span style=color:#61676ccc>;
</span></code></pre><ol start=2><li><strong>Enhanced material query and processing</strong>:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>change_material</span><span>(
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... parameters
</span><span>    </span><span style=color:#ff8f40>mesh_materials</span><span style=color:#61676ccc>: </span><span>Query<</span><span style=color:#ed9366>&</span><span>MeshMaterial3d&LTStandardMaterial>>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>) {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Process all materials indiscriminately
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>change_material</span><span>(
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... parameters
</span><span>    </span><span style=color:#ff8f40>mesh_materials</span><span style=color:#61676ccc>: </span><span>Query<(</span><span style=color:#ed9366>&</span><span>MeshMaterial3d&LTStandardMaterial>, </span><span style=color:#ed9366>&</span><span>GltfMaterialName)>,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>) {
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Target specific materials by name
</span><span>    </span><span style=color:#fa6e32>match</span><span> material_name</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>0.</span><span style=color:#f07171>as_str</span><span>() {
</span><span>        </span><span style=color:#86b300>"LeatherPartsMat" </span><span style=color:#ed9366>=> </span><span>{
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// Apply color override only to leather materials
</span><span>        }
</span><span>        name </span><span style=color:#ed9366>=> </span><span>{
</span><span>            </span><span style=color:#f07171>info!</span><span>(</span><span style=color:#86b300>"not replacing: {name}"</span><span>)</span><span style=color:#61676ccc>;
</span><span>        }
</span><span>    }
</span><span>}
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/gltf/struct.GltfMaterialName.html target=_blank>Bevy GLTF Materials Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/ecs/query/ target=_blank>Bevy ECS Query System</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/KhronosGroup/glTF/tree/master/specification/2.0#materials target=_blank>GLTF Material Specification</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-09/pr_20853.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>