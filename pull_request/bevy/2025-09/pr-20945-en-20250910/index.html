<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20945 remove some dead code
        
    </title><meta content="#20945 remove some dead code" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-09/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-09-10</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-09/pr-20945-zh-cn-20250910>中文</a></div></div><div class=pr-content><h1 id=remove-unused-materialbindgroupid-struct>Remove Unused <code>MaterialBindGroupId</code> Struct</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: remove some dead code<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20945<li><strong>Author</strong>: atlv24<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, A-Rendering, S-Ready-For-Final-Review<li><strong>Created</strong>: 2025-09-10T02:10:59Z<li><strong>Merged</strong>: 2025-09-10T17:58:04Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>nothing uses it or references it and theres no docs</ul><h2 id=solution>Solution</h2><ul><li>yeet</ul><h2 id=testing>Testing</h2><ul><li>ci</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a straightforward case of dead code removal in Bevy’s PBR (Physically Based Rendering) module. The developer identified that the <code>MaterialBindGroupId</code> struct and its associated implementations were completely unused throughout the codebase, with no references or documentation explaining its purpose.<p>The problem was simple but important: maintaining unused code increases technical debt, adds unnecessary compilation overhead, and creates confusion for developers who might encounter it. In a complex rendering system like Bevy’s PBR module, keeping the codebase clean and focused is crucial for maintainability.<p>The solution was direct and surgical: complete removal of the unused code. The developer deleted the <code>MaterialBindGroupId</code> struct and its three associated method implementations. This approach follows standard software engineering practices for dealing with dead code - when code serves no purpose and has no consumers, the safest and most efficient action is to remove it entirely.<p>The implementation required no complex changes or architectural adjustments. The code removal was localized to a single file and didn’t affect any other systems. The changes were minimal but meaningful:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Removed code:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Clone</span><span style=color:#61676ccc>,</span><span> Copy</span><span style=color:#61676ccc>,</span><span> Default</span><span style=color:#61676ccc>,</span><span> PartialEq</span><span style=color:#61676ccc>,</span><span> Eq</span><span style=color:#61676ccc>,</span><span> Deref</span><span style=color:#61676ccc>,</span><span> DerefMut)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>MaterialBindGroupId</span><span>(pub </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTBindGroupId>)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>MaterialBindGroupId </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>id</span><span style=color:#61676ccc>:</span><span> BindGroupId) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#fa6e32>Self</span><span>(</span><span style=color:#55b4d4;font-style:italic>Some</span><span>(id))
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#55b4d4;font-style:italic>From</span><span>&LTBindGroup> </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>MaterialBindGroupId </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>from</span><span>(</span><span style=color:#ff8f40>value</span><span style=color:#61676ccc>:</span><span> BindGroup) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#fa6e32>Self</span><span style=color:#ed9366>::</span><span>new(value</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>())
</span><span>    }
</span><span>}
</span></code></pre><p>This code was likely part of an earlier implementation or experimental feature that was either abandoned or replaced with a different approach. The struct wrapped an optional <code>BindGroupId</code> and provided conversion methods, but without any actual usage in the codebase, it represented pure technical debt.<p>The impact of this change is positive but minimal. It reduces the compiled binary size slightly and removes cognitive overhead for developers working in this part of the codebase. The PR was properly tested through CI, ensuring that the removal didn’t break any existing functionality - a crucial step even for seemingly trivial changes.<p>This type of cleanup is essential in large codebases like Bevy, where accumulated dead code can significantly impact maintainability over time. The quick review and merge process demonstrates the team’s commitment to code quality and technical debt management.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Dead Code Identification] --> B[Code Analysis]
</span><span>    B --> C{Is Code Used?}
</span><span>    C -->|No| D[Safe to Remove]
</span><span>    C -->|Yes| E[Preserve Code]
</span><span>    D --> F[PR Creation]
</span><span>    F --> G[CI Testing]
</span><span>    G --> H[Merge]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-pbr-src-material-rs><code>crates/bevy_pbr/src/material.rs</code></h3><p>This file contains PBR material-related code in Bevy’s rendering system. The changes remove unused code that was likely part of an earlier material system implementation.<p><strong>Code Removed:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Clone</span><span style=color:#61676ccc>,</span><span> Copy</span><span style=color:#61676ccc>,</span><span> Default</span><span style=color:#61676ccc>,</span><span> PartialEq</span><span style=color:#61676ccc>,</span><span> Eq</span><span style=color:#61676ccc>,</span><span> Deref</span><span style=color:#61676ccc>,</span><span> DerefMut)]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>MaterialBindGroupId</span><span>(pub </span><span style=color:#55b4d4;font-style:italic>Option</span><span>&LTBindGroupId>)</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>MaterialBindGroupId </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>id</span><span style=color:#61676ccc>:</span><span> BindGroupId) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#fa6e32>Self</span><span>(</span><span style=color:#55b4d4;font-style:italic>Some</span><span>(id))
</span><span>    }
</span><span>}
</span><span>
</span><span style=color:#fa6e32>impl </span><span style=color:#55b4d4;font-style:italic>From</span><span>&LTBindGroup> </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>MaterialBindGroupId </span><span>{
</span><span>    </span><span style=color:#fa6e32>fn </span><span style=color:#f29718>from</span><span>(</span><span style=color:#ff8f40>value</span><span style=color:#61676ccc>:</span><span> BindGroup) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>        </span><span style=color:#fa6e32>Self</span><span style=color:#ed9366>::</span><span>new(value</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>())
</span><span>    }
</span><span>}
</span></code></pre><p>The removal of this code simplifies the material module by eliminating unused components that were not referenced anywhere else in the codebase.<h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://rust-lang.github.io/rust-clippy/master/index.html#dead_code target=_blank>Rust Clippy’s dead_code lint</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/ target=_blank>Bevy Engine Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://martinfowler.com/bliki/TechnicalDebt.html target=_blank>Technical Debt Management Strategies</a></ul><h1 id=full-code-diff>Full Code Diff</h1><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_pbr/src/material.rs b/crates/bevy_pbr/src/material.rs
</span><span>index ec46bd4f9fd16..c1d74b8b4c81e 100644
</span><span style=color:#c594c5>--- a/crates/bevy_pbr/src/material.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_pbr/src/material.rs
</span><span style=color:#c594c5>@@ -1768,21 +1768,6 @@ </span><span style=color:#399ee6>where
</span><span>     }
</span><span> }
</span><span> 
</span><span style=color:#f07171>-#[derive(Component, Clone, Copy, Default, PartialEq, Eq, Deref, DerefMut)]
</span><span style=color:#f07171>-pub struct MaterialBindGroupId(pub Option&LTBindGroupId>);
</span><span style=color:#f07171>-
</span><span style=color:#f07171>-impl MaterialBindGroupId {
</span><span style=color:#f07171>-    pub fn new(id: BindGroupId) -> Self {
</span><span style=color:#f07171>-        Self(Some(id))
</span><span style=color:#f07171>-    }
</span><span style=color:#f07171>-}
</span><span style=color:#f07171>-
</span><span style=color:#f07171>-impl From&LTBindGroup> for MaterialBindGroupId {
</span><span style=color:#f07171>-    fn from(value: BindGroup) -> Self {
</span><span style=color:#f07171>-        Self::new(value.id())
</span><span style=color:#f07171>-    }
</span><span style=color:#f07171>-}
</span><span style=color:#f07171>-
</span><span> /// Creates and/or recreates any bind groups that contain materials that were
</span><span> /// modified this frame.
</span><span> pub fn prepare_material_bind_groups(
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-09/pr_20945.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>