<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20955 `RemovedComponents` methods renamed to match `Event` to `Message` rename
        
    </title><meta content="#20955 `RemovedComponents` methods renamed to match `Event` to `Message` rename" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-09/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-09-11</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-09/pr-20955-zh-cn-20250911>中文</a></div></div><div class=pr-content><h1 id=removedcomponents-methods-renamed-to-match-event-to-message-rename>RemovedComponents methods renamed to match Event to Message rename</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: <code>RemovedComponents</code> methods renamed to match <code>Event</code> to <code>Message</code> rename<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20955<li><strong>Author</strong>: alice-i-cecile<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-ECS, C-Code-Quality, S-Ready-For-Final-Review, X-Uncontroversial, D-Straightforward<li><strong>Created</strong>: 2025-09-10T21:57:16Z<li><strong>Merged</strong>: 2025-09-11T03:37:07Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Cleans up the inconsistency noted in https://github.com/bevyengine/bevy/pull/20953#discussion_r2337865381 by @janis-bhm<p>This implementation will continue to use buffered messages for as long as it exists, so this rename is correct despite the caveats listed by @cart <a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/pull/20953#issuecomment-3276401449 target=_blank>here</a>.<h2 id=solution>Solution</h2><ul><li>Search for all usages of <code>event</code> in this file, and replace with messages manually where appropriate<li>Make some deprecated aliases to ease migration<li>Write a quick migration guide</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a naming inconsistency in Bevy’s ECS system that emerged after a broader architectural change. The core issue was that while Bevy had recently renamed buffered events to messages (to distinguish them from observer events), the <code>RemovedComponents</code> system still used event-based terminology throughout its API.<p>The problem was identified during code review of PR #20953, where @janis-bhm noticed the inconsistent naming pattern. The <code>RemovedComponents</code> system internally uses buffered messaging (formerly events) to track component removals, but its methods and types still contained “event” terminology that didn’t align with the new messaging convention.<p>The solution was straightforward but required careful attention to detail. The developer systematically searched for all occurrences of “event” in the relevant files and replaced them with “message” where appropriate. To maintain backward compatibility during migration, deprecated aliases were created for the old method names, allowing existing code to continue working while developers transition to the new API.<p>The implementation involved renaming the core storage type from <code>RemovedComponentEvents</code> to <code>RemovedComponentMessages</code> and updating all related methods:<ul><li><code>events()</code> became <code>messages()</code><li><code>reader_mut_with_events()</code> became <code>reader_mut_with_messages()</code><li>Documentation was updated to reflect the new messaging terminology<li>Deprecated aliases were added to ease the migration path</ul><p>This change improves code consistency and reduces cognitive load for developers working with both observer events and buffered messages. The clear terminology distinction helps prevent confusion about which system uses which communication pattern.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph LR
</span><span>    A[RemovedComponentEvents] --> B[RemovedComponentMessages]
</span><span>    C[events method] --> D[messages method]
</span><span>    E[reader_mut_with_events] --> F[reader_mut_with_messages]
</span><span>    G[Event terminology] --> H[Message terminology]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-ecs-src-lifecycle-rs-63-39><code>crates/bevy_ecs/src/lifecycle.rs</code> (+63/-39)</h3><p>This file contained the core implementation of the removed components tracking system. The changes included renaming the main storage type and its methods to use message terminology instead of event terminology.<p><strong>Key changes:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>RemovedComponentEvents </span><span>{ </span><span style=color:#abb0b6;font-style:italic>/* ... */ </span><span>}
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>RemovedComponentEvents </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>events</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span><</span><span style=color:#ed9366>&</span><span>Messages&LTRemovedComponentEntity>> { </span><span style=color:#abb0b6;font-style:italic>/* ... */ </span><span>}
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>reader_mut_with_events</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span><(...)> { </span><span style=color:#abb0b6;font-style:italic>/* ... */ </span><span>}
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>RemovedComponentMessages </span><span>{ </span><span style=color:#abb0b6;font-style:italic>/* ... */ </span><span>}
</span><span style=color:#fa6e32>impl </span><span style=color:#399ee6>RemovedComponentMessages </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>messages</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span><</span><span style=color:#ed9366>&</span><span>Messages&LTRemovedComponentEntity>> { </span><span style=color:#abb0b6;font-style:italic>/* ... */ </span><span>}
</span><span>    </span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>reader_mut_with_messages</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span><(...)> { </span><span style=color:#abb0b6;font-style:italic>/* ... */ </span><span>}
</span><span>}
</span></code></pre><h3 id=release-content-migration-guides-removed-components-stores-messages-md-16-0><code>release-content/migration-guides/removed_components_stores_messages.md</code> (+16/-0)</h3><p>A new migration guide was created to document the changes and help developers update their code.<p><strong>Content:</strong><pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span>As part of the broader shift to differentiate between buffered events (0.16's </span><span style=color:#ed9366;background-color:#61676c10>`EventWriter`</span><span>/</span><span style=color:#ed9366;background-color:#61676c10>`EventReader`</span><span>) and observer-events,
</span><span>various methods and types related to </span><span style=color:#ed9366;background-color:#61676c10>`RemovedComponents`</span><span> have been renamed.
</span><span>
</span><span>The implementation of </span><span style=color:#ed9366;background-color:#61676c10>`RemovedComponents`</span><span> uses buffered events (now, messages):
</span><span>and as a result, the following types and messages have been renamed:
</span><span>
</span><span style=color:#61676ccc>|</span><span> Old                                         </span><span style=color:#61676ccc>|</span><span> New                                           </span><span style=color:#61676ccc>|
</span><span style=color:#61676ccc>| </span><span>------------------------------------------- </span><span style=color:#61676ccc>| </span><span>--------------------------------------------- </span><span style=color:#61676ccc>|
</span><span style=color:#61676ccc>| </span><span style=color:#ed9366;background-color:#61676c10>`RemovedComponents::events`</span><span>                 </span><span style=color:#61676ccc>| </span><span style=color:#ed9366;background-color:#61676c10>`RemovedComponents::messages`</span><span>                 </span><span style=color:#61676ccc>|
</span><span style=color:#61676ccc>| </span><span style=color:#ed9366;background-color:#61676c10>`RemovedComponents::reader_mut_with_events`</span><span> </span><span style=color:#61676ccc>| </span><span style=color:#ed9366;background-color:#61676c10>`RemovedComponents::reader_mut_with_messages`</span><span> </span><span style=color:#61676ccc>|
</span><span style=color:#61676ccc>| </span><span style=color:#ed9366;background-color:#61676c10>`RemovedComponentEvents`</span><span>                    </span><span style=color:#61676ccc>| </span><span style=color:#ed9366;background-color:#61676c10>`RemovedComponentMessages`</span><span>                    </span><span style=color:#61676ccc>|
</span></code></pre><h3 id=release-content-migration-guides-send-event-rename-md-5-5><code>release-content/migration-guides/send_event_rename.md</code> (+5/-5)</h3><p>An existing migration guide was updated to include the changes from this PR.<p><strong>Changes:</strong><pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span>-</span><span style=color:#61676ccc>| </span><span style=color:#ed9366;background-color:#61676c10>`RemovedComponentEvents::send`</span><span>      </span><span style=color:#61676ccc>| </span><span style=color:#ed9366;background-color:#61676c10>`RemovedComponentEvents::write`</span><span>      </span><span style=color:#61676ccc>|
</span><span>+</span><span style=color:#61676ccc>|</span><span> `RemovedComponentEvents::send`      </span><span style=color:#61676ccc>|</span><span> `RemovedComponentEvents::write`        </span><span style=color:#61676ccc>|
</span></code></pre><h3 id=crates-bevy-ecs-src-world-mod-rs-4-4-and-crates-bevy-ecs-src-world-unsafe-world-cell-rs-3-3><code>crates/bevy_ecs/src/world/mod.rs</code> (+4/-4) and <code>crates/bevy_ecs/src/world/unsafe_world_cell.rs</code> (+3/-3)</h3><p>These files needed updates to reference the newly renamed types and methods throughout the codebase.<p><strong>Example change:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>use </span><span>lifecycle</span><span style=color:#ed9366>::</span><span>{ComponentHooks</span><span style=color:#61676ccc>,</span><span> RemovedComponentEvents</span><span style=color:#61676ccc>, </span><span style=color:#abb0b6;font-style:italic>/* ... */</span><span>}</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) removed_components</span><span style=color:#61676ccc>:</span><span> RemovedComponentEvents</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>use </span><span>lifecycle</span><span style=color:#ed9366>::</span><span>{ComponentHooks</span><span style=color:#61676ccc>,</span><span> RemovedComponentMessages</span><span style=color:#61676ccc>, </span><span style=color:#abb0b6;font-style:italic>/* ... */</span><span>}</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) removed_components</span><span style=color:#61676ccc>:</span><span> RemovedComponentMessages</span><span style=color:#61676ccc>,
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/pull/20953 target=_blank>PR #20953</a> - The original PR that introduced the Event to Message rename<li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/the-bevy-book/ecs/ target=_blank>Bevy ECS Documentation</a> - Official documentation on Bevy’s Entity Component System<li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/the-bevy-book/ecs/messages/ target=_blank>Message System in Bevy</a> - Guide to Bevy’s messaging system</ul><h1 id=full-code-diff>Full Code Diff</h1><p>[See provided code diff in original request]</div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-09/pr_20955.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>