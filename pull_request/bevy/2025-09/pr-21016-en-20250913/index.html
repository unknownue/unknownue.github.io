<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #21016 fps overlay: allow picking through
        
    </title><meta content="#21016 fps overlay: allow picking through" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-09/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-09-13</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-09/pr-21016-zh-cn-20250913>中文</a></div></div><div class=pr-content><h1 id=fps-overlay-allow-picking-through>fps overlay: allow picking through</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: fps overlay: allow picking through<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/21016<li><strong>Author</strong>: torsteingrindvik<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, A-UI, C-Usability, A-Dev-Tools<li><strong>Created</strong>: 2025-09-13T16:44:12Z<li><strong>Merged</strong>: 2025-09-13T21:55:28Z<li><strong>Merged By</strong>: james7132</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>The current FPS overlay does not allow users to pick through it. Since the FPS overlay is absolutely positioned it’s likely it will be on top of other UI, which can create problems.<h2 id=solution>Solution</h2><p>Ignore picking for the FPS overlay on the assumption it’s more likely users want to click things <em>under</em> it.<h2 id=testing>Testing</h2><p>See showcase.<h2 id=showcase>Showcase</h2><p>https://github.com/user-attachments/assets/87b3a6b2-4745-4fb7-a846-2edb96ff97d7<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The FPS overlay in Bevy’s developer tools was causing usability issues by blocking interaction with UI elements positioned beneath it. Since the overlay uses absolute positioning and renders on top of other UI components, users couldn’t click through it to interact with underlying interface elements. This created a practical problem for developers who needed to monitor performance metrics while simultaneously interacting with their application’s UI.<p>The solution implemented was straightforward and targeted: add the <code>Pickable::IGNORE</code> component to all entities comprising the FPS overlay. This approach leverages Bevy’s existing picking system to allow mouse events to pass through the overlay transparently, reaching whatever UI elements or game objects are positioned behind it.<p>The implementation required minimal changes, adding just three lines of code across two entity spawns in the overlay setup function. The first addition prevents picking on the main overlay container, while the second ensures the text elements within the overlay also ignore picking events. This comprehensive approach ensures that no part of the FPS overlay will block interaction with underlying elements.<p>From a technical perspective, this change demonstrates Bevy’s component-based architecture effectively. By simply adding the <code>Pickable::IGNORE</code> component, the overlay entities are excluded from the picking system without affecting their visual rendering or other functionality. This is a clean solution that maintains separation of concerns while solving the usability issue.<p>The impact of this change is immediately beneficial for developers using the FPS overlay tool. They can now interact with UI elements positioned beneath the overlay without needing to temporarily disable or move the performance monitoring tool. This improves the developer experience and workflow efficiency when debugging performance issues.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[FPS Overlay System] --> B[Adds Pickable::IGNORE]
</span><span>    B --> C[Overlay Container Entity]
</span><span>    B --> D[Text Entity]
</span><span>    B --> E[Graph Background Entity]
</span><span>    C --> F[Allows picking through overlay]
</span><span>    D --> F
</span><span>    E --> F
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><ul><li><code>crates/bevy_dev_tools/src/fps_overlay.rs</code> (+4/-0)</ul><p>The changes add <code>Pickable::IGNORE</code> components to the FPS overlay entities to allow mouse interactions to pass through to underlying UI elements.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_dev_tools/src/fps_overlay.rs
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>            Node {
</span><span>                </span><span style=color:#abb0b6;font-style:italic>// ... existing node configuration
</span><span>            }</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// Render overlay on top of everything
</span><span>            GlobalZIndex(</span><span style=color:#ff8f40>FPS_OVERLAY_ZINDEX</span><span>)</span><span style=color:#61676ccc>,
</span><span>        ))
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>            Node {
</span><span>                </span><span style=color:#abb0b6;font-style:italic>// ... existing node configuration
</span><span>            }</span><span style=color:#61676ccc>,
</span><span>            </span><span style=color:#abb0b6;font-style:italic>// Render overlay on top of everything
</span><span>            GlobalZIndex(</span><span style=color:#ff8f40>FPS_OVERLAY_ZINDEX</span><span>)</span><span style=color:#61676ccc>,
</span><span>            Pickable</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>IGNORE</span><span style=color:#61676ccc>,
</span><span>        ))
</span></code></pre><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_dev_tools/src/fps_overlay.rs
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>            p</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>                TextBundle</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>,
</span><span>                overlay_config</span><span style=color:#ed9366>.</span><span>text_config</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>,
</span><span>                TextColor(overlay_config</span><span style=color:#ed9366>.</span><span>text_color)</span><span style=color:#61676ccc>,
</span><span>                FpsText</span><span style=color:#61676ccc>,
</span><span>            ))
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>            p</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>                TextBundle</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>,
</span><span>                overlay_config</span><span style=color:#ed9366>.</span><span>text_config</span><span style=color:#ed9366>.</span><span style=color:#f07171>clone</span><span>()</span><span style=color:#61676ccc>,
</span><span>                TextColor(overlay_config</span><span style=color:#ed9366>.</span><span>text_color)</span><span style=color:#61676ccc>,
</span><span>                FpsText</span><span style=color:#61676ccc>,
</span><span>                Pickable</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>IGNORE</span><span style=color:#61676ccc>,
</span><span>            ))
</span></code></pre><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// File: crates/bevy_dev_tools/src/fps_overlay.rs
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>                MaterialNode</span><span style=color:#ed9366>::</span><span>from(frame_time_graph_materials</span><span style=color:#ed9366>.</span><span style=color:#f07171>add</span><span>(FrametimeGraphMaterial {
</span><span>                    </span><span style=color:#abb0b6;font-style:italic>// ... material configuration
</span><span>                })</span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>                MaterialNode</span><span style=color:#ed9366>::</span><span>from(frame_time_graph_materials</span><span style=color:#ed9366>.</span><span style=color:#f07171>add</span><span>(FrametimeGraphMaterial {
</span><span>                    </span><span style=color:#abb0b6;font-style:italic>// ... material configuration
</span><span>                })</span><span style=color:#61676ccc>,
</span><span>                Pickable</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>IGNORE</span><span style=color:#61676ccc>,
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/introduction/11-ui/ target=_blank>Bevy UI Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/tree/main/crates/bevy_picking target=_blank>Bevy Picking System</a><li><a rel="noopener nofollow noreferrer" href=https://gameprogrammingpatterns.com/component.html target=_blank>Component-Based Architecture Patterns</a></ul><h1 id=full-code-diff>Full Code Diff</h1><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_dev_tools/src/fps_overlay.rs b/crates/bevy_dev_tools/src/fps_overlay.rs
</span><span>index c3b22e8b02da2..3c573611f70b3 100644
</span><span style=color:#c594c5>--- a/crates/bevy_dev_tools/src/fps_overlay.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_dev_tools/src/fps_overlay.rs
</span><span style=color:#c594c5>@@ -15,6 +15,7 @@ </span><span style=color:#399ee6>use bevy_ecs::{
</span><span>     schedule::{common_conditions::resource_changed, IntoScheduleConfigs},
</span><span>     system::{Commands, Query, Res, ResMut},
</span><span> };
</span><span style=color:#86b300>+use bevy_picking::Pickable;
</span><span> use bevy_render::storage::ShaderStorageBuffer;
</span><span> use bevy_text::{Font, TextColor, TextFont, TextSpan};
</span><span> use bevy_time::Time;
</span><span style=color:#c594c5>@@ -166,6 +167,7 @@ </span><span style=color:#399ee6>fn setup(
</span><span>             },
</span><span>             // Render overlay on top of everything
</span><span>             GlobalZIndex(FPS_OVERLAY_ZINDEX),
</span><span style=color:#86b300>+            Pickable::IGNORE,
</span><span>         ))
</span><span>         .with_children(|p| {
</span><span>             p.spawn((
</span><span style=color:#c594c5>@@ -173,6 +175,7 @@ </span><span style=color:#399ee6>fn setup(
</span><span>                 overlay_config.text_config.clone(),
</span><span>                 TextColor(overlay_config.text_color),
</span><span>                 FpsText,
</span><span style=color:#86b300>+                Pickable::IGNORE,
</span><span>             ))
</span><span>             .with_child((TextSpan::default(), overlay_config.text_config.clone()));
</span><span> 
</span><span style=color:#c594c5>@@ -188,6 +191,7 @@ </span><span style=color:#399ee6>fn setup(
</span><span>                     },
</span><span>                     ..Default::default()
</span><span>                 },
</span><span style=color:#86b300>+                Pickable::IGNORE,
</span><span>                 MaterialNode::from(frame_time_graph_materials.add(FrametimeGraphMaterial {
</span><span>                     values: buffers.add(ShaderStorageBuffer {
</span><span>                         // Initialize with dummy data because the default (`data: None`) will
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-09/pr_21016.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>