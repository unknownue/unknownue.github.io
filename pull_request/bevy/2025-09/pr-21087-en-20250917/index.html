<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #21087 add doc comment to manual texture view and handle
        
    </title><meta content="#21087 add doc comment to manual texture view and handle" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-09/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-09-17</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-09/pr-21087-zh-cn-20250917>中文</a></div></div><div class=pr-content><h1 id=add-doc-comment-to-manual-texture-view-and-handle>add doc comment to manual texture view and handle</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: add doc comment to manual texture view and handle<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/21087<li><strong>Author</strong>: janis-bhm<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, A-Rendering, S-Ready-For-Final-Review, X-Uncontroversial, D-Straightforward<li><strong>Created</strong>: 2025-09-16T15:04:35Z<li><strong>Merged</strong>: 2025-09-17T20:17:46Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Addresses #21037<h2 id=solution>Solution</h2><p>explain how <code>ManualTextureViews</code> can be used.<hr><p>I think the handles should be atomically increasing ids like other internal ids so that users don’t have to pick a random offset into <code>u32</code> to avoid colliding with other <code>ManualTextureView</code>s (I’m not sure if there ever are multiple systems/libraries using this functionality in the same world, but it’s not forbidden). A quick search through github shows most people just start at 0.<p>I’m hoping these docs might make it into 0.17 though, so unless someone disagrees with me or that change would prevent some use-case I’m not aware of, I plan on creating a PR for that in in 0.18.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a documentation gap in Bevy’s rendering system. The <code>ManualTextureViews</code> resource and <code>ManualTextureViewHandle</code> component lacked proper documentation, making it difficult for developers to understand how to use them effectively for custom rendering scenarios.<p>The core problem was straightforward: developers needed clear guidance on how to create and use manual texture views for rendering. Without proper documentation, users had to rely on trial and error or search through GitHub examples, which often showed incomplete or potentially problematic implementations.<p>The solution approach focused on adding comprehensive doc comments that explain both the purpose and practical usage of these components. The implementation adds two key documentation improvements:<ol><li>A cross-reference from <code>ManualTextureViewHandle</code> to the main <code>ManualTextureViews</code> resource<li>A complete usage example showing how to create a texture view, register it, and configure a camera to render to it</ol><p>The documentation now clearly explains that:<ul><li><code>ManualTextureViews</code> dereferences to a <code>HashMap&LTManualTextureViewHandle, ManualTextureView></code><li>Users must choose an unused handle value when inserting new views<li>Cameras can be configured to render to these views using <code>RenderTarget::TextureView(handle)</code></ul><p>The author also identified a potential improvement for future versions - using atomically increasing IDs instead of requiring users to manually choose handle values to avoid collisions. However, this was considered out of scope for the current documentation-focused PR.<p>These changes make the API more accessible and reduce the likelihood of implementation errors, particularly around handle collision issues that the author observed in existing community code.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[ManualTextureViewHandle] --> B[ManualTextureViews Resource]
</span><span>    B --> C[HashMap Storage]
</span><span>    C --> D[ManualTextureView]
</span><span>    E[Camera Component] --> F[RenderTarget::TextureView]
</span><span>    F --> A
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-render-src-texture-manual-texture-view-rs-24-1><code>crates/bevy_render/src/texture/manual_texture_view.rs</code> (+24/-1)</h3><p>This file received the most significant documentation improvements. The existing one-line comment was replaced with comprehensive documentation including a complete usage example.<p><strong>Before:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// Stores manually managed [`ManualTextureView`]s for use as a [`bevy_camera::RenderTarget`].
</span></code></pre><p><strong>After:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// Resource that stores manually managed [`ManualTextureView`]s for use as a [`RenderTarget`](bevy_camera::RenderTarget).
</span><span style=color:#abb0b6;font-style:italic>/// This type dereferences to a `HashMap&LTManualTextureViewHandle, ManualTextureView>`.
</span><span style=color:#abb0b6;font-style:italic>/// To add a new texture view, pick a new [`ManualTextureViewHandle`] and insert it into the map.
</span><span style=color:#abb0b6;font-style:italic>/// Then, to render to the view, set a [`Camera`](bevy_camera::Camera)s `target` to `RenderTarget::TextureView(handle)`.
</span><span style=color:#abb0b6;font-style:italic>/// ```ignore
</span><span style=color:#abb0b6;font-style:italic>/// # use bevy_ecs::prelude::*;
</span><span style=color:#abb0b6;font-style:italic>/// # let mut world = World::default();
</span><span style=color:#abb0b6;font-style:italic>/// # world.insert_resource(ManualTextureViews::default());
</span><span style=color:#abb0b6;font-style:italic>/// # let texture_view = todo!();
</span><span style=color:#abb0b6;font-style:italic>/// let manual_views = world.resource_mut::&LTManualTextureViews>();
</span><span style=color:#abb0b6;font-style:italic>/// let manual_view = ManualTextureView::with_default_format(texture_view, UVec2::new(1024, 1024));
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// // Choose an unused handle value; it's likely only you are inserting manual views.
</span><span style=color:#abb0b6;font-style:italic>/// const MANUAL_VIEW_HANDLE: ManualTextureViewHandle = ManualTextureViewHandle::new(42);
</span><span style=color:#abb0b6;font-style:italic>/// manual_views.insert(MANUAL_VIEW_HANDLE, manual_view);
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// // Now you can spawn a Cemera that renders to the manual view:
</span><span style=color:#abb0b6;font-style:italic>/// # use bevy_camera::{Camera, RenderTarget};
</span><span style=color:#abb0b6;font-style:italic>/// world.spawn(Camera {
</span><span style=color:#abb0b6;font-style:italic>///     target: RenderTarget::TextureView(MANUAL_VIEW_HANDLE),
</span><span style=color:#abb0b6;font-style:italic>///     ..Default::default()
</span><span style=color:#abb0b6;font-style:italic>/// });
</span><span style=color:#abb0b6;font-style:italic>/// ```
</span><span style=color:#abb0b6;font-style:italic>/// Bevy will then use the `ManualTextureViews` resource to find your texture view and render to it.
</span></code></pre><h3 id=crates-bevy-camera-src-camera-rs-2-0><code>crates/bevy_camera/src/camera.rs</code> (+2/-0)</h3><p>This file received a minor documentation addition that cross-references the main documentation.<p><strong>Before:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// A unique id that corresponds to a specific `ManualTextureView` in the `ManualTextureViews` collection.
</span></code></pre><p><strong>After:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// A unique id that corresponds to a specific `ManualTextureView` in the `ManualTextureViews` collection.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// See `ManualTextureViews` in `bevy_camera` for more details.
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/rendering/render-targets/ target=_blank>Bevy Render Targets Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/ecs/resources/ target=_blank>Bevy ECS Resources</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/std/collections/struct.HashMap.html target=_blank>Rust HashMap Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_camera/latest/bevy_camera/struct.Camera.html target=_blank>Bevy Camera Component</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-09/pr_21087.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>