<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20754 Add a `WinitSettings::continuous` constructor
        
    </title><meta content="#20754 Add a `WinitSettings::continuous` constructor" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-09/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-09-11</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-09/pr-20754-zh-cn-20250911>中文</a></div></div><div class=pr-content><h1 id=add-a-winitsettings-continuous-constructor>Add a <code>WinitSettings::continuous</code> constructor</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Add a <code>WinitSettings::continuous</code> constructor<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20754<li><strong>Author</strong>: ickshonpe<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, A-Windowing, C-Usability, S-Ready-For-Final-Review<li><strong>Created</strong>: 2025-08-25T17:03:02Z<li><strong>Merged</strong>: 2025-09-11T20:11:09Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description>Description</h2><h1 id=objective>Objective</h1><ul><li>Add a constructor to <code>WinitSettings</code> for the continuous update mode used by the stress tests.</ul><h2 id=solution>Solution</h2><ul><li>Add the constructor.</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a straightforward but repetitive pattern found across Bevy’s stress test examples. The problem was that multiple stress tests needed to configure their window update mode to run continuously for performance benchmarking, but each was manually constructing the same <code>WinitSettings</code> configuration.<p>Before this change, each stress test example contained repetitive boilerplate code:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings {
</span><span>    focused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>    unfocused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>})
</span></code></pre><p>The solution was to add a convenience constructor method <code>continuous()</code> to the <code>WinitSettings</code> struct that encapsulates this common configuration pattern. This constructor returns a <code>WinitSettings</code> instance with both <code>focused_mode</code> and <code>unfocused_mode</code> set to <code>UpdateMode::Continuous</code>, ensuring the application updates as fast as possible regardless of window focus state.<p>The implementation follows established patterns in the Bevy codebase for providing convenient constructors that encapsulate common configuration scenarios. The new method includes clear documentation explaining its purpose and behavior.<p>After implementing the constructor, the PR updates all stress test examples to use this new method, replacing the repetitive manual configuration with a single method call:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings</span><span style=color:#ed9366>::</span><span>continuous())
</span></code></pre><p>This change improves code maintainability by reducing duplication and making the intent clearer. If the continuous update mode configuration needs to change in the future, it can be updated in one place rather than across multiple files.<p>The changes are minimal and focused, affecting only the configuration code without altering any actual game logic or rendering behavior. The stress tests continue to function exactly as before, but with cleaner, more maintainable initialization code.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[WinitSettings struct] --> B[new continuous() constructor]
</span><span>    B --> C[Sets both focused_mode and unfocused_mode to Continuous]
</span><span>    C --> D[Stress test examples]
</span><span>    D --> E[bevymark.rs]
</span><span>    D --> F[many_animated_sprites.rs]
</span><span>    D --> G[many_buttons.rs]
</span><span>    D --> H[many_foxes.rs]
</span><span>    D --> I[11 other stress tests]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-winit-src-winit-config-rs-10-0><code>crates/bevy_winit/src/winit_config.rs</code> (+10/-0)</h3><p>Added a new constructor method for continuous update mode:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>/// The application will update as fast possible.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// Uses [`Continuous`](UpdateMode::Continuous) regardless of whether windows have focus.
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>continuous</span><span>() </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>    WinitSettings {
</span><span>        focused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>        unfocused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>    }
</span><span>}
</span></code></pre><h3 id=multiple-stress-test-example-files>Multiple stress test example files</h3><p>Updated 12 stress test examples to use the new constructor instead of manual configuration. Example from <code>examples/stress_tests/bevymark.rs</code>:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings {
</span><span>    focused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>    unfocused_mode</span><span style=color:#61676ccc>: </span><span>UpdateMode</span><span style=color:#ed9366>::</span><span>Continuous</span><span style=color:#61676ccc>,
</span><span>})
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert_resource</span><span>(WinitSettings</span><span style=color:#ed9366>::</span><span>continuous())
</span></code></pre><p>Similar changes were made to:<ul><li><code>many_animated_sprites.rs</code><li><code>many_buttons.rs</code><li><code>many_foxes.rs</code><li><code>many_cameras_lights.rs</code><li><code>many_gizmos.rs</code><li><code>many_glyphs.rs</code><li><code>many_gradients.rs</code><li><code>many_lights.rs</code><li><code>many_sprites.rs</code><li><code>many_text2d.rs</code><li><code>text_pipeline.rs</code></ul><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_winit/latest/bevy_winit/struct.WinitSettings.html target=_blank>Bevy Winit Settings Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/winit/enum.UpdateMode.html target=_blank>Bevy UpdateMode Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/1.0.0/style/ownership/builders.html target=_blank>Rust Constructor Patterns</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-09/pr_20754.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>