<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #21007 Document missing brp methods
        
    </title><meta content="#21007 Document missing brp methods" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-09/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-09-17</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-09/pr-21007-zh-cn-20250917>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><p>Document missing brp methods<h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Document missing brp methods<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/21007<li><strong>Author</strong>: MarcGuiselin<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, D-Trivial, S-Ready-For-Final-Review, A-Editor<li><strong>Created</strong>: 2025-09-13T13:25:34Z<li><strong>Merged</strong>: 2025-09-17T21:21:51Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Document missing brp methods:<ul><li><code>registry.schema</code><li><code>rpc.discover</code></ul><h2 id=solution>Solution</h2><ul><li>Update crate-level documentation</ul><h2 id=testing>Testing</h2><ul><li><code>cargo doc -p bevy_remote</code></ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a documentation gap in Bevy’s remote protocol (BRP) implementation. The bevy_remote crate provides functionality for remote procedure calls between Bevy applications, but two key methods were missing from the comprehensive documentation: <code>registry.schema</code> and <code>rpc.discover</code>.<p>The problem was straightforward but important for developer experience. Without proper documentation, users of the remote protocol wouldn’t know these methods existed or how to use them effectively. This could lead to duplicated effort as developers might try to implement similar functionality themselves, or simply miss out on powerful features of the remote protocol.<p>The solution approach was minimal and surgical - update the existing crate-level documentation to include these two missing methods. The author didn’t need to modify any functionality, just document what was already implemented but not properly exposed in the docs.<p>Looking at the implementation, we can see the changes follow the existing documentation pattern established in the file. The <code>registry.schema</code> method allows clients to retrieve schema information about registered types in the Bevy app’s type registry, which is crucial for understanding the structure of types available remotely. The documentation clearly explains the optional parameters: <code>with_crates</code>, <code>without_crates</code>, and <code>type_limit</code> constraints, and specifies that it returns a map of fully-qualified type names to <code>JsonSchemaBevyType</code> objects.<p>The <code>rpc.discover</code> method follows the OpenRPC specification for service discovery, providing a standardized way for clients to discover available remote methods and server information. This is particularly valuable for tooling and automated clients that need to dynamically understand what capabilities are available.<p>A minor but thoughtful change was the correction of a documentation header level - changing <code>### Example</code> to <code>#### Example</code> to maintain proper heading hierarchy within the documentation structure.<p>The impact of these changes is improved developer experience and better discoverability of the remote protocol’s capabilities. Developers can now easily understand and utilize these methods without needing to dig through source code or guess at their functionality.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Bevy Remote Protocol] --> B[Registry Methods]
</span><span>    A --> C[RPC Methods]
</span><span>    B --> D[registry.schema - Type schema discovery]
</span><span>    C --> E[rpc.discover - Service discovery]
</span><span>    
</span><span>    D --> F[Returns JsonSchemaBevyType objects]
</span><span>    E --> G[Follows OpenRPC specification]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><p><strong>crates/bevy_remote/src/lib.rs</strong> (+27/-1)<p>This file contains the main documentation for the Bevy Remote Protocol. The changes add comprehensive documentation for two previously undocumented methods.<p>Key modifications:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>// (No documentation for registry.schema or rpc.discover methods)
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>// ### `registry.schema`
</span><span style=color:#abb0b6;font-style:italic>//
</span><span style=color:#abb0b6;font-style:italic>// Retrieve schema information about registered types in the Bevy app's type registry.
</span><span style=color:#abb0b6;font-style:italic>//
</span><span style=color:#abb0b6;font-style:italic>// `params` (optional):
</span><span style=color:#abb0b6;font-style:italic>// - `with_crates`: An array of crate names to include in the results. When empty or omitted, types from all crates will be included.
</span><span style=color:#abb0b6;font-style:italic>// - `without_crates`: An array of crate names to exclude from the results. When empty or omitted, no crates will be excluded.
</span><span style=color:#abb0b6;font-style:italic>// - `type_limit`: Additional type constraints:
</span><span style=color:#abb0b6;font-style:italic>//   - `with`: An array of [fully-qualified type names] that must be present for a type to be included
</span><span style=color:#abb0b6;font-style:italic>//   - `without`: An array of [fully-qualified type names] that must not be present for a type to be excluded
</span><span style=color:#abb0b6;font-style:italic>//
</span><span style=color:#abb0b6;font-style:italic>// `result`: A map associating each type's [fully-qualified type name] to a [`JsonSchemaBevyType`](crate::schemas::json_schema::JsonSchemaBevyType).
</span><span style=color:#abb0b6;font-style:italic>// This contains schema information about that type, including field definitions, type information, reflect type information, and other metadata
</span><span style=color:#abb0b6;font-style:italic>// helpful for understanding the structure of the type.
</span><span style=color:#abb0b6;font-style:italic>//
</span><span style=color:#abb0b6;font-style:italic>// ### `rpc.discover`
</span><span style=color:#abb0b6;font-style:italic>//
</span><span style=color:#abb0b6;font-style:italic>// Discover available remote methods and server information. This follows the [`OpenRPC` specification for service discovery](https://spec.open-rpc.org/#service-discovery-method).
</span><span style=color:#abb0b6;font-style:italic>//
</span><span style=color:#abb0b6;font-style:italic>// This method takes no parameters.
</span><span style=color:#abb0b6;font-style:italic>//
</span><span style=color:#abb0b6;font-style:italic>// `result`: An `OpenRPC` document containing:
</span><span style=color:#abb0b6;font-style:italic>// - Information about all available remote methods
</span><span style=color:#abb0b6;font-style:italic>// - Server connection information (when using HTTP transport)
</span><span style=color:#abb0b6;font-style:italic>// - `OpenRPC` specification version
</span></code></pre><p>Additionally, a minor header level correction:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>// ### Example
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>// #### Example
</span></code></pre><p>These changes complete the documentation coverage for the Bevy Remote Protocol methods, ensuring developers have full visibility into all available functionality.<h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://spec.open-rpc.org/ target=_blank>OpenRPC Specification</a> - The specification that defines the service discovery method implemented by <code>rpc.discover</code><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/introduction/reflection/ target=_blank>Bevy Reflection Documentation</a> - For understanding how type registration and reflection work in Bevy<li><a rel="noopener nofollow noreferrer" href=https://json-schema.org/ target=_blank>JSON Schema Specification</a> - Relevant for understanding the schema information returned by <code>registry.schema</code></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-09/pr_21007.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>