<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20995 Gave bevy::app::App the must_use attribute
        
    </title><meta content="#20995 Gave bevy::app::App the must_use attribute" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-09/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-09-14</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-09/pr-20995-zh-cn-20250914>中文</a></div></div><div class=pr-content><h1 id=gave-bevy-app-app-the-must-use-attribute>Gave bevy::app::App the must_use attribute</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Gave bevy::app::App the must_use attribute<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20995<li><strong>Author</strong>: shoobooshooboo<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Usability, A-App, D-Straightforward, S-Needs-Review<li><strong>Created</strong>: 2025-09-13T00:18:47Z<li><strong>Merged</strong>: 2025-09-14T19:35:50Z<li><strong>Merged By</strong>: mockersf</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>Attempts #5386<h2 id=solution>Solution</h2><p>Added the <code>must_use</code> attribute to <code>bevy::app::App</code><h2 id=testing>Testing</h2><p>I tested it by linking the library to another cargo package and calling App::new() without using the return value.<p>(this is my first pr, so i just chose something very easy.)<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a straightforward but important usability improvement in the Bevy engine. The core issue was that developers could create an <code>App</code> instance without using it, which would compile without warnings but represent a logical error in most cases.<p>The <code>App</code> struct in Bevy is the central component for building and running applications. Creating an instance without eventually calling methods like <code>run()</code> or using it to configure systems would be meaningless - the app wouldn’t actually do anything. This is a common pitfall, especially for developers new to the framework.<p>The solution implemented here leverages Rust’s built-in <code>#[must_use]</code> attribute. When applied to a type, this attribute generates compiler warnings when instances of that type are created but not used. This provides immediate feedback to developers who might have forgotten to properly utilize their App instance.<p>The implementation is minimal but effective - a single attribute addition that provides guardrails against a common mistake. This follows Rust’s philosophy of catching errors at compile time rather than runtime.<p>From an engineering perspective, this change demonstrates good API design practice. It makes the framework more discoverable and helps prevent user errors without adding runtime overhead. The attribute is purely a compile-time check that doesn’t affect the generated code or performance.<p>The testing approach described in the PR is practical and appropriate for this type of change. By creating a separate package that attempts to use App without storing the result, the author verified that the compiler would indeed generate the expected warning.<p>This change fits well within Bevy’s focus on developer experience and follows established patterns in the Rust ecosystem. Many foundational types in standard library and popular crates use <code>must_use</code> to prevent similar classes of errors.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Developer creates App] --> B{App instance used?}
</span><span>    B -->|Yes| C[Normal execution]
</span><span>    B -->|No| D[Compiler warning]
</span><span>    D --> E[Developer fixes code]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><p><strong>File: crates/bevy_app/src/app.rs</strong><p>This is the only file modified in the PR. The change adds the <code>#[must_use]</code> attribute to the App struct definition.<p><strong>Before:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>App </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) sub_apps</span><span style=color:#61676ccc>:</span><span> SubApps,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// The function that will manage the app's lifecycle.
</span><span>    </span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) runner</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Box</span><span>&LTdyn AppRunner>,
</span><span>    </span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) schedule</span><span style=color:#61676ccc>:</span><span> Schedule,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... other fields
</span><span>}
</span></code></pre><p><strong>After:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>must_use</span><span>]
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>App </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) sub_apps</span><span style=color:#61676ccc>:</span><span> SubApps,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>/// The function that will manage the app's lifecycle.
</span><span>    </span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) runner</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Box</span><span>&LTdyn AppRunner>,
</span><span>    </span><span style=color:#fa6e32>pub</span><span>(</span><span style=color:#fa6e32>crate</span><span>) schedule</span><span style=color:#61676ccc>:</span><span> Schedule,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ... other fields
</span><span>}
</span></code></pre><p>The change is minimal but significant - it adds compiler-enforced guidance that helps prevent a common class of user errors when working with Bevy’s application framework.<h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/reference/attributes/diagnostics.html#the-must_use-attribute target=_blank>Rust Documentation: The must_use Attribute</a><li><a rel="noopener nofollow noreferrer" href=https://rust-lang.github.io/api-guidelines/interoperability.html#types-eagerly-implement-common-traits-c-common-traits target=_blank>Rust API Guidelines: C-COMMON-TRAITS</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy/latest/bevy/app/struct.App.html target=_blank>Bevy Engine Documentation: App</a></ul><h1 id=full-code-diff>Full Code Diff</h1><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/crates/bevy_app/src/app.rs b/crates/bevy_app/src/app.rs
</span><span>index 6985d9169af32..5e0021afe43ce 100644
</span><span style=color:#c594c5>--- a/crates/bevy_app/src/app.rs
</span><span style=color:#c594c5>+++ b/crates/bevy_app/src/app.rs
</span><span style=color:#c594c5>@@ -77,6 +77,7 @@ </span><span style=color:#399ee6>pub(crate) enum AppError {
</span><span> ///    println!("hello world");
</span><span> /// }
</span><span> /// */
</span><span style=color:#86b300>+#[must_use]
</span><span> pub struct App {
</span><span>     pub(crate) sub_apps: SubApps,
</span><span>     /// The function that will manage the app's lifecycle.
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-09/pr_20995.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>