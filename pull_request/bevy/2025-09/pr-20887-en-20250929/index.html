<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20887 Change `bevy_math` to use `inline` instead of `inline(always)`
        
    </title><meta content="#20887 Change `bevy_math` to use `inline` instead of `inline(always)`" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-09/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-09-29</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-09/pr-20887-zh-cn-20250929>中文</a></div></div><div class=pr-content><h1 id=change-bevy-math-to-use-inline-instead-of-inline-always>Change <code>bevy_math</code> to use <code>inline</code> instead of <code>inline(always)</code></h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Change <code>bevy_math</code> to use <code>inline</code> instead of <code>inline(always)</code><li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20887<li><strong>Author</strong>: greeble-dev<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Performance, S-Ready-For-Final-Review, A-Math, X-Contentious<li><strong>Created</strong>: 2025-09-05T14:33:09Z<li><strong>Merged</strong>: 2025-09-29T23:15:59Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h2 id=objective>Objective</h2><p>Move <code>bevy_math</code> closer to recommended inlining practices, and avoid problems with debuggers and optimising for size.<h2 id=background>Background</h2><p>Some <code>bevy_math</code> modules apply <code>#[inline(always)]</code> to almost every function. This has downsides for some users - it can prevent optimising for size, and can stop the debugger from stepping into functions.<p>I can’t find any source that advises <code>inline(always)</code> by default - the most common advice is “use rarely and only after profiling” (example: <a rel="noopener nofollow noreferrer" href=https://std-dev-guide.rust-lang.org/policy/inline.html target=_blank>std lib guide</a>). I’ve poked around the <code>bevy_math</code> history but couldn’t find anything that explains why <code>inline(always)</code> was chosen.<h2 id=solution>Solution</h2><p>This PR changes all instances of <code>#[inline(always)]</code> to <code>#[inline]</code>.<p>The change is very unlikely to make any difference in optimised builds - almost all the functions are tiny so they’re going to be inlined either way. Benchmarks showed no difference.<p>The change can sometimes decrease performance in <code>opt-level = 0</code> builds - one math heavy microbenchmark took a -10% hit. But this is arguably the right trade-off if it lets the user step into functions in the debugger.<p>Overall, I think this is the safer default for most users. <code>inline(always)</code> has several concrete downsides, while <code>inline</code> has some trade-offs but no clear downsides.<p>The change also adds a new <code>bevy_math</code> benchmark which includes some of the affected functions.<h2 id=alternatives>Alternatives</h2><p>The change could have been taken further.<ul><li>Remove <code>#[inline]</code> from heftier functions like <code>BoundingSphere::from_point_cloud</code>. <ul><li>Could help optimising for size. I left this out to keep things simple.</ul><li>Remove <code>#[inline]</code> entirely. <ul><li>I think this is likely to be a good thing, but it needs more testing and would probably be controversial.</ul></ul><h2 id=testing>Testing</h2><pre class=language-sh data-lang=sh style=color:#61676c;background-color:#fafafa><code class=language-sh data-lang=sh><span style=color:#f29718>cargo</span><span> bench</span><span style=color:#ff8f40> -p</span><span> benches</span><span style=color:#ff8f40> --bench</span><span> math
</span></code></pre><p>Also:<ul><li>Checked benchmark disassembly to confirm what was inlined.<li>Compiled <code>alien_cake_addict</code> with various optimisation levels to check there weren’t major differences in size.</ul><p>EDIT: More details in <a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/pull/20887#issuecomment-3261735671 target=_blank>comment 1</a>, <a rel="noopener nofollow noreferrer" href=https://github.com/bevy_math/bevy/pull/20887#issuecomment-3263596184 target=_blank>comment 2</a>.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a long-standing code quality issue in the Bevy math library - the pervasive use of <code>#[inline(always)]</code> attributes across most functions in the <code>bevy_math</code> crate. The author discovered that many modules were using this aggressive inlining directive by default, which goes against established Rust best practices.<p>The core problem with <code>inline(always)</code> is that it forces the compiler to inline functions regardless of optimization settings or function characteristics. This has several concrete downsides: it prevents optimization for code size, interferes with debugger functionality by making it impossible to step into functions, and can actually harm performance in some cases by increasing instruction cache pressure.<p>The author investigated Rust’s official guidance and found that the standard library development guide explicitly recommends using <code>inline(always)</code> “rarely and only after profiling.” Despite searching through the codebase history, they couldn’t find any documentation explaining why this aggressive inlining strategy was originally chosen.<p>The solution implemented in this PR is straightforward but extensive: replace all instances of <code>#[inline(always)]</code> with <code>#[inline]</code> throughout the math library. The key difference is that <code>#[inline]</code> is just a hint to the compiler - it suggests inlining but allows the compiler to make the final decision based on optimization settings and function characteristics.<p>For most of the affected functions, this change has minimal performance impact in optimized builds because the functions are small enough that modern compilers will inline them anyway. The author confirmed this through benchmarking and disassembly inspection. However, there is a trade-off: in unoptimized debug builds (<code>opt-level = 0</code>), some math-heavy operations showed up to a 10% performance regression. This was deemed an acceptable trade-off given the significant improvement in debuggability.<p>The implementation required changes across multiple modules, with the most extensive modifications in:<ul><li>2D and 3D primitive types (circles, rectangles, spheres, cubes, etc.)<li>Bounding volume implementations (AABBs, bounding spheres)<li>Mathematical operations and utility functions</ul><p>One notable aspect of this change is the addition of a new benchmarking suite specifically for bounding volume operations. This provides better test coverage for the affected functions and ensures any future performance regressions can be detected.<p>The author considered more aggressive alternatives, such as removing inline hints entirely from larger functions or removing all inline attributes, but decided to keep the scope focused to minimize controversy and maintain the current performance characteristics for most use cases.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before: Force inlining regardless of context
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>inline</span><span>(always)]
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>center</span><span style=color:#61676ccc>:</span><span> Vec2, </span><span style=color:#ff8f40>half_size</span><span style=color:#61676ccc>:</span><span> Vec2) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>    </span><span style=color:#f07171>debug_assert!</span><span>(half_size</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>>= </span><span style=color:#ff8f40>0.0 </span><span style=color:#ed9366>&&</span><span> half_size</span><span style=color:#ed9366>.</span><span>y </span><span style=color:#ed9366>>= </span><span style=color:#ff8f40>0.0</span><span>)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>Self </span><span>{ center</span><span style=color:#61676ccc>,</span><span> half_size }
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After: Let the compiler decide based on optimization settings
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>inline</span><span>]
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>center</span><span style=color:#61676ccc>:</span><span> Vec2, </span><span style=color:#ff8f40>half_size</span><span style=color:#61676ccc>:</span><span> Vec2) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>    </span><span style=color:#f07171>debug_assert!</span><span>(half_size</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>>= </span><span style=color:#ff8f40>0.0 </span><span style=color:#ed9366>&&</span><span> half_size</span><span style=color:#ed9366>.</span><span>y </span><span style=color:#ed9366>>= </span><span style=color:#ff8f40>0.0</span><span>)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>Self </span><span>{ center</span><span style=color:#61676ccc>,</span><span> half_size }
</span><span>}
</span></code></pre><p>The technical insight here is that modern compilers are generally quite good at making inlining decisions on their own. For small, frequently called functions like mathematical operations and constructors, compilers will typically inline them in optimized builds regardless of the <code>#[inline]</code> hint. The hint primarily serves to suggest inlining even in debug builds, which can be beneficial for performance-critical math operations while still allowing debuggers to function properly.<p>This change represents a shift toward more conventional Rust development practices while maintaining the performance characteristics that game engines require. It demonstrates the importance of balancing performance optimization with developer experience and tooling compatibility.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[bevy_math crate] --> B[Primitives Module]
</span><span>    A --> C[Bounding Volumes Module]
</span><span>    A --> D[Operations Module]
</span><span>    
</span><span>    B --> B1[2D Primitives]
</span><span>    B --> B2[3D Primitives]
</span><span>    
</span><span>    C --> C1[2D Bounding Volumes]
</span><span>    C --> C2[3D Bounding Volumes]
</span><span>    
</span><span>    B1 --> B1A[Circle]
</span><span>    B1 --> B1B[Rectangle]
</span><span>    B1 --> B1C[Triangle2d]
</span><span>    
</span><span>    B2 --> B2A[Sphere]
</span><span>    B2 --> B2B[Cuboid]
</span><span>    B2 --> B2C[Triangle3d]
</span><span>    
</span><span>    C1 --> C1A[Aabb2d]
</span><span>    C1 --> C1B[BoundingCircle]
</span><span>    
</span><span>    C2 --> C2A[Aabb3d]
</span><span>    C2 --> C2B[BoundingSphere]
</span><span>    
</span><span>    D --> D1[Mathematical Operations]
</span><span>    D --> D2[Utility Functions]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-math-src-primitives-dim2-rs-133-133><code>crates/bevy_math/src/primitives/dim2.rs</code> (+133/-133)</h3><p>This file contains 2D geometric primitives like circles, rectangles, and triangles. The changes replace all <code>#[inline(always)]</code> attributes with <code>#[inline]</code> for constructors, accessors, and geometric operations.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Example change from the file:
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>inline</span><span>(always)]
</span><span style=color:#fa6e32>pub const fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>radius</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>    </span><span style=color:#fa6e32>Self </span><span>{ radius }
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>inline</span><span>]
</span><span style=color:#fa6e32>pub const fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>radius</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>    </span><span style=color:#fa6e32>Self </span><span>{ radius }
</span><span>}
</span></code></pre><h3 id=crates-bevy-math-src-primitives-dim3-rs-80-80><code>crates/bevy_math/src/primitives/dim3.rs</code> (+80/-80)</h3><p>Similar to the 2D primitives file, this contains 3D geometric primitives like spheres, cuboids, and 3D triangles. The same inline attribute changes were applied throughout.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Example from 3D primitives:
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>inline</span><span>(always)]
</span><span style=color:#fa6e32>pub const fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>radius</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>    </span><span style=color:#fa6e32>Self </span><span>{ radius }
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>inline</span><span>]
</span><span style=color:#fa6e32>pub const fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>radius</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>    </span><span style=color:#fa6e32>Self </span><span>{ radius }
</span><span>}
</span></code></pre><h3 id=crates-bevy-math-src-ops-rs-64-64><code>crates/bevy_math/src/ops.rs</code> (+64/-64)</h3><p>This file contains mathematical operations and utility functions that wrap either standard library functions or libm functions. The changes ensure consistent inlining behavior across different mathematical operations.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Example from mathematical operations:
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>inline</span><span>(always)]
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>powf</span><span>(</span><span style=color:#ff8f40>x</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>, </span><span style=color:#ff8f40>y</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>f32 </span><span>{
</span><span>    </span><span style=color:#fa6e32>f32</span><span style=color:#ed9366>::</span><span>powf(x</span><span style=color:#61676ccc>,</span><span> y)
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>inline</span><span>]
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>powf</span><span>(</span><span style=color:#ff8f40>x</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>, </span><span style=color:#ff8f40>y</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>f32</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>f32 </span><span>{
</span><span>    </span><span style=color:#fa6e32>f32</span><span style=color:#ed9366>::</span><span>powf(x</span><span style=color:#61676ccc>,</span><span> y)
</span><span>}
</span></code></pre><h3 id=crates-bevy-math-src-bounding-bounded2d-mod-rs-37-37><code>crates/bevy_math/src/bounding/bounded2d/mod.rs</code> (+37/-37)</h3><p>Contains 2D bounding volume implementations (AABBs and bounding circles). These are performance-critical for collision detection and spatial queries.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Example from bounding volumes:
</span><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>inline</span><span>(always)]
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>center</span><span style=color:#61676ccc>:</span><span> Vec2, </span><span style=color:#ff8f40>half_size</span><span style=color:#61676ccc>:</span><span> Vec2) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>    </span><span style=color:#f07171>debug_assert!</span><span>(half_size</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>>= </span><span style=color:#ff8f40>0.0 </span><span style=color:#ed9366>&&</span><span> half_size</span><span style=color:#ed9366>.</span><span>y </span><span style=color:#ed9366>>= </span><span style=color:#ff8f40>0.0</span><span>)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>Self </span><span>{ center</span><span style=color:#61676ccc>,</span><span> half_size }
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>inline</span><span>]
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>new</span><span>(</span><span style=color:#ff8f40>center</span><span style=color:#61676ccc>:</span><span> Vec2, </span><span style=color:#ff8f40>half_size</span><span style=color:#61676ccc>:</span><span> Vec2) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self </span><span>{
</span><span>    </span><span style=color:#f07171>debug_assert!</span><span>(half_size</span><span style=color:#ed9366>.</span><span>x </span><span style=color:#ed9366>>= </span><span style=color:#ff8f40>0.0 </span><span style=color:#ed9366>&&</span><span> half_size</span><span style=color:#ed9366>.</span><span>y </span><span style=color:#ed9366>>= </span><span style=color:#ff8f40>0.0</span><span>)</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>Self </span><span>{ center</span><span style=color:#61676ccc>,</span><span> half_size }
</span><span>}
</span></code></pre><h3 id=crates-bevy-math-src-bounding-bounded3d-mod-rs-36-36><code>crates/bevy_math/src/bounding/bounded3d/mod.rs</code> (+36/-36)</h3><p>Contains 3D bounding volume implementations (AABBs and bounding spheres). Similar changes were applied to maintain consistency with the 2D versions.<h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://std-dev-guide.rust-lang.org/policy/inline.html target=_blank>Rust Standard Library Development Guide - Inline Attributes</a><li><a rel="noopener nofollow noreferrer" href=https://nnethercote.github.io/perf-book/inlining.html target=_blank>The Rust Performance Book - Inlining</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/reference/attributes.html target=_blank>Rust Reference - Attributes</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/ target=_blank>Bevy Engine Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://gameenginearchitecture.com/ target=_blank>Game Engine Architecture - Mathematical Foundations</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-09/pr_20887.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>