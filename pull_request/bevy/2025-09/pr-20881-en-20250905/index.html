<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20881 Note some features requiring WebGPU on Wasm builds
        
    </title><meta content="#20881 Note some features requiring WebGPU on Wasm builds" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-09/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-09-05</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-09/pr-20881-zh-cn-20250905>中文</a></div></div><div class=pr-content><h1 id=title-note-some-features-requiring-webgpu-on-wasm-builds>Title: Note some features requiring WebGPU on Wasm builds</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Note some features requiring WebGPU on Wasm builds<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20881<li><strong>Author</strong>: janhohenheim<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, A-Rendering, C-Examples, O-Web, S-Ready-For-Final-Review, O-WebGPU, O-WebGL2, D-Straightforward<li><strong>Created</strong>: 2025-09-05T04:33:43Z<li><strong>Merged</strong>: 2025-09-05T20:35:27Z<li><strong>Merged By</strong>: mockersf</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Decals are broken on web: https://github.com/bevyengine/bevy/issues/19177 <ul><li>webgl doesn’t work at all, WebGPU requires non-MSAA</ul><li>Volumetric fog works only on WebGPU<li>However, our users have no guidance about this!</ul><h2 id=solution>Solution</h2><ul><li>Document the state of affairs.<li>Fix the decal example to at least run on WebGPU</ul><h2 id=testing>Testing</h2><ul><li><code>bevy run --example decals --features webgpu web</code></ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a practical documentation gap in Bevy’s web support for advanced rendering features. The core issue was that two specific graphics features - decals and volumetric fog - had platform-specific limitations on WebAssembly builds that weren’t documented, leading to user confusion when these features failed to work as expected.<p>The problem manifested in two distinct ways. For decals, WebGL support was completely broken, and even WebGPU required disabling multisample anti-aliasing (MSAA). Volumetric fog only worked on WebGPU and wouldn’t function at all on WebGL. Without clear documentation, users had no way of knowing these limitations existed or how to work around them.<p>The solution approach was straightforward but important: add clear documentation to both the API components and examples. For the decal example, an additional practical fix was implemented to make it actually runnable on WebGPU by replacing MSAA with FXAA (Fast Approximate Anti-Aliasing), which provides a similar visual effect without the WebGPU compatibility issues.<p>The implementation involved adding concise but clear documentation comments to three key locations:<ol><li>The <code>VolumetricFog</code> component documentation now explicitly states the WebGPU requirement for Wasm builds<li>The <code>ForwardDecal</code> component documentation explains the specific WebGPU and MSAA requirements<li>Both 3D examples (decal and volumetric fog) now include upfront notes about their WebGPU requirements</ol><p>The most substantial code change was in the decal example, where the camera configuration was modified to disable MSAA and enable FXAA instead:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>DepthPrepass</span><span style=color:#61676ccc>, </span><span style=color:#abb0b6;font-style:italic>// Must enable the depth prepass to render forward decals
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>// Must enable the depth prepass to render forward decals
</span><span>DepthPrepass</span><span style=color:#61676ccc>,
</span><span style=color:#abb0b6;font-style:italic>// Must disable MSAA to use decals on WebGPU
</span><span>Msaa</span><span style=color:#ed9366>::</span><span>Off</span><span style=color:#61676ccc>,
</span><span style=color:#abb0b6;font-style:italic>// FXAA is a fine alternative to MSAA for anti-aliasing
</span><span>Fxaa</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>,
</span></code></pre><p>This change demonstrates a practical workaround for the MSAA limitation while maintaining visual quality. The addition of FXAA provides an alternative anti-aliasing method that works within WebGPU’s constraints.<p>The impact of these changes is significant for developers targeting web platforms. They now have clear guidance about platform limitations and practical examples of how to configure their applications to work within those constraints. This reduces frustration and debugging time when working with these advanced rendering features on the web.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[User encounters Web rendering issues] --> B[PR identifies documentation gap]
</span><span>    B --> C[Adds platform requirement notes to components]
</span><span>    B --> D[Updates examples with WebGPU requirements]
</span><span>    D --> E[Fixes decal example for WebGPU compatibility]
</span><span>    C --> F[Clearer developer experience]
</span><span>    E --> F
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-light-src-volumetric-rs-2-0><code>crates/bevy_light/src/volumetric.rs</code> (+2/-0)</h3><p>Added documentation note about WebGPU requirement for volumetric fog on Wasm builds.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Added documentation:
</span><span style=color:#abb0b6;font-style:italic>/// Requires using WebGPU on Wasm builds.
</span></code></pre><h3 id=crates-bevy-pbr-src-decal-forward-rs-1-0><code>crates/bevy_pbr/src/decal/forward.rs</code> (+1/-0)</h3><p>Added documentation note about WebGPU and MSAA requirements for decals on Wasm.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Added documentation:
</span><span style=color:#abb0b6;font-style:italic>/// * On Wasm, requires using WebGPU and disabling `Msaa` on your camera.
</span></code></pre><h3 id=examples-3d-decal-rs-8-1><code>examples/3d/decal.rs</code> (+8/-1)</h3><p>Added WebGPU requirement note and fixed camera configuration for WebGPU compatibility.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Added note at top:
</span><span style=color:#abb0b6;font-style:italic>//! Note: On Wasm, this example only runs on WebGPU
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// Modified camera setup:
</span><span style=color:#abb0b6;font-style:italic>// Must enable the depth prepass to render forward decals
</span><span>DepthPrepass</span><span style=color:#61676ccc>,
</span><span style=color:#abb0b6;font-style:italic>// Must disable MSAA to use decals on WebGPU
</span><span>Msaa</span><span style=color:#ed9366>::</span><span>Off</span><span style=color:#61676ccc>,
</span><span style=color:#abb0b6;font-style:italic>// FXAA is a fine alternative to MSAA for anti-aliasing
</span><span>Fxaa</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>,
</span></code></pre><h3 id=examples-3d-volumetric-fog-rs-1-0><code>examples/3d/volumetric_fog.rs</code> (+1/-0)</h3><p>Added WebGPU requirement note to volumetric fog example.<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Added note at top:
</span><span style=color:#abb0b6;font-style:italic>//! Note: On Wasm, this example only runs on WebGPU
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/introduction/platform-specifics/webgpu target=_blank>Bevy WebGPU Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/gpuweb/gpuweb/wiki/WebGPU-vs-WebGL target=_blank>WebGPU vs WebGL2 Comparison</a><li><a rel="noopener nofollow noreferrer" href=https://developer.nvidia.com/content/anti-aliasing-introduction-samples-and-fxaa target=_blank>MSAA and FXAA Technical Comparison</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/tree/main/examples#web target=_blank>Bevy Web Examples</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-09/pr_20881.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>