<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #20906 Update the 3D examples to use `children!`
        
    </title><meta content="#20906 Update the 3D examples to use `children!`" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-09/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-09-07</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-09/pr-20906-zh-cn-20250907>中文</a></div></div><div class=pr-content><h1 id=update-the-3d-examples-to-use-children>Update the 3D examples to use <code>children!</code></h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Update the 3D examples to use <code>children!</code><li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/20906<li><strong>Author</strong>: janis-bhm<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Rendering, C-Examples, S-Ready-For-Final-Review, D-Straightforward<li><strong>Created</strong>: 2025-09-06T16:44:12Z<li><strong>Merged</strong>: 2025-09-07T16:44:36Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p><strong>Objective</strong> Works on #18238<p><strong>Solution</strong> Convert calls to <code>.with_children</code> to use the <code>Children::spawn</code> or <code>Children::spawn_one</code> types or <code>children!</code> macro. This touches the <code>3d</code> folder. I can break this up into more PRs or squash if desired.<p><strong>Testing</strong> I’ve run the examples before and after this patch and verified visually that nothing has changed.<p>I have noticed some strange inconsistencies in the the mixed_lighting example where switching from real-time to mixed(indirect) will break shadows (including switching between any except real-time after) that is unaffected by my changes. I haven’t investigated this yet.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a systematic refactoring effort across Bevy’s 3D examples, converting imperative child entity spawning patterns to a more declarative approach using the <code>children!</code> macro. The changes represent a modernization effort that aligns with Bevy’s evolving API design principles.<p>The core problem being addressed was the use of verbose <code>.with_children()</code> calls that required nested closures and imperative spawning logic. This pattern, while functional, created several issues:<ol><li><strong>Readability</strong>: Nested closures made code harder to follow<li><strong>Maintenance</strong>: Changes required understanding closure boundaries<li><strong>Consistency</strong>: Mixed patterns across the codebase<li><strong>Boilerplate</strong>: Excessive code for simple parent-child relationships</ol><p>The solution approach was straightforward but comprehensive: replace all <code>.with_children()</code> calls in 3D examples with the <code>children!</code> macro, which provides a more declarative syntax for defining child entities. This macro allows developers to specify child components and bundles directly within the parent entity’s spawn command, eliminating the need for nested closures.<p>The implementation required careful analysis of each example’s child spawning patterns. In many cases, the conversion was mechanical - replacing closure-based spawning with macro invocations. However, some examples required more thoughtful restructuring:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((ComponentA</span><span style=color:#61676ccc>,</span><span> ComponentB))
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>with_children</span><span>(|</span><span style=color:#ff8f40>parent</span><span>| {
</span><span>        parent</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((ChildComponentA</span><span style=color:#61676ccc>,</span><span> ChildComponentB))</span><span style=color:#61676ccc>;
</span><span>    })</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((ComponentA</span><span style=color:#61676ccc>,</span><span> ComponentB</span><span style=color:#61676ccc>, 
</span><span>    </span><span style=color:#f07171>children!</span><span>[(ChildComponentA</span><span style=color:#61676ccc>,</span><span> ChildComponentB)]
</span><span>))</span><span style=color:#61676ccc>;
</span></code></pre><p>The technical insight here is that the <code>children!</code> macro creates a <code>Children</code> component that contains pre-configured child entities. This approach offers several advantages:<ol><li><strong>Compile-time validation</strong>: Child entity structure is validated earlier<li><strong>Reduced nesting</strong>: Flatter code structure improves readability<li><strong>Better composition</strong>: Child entities become declarative components of parents<li><strong>Performance</strong>: Eliminates runtime closure execution for child spawning</ol><p>The impact of these changes is significant for code maintainability and developer experience. The new syntax is more concise, reduces cognitive load, and makes entity relationships more explicit. For Bevy users studying these examples, the updated code provides clearer patterns for their own projects.<p>Throughout the implementation, the author maintained functional equivalence by visually verifying that each example’s behavior remained unchanged. The changes are purely syntactic improvements that don’t affect runtime behavior.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Parent Entity Spawn] --> B[with_children closure]
</span><span>    A --> C[children! macro]
</span><span>    B --> D[Imperative child spawning]
</span><span>    C --> E[Declarative child definition]
</span><span>    D --> F[Nested execution context]
</span><span>    E --> G[Flat component structure]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><p>The most significant changes occurred in these files:<h3 id=examples-3d-color-grading-rs-110-123><code>examples/3d/color_grading.rs</code> (+110/-123)</h3><p><strong>Purpose</strong>: Refactored complex UI hierarchy generation for color grading controls <strong>Key Changes</strong>: Converted nested UI element spawning to declarative <code>children!</code> macros<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>parent</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>(Node</span><span style=color:#ed9366>::</span><span>default())</span><span style=color:#ed9366>.</span><span style=color:#f07171>with_children</span><span>(|</span><span style=color:#ff8f40>parent</span><span>| {
</span><span>    parent</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>(Node { width</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>125</span><span>)</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>() })</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>for</span><span> option </span><span style=color:#ed9366>in </span><span>[</span><span style=color:#ed9366>...</span><span>] {
</span><span>        </span><span style=color:#f07171>add_button_for_value</span><span>(parent</span><span style=color:#61676ccc>,</span><span> option</span><span style=color:#61676ccc>,</span><span> color_grading</span><span style=color:#61676ccc>,</span><span> font)</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>})</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>(
</span><span>    Node</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#f07171>children!</span><span>[
</span><span>        Node { width</span><span style=color:#61676ccc>: </span><span style=color:#f07171>px</span><span>(</span><span style=color:#ff8f40>125</span><span>)</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>() }</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#f07171>make_button</span><span>(SelectedGlobalColorGradingOption</span><span style=color:#ed9366>::</span><span>Exposure)</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#f07171>make_button</span><span>(SelectedGlobalColorGradingOption</span><span style=color:#ed9366>::</span><span>Temperature)</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#abb0b6;font-style:italic>// ... more buttons
</span><span>    ]</span><span style=color:#61676ccc>,
</span><span>)
</span></code></pre><h3 id=examples-helpers-widgets-rs-68-71><code>examples/helpers/widgets.rs</code> (+68/-71)</h3><p><strong>Purpose</strong>: Updated widget helper functions to return bundles instead of imperative spawning <strong>Key Changes</strong>: Converted widget creation functions to return component bundles<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>spawn_ui_text</span><span><</span><span style=color:#fa6e32>'a</span><span>>(</span><span style=color:#ff8f40>parent</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>'a mut</span><span> ChildSpawnerCommands, </span><span style=color:#ff8f40>label</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>, </span><span style=color:#ff8f40>color</span><span style=color:#61676ccc>:</span><span> Color) </span><span style=color:#61676ccc>-> </span><span>EntityCommands<</span><span style=color:#fa6e32>'a</span><span>> {
</span><span>    parent</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((Text</span><span style=color:#ed9366>::</span><span>new(label)</span><span style=color:#61676ccc>,</span><span> TextFont { font_size</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>18.0</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>() }</span><span style=color:#61676ccc>,</span><span> TextColor(color)))
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>ui_text</span><span>(</span><span style=color:#ff8f40>label</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>, </span><span style=color:#ff8f40>color</span><span style=color:#61676ccc>:</span><span> Color) </span><span style=color:#61676ccc>-></span><span> impl Bundle </span><span style=color:#ed9366>+ </span><span style=color:#fa6e32>use</span><span style=color:#ed9366><> </span><span>{
</span><span>    (Text</span><span style=color:#ed9366>::</span><span>new(label)</span><span style=color:#61676ccc>,</span><span> TextFont { font_size</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>18.0</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>() }</span><span style=color:#61676ccc>,</span><span> TextColor(color))
</span><span>}
</span></code></pre><h3 id=examples-3d-light-textures-rs-53-65><code>examples/3d/light_textures.rs</code> (+53/-65)</h3><p><strong>Purpose</strong>: Simplified light entity setup with complex child components <strong>Key Changes</strong>: Consolidated light entity spawning with children macro<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((Visibility</span><span style=color:#ed9366>::</span><span>Hidden</span><span style=color:#61676ccc>, </span><span>Transform</span><span style=color:#ed9366>::</span><span>from_xyz(</span><span style=color:#ff8f40>8.0</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>8.0</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>4.0</span><span>)</span><span style=color:#61676ccc>, </span><span>Selection</span><span style=color:#ed9366>::</span><span>DirectionalLight))
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>with_child</span><span>((DirectionalLight { illuminance</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>AMBIENT_DAYLIGHT</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>() }</span><span style=color:#61676ccc>,</span><span> Visible))</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>    Visibility</span><span style=color:#ed9366>::</span><span>Hidden</span><span style=color:#61676ccc>,
</span><span>    Transform</span><span style=color:#ed9366>::</span><span>from_xyz(</span><span style=color:#ff8f40>8.0</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>8.0</span><span style=color:#61676ccc>, </span><span style=color:#ff8f40>4.0</span><span>)</span><span style=color:#61676ccc>,
</span><span>    Selection</span><span style=color:#ed9366>::</span><span>DirectionalLight</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#f07171>children!</span><span>[(DirectionalLight { illuminance</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>AMBIENT_DAYLIGHT</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>() }</span><span style=color:#61676ccc>,</span><span> Visible)]
</span><span>))</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=examples-3d-shadow-biases-rs-51-54><code>examples/3d/shadow_biases.rs</code> (+51/-54)</h3><p><strong>Purpose</strong>: Streamlined light entity setup with multiple child components <strong>Key Changes</strong>: Replaced closure-based child spawning with children macro<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((light_transform</span><span style=color:#61676ccc>, </span><span>Visibility</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>,</span><span> Lights))
</span><span>    </span><span style=color:#ed9366>.</span><span style=color:#f07171>with_children</span><span>(|</span><span style=color:#ff8f40>builder</span><span>| {
</span><span>        builder</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>(PointLight { intensity</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>0.0</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>() })</span><span style=color:#61676ccc>;
</span><span>        builder</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>(DirectionalLight { </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>() })</span><span style=color:#61676ccc>;
</span><span>    })</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>commands</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((
</span><span>    light_transform</span><span style=color:#61676ccc>,
</span><span>    Visibility</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>,
</span><span>    Lights</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#f07171>children!</span><span>[
</span><span>        (PointLight { intensity</span><span style=color:#61676ccc>: </span><span style=color:#ff8f40>0.0</span><span style=color:#61676ccc>, </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>() })</span><span style=color:#61676ccc>,
</span><span>        (DirectionalLight { </span><span style=color:#ed9366>..</span><span style=color:#f07171>default</span><span>() })
</span><span>    ]
</span><span>))</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=examples-3d-split-screen-rs-38-41><code>examples/3d/split_screen.rs</code> (+38/-41)</h3><p><strong>Purpose</strong>: Refactored UI setup for split-screen example <strong>Key Changes</strong>: Converted UI element creation to bundle-based approach<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>rotate_button</span><span>(</span><span style=color:#ff8f40>parent</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> ChildSpawnerCommands, </span><span style=color:#ff8f40>caption</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>, </span><span style=color:#ff8f40>direction</span><span style=color:#61676ccc>:</span><span> Direction) {
</span><span>    parent</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((RotateCamera(direction)</span><span style=color:#61676ccc>,</span><span> Button</span><span style=color:#61676ccc>,</span><span> Node { </span><span style=color:#ed9366>... </span><span>}))
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>with_children</span><span>(|</span><span style=color:#ff8f40>parent</span><span>| {
</span><span>            parent</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>(Text</span><span style=color:#ed9366>::</span><span>new(caption))</span><span style=color:#61676ccc>;
</span><span>        })</span><span style=color:#61676ccc>;
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>rotate_button</span><span>(</span><span style=color:#ff8f40>caption</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str</span><span>, </span><span style=color:#ff8f40>direction</span><span style=color:#61676ccc>:</span><span> Direction) </span><span style=color:#61676ccc>-></span><span> impl Bundle {
</span><span>    (
</span><span>        RotateCamera(direction)</span><span style=color:#61676ccc>,
</span><span>        Button</span><span style=color:#61676ccc>,
</span><span>        Node { </span><span style=color:#ed9366>... </span><span>}</span><span style=color:#61676ccc>,
</span><span>        </span><span style=color:#f07171>children!</span><span>[Text</span><span style=color:#ed9366>::</span><span>new(caption)]
</span><span>    )
</span><span>}
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/books/introduction/ecs#bundles target=_blank>Bevy ECS Guide: Bundles</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/book/ch19-06-macros.html target=_blank>Rust Macros Guide</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/discussions/18238 target=_blank>Bevy GitHub Discussion: children! macro</a><li><a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Entity_component_system target=_blank>Entity Component System Pattern</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-09/pr_20906.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>