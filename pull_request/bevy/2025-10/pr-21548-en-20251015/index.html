<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #21548 Remove chatty logs from default filter
        
    </title><meta content="#21548 Remove chatty logs from default filter" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-10/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-10-15</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-10/pr-21548-zh-cn-20251015>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Remove chatty logs from default filter<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/21548<li><strong>Author</strong>: janhohenheim<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, C-Usability, S-Ready-For-Final-Review, A-Diagnostics<li><strong>Created</strong>: 2025-10-14T22:44:35Z<li><strong>Merged</strong>: 2025-10-14T23:55:42Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Fixes https://github.com/bevyengine/bevy/issues/16277 <ul><li>The maintainers have already removed some annoying logs like the probe one, but the format crates are still incredibly chatty</ul><li>Fixes https://github.com/bevyengine/bevy/issues/14904 <ul><li>That’s a completely benign warning that is annoying for Linux users</ul></ul><h2 id=solution>Solution</h2><ul><li>Improve the default filter</ul><h2 id=testing>Testing</h2><ul><li>Tested in a standalone project (Foxtrot)</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a common developer experience issue in Bevy: excessive logging noise from third-party dependencies. The problem manifested in two specific GitHub issues that had been bothering users for some time.<p>Issue #16277 reported that various format crates were generating too much log output, making it difficult to focus on application-specific logs. While maintainers had previously addressed some of the noisiest offenders like probe logs, several format-related crates continued to produce verbose output. Issue #14904 highlighted a particularly annoying but harmless warning that was especially problematic for Linux users.<p>The solution approach was straightforward but targeted: modify the default logging filter to suppress unnecessary log messages while preserving important diagnostic information. The developer took a surgical approach by identifying the specific log sources causing the noise and adjusting their log levels appropriately.<p>The implementation modified the <code>DEFAULT_FILTER</code> constant in Bevy’s logging system. Previously, this filter only handled <code>wgpu</code> and <code>naga</code> logs:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub const </span><span style=color:#ff8f40>DEFAULT_FILTER</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str </span><span style=color:#ed9366>= </span><span style=color:#86b300>"wgpu=error,naga=warn"</span><span style=color:#61676ccc>;
</span></code></pre><p>The new implementation expands this significantly using Rust’s <code>concat!</code> macro to build a comprehensive filter string:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub const </span><span style=color:#ff8f40>DEFAULT_FILTER</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str </span><span style=color:#ed9366>= </span><span style=color:#f07171>concat!</span><span>(
</span><span>    </span><span style=color:#86b300>"wgpu=error,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"naga=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"symphonia_bundle_mp3::demuxer=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"symphonia_format_caf::demuxer=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"symphonia_format_isompf4::demuxer=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"symphonia_format_mkv::demuxer=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"symphonia_format_ogg::demuxer=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"symphonia_format_riff::demuxer=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"symphonia_format_wav::demuxer=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"calloop::loop_logic=error,"</span><span style=color:#61676ccc>,
</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><p>The technical insight here involves understanding Bevy’s logging architecture, which uses the <code>tracing</code> crate under the hood. The filter syntax follows the <code>tracing_subscriber::EnvFilter</code> pattern, where each entry specifies a log target and the maximum level to display. By setting various Symphonia format demuxers to <code>warn</code> level, the developer suppressed their verbose debug and info logs while still allowing important warnings and errors to surface.<p>The <code>calloop::loop_logic=error</code> entry specifically addresses the Linux issue mentioned in #14904, reducing a benign warning to only show actual errors. This demonstrates good judgment in distinguishing between useful diagnostics and noise.<p>The impact of these changes is immediate and significant for developer workflow. Users no longer need to manually configure logging filters to get clean console output when working with audio files or running on Linux systems. The change maintains backward compatibility while improving the out-of-box experience.<p>The developer validated the changes by testing in a standalone project called “Foxtrot,” demonstrating practical verification rather than relying solely on theoretical analysis. This testing approach ensures the solution works in real-world scenarios.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[Bevy Application] --> B[LogPlugin]
</span><span>    B --> C[DEFAULT_FILTER]
</span><span>    C --> D[wgpu=error]
</span><span>    C --> E[naga=warn]
</span><span>    C --> F[symphonia_*::demuxer=warn]
</span><span>    C --> G[calloop::loop_logic=error]
</span><span>    
</span><span>    H[Audio Files] --> I[Symphonia Crates]
</span><span>    I --> F
</span><span>    J[Linux Systems] --> K[calloop]
</span><span>    K --> G
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-log-src-lib-rs-12-1><code>crates/bevy_log/src/lib.rs</code> (+12/-1)</h3><p>This file contains the core logging configuration for Bevy. The changes significantly expand the default log filter to reduce noise from various audio format libraries and system components.<p><strong>Key modification:</strong><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub const </span><span style=color:#ff8f40>DEFAULT_FILTER</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str </span><span style=color:#ed9366>= </span><span style=color:#86b300>"wgpu=error,naga=warn"</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub const </span><span style=color:#ff8f40>DEFAULT_FILTER</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>str </span><span style=color:#ed9366>= </span><span style=color:#f07171>concat!</span><span>(
</span><span>    </span><span style=color:#86b300>"wgpu=error,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"naga=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"symphonia_bundle_mp3::demuxer=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"symphonia_format_caf::demuxer=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"symphonia_format_isompf4::demuxer=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"symphonia_format_mkv::demuxer=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"symphonia_format_ogg::demuxer=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"symphonia_format_riff::demuxer=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"symphonia_format_wav::demuxer=warn,"</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#86b300>"calloop::loop_logic=error,"</span><span style=color:#61676ccc>,
</span><span>)</span><span style=color:#61676ccc>;
</span></code></pre><h3 id=typos-toml-1-0><code>typos.toml</code> (+1/-0)</h3><p>This configuration file for spell checking was updated to recognize “caf” as a valid word, preventing false positives from the Core Audio Format (CAF) references in the log filters.<p><strong>Addition:</strong><pre class=language-toml data-lang=toml style=color:#61676c;background-color:#fafafa><code class=language-toml data-lang=toml><span style=color:#399ee6>caf </span><span>= </span><span style=color:#86b300>"caf"                             </span><span style=color:#abb0b6;font-style:italic># CAF - Core Audio Format
</span></code></pre><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_log/latest/bevy_log/ target=_blank>Bevy Logging Documentation</a> - Official documentation for Bevy’s logging system<li><a rel="noopener nofollow noreferrer" href=https://docs.rs/tracing-subscriber/latest/tracing_subscriber/filter/struct.EnvFilter.html target=_blank>tracing Subscriber Filtering</a> - Detailed documentation on log filtering syntax<li><a rel="noopener nofollow noreferrer" href=https://github.com/pdeljanov/Symphonia target=_blank>Symphonia Audio Library</a> - The audio decoding library whose log output is being filtered<li><a rel="noopener nofollow noreferrer" href=https://github.com/Smithay/calloop target=_blank>calloop Event Loop</a> - The event loop library generating Linux-specific warnings</ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-10/pr_21548.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>