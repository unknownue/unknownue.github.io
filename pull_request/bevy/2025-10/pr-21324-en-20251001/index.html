<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #21324 Update `cargo-binstall` to v1.15.6
        
    </title><meta content="#21324 Update `cargo-binstall` to v1.15.6" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-10/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-10-01</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-10/pr-21324-zh-cn-20251001>中文</a></div></div><div class=pr-content><h1 id=title>Title</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Update <code>cargo-binstall</code> to v1.15.6<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/21324<li><strong>Author</strong>: BD103<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: A-Build-System, C-Dependencies, S-Ready-For-Final-Review, X-Uncontroversial, D-Straightforward<li><strong>Created</strong>: 2025-10-01T18:39:17Z<li><strong>Merged</strong>: 2025-10-01T19:46:44Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Adopted from #21271.<li><code>cargo-binstall</code> in CI is outdated, let’s update!</ul><h2 id=solution>Solution</h2><ul><li>Update to v1.15.6 from v1.14.1.</ul><h2 id=testing>Testing</h2><ul><li>As it’s run in CI, the best way to test is to run CI! :)</ul><h2 id=notable-changes>Notable Changes</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://github.com/cargo-bins/cargo-binstall/releases/tag/v1.14.2 target=_blank>v1.14.2</a> - Dependency updates<li><a rel="noopener nofollow noreferrer" href=https://github.com/cargo-bins/cargo-binstall/releases/tag/v1.14.3 target=_blank>v1.14.3</a> - Fixes race condition<li><a rel="noopener nofollow noreferrer" href=https://github.com/cargo-bins/cargo-binstall/releases/tag/v1.14.4 target=_blank>v1.14.4</a> - Switch from <code>fs4</code> to <code>std</code> for file locking<li><a rel="noopener nofollow noreferrer" href=https://github.com/cargo-bins/cargo-binstall/releases/tag/v1.15.0 target=_blank>v1.15.0</a> - Prompt when using Quickinstall. <del>This may cause some issues in CI, I need to investigate it further.</del><li><a rel="noopener nofollow noreferrer" href=https://github.com/cargo-bins/cargo-binstall/releases/tag/v1.15.1 target=_blank>v1.15.1</a> - Fix issues with manifest file and Quickinstall prompt<li><a rel="noopener nofollow noreferrer" href=https://github.com/cargo-bins/cargo-binstall/releases/tag/v1.15.2 target=_blank>v1.15.2</a> - Fix updating telemetry config file<li><a rel="noopener nofollow noreferrer" href=https://github.com/cargo-bins/cargo-binstall/releases/tag/v1.15.3 target=_blank>v1.15.3</a> - Stop building for x86 MacOS<li><a rel="noopener nofollow noreferrer" href=https://github.com/cargo-bins/cargo-binstall/releases/tag/v1.15.4 target=_blank>v1.15.4</a> - Docs and dependencies<li><a rel="noopener nofollow noreferrer" href=https://github.com/cargo-bins/cargo-binstall/releases/tag/v1.15.5 target=_blank>v1.15.5</a> - Support Socks5 proxy<li><a rel="noopener nofollow noreferrer" href=https://github.com/cargo-bins/cargo-binstall/releases/tag/v1.15.6 target=_blank>v1.15.6</a> - Update dependencies</ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a straightforward but important maintenance task: updating the version of <code>cargo-binstall</code> used in Bevy’s CI pipeline from v1.14.1 to v1.15.6. The update was necessary because the existing version was outdated and missing several important improvements and bug fixes.<p>The problem was identified through issue #21271, which highlighted that the CI was running with an older version of the tool. <code>cargo-binstall</code> is a binary installer for Rust projects that helps quickly install Rust binaries without compiling from source, making it an important component of the CI workflow for installing development tools efficiently.<p>The solution approach was direct and practical: update the version references in the CI configuration file to point to the latest stable release. The developer took a methodical approach by reviewing the release notes for each version between the current and target versions, noting important changes that could affect CI behavior. This included checking for potential breaking changes, particularly around the Quickinstall prompt introduced in v1.15.0, which the developer initially flagged for further investigation but later confirmed was fixed in subsequent releases.<p>The implementation required only two simple changes in the <code>.github/workflows/ci.yml</code> file, updating both the environment variable defining the version and the GitHub Action step that uses <code>cargo-binstall</code>. This ensures consistency between the version referenced in the environment and the version actually used by the action.<p>From a technical perspective, this update brings several important improvements to the CI system:<ul><li>Race condition fixes in v1.14.3 improve reliability when multiple CI jobs run concurrently<li>The switch from <code>fs4</code> to standard library file locking in v1.14.4 reduces external dependencies<li>Various dependency updates improve security and performance<li>Support for SOCKS5 proxy in v1.15.5 enhances network flexibility<li>Removal of x86 macOS support in v1.15.3 reflects current platform requirements</ul><p>The impact of these changes is primarily in CI reliability and performance. The race condition fix alone could prevent intermittent CI failures, while the dependency updates ensure the toolchain remains secure and efficient. The changes are low-risk because they only affect the CI infrastructure, not the core Bevy codebase, and the testing strategy of “run CI to test CI” is appropriate for this type of change.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph LR
</span><span>    A[CI Workflow] --> B[cargo-binstall v1.14.1]
</span><span>    B --> C[Outdated Dependencies]
</span><span>    B --> D[Race Conditions]
</span><span>    B --> E[Old File Locking]
</span><span>    A --> F[cargo-binstall v1.15.6]
</span><span>    F --> G[Updated Dependencies]
</span><span>    F --> H[Race Condition Fixes]
</span><span>    F --> I[Std File Locking]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=github-workflows-ci-yml-2-2><code>.github/workflows/ci.yml</code> (+2/-2)</h3><p>This file contains the GitHub Actions workflow configuration for Bevy’s continuous integration. The changes update the version of <code>cargo-binstall</code> used in the CI pipeline.<p><strong>Key modifications:</strong><pre class=language-yaml data-lang=yaml style=color:#61676c;background-color:#fafafa><code class=language-yaml data-lang=yaml><span style=color:#abb0b6;font-style:italic># File: .github/workflows/ci.yml
</span><span style=color:#abb0b6;font-style:italic># Before:
</span><span style=color:#399ee6>env</span><span style=color:#61676ccc>:
</span><span>  </span><span style=color:#abb0b6;font-style:italic># If nightly is breaking CI, modify this variable to target a specific nightly version.
</span><span>  </span><span style=color:#399ee6>NIGHTLY_TOOLCHAIN</span><span style=color:#61676ccc>: </span><span style=color:#86b300>nightly
</span><span>  </span><span style=color:#399ee6>RUSTFLAGS</span><span style=color:#61676ccc>: </span><span style=color:#86b300>"-D warnings"
</span><span>  </span><span style=color:#399ee6>BINSTALL_VERSION</span><span style=color:#61676ccc>: </span><span style=color:#86b300>"v1.14.1"
</span><span>
</span><span style=color:#abb0b6;font-style:italic># ... later in the file ...
</span><span>      </span><span style=color:#abb0b6;font-style:italic># Update in sync with BINSTALL_VERSION
</span><span>      - </span><span style=color:#399ee6>uses</span><span style=color:#61676ccc>: </span><span style=color:#86b300>cargo-bins/cargo-binstall@v1.15.4
</span><span>
</span><span style=color:#abb0b6;font-style:italic># After:
</span><span style=color:#399ee6>env</span><span style=color:#61676ccc>:
</span><span>  </span><span style=color:#abb0b6;font-style:italic># If nightly is breaking CI, modify this variable to target a specific nightly version.
</span><span>  </span><span style=color:#399ee6>NIGHTLY_TOOLCHAIN</span><span style=color:#61676ccc>: </span><span style=color:#86b300>nightly
</span><span>  </span><span style=color:#399ee6>RUSTFLAGS</span><span style=color:#61676ccc>: </span><span style=color:#86b300>"-D warnings"
</span><span>  </span><span style=color:#399ee6>BINSTALL_VERSION</span><span style=color:#61676ccc>: </span><span style=color:#86b300>"v1.15.6"
</span><span>
</span><span style=color:#abb0b6;font-style:italic># ... later in the file ...
</span><span>      </span><span style=color:#abb0b6;font-style:italic># Update in sync with BINSTALL_VERSION
</span><span>      - </span><span style=color:#399ee6>uses</span><span style=color:#61676ccc>: </span><span style=color:#86b300>cargo-bins/cargo-binstall@v1.15.6
</span></code></pre><p>These changes ensure that both the environment variable and the GitHub Action reference the same version of <code>cargo-binstall</code>, maintaining consistency in the CI pipeline. The comment “Update in sync with BINSTALL_VERSION” indicates the intentional synchronization between these two values.<h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://github.com/cargo-bins/cargo-binstall target=_blank>cargo-binstall GitHub Repository</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/cargo-bins/cargo-binstall/releases target=_blank>cargo-binstall Releases</a><li><a rel="noopener nofollow noreferrer" href=https://docs.github.com/en/actions target=_blank>GitHub Actions Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/rust-unofficial/patterns/blob/master/patterns/ci.md target=_blank>Rust CI Best Practices</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-10/pr_21324.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>