<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #21581 Support non-archetypal `QueryData`
        
    </title><meta content="#21581 Support non-archetypal `QueryData`" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-10/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-10-29</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-10/pr-21581-zh-cn-20251029>中文</a></div></div><div class=pr-content><h1 id=support-non-archetypal-querydata>Support non-archetypal <code>QueryData</code></h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Support non-archetypal <code>QueryData</code><li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/21581<li><strong>Author</strong>: chescock<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Feature, A-ECS, S-Ready-For-Final-Review, M-Migration-Guide<li><strong>Created</strong>: 2025-10-17T14:34:14Z<li><strong>Merged</strong>: 2025-10-29T19:31:42Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><p>For #17647, we want to create a <code>QueryData</code> that can follow a relation and query data from an entity’s parent. If the parent does not have the queried data, the child entity should be skipped in the query. However, there is no way to tell from the child’s archetype whether the parent will match! So, we need to support <em>non-archetypal</em> <code>QueryData</code>, just as we support non-archetypal <code>QueryFilter</code>s for <code>Added</code> and <code>Changed</code>.<p>That is, if <code>Query&LTParent<&T>></code> yields <code>&T</code>, and we do:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>let</span><span> parent1 </span><span style=color:#ed9366>=</span><span> world</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>(T)</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>let</span><span> child1 </span><span style=color:#ed9366>=</span><span> world</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>(ChildOf(parent1))</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>let</span><span> parent2 </span><span style=color:#ed9366>=</span><span> world</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>(())</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()</span><span style=color:#61676ccc>;
</span><span style=color:#fa6e32>let</span><span> child2 </span><span style=color:#ed9366>=</span><span> world</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>(ChildOf(parent2))</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>let</span><span> query </span><span style=color:#ed9366>=</span><span> world</span><span style=color:#ed9366>.</span><span>query</span><span style=color:#ed9366>::</span><span>&LTParent<</span><span style=color:#ed9366>&</span><span>T>>()</span><span style=color:#61676ccc>;
</span></code></pre><p>then <code>query</code> must yield a row for <code>child1</code> but not for <code>child2</code>, even though they have the same archetype.<h2 id=solution>Solution</h2><p>Change <code>QueryData::fetch</code> to return <code>Option</code> so that entities can be filtered during fetching by returning <code>None</code>.<p>To support <code>ExactSizeIterator</code>, introduce an <code>ArchetypeQueryData</code> trait and an <code>QueryData::IS_ARCHETYPAL</code> associated constant, similar to <code>ArchetypeFilter</code> and <code>QueryFilter::IS_ARCHETYPAL</code>. Implement this trait on existing <code>QueryData</code> types. Modify <code>ExactSizeIterator</code> implementations to require <code>D: ArchetypeQueryData</code>, and the <code>size_hint()</code> methods to return a minimum size of <code>0</code> if <code>!D::IS_ARCHETYPAL</code>.<h2 id=alternatives>Alternatives</h2><p>We could do nothing here, and have <code>Query&LTParent<&T>></code> yield <code>Option<&T></code>. That makes the API less convenient, though. Note that if one <em>wants</em> to query for <code>Option</code>, they can use either <code>Query&LTOption&LTParent<&T>></code> or <code>Query&LTParent&LTOption<&T>></code>, depending on whether they want to include entities with no parent.<p>Another option is to re-use the <code>ArchetypeFilter</code> trait instead of introducing a new one. There are no places where we want to abstract over both, however, and it would require writing bounds like <code>D: QueryData + ArchetypeFilter, F: QueryFilter + ArchetypeFilter</code> instead of simply <code>D: ArchetypeQueryData, F: ArchetypeFilter</code>.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>This PR addresses a fundamental limitation in Bevy’s ECS query system by introducing support for non-archetypal query data. The core problem was that some queries need to filter entities based on conditions that cannot be determined from archetype information alone.<p>The traditional ECS query model relies on archetypes to quickly determine which entities match a query. However, certain use cases - particularly when working with entity relations - require runtime evaluation that goes beyond archetype checks. For example, when querying a parent component through a child entity, the child’s archetype doesn’t reveal whether the parent has the required component.<p>The solution modifies the <code>QueryData::fetch</code> method to return <code>Option&LTSelf::Item></code> instead of <code>Self::Item</code>. This allows query implementations to return <code>None</code> for entities that don’t match the query conditions, even if they have the correct archetype. This change enables queries to perform runtime filtering that can’t be handled at the archetype level.<p>To maintain performance optimizations for archetype-only queries, the PR introduces an <code>ArchetypeQueryData</code> marker trait and a <code>QueryData::IS_ARCHETYPAL</code> associated constant. Queries that only rely on archetype information can implement this trait, which allows iterators to provide exact size information and other optimizations.<p>The implementation required changes throughout the ECS query system. The <code>fetch</code> method signature was updated across all query data types, and iterator implementations were modified to handle the optional nature of query results. The derive macros for <code>QueryData</code> were updated to automatically handle the new <code>IS_ARCHETYPAL</code> constant and generate appropriate trait implementations.<p>One key insight in this implementation is how it maintains backward compatibility while enabling new functionality. Existing queries continue to work unchanged because they now return <code>Some(item)</code> where they previously returned <code>item</code>. The <code>ArchetypeQueryData</code> trait is automatically implemented for all existing query data types through the derive macros.<p>The changes also required careful handling of iterator size hints. For non-archetypal queries, the minimum size hint is now 0, since we can’t determine the exact count without iterating through all entities. This preserves correctness while allowing performance optimizations for archetypal queries.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[QueryData] --> B[ArchetypeQueryData]
</span><span>    A --> C[Non-archetypal QueryData]
</span><span>    B --> D[ExactSizeIterator]
</span><span>    C --> E[Size hint min=0]
</span><span>    F[QueryIter] --> G[Handles Option from fetch]
</span><span>    H[QueryData::fetch] --> I[Returns Option]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=crates-bevy-ecs-src-query-fetch-rs-155-48><code>crates/bevy_ecs/src/query/fetch.rs</code> (+155/-48)</h3><p>This file contains the core <code>QueryData</code> trait and its implementations. The key changes include:<ul><li>Added <code>IS_ARCHETYPAL</code> constant to <code>QueryData</code> trait<li>Modified <code>fetch</code> method to return <code>Option&LTSelf::Item></code><li>Introduced <code>ArchetypeQueryData</code> marker trait<li>Updated all existing <code>QueryData</code> implementations to return <code>Some</code></ul><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>unsafe fn </span><span style=color:#f29718>fetch</span><span><</span><span style=color:#fa6e32>'w</span><span>>(
</span><span>    </span><span style=color:#ff8f40>state</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>Self</span><span style=color:#ed9366>::</span><span>State,
</span><span>    </span><span style=color:#ff8f40>fetch</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut Self</span><span style=color:#ed9366>::</span><span>Fetch<</span><span style=color:#fa6e32>'w</span><span>>,
</span><span>    </span><span style=color:#ff8f40>entity</span><span style=color:#61676ccc>:</span><span> Entity,
</span><span>    </span><span style=color:#ff8f40>table_row</span><span style=color:#61676ccc>:</span><span> TableRow,
</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>Self</span><span style=color:#ed9366>::</span><span>Item<</span><span style=color:#fa6e32>'w</span><span>, </span><span style=color:#fa6e32>'s</span><span>> {
</span><span>    entity
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>unsafe fn </span><span style=color:#f29718>fetch</span><span><</span><span style=color:#fa6e32>'w</span><span>>(
</span><span>    </span><span style=color:#ff8f40>state</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>Self</span><span style=color:#ed9366>::</span><span>State,
</span><span>    </span><span style=color:#ff8f40>fetch</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut Self</span><span style=color:#ed9366>::</span><span>Fetch<</span><span style=color:#fa6e32>'w</span><span>>,
</span><span>    </span><span style=color:#ff8f40>entity</span><span style=color:#61676ccc>:</span><span> Entity,
</span><span>    </span><span style=color:#ff8f40>table_row</span><span style=color:#61676ccc>:</span><span> TableRow,
</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span><</span><span style=color:#fa6e32>Self</span><span style=color:#ed9366>::</span><span>Item<</span><span style=color:#fa6e32>'w</span><span>, </span><span style=color:#fa6e32>'s</span><span>>> {
</span><span>    </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(entity)
</span><span>}
</span></code></pre><h3 id=crates-bevy-ecs-src-query-iter-rs-112-78><code>crates/bevy_ecs/src/query/iter.rs</code> (+112/-78)</h3><p>This file handles query iteration logic. The changes ensure iterators properly handle the new optional fetch results:<ul><li>Modified iteration to skip entities where <code>fetch</code> returns <code>None</code><li>Updated size hint calculations for non-archetypal queries<li>Restricted <code>ExactSizeIterator</code> to archetypal query data</ul><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Key change in iteration logic:
</span><span style=color:#fa6e32>if let </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(item) </span><span style=color:#ed9366>= </span><span>D</span><span style=color:#ed9366>::</span><span>fetch(
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>query_state</span><span style=color:#ed9366>.</span><span>fetch_state</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>cursor</span><span style=color:#ed9366>.</span><span>fetch</span><span style=color:#61676ccc>,
</span><span>    </span><span style=color:#ed9366>*</span><span>entity</span><span style=color:#61676ccc>,
</span><span>    row</span><span style=color:#61676ccc>,
</span><span>) {
</span><span>    accum </span><span style=color:#ed9366>= </span><span style=color:#f07171>func</span><span>(accum</span><span style=color:#61676ccc>,</span><span> item)</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><h3 id=crates-bevy-ecs-src-system-query-rs-33-15><code>crates/bevy_ecs/src/system/query.rs</code> (+33/-15)</h3><p>This file contains the <code>Query</code> system parameter implementation. The changes optimize query operations:<ul><li>Updated <code>count()</code> and <code>is_empty()</code> to handle non-archetypal queries efficiently<li>Modified <code>contains()</code> to work with both archetypal and non-archetypal queries</ul><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Optimized count implementation:
</span><span style=color:#fa6e32>pub fn </span><span style=color:#f29718>count</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>usize </span><span>{
</span><span>    </span><span style=color:#fa6e32>if </span><span style=color:#ed9366>!</span><span>D</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>IS_ARCHETYPAL </span><span>{
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>into_iter</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>count</span><span>()
</span><span>    } </span><span style=color:#fa6e32>else if </span><span style=color:#ed9366>!</span><span>F</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>IS_ARCHETYPAL </span><span>{
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>as_nop</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>into_iter</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>count</span><span>()
</span><span>    } </span><span style=color:#fa6e32>else </span><span>{
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span style=color:#f07171>as_nop</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>into_iter</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>size_hint</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#ff8f40>0
</span><span>    }
</span><span>}
</span></code></pre><h3 id=crates-bevy-ecs-macros-src-query-data-rs-22-8><code>crates/bevy_ecs/macros/src/query_data.rs</code> (+22/-8)</h3><p>This file contains the derive macro for <code>QueryData</code>. The updates ensure generated code works with the new system:<ul><li>Added <code>IS_ARCHETYPAL</code> constant generation<li>Modified generated <code>fetch</code> method to return <code>Option</code> and use <code>?</code> operator<li>Added automatic <code>ArchetypeQueryData</code> implementation</ul><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Generated code changes:
</span><span style=color:#fa6e32>const </span><span style=color:#ff8f40>IS_ARCHETYPAL</span><span style=color:#61676ccc>: </span><span style=color:#fa6e32>bool </span><span style=color:#ed9366>= </span><span style=color:#ff8f40>true </span><span style=color:#ed9366>#</span><span>(</span><span style=color:#ed9366>&& <#</span><span>field_types </span><span style=color:#ed9366>as #</span><span>path</span><span style=color:#ed9366>::</span><span>query</span><span style=color:#ed9366>::</span><span>QueryData</span><span style=color:#ed9366>>::</span><span style=color:#ff8f40>IS_ARCHETYPAL</span><span>)</span><span style=color:#ed9366>*</span><span style=color:#61676ccc>;
</span><span>
</span><span style=color:#fa6e32>unsafe fn </span><span style=color:#f29718>fetch</span><span>(...) </span><span style=color:#61676ccc>-> </span><span style=color:#55b4d4;font-style:italic>Option</span><span><</span><span style=color:#fa6e32>Self</span><span style=color:#ed9366>::</span><span>Item<</span><span style=color:#fa6e32>'w</span><span>, </span><span style=color:#fa6e32>'s</span><span>>> {
</span><span>    </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(</span><span style=color:#fa6e32>Self</span><span style=color:#ed9366>::</span><span>Item {
</span><span>        </span><span style=color:#ed9366>#</span><span>(</span><span style=color:#ed9366>#</span><span>field_idents</span><span style=color:#61676ccc>: </span><span><</span><span style=color:#f51818>#</span><span>field_types</span><span style=color:#ed9366>>::</span><span>fetch(</span><span style=color:#ed9366>...</span><span>)</span><span style=color:#ed9366>?</span><span style=color:#61676ccc>,</span><span>)</span><span style=color:#ed9366>*
</span><span>    })
</span><span>}
</span></code></pre><h3 id=release-content-migration-guides-archetype-query-data-md-27-0><code>release-content/migration-guides/archetype_query_data.md</code> (+27/-0)</h3><p>This new migration guide explains the changes and provides upgrade instructions:<ul><li>Explains the new <code>ArchetypeQueryData</code> trait<li>Shows how to update code that requires <code>ExactSizeIterator</code><li>Documents the new <code>IS_ARCHETYPAL</code> constant for manual implementations</ul><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_ecs/latest/bevy_ecs/query/index.html target=_blank>Bevy ECS Query Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://en.wikipedia.org/wiki/Entity_component_system target=_blank>Entity Component System Architecture</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/std/option/enum.Option.html target=_blank>Rust Option Type</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-10/pr_21581.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>