<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19326 Fix `EntityCloner` replacing required components.
        
    </title><meta content="#19326 Fix `EntityCloner` replacing required components." property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-05/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-05-30</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-05/pr-19326-zh-cn-20250530>中文</a></div></div><div class=pr-content><h2 id=fixing-entitycloner-s-required-component-handling>Fixing <code>EntityCloner</code>’s Required Component Handling</h2><h3 id=basic-information>Basic Information</h3><ul><li><strong>Title</strong>: Fix <code>EntityCloner</code> replacing required components.<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19326<li><strong>Author</strong>: eugineerd<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Bug, A-ECS, S-Ready-For-Final-Review<li><strong>Created</strong>: 2025-05-21T16:25:14Z<li><strong>Merged</strong>: 2025-05-30T19:49:52Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h3 id=description-translation>Description Translation</h3><h1 id=objective>Objective</h1><p>Fix #19324<h2 id=solution>Solution</h2><p><code>EntityCloner</code> replaces required components when filtering. This is unexpected when comparing with the way the rest of bevy handles required components. This PR separates required components from explicit components when filtering in <code>EntityClonerBuilder</code>.<h2 id=testing>Testing</h2><p>Added a regression test for this case.<h3 id=the-problem-and-context>The Problem and Context</h3><p>The issue (#19324) revealed a behavioral inconsistency in Bevy’s ECS entity cloning mechanism. When using <code>EntityCloner</code> with component filters, required components (components that must exist alongside other components) were being forcibly replaced on target entities. This violated the expected behavior where required components should only be added if missing, not overwritten.<p>Consider a component <code>A</code> that requires component <code>B</code>. In normal ECS operations, adding <code>A</code> to an entity automatically adds <code>B</code> if missing. However, during filtered cloning with <code>EntityCloner</code>, if we cloned <code>A</code> to a target that already had <code>B</code>, the existing <code>B</code> would be unexpectedly replaced by the source entity’s <code>B</code>. This caused inconsistent state and violated the principle that required components should be handled implicitly.<h3 id=the-solution-approach>The Solution Approach</h3><p>The fix separates the handling of explicitly filtered components from required dependencies. Previously, required components were added to the main filter set, causing them to be treated as explicit cloning targets. The new approach:<ol><li>Introduces a dedicated <code>filter_required</code> set to track component dependencies<li>Modifies the cloning logic to only add required components if missing on the target<li>Preserves existing required components when present</ol><p>Key engineering decisions:<ul><li>Maintained backward compatibility with existing filter APIs<li>Minimized archetype lookups for performance<li>Used existing component requirement metadata from <code>ComponentInfo</code></ul><h3 id=the-implementation>The Implementation</h3><p>The core changes occur in <code>EntityCloner</code> and <code>EntityClonerBuilder</code>:<p><strong>1. Added required component tracking</strong><br> A new <code>filter_required</code> field tracks dependencies separately from explicit filters:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>filter</span><span style=color:#61676ccc>: </span><span>HashSet&LTComponentId></span><span style=color:#61676ccc>,
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>filter</span><span style=color:#61676ccc>: </span><span>HashSet&LTComponentId></span><span style=color:#61676ccc>,
</span><span>filter_required</span><span style=color:#61676ccc>: </span><span>HashSet&LTComponentId></span><span style=color:#61676ccc>,  </span><span style=color:#abb0b6;font-style:italic>// New field
</span></code></pre><p><strong>2. Modified filter application logic</strong><br> The <code>is_cloning_allowed</code> method now checks if required components exist on the target:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#fa6e32>fn </span><span style=color:#f29718>is_cloning_allowed</span><span>(
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>,
</span><span>    </span><span style=color:#ff8f40>component</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>ComponentId,
</span><span>    </span><span style=color:#ff8f40>target_archetype</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span><</span><span style=color:#ed9366>&</span><span>Archetype>,  </span><span style=color:#abb0b6;font-style:italic>// New parameter
</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>bool </span><span>{
</span><span>    </span><span style=color:#fa6e32>if </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filter_allows_components {
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filter</span><span style=color:#ed9366>.</span><span style=color:#f07171>contains</span><span>(component)
</span><span>            </span><span style=color:#ed9366>||</span><span> target_archetype</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_some_and</span><span>(|</span><span style=color:#ff8f40>archetype</span><span>| {
</span><span>                </span><span style=color:#ed9366>!</span><span>archetype</span><span style=color:#ed9366>.</span><span style=color:#f07171>contains</span><span>(</span><span style=color:#ed9366>*</span><span>component) </span><span style=color:#ed9366>&& </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filter_required</span><span style=color:#ed9366>.</span><span style=color:#f07171>contains</span><span>(component)
</span><span>            })
</span><span>    } </span><span style=color:#fa6e32>else </span><span>{
</span><span>        </span><span style=color:#ed9366>!</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filter</span><span style=color:#ed9366>.</span><span style=color:#f07171>contains</span><span>(component) </span><span style=color:#ed9366>&& !</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filter_required</span><span style=color:#ed9366>.</span><span style=color:#f07171>contains</span><span>(component)
</span><span>    }
</span><span>}
</span></code></pre><p><strong>3. Updated builder methods</strong><br> The <code>allow</code>/<code>deny</code> methods now handle required components correctly:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// In EntityClonerBuilder::allow
</span><span style=color:#fa6e32>for</span><span> required_id </span><span style=color:#ed9366>in</span><span> info</span><span style=color:#ed9366>.</span><span style=color:#f07171>required_components</span><span>()</span><span style=color:#ed9366>.</span><span style=color:#f07171>iter_ids</span><span>() {
</span><span>    </span><span style=color:#fa6e32>if </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>entity_cloner</span><span style=color:#ed9366>.</span><span>filter_allows_components {
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>entity_cloner</span><span style=color:#ed9366>.</span><span>filter_required</span><span style=color:#ed9366>.</span><span style=color:#f07171>insert</span><span>(required_id)</span><span style=color:#61676ccc>;  </span><span style=color:#abb0b6;font-style:italic>// Was 'filter'
</span><span>    } </span><span style=color:#fa6e32>else </span><span>{
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>entity_cloner</span><span style=color:#ed9366>.</span><span>filter_required</span><span style=color:#ed9366>.</span><span style=color:#f07171>remove</span><span>(</span><span style=color:#ed9366>&</span><span>required_id)</span><span style=color:#61676ccc>;
</span><span>    }
</span><span>}
</span></code></pre><h3 id=testing-1>Testing</h3><p>A regression test verifies the correct behavior with required components:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>test</span><span>]
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>cloning_with_required_components_preserves_existing</span><span>() {
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Clone</span><span style=color:#61676ccc>,</span><span> PartialEq</span><span style=color:#61676ccc>,</span><span> Debug</span><span style=color:#61676ccc>,</span><span> Default)]
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>require</span><span>(</span><span style=color:#f29718>B</span><span>(5))]  </span><span style=color:#abb0b6;font-style:italic>// Component A requires B
</span><span>    </span><span style=color:#fa6e32>struct </span><span style=color:#399ee6>A</span><span style=color:#61676ccc>;
</span><span>    
</span><span>    </span><span style=color:#61676ccc>#</span><span>[</span><span style=color:#f29718>derive</span><span>(Component</span><span style=color:#61676ccc>,</span><span> Clone</span><span style=color:#61676ccc>,</span><span> PartialEq</span><span style=color:#61676ccc>,</span><span> Debug)]
</span><span>    </span><span style=color:#fa6e32>struct </span><span style=color:#399ee6>B</span><span>(</span><span style=color:#fa6e32>u32</span><span>)</span><span style=color:#61676ccc>;
</span><span>    
</span><span>    </span><span style=color:#fa6e32>let mut</span><span> world </span><span style=color:#ed9366>= </span><span>World</span><span style=color:#ed9366>::</span><span>default()</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let</span><span> source </span><span style=color:#ed9366>=</span><span> world</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>((A</span><span style=color:#61676ccc>,</span><span> B(</span><span style=color:#ff8f40>0</span><span>)))</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()</span><span style=color:#61676ccc>;
</span><span>    </span><span style=color:#fa6e32>let</span><span> target </span><span style=color:#ed9366>=</span><span> world</span><span style=color:#ed9366>.</span><span style=color:#f07171>spawn</span><span>(B(</span><span style=color:#ff8f40>1</span><span>))</span><span style=color:#ed9366>.</span><span style=color:#f07171>id</span><span>()</span><span style=color:#61676ccc>;
</span><span>    
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// Clone A to target (should preserve target's B(1))
</span><span>    EntityCloner</span><span style=color:#ed9366>::</span><span>build(</span><span style=color:#ed9366>&</span><span style=color:#fa6e32>mut</span><span> world)
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>deny_all</span><span>()
</span><span>        </span><span style=color:#ed9366>.</span><span>allow</span><span style=color:#ed9366>::</span><span>&LTA>()
</span><span>        </span><span style=color:#ed9366>.</span><span style=color:#f07171>clone_entity</span><span>(source</span><span style=color:#61676ccc>,</span><span> target)</span><span style=color:#61676ccc>;
</span><span>    
</span><span>    </span><span style=color:#f07171>assert_eq!</span><span>(world</span><span style=color:#ed9366>.</span><span style=color:#f07171>entity</span><span>(target)</span><span style=color:#ed9366>.</span><span>get</span><span style=color:#ed9366>::</span><span>&LTB>()</span><span style=color:#61676ccc>, </span><span style=color:#55b4d4;font-style:italic>Some</span><span>(</span><span style=color:#ed9366>&</span><span>B(</span><span style=color:#ff8f40>1</span><span>)))</span><span style=color:#61676ccc>;
</span><span>}
</span></code></pre><h3 id=technical-insights>Technical Insights</h3><p>The solution leverages Bevy’s existing component requirement metadata from <code>ComponentInfo</code>. By separating required components into their own filter set:<ul><li>We maintain the existing filter API surface<li>Avoid expensive lookups by only fetching target archetype when needed<li>Preserve the principle that required components are additive only<li>The conditional archetype fetch (<code>target_archetype.is_some_and()</code>) ensures we only pay the lookup cost when required components exist</ul><h3 id=the-impact>The Impact</h3><ul><li>Fixes unexpected component replacement behavior<li>Maintains consistency with Bevy’s required component semantics<li>Preserves existing entity data when cloning<li>Adds ~8 lines of core logic with comprehensive test coverage</ul><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    A[EntityClonerBuilder] -->|allow/deny| B(Explicit Components)
</span><span>    A -->|auto-add| C(Required Components)
</span><span>    B --> D[filter set]
</span><span>    C --> E[filter_required set]
</span><span>    D --> F[Clone Logic]
</span><span>    E --> F
</span><span>    F --> G{Check target}
</span><span>    G -->|Component missing| H[Clone required]
</span><span>    G -->|Component present| I[Preserve existing]
</span></code></pre><h3 id=key-files-changed>Key Files Changed</h3><p><strong>crates/bevy_ecs/src/entity/clone_entities.rs</strong><ul><li>Added <code>filter_required</code> tracking field<li>Modified component allowance logic<li>Updated builder methods to handle requirements<li>Added regression test</ul><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before: filter contained both explicit and required components
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>is_cloning_allowed</span><span>(</span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>, </span><span style=color:#ff8f40>component</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>ComponentId) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>bool </span><span>{
</span><span>    (</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filter_allows_components </span><span style=color:#ed9366>&& </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filter</span><span style=color:#ed9366>.</span><span style=color:#f07171>contains</span><span>(component))
</span><span>        </span><span style=color:#ed9366>|| </span><span>(</span><span style=color:#ed9366>!</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filter_allows_components </span><span style=color:#ed9366>&& !</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filter</span><span style=color:#ed9366>.</span><span style=color:#f07171>contains</span><span>(component))
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After: Separate handling for required components
</span><span style=color:#fa6e32>fn </span><span style=color:#f29718>is_cloning_allowed</span><span>(
</span><span>    </span><span style=color:#ed9366>&</span><span style=color:#ff8f40>self</span><span>,
</span><span>    </span><span style=color:#ff8f40>component</span><span style=color:#61676ccc>: </span><span style=color:#ed9366>&</span><span>ComponentId,
</span><span>    </span><span style=color:#ff8f40>target_archetype</span><span style=color:#61676ccc>: </span><span style=color:#55b4d4;font-style:italic>Option</span><span><</span><span style=color:#ed9366>&</span><span>Archetype>,
</span><span>) </span><span style=color:#61676ccc>-> </span><span style=color:#fa6e32>bool </span><span>{
</span><span>    </span><span style=color:#fa6e32>if </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filter_allows_components {
</span><span>        </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filter</span><span style=color:#ed9366>.</span><span style=color:#f07171>contains</span><span>(component)
</span><span>            </span><span style=color:#ed9366>||</span><span> target_archetype</span><span style=color:#ed9366>.</span><span style=color:#f07171>is_some_and</span><span>(|</span><span style=color:#ff8f40>archetype</span><span>| {
</span><span>                </span><span style=color:#ed9366>!</span><span>archetype</span><span style=color:#ed9366>.</span><span style=color:#f07171>contains</span><span>(</span><span style=color:#ed9366>*</span><span>component) </span><span style=color:#ed9366>&& </span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filter_required</span><span style=color:#ed9366>.</span><span style=color:#f07171>contains</span><span>(component)
</span><span>            })
</span><span>    } </span><span style=color:#fa6e32>else </span><span>{
</span><span>        </span><span style=color:#ed9366>!</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filter</span><span style=color:#ed9366>.</span><span style=color:#f07171>contains</span><span>(component) </span><span style=color:#ed9366>&& !</span><span style=color:#55b4d4;font-style:italic>self</span><span style=color:#ed9366>.</span><span>filter_required</span><span style=color:#ed9366>.</span><span style=color:#f07171>contains</span><span>(component)
</span><span>    }
</span><span>}
</span></code></pre><h3 id=further-reading>Further Reading</h3><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/design/component-dependencies/ target=_blank>Component Dependencies in ECS</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_ecs/latest/bevy_ecs/entity/struct.EntityCloner.html target=_blank>Entity Cloning Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://github.com/bevyengine/bevy/issues/19324 target=_blank>Original Issue #19324</a></ul></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-05/pr_19326.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>