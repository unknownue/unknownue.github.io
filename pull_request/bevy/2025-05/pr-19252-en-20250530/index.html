<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19252 Clarify Resource change detection behaviour in condition docs
        
    </title><meta content="#19252 Clarify Resource change detection behaviour in condition docs" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-05/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-05-30</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-05/pr-19252-zh-cn-20250530>中文</a></div></div><div class=pr-content><h2 id=technical-analysis-pr-19252-clarify-resource-change-detection-behaviour>Technical Analysis: PR #19252 - Clarify Resource Change Detection Behaviour</h2><h3 id=basic-information>Basic Information</h3><ul><li><strong>Title</strong>: Clarify Resource change detection behaviour in condition docs<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19252<li><strong>Author</strong>: theotherphil<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, A-ECS, S-Ready-For-Final-Review, D-Straightforward<li><strong>Created</strong>: 2025-05-17T10:08:20Z<li><strong>Merged</strong>: 2025-05-30T01:04:39Z<li><strong>Merged By</strong>: mockersf</ul><h3 id=description-translation>Description Translation</h3><h1 id=objective>Objective</h1><p>Fixes https://github.com/bevyengine/bevy/issues/17933<h2 id=solution>Solution</h2><p>Correct “value has changed’” in docs to “value has been added or mutably dereferenced”, with a note for emphasis copied from the docs for Changed.<h2 id=testing>Testing</h2><ul><li></ul><h3 id=the-story-of-this-pull-request>The Story of This Pull Request</h3><p>The PR addresses a documentation ambiguity in Bevy’s ECS change detection system. Resource change detection conditions were previously described using the phrase “value has changed,” which could be misinterpreted as value-based comparison. This was reported in issue #17933, where users might expect Bevy to perform deep equality checks on resource values.<p>The core misunderstanding stemmed from how Bevy actually implements change detection. Rather than comparing previous and current values, Bevy flags resources as changed when they’re either:<ol><li>Newly added<li>Mutably dereferenced (via <code>DerefMut</code>)<li>Removed (for specific conditions)</ol><p>This is a fundamental aspect of Bevy’s change tracking system that wasn’t clearly communicated in the documentation. The solution modifies docstrings for three condition functions to accurately reflect this behavior. The key improvement is replacing “value has changed” with explicit descriptions of the actual triggers, and adding standardized notes about the dereferencing behavior.<p>For consistency, the PR copies the existing note from <code>Changed</code> documentation (“Bevy does not compare resources to their previous values”) to all three modified functions. This provides immediate clarification without requiring users to hunt through documentation.<p>The changes are purely documentation-focused - no functional modifications were made to the ECS logic. This approach minimizes risk while maximizing clarity for users working with resource change conditions.<h3 id=visual-representation>Visual Representation</h3><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph LR
</span><span>    A[User Misconception] --> B[Value Comparison Expected]
</span><span>    C[Actual Behavior] --> D[Added/Removed Detection]
</span><span>    C --> E[Mutable Dereference Detection]
</span><span>    F[PR Solution] --> G[Updated Docstrings]
</span><span>    F --> H[Standardized Notes]
</span></code></pre><h3 id=key-files-changed>Key Files Changed</h3><p><strong>File</strong>: <code>crates/bevy_ecs/src/schedule/condition.rs</code><p><strong>Changes</strong>: Documentation updates for three resource change detection conditions to clarify actual behavior.<p><strong>Key modifications</strong>:<ol><li><strong>resource_changed</strong> condition:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>/// A [`SystemCondition`]-satisfying system that returns `true`
</span><span style=color:#abb0b6;font-style:italic>/// if the resource of the given type has had its value changed since the condition
</span><span style=color:#abb0b6;font-style:italic>/// was last checked.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// The value is considered changed when it is added. The first time this condition
</span><span style=color:#abb0b6;font-style:italic>/// is checked after the resource was added, it will return `true`.
</span><span style=color:#abb0b6;font-style:italic>/// Change detection behaves like this everywhere in Bevy.
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>/// A [`SystemCondition`]-satisfying system that returns `true`
</span><span style=color:#abb0b6;font-style:italic>/// if the resource of the given type has been added or mutably dereferenced
</span><span style=color:#abb0b6;font-style:italic>/// since the condition was last checked.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// **Note** that simply *mutably dereferencing* a resource is considered a change ([`DerefMut`](std::ops::DerefMut)).
</span><span style=color:#abb0b6;font-style:italic>/// Bevy does not compare resources to their previous values.
</span></code></pre><ol start=2><li><strong>resource_exists_and_changed</strong> condition:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>/// A [`SystemCondition`]-satisfying system that returns `true`
</span><span style=color:#abb0b6;font-style:italic>/// if the resource of the given type has had its value changed since the condition
</span><span style=color:#abb0b6;font-style:italic>/// was last checked.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// The value is considered changed when it is added. The first time this condition
</span><span style=color:#abb0b6;font-style:italic>/// is checked after the resource was added, it will return `true`.
</span><span style=color:#abb0b6;font-style:italic>/// Change detection behaves like this everywhere in Bevy.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// This run condition does not detect when the resource is removed.
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>/// A [`SystemCondition`]-satisfying system that returns `true`
</span><span style=color:#abb0b6;font-style:italic>/// if the resource of the given type has been added or mutably dereferenced since the condition
</span><span style=color:#abb0b6;font-style:italic>/// was last checked.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// **Note** that simply *mutably dereferencing* a resource is considered a change ([`DerefMut`](std::ops::DerefMut)).
</span><span style=color:#abb0b6;font-style:italic>/// Bevy does not compare resources to their previous values.
</span></code></pre><ol start=3><li><strong>resource_changed_or_removed</strong> condition:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>/// A [`SystemCondition`]-satisfying system that returns `true`
</span><span style=color:#abb0b6;font-style:italic>/// if the resource of the given type has had its value changed since the condition
</span><span style=color:#abb0b6;font-style:italic>/// was last checked.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// The value is considered changed when it is added. The first time this condition
</span><span style=color:#abb0b6;font-style:italic>/// is checked after the resource was added, it will return `true`.
</span><span style=color:#abb0b6;font-style:italic>/// Change detection behaves like this everywhere in Bevy.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// This run condition also detects removal. It will return `true` if the resource
</span><span style=color:#abb0b6;font-style:italic>/// has been removed since the run condition was last checked.
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>/// A [`SystemCondition`]-satisfying system that returns `true`
</span><span style=color:#abb0b6;font-style:italic>/// if the resource of the given type has been added, removed or mutably dereferenced since the condition
</span><span style=color:#abb0b6;font-style:italic>/// was last checked.
</span><span style=color:#abb0b6;font-style:italic>///
</span><span style=color:#abb0b6;font-style:italic>/// **Note** that simply *mutably dereferencing* a resource is considered a change ([`DerefMut`](std::ops::DerefMut)).
</span><span style=color:#abb0b6;font-style:italic>/// Bevy does not compare resources to their previous values.
</span></code></pre><h3 id=further-reading>Further Reading</h3><ol><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/next/programming/change-detection/ target=_blank>Bevy Change Detection Documentation</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/std/ops/trait.DerefMut.html target=_blank>Rust DerefMut Trait</a><li><a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_ecs/latest/bevy_ecs/schedule/condition/index.html target=_blank>Bevy ECS Conditions API Reference</a></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-05/pr_19252.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>