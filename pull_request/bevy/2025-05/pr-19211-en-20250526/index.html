<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19211 Explanation for the '2d shapes' example
        
    </title><meta content="#19211 Explanation for the '2d shapes' example" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-05/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-05-26</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-05/pr-19211-zh-cn-20250526>中文</a></div></div><div class=pr-content><h1 id=explanation-for-the-2d-shapes-example>Explanation for the ‘2d shapes’ example</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Explanation for the ‘2d shapes’ example<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19211<li><strong>Author</strong>: fallible-algebra<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: C-Docs, A-Rendering, C-Examples, S-Ready-For-Final-Review, D-Straightforward<li><strong>Created</strong>: 2025-05-14T17:10:02Z<li><strong>Merged</strong>: 2025-05-26T19:40:40Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><p>Explanation for the 2d shapes example, taken from the original HackMD document and edited a bit.<p>This example is a strange one, it’s eye-catching mostly because it’s the first example (at time of writing) in the examples page. That being said, the example does a decent amount of teaching utility to it: we can explain the bevy math-shape to mesh pipeline, which illuminates a way of transforming one form of data (abstract, mathematical shape descriptions) into another (meshes) which may be novel or inspirational to some users.<h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><p>The 2D shapes example in Bevy served as an introductory demonstration but lacked clear documentation about its underlying mechanics. While functional, it missed an opportunity to explain key concepts about Bevy’s rendering pipeline and type system to new users. This PR focused on enhancing the educational value through improved code comments.<p>The core challenge was explaining three interconnected concepts in a limited space:<ol><li>Conversion from mathematical shapes to renderable meshes<li>Material handling through the asset system<li>Bevy’s newtype pattern for component handles</ol><p>The solution involved rewriting the module-level documentation to explicitly outline:<ul><li>How shape primitives become meshes via <code>From&LTShape></code> implementation<li>Material creation through <code>ColorMaterial</code> and asset insertion<li>Purpose of <code>Mesh2dHandle</code> and <code>MeshMaterial2d</code> wrappers</ul><p>Key code changes focused on the documentation block:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#abb0b6;font-style:italic>//! Shows how to render simple primitive shapes with a single color.
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#abb0b6;font-style:italic>//! Here we use shape primitives to build meshes in a 2D rendering context...
</span><span style=color:#abb0b6;font-style:italic>//! Meshes are better known for their use in 3D rendering...
</span><span style=color:#abb0b6;font-style:italic>//! A "shape definition" is not a mesh on its own...
</span></code></pre><p>The implementation preserves all existing functionality while adding explanatory depth. By explaining the <code>From</code> trait usage for mesh generation and the asset system’s role in material creation, the documentation helps users understand Bevy’s data transformation pipeline.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    Shape[Shape Primitive] -->|From&LTT>| Mesh
</span><span>    Mesh --> Assets[Assets&LTMesh>]
</span><span>    Color -->|ColorMaterial::from| Material
</span><span>    Assets --> Handle[Handle&LTMesh>]
</span><span>    Material --> MaterialHandle[Handle&LTColorMaterial>]
</span><span>    Handle -->|Mesh2dHandle| Entity
</span><span>    MaterialHandle -->|MeshMaterial2d| Entity
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><h3 id=examples-2d-2d-shapes-rs-11-1><code>examples/2d/2d_shapes.rs</code> (+11/-1)</h3><p><strong>Purpose:</strong> Enhance documentation for the 2D shapes example<p>Before:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>//! Shows how to render simple primitive shapes with a single color.
</span></code></pre><p>After:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>//! Here we use shape primitives to build meshes in a 2D rendering context...
</span><span style=color:#abb0b6;font-style:italic>//! Meshes are better known for their use in 3D rendering...
</span><span style=color:#abb0b6;font-style:italic>//! A "shape definition" is not a mesh on its own...
</span><span style=color:#abb0b6;font-style:italic>//! Both the mesh and material need to be wrapped in their own "newtypes"...
</span></code></pre><p>These changes directly support the PR’s goal by explaining:<ol><li>Mesh generation pipeline<li>Asset handle management<li>Newtype pattern usage in components</ol><h2 id=further-reading>Further Reading</h2><ul><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/getting-started/assets/ target=_blank>Bevy Asset System</a><li><a rel="noopener nofollow noreferrer" href=https://bevyengine.org/learn/book/getting-started/rendering/ target=_blank>Rendering Pipeline</a><li><a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/rust-by-example/generics/new_types.html target=_blank>Newtype Pattern in Rust</a></ul><h2 id=full-code-diff>Full Code Diff</h2><pre class=language-diff data-lang=diff style=color:#61676c;background-color:#fafafa><code class=language-diff data-lang=diff><span>diff --git a/examples/2d/2d_shapes.rs b/examples/2d/2d_shapes.rs
</span><span>index dbdd846ebaff6..f69e138364190 100644
</span><span style=color:#c594c5>--- a/examples/2d/2d_shapes.rs
</span><span style=color:#c594c5>+++ b/examples/2d/2d_shapes.rs
</span><span style=color:#c594c5>@@ -1,4 +1,14 @@
</span><span style=color:#f07171>-//! Shows how to render simple primitive shapes with a single color.
</span><span style=color:#86b300>+//! Here we use shape primitives to build meshes in a 2D rendering context, making each mesh a certain color by giving that mesh's entity a material based off a [`Color`].
</span><span style=color:#86b300>+//!
</span><span style=color:#86b300>+//! Meshes are better known for their use in 3D rendering, but we can use them in a 2D context too. Without a third dimension, the meshes we're building are flat – like paper on a table. These are still very useful for "vector-style" graphics, picking behavior, or as a foundation to build off of for where to apply a shader.
</span><span style=color:#86b300>+//!
</span><span style=color:#86b300>+//! A "shape definition" is not a mesh on its own. A circle can be defined with a radius, i.e. [`Circle::new(50.0)`][Circle::new], but rendering tends to happen with meshes built out of triangles. So we need to turn shape descriptions into meshes.
</span><span style=color:#86b300>+//!
</span><span style=color:#86b300>+//! Thankfully, we can add shape primitives directly to [`Assets&LTMesh>`] because [`Mesh`] implements [`From`] for shape primitives and [`Assets&LTT>::add`] can be given any value that can be "turned into" `T`!
</span><span style=color:#86b300>+//!
</span><span style=color:#86b300>+//! We apply a material to the shape by first making a [`Color`] then calling [`Assets&LTColorMaterial>::add`] with that color as its argument, which will create a material from that color through the same process [`Assets&LTMesh>::add`] can take a shape primitive.
</span><span style=color:#86b300>+//!
</span><span style=color:#86b300>+//! Both the mesh and material need to be wrapped in their own "newtypes". The mesh and material are currently [`Handle&LTMesh>`] and [`Handle&LTColorMaterial>`] at the moment, which are not components. Handles are put behind "newtypes" to prevent ambiguity, as some entities might want to have handles to meshes (or images, or materials etc.) for different purposes! All we need to do to make them rendering-relevant components is wrap the mesh handle and the material handle in [`Mesh2d`] and [`MeshMaterial2d`] respectively.
</span><span> //!
</span><span> //! You can toggle wireframes with the space bar except on wasm. Wasm does not support
</span><span> //! `POLYGON_MODE_LINE` on the gpu.
</span></code></pre></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-05/pr_19211.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>