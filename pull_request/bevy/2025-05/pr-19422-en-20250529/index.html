<!doctype html><html class="dark light" lang=en><head><meta charset=UTF-8><meta content="IE=edge" http-equiv=X-UA-Compatible><meta content="width=device-width,initial-scale=1.0" name=viewport><meta content=https://unknownue.github.io name=base><title>
         #19422 Rename Position to UiPosition in bevy_ui
        
    </title><meta content="#19422 Rename Position to UiPosition in bevy_ui" property=og:title><meta content="A personal blog built with Zola and Apollo theme" property=og:description><meta content="A personal blog built with Zola and Apollo theme" name=description><link href=/icons/favicon.png rel=icon type=image/png><link href=https://unknownue.github.io/fonts.css rel=stylesheet><script src=https://unknownue.github.io/js/codeblock.js></script><script src=https://unknownue.github.io/js/toc.js></script><script src=https://unknownue.github.io/js/note.js></script><script>MathJax = {
              tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']]
              }
            };</script><script async id=MathJax-script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><link title="Unknownue's Blog" href=https://unknownue.github.io/atom.xml rel=alternate type=application/atom+xml><link href=https://unknownue.github.io/theme/light.css rel=stylesheet><link href=https://unknownue.github.io/theme/dark.css id=darkModeStyle rel=stylesheet><script src=https://unknownue.github.io/js/themetoggle.js></script><script>setTheme(getSavedTheme());</script><link href=https://unknownue.github.io/main.css media=screen rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/mermaid@10.6.1/dist/mermaid.min.js></script><script>// Initialize mermaid once DOM is loaded
        document.addEventListener('DOMContentLoaded', function() {
            mermaid.initialize({
                startOnLoad: false,
                theme: document.body && document.body.classList.contains('dark') ? 'dark' : 'default',
                securityLevel: 'loose',
                flowchart: {
                    useMaxWidth: true,
                    htmlLabels: true
                },
                sequence: {
                    diagramMarginX: 50,
                    diagramMarginY: 10,
                    actorMargin: 50,
                    width: 150,
                    height: 65
                }
            });
        });</script><script src=https://unknownue.github.io/js/main.js></script><script defer src=https://unknownue.github.io/js/label-colors.js></script><link href=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/styles/github.min.css rel=stylesheet><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/highlight.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/rust.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/python.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/javascript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/typescript.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/go.min.js></script><script src=https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.7.0/languages/cpp.min.js></script><script>// Ensure highlight.js is properly configured
        document.addEventListener('DOMContentLoaded', function() {
            if (typeof hljs !== 'undefined') {
                hljs.configure({
                    languages: ['rust', 'javascript', 'python', 'cpp', 'go', 'typescript'],
                    ignoreUnescapedHTML: true
                });
                console.log('Highlight.js configured in header');
            }
        });</script><link href=https://cdn.jsdelivr.net/npm/diff2html/bundles/css/diff2html.min.css rel=stylesheet><script src=https://cdn.jsdelivr.net/npm/diff2html/bundles/js/diff2html-ui.min.js></script><script src=https://unknownue.github.io/js/syntax-highlight.js></script><script src=https://unknownue.github.io/js/diff-sidebar.js></script><script src="https://unknownue.github.io/js/searchElasticlunr.min.js?h=3626c0ef99daa745b31e" defer></script><body><div class=content><header><div class=main><a href=https://unknownue.github.io>Unknownue's Blog</a><div class=socials><a class=social href=https://github.com/unknownue rel=me> <img alt=github src=https://unknownue.github.io/icons/social/github.svg> </a><a class=social href=https://github.com/unknownue/unknownue.github.io rel=me> <img alt=github-io src=https://unknownue.github.io/icons/social/rss.svg> </a></div></div><nav><a href=https://unknownue.github.io/posts style=margin-left:.25em>/posts</a><a href=https://unknownue.github.io/projects style=margin-left:.25em>/projects</a><a href=https://unknownue.github.io/about style=margin-left:.25em>/about</a><a href=https://unknownue.github.io/tags style=margin-left:.25em>/tags</a><button title="$SHORTCUT to open search" class=search-button id=search-button><img alt=Search class=search-icon src=https://unknownue.github.io/icons/search.svg></button><div class="search-modal js" aria-labelledby=modalTitle id=searchModal role=dialog><div id=modal-content><h1 class=page-header id=modalTitle>Search</h1><div id=searchBar><input aria-controls=results-container aria-expanded=false autocomplete=off id=searchInput placeholder=Search... role=combobox spellcheck=false><button title="Clear search" class=clear-button id=clear-search><svg viewbox="0 -960 960 960" xmlns=http://www.w3.org/2000/svg><path d="m256-200-56-56 224-224-224-224 56-56 224 224 224-224 56 56-224 224 224 224-56 56-224-224-224 224Z"/></svg></button></div><div id=results-container><div id=results-info><span id=zero_results style=display:none>No results</span><span id=one_result style=display:none>1 result</span><span id=many_results style=display:none>$NUMBER results</span></div><div id=results role=listbox></div></div></div></div><a onclick="toggleTheme(); event.preventDefault();" href=# id=dark-mode-toggle> <img alt=Light id=sun-icon src=https://unknownue.github.io/icons/sun.svg style=filter:invert()> <img alt=Dark id=moon-icon src=https://unknownue.github.io/icons/moon.svg> </a><script>updateItemToggleTheme()</script></nav></header><div class=pull-request-page><article class=md-content-page style=display:none></article><div class=back-link><a href=/pull_request/bevy/2025-05/>← Back to Pull Requests</a></div><div class=pr-metadata><span class=pr-date>2025-05-29</span><div class=language-switcher><span class="lang-link active" data-lang=en>English</span> / <a class=lang-link data-lang=zh-cn href=/pull_request/bevy/2025-05/pr-19422-zh-cn-20250529>中文</a></div></div><div class=pr-content><h1 id=pull-request-analysis-rename-position-to-uiposition-in-bevy-ui>Pull Request Analysis: Rename Position to UiPosition in bevy_ui</h1><h2 id=basic-information>Basic Information</h2><ul><li><strong>Title</strong>: Rename Position to UiPosition in bevy_ui<li><strong>PR Link</strong>: https://github.com/bevyengine/bevy/pull/19422<li><strong>Author</strong>: Zeophlite<li><strong>Status</strong>: MERGED<li><strong>Labels</strong>: D-Trivial, A-UI, C-Usability, S-Ready-For-Final-Review, X-Contentious<li><strong>Created</strong>: 2025-05-29T02:32:21Z<li><strong>Merged</strong>: 2025-05-29T15:11:44Z<li><strong>Merged By</strong>: alice-i-cecile</ul><h2 id=description-translation>Description Translation</h2><h1 id=objective>Objective</h1><ul><li>Fixes #19418</ul><h2 id=solution>Solution</h2><ul><li>Rename Position to UiPosition in bevy_ui</ul><h2 id=testing>Testing</h2><ul><li><code>cargo build</code><li><code>cargo run --example gradients</code><li><code>cargo run --example stacked_gradients</code></ul><h2 id=the-story-of-this-pull-request>The Story of This Pull Request</h2><h3 id=the-problem-and-context>The Problem and Context</h3><p>The PR addresses a naming conflict in Bevy’s UI system. The <code>Position</code> struct in <code>bevy_ui</code> was causing ambiguity because <code>bevy_core</code> also has a <code>Position</code> component. This collision created potential confusion and compilation issues when both modules were used together. The conflict manifested specifically in issue #19418, where users couldn’t disambiguate between the two <code>Position</code> types. This is particularly problematic in Rust where type names must be unique within a scope or explicitly disambiguated.<h3 id=the-solution-approach>The Solution Approach</h3><p>The solution implemented a straightforward but impactful change: renaming <code>Position</code> to <code>UiPosition</code> throughout the UI system. This approach maintains identical functionality while eliminating the naming conflict. The choice of <code>UiPosition</code> clearly signals the type’s domain (UI-specific positioning) and follows Bevy’s naming conventions for UI components. No alternative solutions were considered since renaming was the most direct way to resolve the collision without introducing breaking changes to public APIs beyond what’s acceptable in an ongoing development cycle.<h3 id=the-implementation>The Implementation</h3><p>The implementation required systematic updates across multiple files. The core change occurred in <code>geometry.rs</code> where the struct definition was renamed:<pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Position </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>anchor</span><span style=color:#61676ccc>:</span><span> Vec2,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>x</span><span style=color:#61676ccc>:</span><span> Val,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>y</span><span style=color:#61676ccc>:</span><span> Val,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>UiPosition </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>anchor</span><span style=color:#61676ccc>:</span><span> Vec2,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>x</span><span style=color:#61676ccc>:</span><span> Val,
</span><span>    </span><span style=color:#fa6e32>pub </span><span>y</span><span style=color:#61676ccc>:</span><span> Val,
</span><span>}
</span></code></pre><p>All associated implementations (<code>Default</code>, <code>From</code> conversions) and constant definitions (like <code>CENTER</code>, <code>TOP_LEFT</code>) were similarly updated to use <code>UiPosition</code>. The changes propagated to dependent modules:<ol><li><strong>Gradient systems</strong> in <code>gradients.rs</code> were updated to use <code>UiPosition</code> for gradient positioning:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// RadialGradient before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>RadialGradient </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>position</span><span style=color:#61676ccc>:</span><span> Position,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// RadialGradient after:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>RadialGradient </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>position</span><span style=color:#61676ccc>:</span><span> UiPosition,
</span><span>    </span><span style=color:#abb0b6;font-style:italic>// ...
</span><span>}
</span></code></pre><ol start=2><li><strong>Reflection registration</strong> in <code>lib.rs</code> was updated to maintain type information:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#ed9366>.</span><span>register_type</span><span style=color:#ed9366>::</span><span>&LTPosition>()
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#ed9366>.</span><span>register_type</span><span style=color:#ed9366>::</span><span>&LTUiPosition>()
</span></code></pre><ol start=3><li><strong>Example code</strong> was updated to use the new naming:</ol><pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>(Position</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>TOP_LEFT</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"TOP_LEFT"</span><span>)
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>(UiPosition</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>TOP_LEFT</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"TOP_LEFT"</span><span>)
</span></code></pre><ol start=4><li><strong>Documentation</strong> in release notes was updated to reflect the change:</ol><pre class=language-markdown data-lang=markdown style=color:#61676c;background-color:#fafafa><code class=language-markdown data-lang=markdown><span>// Before:
</span><span style=color:#ed9366;background-color:#61676c10>`Position`</span><span> type
</span><span>
</span><span>// After:
</span><span style=color:#ed9366;background-color:#61676c10>`UiPosition`</span><span> type
</span></code></pre><h3 id=technical-insights>Technical Insights</h3><p>The change demonstrates important Rust ecosystem practices:<ol><li><strong>Type disambiguation</strong>: Using module-specific prefixes (<code>Ui</code> in this case) avoids collisions in large codebases<li><strong>Refactoring safety</strong>: The use of constants (like <code>UiPosition::CENTER</code>) minimized errors during renaming<li><strong>API stability</strong>: Maintaining identical struct fields and methods preserved existing functionality<li><strong>Documentation hygiene</strong>: Updating release notes ensures accurate references for users</ol><p>The <code>X-Contentious</code> label suggests there might have been discussion about the naming choice, but <code>UiPosition</code> was ultimately selected for clarity and consistency with Bevy’s UI naming conventions.<h3 id=the-impact>The Impact</h3><p>This change resolves the immediate naming conflict (#19418) and improves long-term code maintainability:<ol><li>Eliminates compilation errors when using both <code>bevy_ui</code> and <code>bevy_core</code><li>Provides clearer context for the type’s purpose through its name<li>Maintains full backward compatibility within the UI system’s behavior<li>Sets a precedent for domain-specific naming in Bevy’s module system</ol><p>The minimal diff (+30/-30 lines) demonstrates how a focused, mechanical change can solve a concrete technical problem without introducing side effects.<h2 id=visual-representation>Visual Representation</h2><pre class=language-mermaid data-lang=mermaid style=color:#61676c;background-color:#fafafa><code class=language-mermaid data-lang=mermaid><span>graph TD
</span><span>    UiPosition[UiPosition] --> Geometry[geometry.rs]
</span><span>    UiPosition --> Gradients[gradients.rs]
</span><span>    Gradients --> Radial[RadialGradient]
</span><span>    Gradients --> Conic[ConicGradient]
</span><span>    UiPosition --> Examples[Examples]
</span><span>    UiPosition --> Reflection[Reflection System]
</span></code></pre><h2 id=key-files-changed>Key Files Changed</h2><ol><li><p><code>crates/bevy_ui/src/geometry.rs</code> (+5/-5)</p> <ul><li>Renamed <code>Position</code> struct to <code>UiPosition</code> and updated all implementations</ul> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>Position </span><span>{ ... }
</span><span style=color:#fa6e32>impl </span><span>Default </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>Position </span><span>{ </span><span style=color:#ed9366>... </span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>UiPosition </span><span>{ ... }
</span><span style=color:#fa6e32>impl </span><span>Default </span><span style=color:#fa6e32>for </span><span style=color:#399ee6>UiPosition </span><span>{ </span><span style=color:#ed9366>... </span><span>}
</span></code></pre><li><p><code>crates/bevy_ui/src/gradients.rs</code> (+7/-7)</p> <ul><li>Updated gradient structs to use <code>UiPosition</code></ul> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>RadialGradient </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>position</span><span style=color:#61676ccc>:</span><span> Position,
</span><span>}
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span style=color:#fa6e32>pub struct </span><span style=color:#399ee6>RadialGradient </span><span>{
</span><span>    </span><span style=color:#fa6e32>pub </span><span>position</span><span style=color:#61676ccc>:</span><span> UiPosition,
</span><span>}
</span></code></pre><li><p><code>examples/testbed/ui.rs</code> (+9/-9)</p> <ul><li>Updated example to use <code>UiPosition</code> constants</ul> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>(Position</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>TOP_LEFT</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"TOP_LEFT"</span><span>)
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>(UiPosition</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>TOP_LEFT</span><span style=color:#61676ccc>, </span><span style=color:#86b300>"TOP_LEFT"</span><span>)
</span></code></pre><li><p><code>examples/ui/gradients.rs</code> (+2/-2)</p> <ul><li>Updated gradient examples</ul> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>position</span><span style=color:#61676ccc>: </span><span>Position</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>CENTER
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>position</span><span style=color:#61676ccc>: </span><span>UiPosition</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>CENTER
</span></code></pre><li><p><code>examples/ui/stacked_gradients.rs</code> (+2/-2)</p> <ul><li>Updated stacked gradients example</ul> <pre class=language-rust data-lang=rust style=color:#61676c;background-color:#fafafa><code class=language-rust data-lang=rust><span style=color:#abb0b6;font-style:italic>// Before:
</span><span>position</span><span style=color:#61676ccc>: </span><span>Position</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>TOP</span><span style=color:#ed9366>.</span><span style=color:#f07171>at_x</span><span>(Val</span><span style=color:#ed9366>::</span><span>Percent(</span><span style=color:#ff8f40>5.</span><span>))
</span><span>
</span><span style=color:#abb0b6;font-style:italic>// After:
</span><span>position</span><span style=color:#61676ccc>: </span><span>UiPosition</span><span style=color:#ed9366>::</span><span style=color:#ff8f40>TOP</span><span style=color:#ed9366>.</span><span style=color:#f07171>at_x</span><span>(Val</span><span style=color:#ed9366>::</span><span>Percent(</span><span style=color:#ff8f40>5.</span><span>))
</span></code></pre></ol><h2 id=further-reading>Further Reading</h2><ol><li>Rust naming conventions: <a rel="noopener nofollow noreferrer" href=https://rust-lang.github.io/api-guidelines/naming.html target=_blank>Rust API Guidelines</a><li>Bevy UI system: <a rel="noopener nofollow noreferrer" href=https://docs.rs/bevy_ui/latest/bevy_ui/ target=_blank>Bevy UI Documentation</a><li>Namespace conflicts: <a rel="noopener nofollow noreferrer" href=https://doc.rust-lang.org/reference/names.html target=_blank>Rust Reference - Name Resolution</a><li>Refactoring techniques: <a rel="noopener nofollow noreferrer" href=https://www.oreilly.com/library/view/working-effectively-with/0131177052/ target=_blank>Working Effectively with Legacy Code</a></ol></div><div data-is-md-page=true data-patch-exists=true data-patch-path=/pull_request/bevy/2025-05/pr_19422.patch id=patch-info style=display:none></div><div class=bottom-spacer></div></div></div>