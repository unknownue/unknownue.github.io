+++
title = "#20754 Add a `WinitSettings::continuous` constructor"
date = "2025-09-11T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = true

[taxonomies]
list_display = ["show"]

[extra]
current_language = "en"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2025-09/pr-20754-en-20250911" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2025-09/pr-20754-zh-cn-20250911" }}
labels = ["D-Trivial", "A-Windowing", "C-Usability"]
+++

# Add a `WinitSettings::continuous` constructor

## Basic Information
- **Title**: Add a `WinitSettings::continuous` constructor
- **PR Link**: https://github.com/bevyengine/bevy/pull/20754
- **Author**: ickshonpe
- **Status**: MERGED
- **Labels**: D-Trivial, A-Windowing, C-Usability, S-Ready-For-Final-Review
- **Created**: 2025-08-25T17:03:02Z
- **Merged**: 2025-09-11T20:11:09Z
- **Merged By**: alice-i-cecile

## Description
# Objective

* Add a constructor to `WinitSettings` for the continuous update mode used by the stress tests.

## Solution

* Add the constructor.

## The Story of This Pull Request

This PR addresses a straightforward but repetitive pattern found across Bevy's stress test examples. The problem was that multiple stress tests needed to configure their window update mode to run continuously for performance benchmarking, but each was manually constructing the same `WinitSettings` configuration.

Before this change, each stress test example contained repetitive boilerplate code:

```rust
.insert_resource(WinitSettings {
    focused_mode: UpdateMode::Continuous,
    unfocused_mode: UpdateMode::Continuous,
})
```

The solution was to add a convenience constructor method `continuous()` to the `WinitSettings` struct that encapsulates this common configuration pattern. This constructor returns a `WinitSettings` instance with both `focused_mode` and `unfocused_mode` set to `UpdateMode::Continuous`, ensuring the application updates as fast as possible regardless of window focus state.

The implementation follows established patterns in the Bevy codebase for providing convenient constructors that encapsulate common configuration scenarios. The new method includes clear documentation explaining its purpose and behavior.

After implementing the constructor, the PR updates all stress test examples to use this new method, replacing the repetitive manual configuration with a single method call:

```rust
.insert_resource(WinitSettings::continuous())
```

This change improves code maintainability by reducing duplication and making the intent clearer. If the continuous update mode configuration needs to change in the future, it can be updated in one place rather than across multiple files.

The changes are minimal and focused, affecting only the configuration code without altering any actual game logic or rendering behavior. The stress tests continue to function exactly as before, but with cleaner, more maintainable initialization code.

## Visual Representation

```mermaid
graph TD
    A[WinitSettings struct] --> B[new continuous() constructor]
    B --> C[Sets both focused_mode and unfocused_mode to Continuous]
    C --> D[Stress test examples]
    D --> E[bevymark.rs]
    D --> F[many_animated_sprites.rs]
    D --> G[many_buttons.rs]
    D --> H[many_foxes.rs]
    D --> I[11 other stress tests]
```

## Key Files Changed

### `crates/bevy_winit/src/winit_config.rs` (+10/-0)
Added a new constructor method for continuous update mode:

```rust
/// The application will update as fast possible.
///
/// Uses [`Continuous`](UpdateMode::Continuous) regardless of whether windows have focus.
pub fn continuous() -> Self {
    WinitSettings {
        focused_mode: UpdateMode::Continuous,
        unfocused_mode: UpdateMode::Continuous,
    }
}
```

### Multiple stress test example files
Updated 12 stress test examples to use the new constructor instead of manual configuration. Example from `examples/stress_tests/bevymark.rs`:

```rust
// Before:
.insert_resource(WinitSettings {
    focused_mode: UpdateMode::Continuous,
    unfocused_mode: UpdateMode::Continuous,
})

// After:
.insert_resource(WinitSettings::continuous())
```

Similar changes were made to:
- `many_animated_sprites.rs`
- `many_buttons.rs` 
- `many_foxes.rs`
- `many_cameras_lights.rs`
- `many_gizmos.rs`
- `many_glyphs.rs`
- `many_gradients.rs`
- `many_lights.rs`
- `many_sprites.rs`
- `many_text2d.rs`
- `text_pipeline.rs`

## Further Reading

- [Bevy Winit Settings Documentation](https://docs.rs/bevy_winit/latest/bevy_winit/struct.WinitSettings.html)
- [Bevy UpdateMode Documentation](https://docs.rs/bevy/latest/bevy/winit/enum.UpdateMode.html)
- [Rust Constructor Patterns](https://doc.rust-lang.org/1.0.0/style/ownership/builders.html)