+++
title = "#20937 Add `UiRect` constructor functions to `Val`"
date = "2025-09-10T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = true

[taxonomies]
list_display = ["show"]

[extra]
current_language = "en"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2025-09/pr-20937-en-20250910" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2025-09/pr-20937-zh-cn-20250910" }}
labels = ["A-UI", "C-Usability", "X-Contentious"]
+++

# Title

## Basic Information
- **Title**: Add `UiRect` constructor functions to `Val`
- **PR Link**: https://github.com/bevyengine/bevy/pull/20937
- **Author**: ickshonpe
- **Status**: MERGED
- **Labels**: A-UI, C-Usability, S-Ready-For-Final-Review, X-Contentious
- **Created**: 2025-09-09T13:46:58Z
- **Merged**: 2025-09-10T00:19:42Z
- **Merged By**: alice-i-cecile

## Description Translation
# Objective

Even with the new `Val` constructor functions, `UiRect` creation is still quite noisy.

Bevy 16 style declarations:
```rust
    Node {
        width: Val::Px(16.),
        height: Val::Px(16.),
        border: UiRect::all(Val::Px(2.)),
        padding: UiRect::horizontal(Val::Percent(20.)).with_bottom(Val::Px(10.)),
        margin: UiRect::left(Val::Vw(10.)),
        ..default()
    }
```

With the constructor functions for `Val` that were added in #20518:
```rust
    Node {
        width: px(16),
        height: px(16),
        border: UiRect::all(px(2)),  // can also use `px(2).into()` here.
        padding: UiRect::horizontal(percent(20)).with_top(px(10.)),
        margin: UiRect::left(vw(10)),
        ..default()
    }
```

## Solution

Add a fluent interface for constructing `UiRect`s from `Val`s:
```rust
    Node {
        width: px(16),
        height: px(16),
        border: px(2).all(),  // can also use `px(2).into()` here.
        padding: percent(20).horizontal().with_top(px(10.)),
        margin: vw(10).left(),
        ..default()
    }
```

This PR adds `left`, `right`, `top`, `bottom`, `all`, `horizontal` and `vertical` functions to `Val`. 
Each function calls the corresponding `UiRect` constructor with `self`, i.e. `fn left(self) -> UiRect { UiRect::left(self) }`.

## The Story of This Pull Request

This PR addresses a usability issue in Bevy's UI system where creating `UiRect` instances was still verbose even after the introduction of `Val` constructor functions in PR #20518. The problem was that developers had to explicitly call `UiRect` constructors like `UiRect::all()` or `UiRect::horizontal()` even when using the new convenience functions like `px()` and `percent()`.

The solution implements a fluent interface pattern by adding seven new methods to the `Val` enum: `left()`, `right()`, `top()`, `bottom()`, `all()`, `horizontal()`, and `vertical()`. Each method returns a `UiRect` instance configured with the `Val` value in the appropriate fields, while setting the other fields to `Val::ZERO` where applicable.

The implementation follows a consistent pattern where each method simply delegates to the corresponding `UiRect` constructor. For example:

```rust
pub fn left(self) -> UiRect {
    UiRect::left(self)
}
```

This approach maintains consistency with the existing `UiRect` API while providing a more ergonomic way to construct UI rectangles. The methods include comprehensive documentation with examples showing exactly how each one behaves, which is crucial for developer adoption and understanding.

The impact is significant reduction in boilerplate code for UI construction. Instead of writing `UiRect::all(px(2))`, developers can now write `px(2).all()`, creating a more fluid and readable coding experience. This is particularly beneficial for complex UI layouts where multiple `UiRect` instances need to be configured.

The changes are backward compatible - existing code using `UiRect` constructors directly continues to work unchanged. The new methods simply provide an alternative, more concise syntax.

## Visual Representation

```mermaid
graph LR
    A[Val enum] --> B[new constructor methods]
    B --> C[UiRect instances]
    
    B1[left()] --> C1[UiRect with left set]
    B2[right()] --> C2[UiRect with right set]
    B3[top()] --> C3[UiRect with top set]
    B4[bottom()] --> C4[UiRect with bottom set]
    B5[all()] --> C5[UiRect with all sides set]
    B6[horizontal()] --> C6[UiRect with horizontal sides set]
    B7[vertical()] --> C7[UiRect with vertical sides set]
```

## Key Files Changed

### `crates/bevy_ui/src/geometry.rs` (+136/-0)
This file contains the implementation of the new constructor methods for the `Val` enum. Seven new methods were added, each following the same pattern of delegating to the corresponding `UiRect` constructor.

Key code additions:
```rust
pub fn left(self) -> UiRect {
    UiRect::left(self)
}

pub fn right(self) -> UiRect {
    UiRect::right(self)
}

pub fn top(self) -> UiRect {
    UiRect::top(self)
}

pub fn bottom(self) -> UiRect {
    UiRect::bottom(self)
}

pub fn all(self) -> UiRect {
    UiRect::all(self)
}

pub fn horizontal(self) -> UiRect {
    UiRect::horizontal(self)
}

pub fn vertical(self) -> UiRect {
    UiRect::vertical(self)
}
```

### `release-content/release-notes/constructor_functions_for_val_variants.md` (+15/-1)
This file was updated to document the new fluent interface for constructing `UiRect`s from `Val`s. The update includes:

1. Added PR #20937 to the list of related pull requests
2. Added documentation and code examples showing the new fluent interface
3. Explained the available functions and how they work

Key changes:
```markdown
pull_requests: [20518, 20551, 20937]

Also included with this release is a fluent interface for constructing `UiRect`s from `Val`s:

```rust
Node {
    border: px(2).all(), 
    padding: percent(20).horizontal().with_top(px(10.)),
    margin: vw(10).left(),
    ..default()
}
```

The available functions are `left`, `right`, `top`, `bottom`, `all`, `horizontal` and `vertical`.
Each function calls the corresponding `UiRect` constructor on `self`, i.e. `fn left(self) -> UiRect { UiRect::left(self) }`.
```

## Further Reading

- [PR #20518](https://github.com/bevyengine/bevy/pull/20518) - The original PR that added constructor functions for `Val` variants
- [Fluent Interface Pattern](https://martinfowler.com/bliki/FluentInterface.html) - Martin Fowler's explanation of the fluent interface pattern
- [Bevy UI Documentation](https://docs.rs/bevy_ui/latest/bevy_ui/) - Official documentation for Bevy's UI system
- [Rust Builder Pattern](https://doc.rust-lang.org/1.0.0/style/ownership/builders.html) - Information about builder patterns in Rust