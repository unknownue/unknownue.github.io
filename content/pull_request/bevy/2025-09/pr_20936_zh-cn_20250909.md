+++
title = "#20936 Hide some full paths in doc links"
date = "2025-09-09T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = false

[extra]
current_language = "zh-cn"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2025-09/pr-20936-en-20250909" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2025-09/pr-20936-zh-cn-20250909" }}
+++

# Hide some full paths in doc links

## 基本信息
- **标题**: Hide some full paths in doc links
- **PR链接**: https://github.com/bevyengine/bevy/pull/20936
- **作者**: ickshonpe
- **状态**: 已合并
- **标签**: C-Docs, D-Trivial, S-Ready-For-Final-Review
- **创建时间**: 2025-09-08T21:46:44Z
- **合并时间**: 2025-09-08T22:39:35Z
- **合并者**: mockersf

## 描述翻译
清理更多的文档链接。

## 这个Pull Request的故事

这个PR是一个典型的文档改进任务，专注于提升Rust文档的可读性和用户体验。在Rust的文档注释中，使用Markdown链接语法可以创建到其他项的链接，但默认显示完整的路径可能会影响文档的整洁性。

问题的核心在于：当使用`[crate::some_module::SomeType]`这样的语法时，生成的文档会显示完整的模块路径，这对于阅读文档的开发者来说可能显得冗长且不必要。Rust提供了另一种语法`[SomeType](crate::some_module::SomeType)`，可以在保持链接功能的同时只显示类型名称本身。

这个PR的作者ickshonpe系统地检查了代码库，找到了多个可以使用这种优化的地方。改动涉及六个不同的文件，每个修改都是将完整的路径显示转换为更简洁的显示方式。

以`bevy_animation/src/animation_curves.rs`中的修改为例：

```rust
// 修改前:
/// A low-level trait for use in [`crate::VariableCurve`] that provides fine

// 修改后:
/// A low-level trait for use in [`VariableCurve`](`crate::VariableCurve`) that provides fine
```

这种修改虽然看似简单，但对文档的可读性有实际提升。开发者阅读文档时，看到的是简洁的`VariableCurve`而不是冗长的`crate::VariableCurve`，但同时仍然能够通过点击链接跳转到相应的定义。

类似的修改也出现在其他文件中：

在`bevy_animation/src/graph.rs`中：
```rust
// 修改前:
/// [`crate::animation_curves::AnimationCurveEvaluator`] uses a stack for

// 修改后:
/// [`AnimationCurveEvaluator`](`crate::animation_curves::AnimationCurveEvaluator`) uses a stack for
```

在`bevy_asset/src/io/web.rs`中：
```rust
// 修改前:
/// See [`crate::io::get_meta_path`]

// 修改后:
/// See [`io::get_meta_path`](`crate::io::get_meta_path`)
```

这些修改体现了对细节的关注和对文档质量的重视。虽然每个单独的修改都很小，但累积起来能够显著提升代码库的文档质量。

从工程角度看，这种类型的改进有几个好处：
1. 提升开发者体验：更简洁的文档更易于阅读和理解
2. 保持一致性：统一的文档风格使代码库更专业
3. 无功能影响：纯粹的文档改进不会引入任何运行时风险

这个PR的快速合并（不到一小时）也反映了团队对文档质量的重视程度，以及这类改进在开源项目中的价值。

## 关键文件更改

列出本PR中更改的最重要文件：
- `crates/bevy_animation/src/animation_curves.rs` (+2/-2)
- `crates/bevy_animation/src/graph.rs` (+1/-1)
- `crates/bevy_asset/src/io/web.rs` (+1/-1)
- `crates/bevy_color/src/color_ops.rs` (+1/-1)
- `crates/bevy_picking/src/lib.rs` (+1/-1)
- `crates/bevy_picking/src/pointer.rs` (+1/-1)

对于每个重要文件，包括：
1. 更改内容及原因的简要说明
2. 显示关键修改的代码片段
3. 这些更改如何与PR的整体目的相关

### `crates/bevy_animation/src/animation_curves.rs`
**更改说明**: 将两个文档链接从完整路径显示改为简洁显示
```rust
// 修改前:
/// A low-level trait for use in [`crate::VariableCurve`] that provides fine
/// evaluating the [`crate::graph::AnimationGraph`], while the blend register

// 修改后:
/// A low-level trait for use in [`VariableCurve`](`crate::VariableCurve`) that provides fine
/// evaluating the [`AnimationGraph`](`crate::graph::AnimationGraph`), while the blend register
```

### `crates/bevy_animation/src/graph.rs`
**更改说明**: 优化动画曲线评估器的文档链接显示
```rust
// 修改前:
/// [`crate::animation_curves::AnimationCurveEvaluator`] uses a stack for

// 修改后:
/// [`AnimationCurveEvaluator`](`crate::animation_curves::AnimationCurveEvaluator`) uses a stack for
```

### `crates/bevy_asset/src/io/web.rs`
**更改说明**: 改进元数据路径获取函数的文档链接
```rust
// 修改前:
/// See [`crate::io::get_meta_path`]

// 修改后:
/// See [`io::get_meta_path`](`crate::io::get_meta_path`)
```

### `crates/bevy_color/src/color_ops.rs`
**更改说明**: 优化颜色空间操作的文档链接
```rust
// 修改前:
/// the operations are performed in [`crate::Hsla`].

// 修改后:
/// the operations are performed in [`Hsla`](`crate::Hsla`).
```

### `crates/bevy_picking/src/lib.rs`
**更改说明**: 改进拾取后端指针命中的文档链接
```rust
// 修改前:
/// into a [`crate::backend::PointerHits`]

// 修改后:
/// into a [`PointerHits`](`crate::backend::PointerHits`)
```

### `crates/bevy_picking/src/pointer.rs`
**更改说明**: 优化输入模块的文档链接显示
```rust
// 修改前:
/// and touch input is provided under [`crate::input`], but you can also implement

// 修改后:
/// and touch input is provided under [`input`](`crate::input`), but you can also implement
```

## 进一步阅读
建议想要了解更多相关概念、技术或模式的读者参考以下资源：

1. [Rust文档注释指南](https://doc.rust-lang.org/rustdoc/how-to-write-documentation.html)
2. [Rustdoc链接语法](https://doc.rust-lang.org/rustdoc/linking-to-items-by-name.html)
3. [Bevy引擎文档标准](https://github.com/bevyengine/bevy/blob/main/CONTRIBUTING.md#documenting-code)

# 完整代码差异
```
diff --git a/crates/bevy_animation/src/animation_curves.rs b/crates/bevy_animation/src/animation_curves.rs
index 0e1d5866df41b..ba77ec4b5ec56 100644
--- a/crates/bevy_animation/src/animation_curves.rs
+++ b/crates/bevy_animation/src/animation_curves.rs
@@ -817,7 +817,7 @@ pub enum EvaluatorId<'a> {
     Type(TypeId),
 }
 
-/// A low-level trait for use in [`crate::VariableCurve`] that provides fine
+/// A low-level trait for use in [`VariableCurve`](`crate::VariableCurve`) that provides fine
 /// control over how animations are evaluated.
 ///
 /// You can implement this trait when the generic [`AnimatableCurveEvaluator`]
@@ -834,7 +834,7 @@ pub enum EvaluatorId<'a> {
 /// either a (value, weight) pair or empty. *Value* here refers to an instance
 /// of the value being animated: for example, [`Vec3`] in the case of
 /// translation keyframes.  The stack stores intermediate values generated while
-/// evaluating the [`crate::graph::AnimationGraph`], while the blend register
+/// evaluating the [`AnimationGraph`](`crate::graph::AnimationGraph`), while the blend register
 /// stores the result of a blend operation.
 ///
 /// [`Vec3`]: bevy_math::Vec3
diff --git a/crates/bevy_animation/src/graph.rs b/crates/bevy_animation/src/graph.rs
index adb4a7c7ac541..916e11b9056da 100644
--- a/crates/bevy_animation/src/graph.rs
+++ b/crates/bevy_animation/src/graph.rs
@@ -299,7 +299,7 @@ pub struct ThreadedAnimationGraph {
     ///
     /// The node indices here are stored in postorder. Siblings are stored in
     /// descending order. This is because the
-    /// [`crate::animation_curves::AnimationCurveEvaluator`] uses a stack for
+    /// [`AnimationCurveEvaluator`](`crate::animation_curves::AnimationCurveEvaluator`) uses a stack for
     /// evaluation. Consider this graph:
     ///
     /// ```text
diff --git a/crates/bevy_asset/src/io/web.rs b/crates/bevy_asset/src/io/web.rs
index b0b297126bce6..50a261c8ce959 100644
--- a/crates/bevy_asset/src/io/web.rs
+++ b/crates/bevy_asset/src/io/web.rs
@@ -104,7 +104,7 @@ impl WebAssetReader {
         PathBuf::from(prefix).join(path)
     }
 
-    /// See [`crate::io::get_meta_path`]
+    /// See [`io::get_meta_path`](`crate::io::get_meta_path`)
     fn make_meta_uri(&self, path: &Path) -> PathBuf {
         let meta_path = crate::io::get_meta_path(path);
         self.make_uri(&meta_path)
diff --git a/crates/bevy_color/src/color_ops.rs b/crates/bevy_color/src/color_ops.rs
index a3266ba2d6911..5229a8d70bb98 100644
--- a/crates/bevy_color/src/color_ops.rs
+++ b/crates/bevy_color/src/color_ops.rs
@@ -112,7 +112,7 @@ pub trait Hue: Sized {
 /// Trait for manipulating the saturation of a color.
 ///
 /// When working with color spaces that do not have native saturation components
-/// the operations are performed in [`crate::Hsla`].
+/// the operations are performed in [`Hsla`](`crate::Hsla`).
 pub trait Saturation: Sized {
     /// Return a new version of this color with the saturation channel set to the given value.
     fn with_saturation(&self, saturation: f32) -> Self;
diff --git a/crates/bevy_picking/src/lib.rs b/crates/bevy_picking/src/lib.rs
index 266c0971822f9..58d2e96410329 100644
--- a/crates/bevy_picking/src/lib.rs
+++ b/crates/bevy_picking/src/lib.rs
@@ -283,7 +283,7 @@ pub type PickSet = PickingSystems;
 /// and the [`InteractionPlugin`], this is probably the plugin that will be most used.
 ///
 /// Note: for any of these plugins to work, they require a picking backend to be active,
-/// The picking backend is responsible to turn an input, into a [`crate::backend::PointerHits`]
+/// The picking backend is responsible to turn an input, into a [`PointerHits`](`crate::backend::PointerHits`)
 /// that [`PickingPlugin`] and [`InteractionPlugin`] will refine into [`bevy_ecs::observer::On`]s.
 #[derive(Default)]
 pub struct DefaultPickingPlugins;
diff --git a/crates/bevy_picking/src/pointer.rs b/crates/bevy_picking/src/pointer.rs
index 86af877362270..efbcb1c4260a6 100644
--- a/crates/bevy_picking/src/pointer.rs
+++ b/crates/bevy_picking/src/pointer.rs
@@ -2,7 +2,7 @@
 //!
 //! The picking system is built around the concept of a 'Pointer', which is an
 //! abstract representation of a user input with a specific screen location. The cursor
-//! and touch input is provided under [`crate::input`], but you can also implement
+//! and touch input is provided under [`input`](`crate::input`), but you can also implement
 //! your own custom pointers by supplying a unique ID.
 //!
 //! The purpose of this module is primarily to provide a common interface that can be
```