+++
title = "#22360 derive Reflect on FpsOverlayConfig and FrameTimeGraphConfig"
date = "2026-01-03T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = true

[taxonomies]
list_display = ["show"]

[extra]
current_language = "en"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2026-01/pr-22360-en-20260103" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2026-01/pr-22360-zh-cn-20260103" }}
labels = ["C-Bug", "D-Trivial", "A-Reflection", "A-Diagnostics"]
+++

# Title

## Basic Information
- **Title**: derive Reflect on FpsOverlayConfig and FrameTimeGraphConfig
- **PR Link**: https://github.com/bevyengine/bevy/pull/22360
- **Author**: mirsella
- **Status**: MERGED
- **Labels**: C-Bug, D-Trivial, S-Ready-For-Final-Review, A-Reflection, A-Diagnostics
- **Created**: 2026-01-03T14:12:24Z
- **Merged**: 2026-01-03T23:07:30Z
- **Merged By**: alice-i-cecile

## Description Translation
Derives `Reflect` on `FpsOverlayConfig` and `FrameTimeGraphConfig` to enable runtime reflection capabilities for these configuration structs.
For example, allows modifying the config in bevy inspector egui.

## Changes

- Added `Reflect` derive to `FpsOverlayConfig` with `#[reflect(Resource)]` attribute
- Added `Reflect` derive to `FrameTimeGraphConfig` (required since it's a field in `FpsOverlayConfig`)
- Added `use bevy_reflect::Reflect;` import

## The Story of This Pull Request

This pull request addresses a missing feature in Bevy's developer tools that prevented runtime configuration of FPS overlay settings through reflection-based tools like the Bevy inspector. The problem was straightforward: two configuration structs used by the FPS overlay system lacked the `Reflect` trait, which is Bevy's standard mechanism for runtime reflection.

The issue became apparent when developers tried to modify `FpsOverlayConfig` or `FrameTimeGraphConfig` values at runtime using tools like the Bevy inspector GUI. Since these tools rely on reflection to discover and manipulate struct fields, missing the `Reflect` trait meant these configuration options couldn't be adjusted during development without modifying code and recompiling.

The solution approach was direct: add the `Reflect` derive macro to both structs and ensure proper resource reflection for `FpsOverlayConfig`. The implementation required three specific changes in the `fps_overlay.rs` file:

First, the developer added the necessary import for the `Reflect` trait:
```rust
use bevy_reflect::Reflect;
```

This import is essential because derive macros need access to the traits they implement. Without it, the compiler wouldn't recognize `Reflect` in the derive attribute.

Second, they modified the `FpsOverlayConfig` struct definition:
```rust
#[derive(Resource, Clone, Reflect)]
#[reflect(Resource)]
pub struct FpsOverlayConfig {
    // ... fields unchanged
}
```

The key addition here is `Reflect` in the derive list and the `#[reflect(Resource)]` attribute. This combination enables the struct to be both reflectable and recognized as a resource type within Bevy's reflection system. The `Resource` derive was already present, but reflection required explicit annotation.

Third, they updated the `FrameTimeGraphConfig` struct:
```rust
#[derive(Clone, Copy, Reflect)]
pub struct FrameTimeGraphConfig {
    // ... fields unchanged
}
```

This change was necessary because `FrameTimeGraphConfig` is a field type within `FpsOverlayConfig`. For reflection to work correctly on the parent struct, all field types must also support reflection. This is a common pattern in Bevy's reflection system - nested types must be reflectable for the containing type to be fully reflectable.

From a technical perspective, this PR demonstrates Bevy's reflection system requirements. When a struct uses `#[reflect(Resource)]`, it needs to meet several conditions: the struct itself must derive `Reflect`, and any field types that should be accessible through reflection must also derive `Reflect`. The compiler would catch missing implementations at compile time.

The impact of these changes is immediate for developers using Bevy's inspector tools. They can now modify FPS overlay settings at runtime, adjusting parameters like text color, position, or graph visibility without restarting their application. This aligns with Bevy's design philosophy of providing robust development tools alongside the game engine itself.

## Visual Representation

```mermaid
graph TD
    A[bevy_reflect::Reflect] --> B[FpsOverlayConfig]
    A --> C[FrameTimeGraphConfig]
    B --> D[bevy_inspector_egui]
    C --> D
    E[#[reflect(Resource)]] --> B
    B --> F[Configuration Fields]
    C --> G[Graph Settings]
```

## Key Files Changed

### `crates/bevy_dev_tools/src/fps_overlay.rs` (+5/-2)

This file contains the FPS overlay system for Bevy's developer tools. The changes enable runtime reflection for two configuration structs.

**Key modifications:**

1. Added the `Reflect` import:
```rust
use bevy_reflect::Reflect;
```

2. Updated `FpsOverlayConfig` to support reflection:
```rust
// Before:
#[derive(Resource, Clone)]
pub struct FpsOverlayConfig {

// After:
#[derive(Resource, Clone, Reflect)]
#[reflect(Resource)]
pub struct FpsOverlayConfig {
```

3. Updated `FrameTimeGraphConfig` to support reflection:
```rust
// Before:
#[derive(Clone, Copy)]
pub struct FrameTimeGraphConfig {

// After:
#[derive(Clone, Copy, Reflect)]
pub struct FrameTimeGraphConfig {
```

These changes are directly related to the PR's purpose of enabling runtime configuration through reflection. The `FpsOverlayConfig` struct is marked as a reflectable resource, while `FrameTimeGraphConfig` is made reflectable because it's used as a field within `FpsOverlayConfig`.

## Further Reading

- [Bevy Reflection Documentation](https://docs.rs/bevy_reflect/latest/bevy_reflect/) - Official documentation for Bevy's reflection system
- [Bevy Inspector Egui](https://github.com/jakobhellermann/bevy-inspector-egui) - The inspector tool that benefits from these reflection changes
- [Rust Derive Macros](https://doc.rust-lang.org/reference/procedural-macros.html#derive-macros) - How derive macros work in Rust
- [Bevy Resources and Reflection](https://bevyengine.org/learn/book/getting-started/resources/) - Official Bevy book section on resources and reflection