+++
title = "#22730 update fullscreen material example comment to be clear about 2d support"
date = "2026-01-29T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = false

[extra]
current_language = "zh-cn"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2026-01/pr-22730-en-20260129" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2026-01/pr-22730-zh-cn-20260129" }}
+++

# Title

## Basic Information
- **Title**: update fullscreen material example comment to be clear about 2d support
- **PR链接**: https://github.com/bevyengine/bevy/pull/22730
- **作者**: ChristopherBiscardi
- **状态**: 已合并
- **标签**: A-Rendering, C-Examples, S-Ready-For-Final-Review
- **创建时间**: 2026-01-28T21:26:26Z
- **合并时间**: 2026-01-28T23:40:54Z
- **合并者**: alice-i-cecile

## Description Translation
**目标**  
由于当前全屏材质示例中的注释，一些用户误以为`fullscreen_material`在2D中不起作用。实际上它是起作用的。

**解决方案**  
更新注释，以反映该功能在2D中同样可用，本示例只是用于展示3D场景。

**展示**  
将示例中所有出现"3d"的地方替换为"2d"后的矩形和圆形效果。

<img width="484" height="420" alt="image" src="https://github.com/user-attachments/assets/1711c67b-2166-4777-b1d4-09d283c5a162" />

<img width="1082" height="1040" alt="image" src="https://github.com/user-attachments/assets/9a331f95-d327-48cc-8823-fe84d1c86aef" />

## The Story of This Pull Request

这个PR始于一个简单的观察：Bevy引擎中的`fullscreen_material`示例在注释上存在误导性。示例代码主要用于展示如何在3D场景中应用自定义的全屏后期处理着色器。然而，其注释未能明确说明`FullscreenMaterial`这一功能本身也完全支持2D渲染。这导致一些用户在查阅示例后，错误地得出了“该功能仅限3D使用”的结论，从而可能放弃使用或寻找不必要的替代方案。

问题的核心在于文档与代码功能的不匹配。示例（Example）在开源项目中扮演着双重角色：它既是功能演示，也是最重要的使用文档之一。当示例的注释（Comment）只强调一种使用场景（3D）时，很容易让开发者，特别是新用户，误以为这是该功能的唯一适用场景。这种认知偏差会限制功能的使用范围，并可能引发不必要的社区问题。

因此，解决方案非常直接：修改示例文件的注释，提供清晰、准确的说明。开发者没有改变任何功能代码、API或行为，仅仅修正了文档表述。这是一种典型的、低风险高回报的维护性工作。

具体到实现上，修改集中在`examples/shader_advanced/fullscreen_material.rs`文件中，包含两处主要更新。

首先，在文件的模块级文档注释中增加了明确的说明。修改前的注释仅简单陈述示例目的，修改后则明确指出当前示例演示的是3D用法，并提供了如何使其在2D中工作的指导原则。

```rust
//! Demonstrates how to write a custom fullscreen shader
//!
//! This example demonstrates working in 3d. To make the example work in 2d,
//! replace 3d components with their 2d counterparts, and schedule the work
//! to run in the `Core2d` schedule as described in the `FullscreenMaterial`
//! comment in this file.
```

其次，也是更关键的一处，是在`FullscreenMaterial` trait实现的`run_in`方法关联函数处（当前被注释掉，使用默认实现），添加了详细的、可运行的代码示例。这段注释解释了`FullscreenMaterial`默认使用3D调度系统，并具体展示了如何通过实现`schedule`和`run_in`方法，将同一个全屏材质逻辑适配到2D的调度系统中。

```rust
    // The `FullscreenMaterial` uses 3d schedules by default.
    // To make this work in 2d, you would need to schedule to
    // run in `Core2d` and in a `Core2dSystems` set.
    //
    // fn schedule() -> impl bevy::ecs::schedule::ScheduleLabel + Clone {
    //     bevy::core_pipeline::Core2d
    // }
    // fn run_in() -> impl SystemSet {
    //     bevy::core_pipeline::Core2dSystems::PostProcess
    // }
```

这个修改具有很好的教学意义。它不仅澄清了误解，还主动教授了Bevy调度系统（Schedule）的一个关键概念：如何控制系统的执行阶段（`Core2d` vs `Core3d`）和系统集（`Core2dSystems::PostProcess`）。用户可以看到，将功能从3D迁移到2D，主要涉及的是调度配置的更改，而非着色器逻辑或材质本身的重大重写。

从工程角度看，这个PR虽然改动小，但体现了良好的软件维护实践：
1.  **准确性**：确保文档与代码能力保持一致，避免误导。
2.  **前瞻性**：不仅修复问题，还提供了解决方案（代码片段），降低了用户的使用门槛。
3.  **最小化变更**：只修改必要部分，不涉及功能逻辑，风险极低。

最终的“展示”部分（Showcase）用两张截图直观地证明了功能在2D中的可行性。开发者将示例中所有“3d”文本替换为“2d”后，成功对2D图形（矩形和圆形）应用了全屏着色器效果，为注释的修正提供了无可争议的视觉证据。

这个PR的故事告诉我们，在软件开发中，尤其是维护大型开源框架时，清晰的文档和示例注释与技术实现本身同等重要。一个看似微小的文档修正，可以消除用户的困惑，拓宽功能的使用场景，并提升整个项目的易用性。

## Visual Representation

```mermaid
graph TD
    subgraph “问题”
        A[示例注释] -->|仅提及3D| B[用户误解]
        B -->|认为功能不支持| C[2D场景]
    end

    subgraph “解决方案”
        D[修改注释] --> E[模块级文档]
        D --> F[Impl块内注释]
        E -->|澄清2D支持| G[消除误解]
        F -->|提供2D适配代码示例| H[指导用户]
    end

    subgraph “结果”
        G --> I[准确的用户认知]
        H --> J[更低的2D使用门槛]
        I & J --> K[提升框架易用性]
    end
```

## Key Files Changed

**1. `examples/shader_advanced/fullscreen_material.rs` (+16/-2)**

这个文件是本次PR修改的唯一文件。修改内容是纯文档性的，旨在澄清`FullscreenMaterial`功能对2D渲染的支持。

**修改内容：**

1.  **模块级文档注释更新**：在文件开头增加了说明，指出当前示例展示的是3D用法，并简要指导用户如何适配到2D。
    ```rust
    // Before:
    //! Demonstrates how to write a custom fullscreen shader.

    // After:
    //! Demonstrates how to write a custom fullscreen shader
    //!
    //! This example demonstrates working in 3d. To make the example work in 2d,
    //! replace 3d components with their 2d counterparts, and schedule the work
    //! to run in the `Core2d` schedule as described in the `FullscreenMaterial`
    //! comment in this file.
    ```

2.  **`FullscreenMaterial`实现内的注释更新**：在`run_in`方法的位置，将原本简单的默认行为说明，替换为详细的解释和可运行的2D适配代码示例。
    ```rust
    // Before:
    // Uses default run_in (Core3dSystems::PostProcess)

    // After:
    // The `FullscreenMaterial` uses 3d schedules by default.
    // To make this work in 2d, you would need to schedule to
    // run in `Core2d` and in a `Core2dSystems` set.
    //
    // fn schedule() -> impl bevy::ecs::schedule::ScheduleLabel + Clone {
    //     bevy::core_pipeline::Core2d
    // }
    // fn run_in() -> impl SystemSet {
    //     bevy::core_pipeline::Core2dSystems::PostProcess
    // }
    ```

**关系与影响：**
这些修改直接服务于PR的核心目标——消除用户关于“全屏材质不支持2D”的误解。通过提供明确的文字说明和具体的代码示例，该修改将示例从一个单纯的3D演示，转变为一个同时阐明2D/3D通用使用模式的教学资源。它没有改变任何运行时行为，但显著提升了代码作为文档的质量。

## Further Reading

1.  **Bevy 官方文档 - 着色器（Shaders）**: 了解如何在Bevy中编写和使用自定义着色器。
2.  **Bevy 官方文档 - 调度（Schedule）与系统（System）**: 深入理解Bevy ECS中的调度系统，包括`Core2d`、`Core3d`等Schedule以及`SystemSet`的概念，这对于理解如何将全屏材质适配到不同渲染管线至关重要。
3.  **Bevy 官方示例 - 着色器（shader）相关**: 查看其他着色器示例，如`shader_material`、`post_processing`等，以获得更全面的视角。
4.  **《代码大全》中关于“注释”的章节**: 理解编写高质量、准确注释的最佳实践，这对于维护大型代码库非常重要。