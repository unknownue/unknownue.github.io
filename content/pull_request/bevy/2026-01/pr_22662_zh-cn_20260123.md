+++
title = "#22662 Bump actions/checkout from 6.0.1 to 6.0.2"
date = "2026-01-23T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = false

[extra]
current_language = "zh-cn"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2026-01/pr-22662-en-20260123" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2026-01/pr-22662-zh-cn-20260123" }}
+++

# Bump actions/checkout from 6.0.1 to 6.0.2

## 基本信息
- **标题**: Bump actions/checkout from 6.0.1 to 6.0.2
- **PR 链接**: https://github.com/bevyengine/bevy/pull/22662
- **作者**: app/dependabot
- **状态**: MERGED
- **标签**: C-Dependencies
- **创建时间**: 2026-01-23T06:52:54Z
- **合并时间**: 2026-01-23T11:45:55Z
- **合并者**: mockersf

## 描述翻译
将 actions/checkout 从 6.0.1 版本升级到 6.0.2。
<details>
<summary>发行说明</summary>
<p><em>源自 <a href="https://github.com/actions/checkout/releases">actions/checkout 的发行版</a>。</em></p>
<blockquote>
<h2>v6.0.2</h2>
<h2>更新内容</h2>
<ul>
<li>当 ACTIONS_ORCHESTRATION_ID 被设置时，添加 orchestration_id 到 git user-agent，由 <a href="https://github.com/TingluoHuang"><code>@​TingluoHuang</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/2355">actions/checkout#2355</a> 中提交</li>
<li>修复标签处理：保留注释和显式的 fetch-tags，由 <a href="https://github.com/ericsciple"><code>@​ericsciple</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/2356">actions/checkout#2356</a> 中提交</li>
</ul>
<p><strong>完整更新日志</strong>: <a href="https://github.com/actions/checkout/compare/v6.0.1...v6.0.2">https://github.com/actions/checkout/compare/v6.0.1...v6.0.2</a></p>
</blockquote>
</details>
<details>
<summary>更新日志</summary>
<p><em>源自 <a href="https://github.com/actions/checkout/blob/main/CHANGELOG.md">actions/checkout 的更新日志</a>。</em></p>
<blockquote>
<h1>更新日志</h1>
<h2>v6.0.2</h2>
<ul>
<li>修复标签处理：保留注释和显式的 fetch-tags，由 <a href="https://github.com/ericsciple"><code>@​ericsciple</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/2356">actions/checkout#2356</a> 中提交</li>
</ul>
<h2>v6.0.1</h2>
<ul>
<li>为 persist-credentials includeIf 添加 worktree 支持，由 <a href="https://github.com/ericsciple"><code>@​ericsciple</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/2327">actions/checkout#2327</a> 中提交</li>
</ul>
<h2>v6.0.0</h2>
<ul>
<li>将凭据持久化到单独的文件中，由 <a href="https://github.com/ericsciple"><code>@​ericsciple</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/2286">actions/checkout#2286</a> 中提交</li>
<li>更新 README 以包含 Node.js 24 支持详情和要求，由 <a href="https://github.com/salmanmkc"><code>@​salmanmkc</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/2248">actions/checkout#2248</a> 中提交</li>
</ul>
<h2>v5.0.1</h2>
<ul>
<li>将 v6 的清理工作移植到 v5，由 <a href="https://github.com/ericsciple"><code>@​ericsciple</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/2301">actions/checkout#2301</a> 中提交</li>
</ul>
<h2>v5.0.0</h2>
<ul>
<li>更新 actions checkout 以使用 node 24，由 <a href="https://github.com/salmanmkc"><code>@​salmanmkc</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/2226">actions/checkout#2226</a> 中提交</li>
</ul>
<h2>v4.3.1</h2>
<ul>
<li>将 v6 的清理工作移植到 v4，由 <a href="https://github.com/ericsciple"><code>@​ericsciple</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/2305">actions/checkout#2305</a> 中提交</li>
</ul>
<h2>v4.3.0</h2>
<ul>
<li>文档：更新 README.md，由 <a href="https://github.com/motss"><code>@​motss</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/1971">actions/checkout#1971</a> 中提交</li>
<li>添加内部仓库以检出多个仓库，由 <a href="https://github.com/mouismail"><code>@​mouismail</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/1977">actions/checkout#1977</a> 中提交</li>
<li>文档更新 - 在 Readme 中添加推荐权限，由 <a href="https://github.com/benwells"><code>@​benwells</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/2043">actions/checkout#2043</a> 中提交</li>
<li>调整用户邮箱备注和权限标题的位置，由 <a href="https://github.com/joshmgross"><code>@​joshmgross</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/2044">actions/checkout#2044</a> 中提交</li>
<li>更新 README.md，由 <a href="https://github.com/nebuk89"><code>@​nebuk89</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/2194">actions/checkout#2194</a> 中提交</li>
<li>为 actions 更新 CODEOWNERS，由 <a href="https://github.com/TingluoHuang"><code>@​TingluoHuang</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/2224">actions/checkout#2224</a> 中提交</li>
<li>更新包依赖，由 <a href="https://github.com/salmanmkc"><code>@​salmanmkc</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/2236">actions/checkout#2236</a> 中提交</li>
</ul>
<h2>v4.2.2</h2>
<ul>
<li><code>url-helper.ts</code> 现在利用已知的环境变量，由 <a href="https://github.com/jww3"><code>@​jww3</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/1941">actions/checkout#1941</a> 中提交</li>
<li>扩展 <code>isGhes</code> 的单元测试覆盖，由 <a href="https://github.com/jww3"><code>@​jww3</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/1946">actions/checkout#1946</a> 中提交</li>
</ul>
<h2>v4.2.1</h2>
<ul>
<li>如果提供，则通过 commit 检出其他 refs/*，否则回退到 ref，由 <a href="https://github.com/orhantoy"><code>@​orhantoy</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/1924">actions/checkout#1924</a> 中提交</li>
</ul>
<h2>v4.2.0</h2>
<ul>
<li>添加 Ref 和 Commit 输出，由 <a href="https://github.com/lucacome"><code>@​lucacome</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/1180">actions/checkout#1180</a> 中提交</li>
<li>依赖更新，由 <a href="https://github.com/dependabot"><code>@​dependabot</code></a>- <a href="https://redirect.github.com/actions/checkout/pull/1777">actions/checkout#1777</a>, <a href="https://redirect.github.com/actions/checkout/pull/1872">actions/checkout#1872</a></li>
</ul>
<h2>v4.1.7</h2>
<ul>
<li>在 1 个目录中为 minor-npm-dependencies 组进行 4 次更新，由 <a href="https://github.com/dependabot"><code>@​dependabot</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/1739">actions/checkout#1739</a> 中提交</li>
<li>将 actions/checkout 从 3 升级到 4，由 <a href="https://github.com/dependabot"><code>@​dependabot</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/1697">actions/checkout#1697</a> 中提交</li>
<li>通过 commit 检出其他 refs/*，由 <a href="https://github.com/orhantoy"><code>@​orhantoy</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/1774">actions/checkout#1774</a> 中提交</li>
<li>将 actions/checkout 自身的工作流固定到已知、良好、稳定的版本，由 <a href="https://github.com/jww3"><code>@​jww3</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/1776">actions/checkout#1776</a> 中提交</li>
</ul>
<h2>v4.1.6</h2>
<ul>
<li>检查平台以适当设置压缩包扩展名，由 <a href="https://github.com/cory-miller"><code>@​cory-miller</code></a> 在 <a href="https://redirect.github.com/actions/checkout/pull/1732">actions/checkout#1732</a> 中提交</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (已截断)</p>
</details>
<details>
<summary>提交记录</summary>
<ul>
<li><a href="https://github.com/actions/checkout/commit/de0fac2e4500dabe0009e67214ff5f5447ce83dd"><code>de0fac2</code></a> 修复标签处理：保留注释和显式的 fetch-tags (<a href="https://redirect.github.com/actions/checkout/issues/2356">#2356</a>)</li>
<li><a href="https://github.com/actions/checkout/commit/064fe7f3312418007dea2b49a19844a9ee378f49"><code>064fe7f</code></a> 当 ACTIONS_ORCHESTRATION_ID 被设置时，添加 orchestration_id 到 git user-agent (...</li>
<li>查看完整差异在 <a href="https://github.com/actions/checkout/compare/8e8c483db84b4bee98b60c0593521ed34d9990e8...de0fac2e4500dabe0009e67214ff5f5447ce83dd">比较视图</a></li>
</ul>
</details>
<br />


[![Dependabot 兼容性分数](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=actions/checkout&package-manager=github_actions&previous-version=6.0.1&new-version=6.0.2)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

只要你没有手动修改此 PR，Dependabot 会解决任何冲突。你也可以通过评论 `@dependabot rebase` 来手动触发 rebase。

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot 命令和选项</summary>
<br />

你可以通过评论此 PR 来触发 Dependabot 操作：
- `@dependabot rebase` 会 rebase 此 PR
- `@dependabot recreate` 会重新创建此 PR，覆盖所有已做的编辑
- `@dependabot merge` 会在你的 CI 通过后合并此 PR
- `@dependabot squash and merge` 会在你的 CI 通过后 squash 并合并此 PR
- `@dependabot cancel merge` 会取消之前请求的合并并阻止自动合并
- `@dependabot reopen` 会重新打开此 PR，如果它已关闭
- `@dependabot close` 会关闭此 PR 并阻止 Dependabot 重新创建它。你也可以手动关闭它来实现同样的效果
- `@dependabot show <dependency name> ignore conditions` 会显示指定依赖的所有忽略条件
- `@dependabot ignore this major version` 会关闭此 PR 并阻止 Dependabot 为此主版本创建更多 PR（除非你重新打开它或自行升级到此版本）
- `@dependabot ignore this minor version` 会关闭此 PR 并阻止 Dependabot 为此次版本创建更多 PR（除非你重新打开它或自行升级到此版本）
- `@dependabot ignore this dependency` 会关闭此 PR 并阻止 Dependabot 为此依赖创建更多 PR（除非你重新打开它或自行升级到此版本）


</details>

## 此 PR 的背景故事

这个 PR 是一个典型的依赖管理更新，由 GitHub 的 Dependabot 自动创建。它的核心是将项目 CI/CD 流水线中的关键组件 `actions/checkout` 从 6.0.1 升级到 6.0.2。对于像 Bevy 这样拥有复杂工作流的大型开源项目，保持底层依赖的更新是维护构建系统稳定性和安全性的基础实践。

### 问题与背景
Bevy 引擎使用 GitHub Actions 作为其持续集成和持续部署（CI/CD）的核心。在其 `.github/workflows` 目录下，有多个 YAML 文件定义了从代码检查、测试、构建到发布的完整自动化流程。其中，`actions/checkout` 是这些流程的起点——它负责将仓库代码检出到工作环境（runner）中。几乎每一个工作流的第一步都依赖于它。

当 `actions/checkout` 发布新版本（v6.0.2）时，它带来了两个重要的修复：
1.  **改进的遥测和标识**：当设置了 `ACTIONS_ORCHESTRATION_ID` 环境变量时，将 `orchestration_id` 添加到 git 用户代理字符串中。这有助于在复杂的 GitHub Actions 运行环境中更好地追踪工作流执行。
2.  **修复标签处理**：保留标签的注释（annotations）并正确处理显式的 `fetch-tags` 参数。这是一个功能性的修复，确保在某些使用标签的场景下，git 操作的行为与预期一致，比如涉及带注释的标签（annotated tags）的发布或部署流程。

对于 Bevy 项目来说，不及时应用这类更新可能不会立即导致构建失败，但会潜在地带来一些问题：
- **错过安全补丁**：虽然此版本未提及安全修复，但依赖更新是保持安全态势的重要环节。
- **功能不一致**：如果其他项目或工具依赖于 `actions/checkout` 的特定行为（例如标签处理），而未更新版本可能导致跨环境行为差异。
- **逐渐落后**：积累多个小版本更新后，一次性升级的难度和风险会增加。

### 解决方案与实现
解决方案非常直接：在所有使用 `actions/checkout` 的工作流文件中，将其引用从旧版本（`v6.0.1`，对应 commit SHA `8e8c483db84b4bee98b60c0593521ed34d9990e8`）更新到新版本（`v6.0.2`，对应 commit SHA `de0fac2e4500dabe0009e67214ff5f5447ce83dd`）。

整个 PR 的修改模式是统一且机械化的。Dependabot 识别出所有包含 `actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8` 的行，并将其替换为 `actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd`。代码库中没有任何逻辑上的修改，只改变了依赖的版本标识符。

值得注意的是，Bevy 使用的是 **commit SHA 而非版本标签**来固定 Action 版本（例如 `@de0fac2e4500dabe0009e67214ff5f5447ce83dd` 而不是 `@v6.0.2`）。这是一种最佳实践，因为它确保了每次构建都使用完全相同的代码版本，避免了因标签被意外移动或强制推送而导致的不可重复性。

### 技术洞察与影响
这个看似简单的 PR 揭示了现代软件工程中的几个重要实践：

1.  **自动化依赖管理**：Dependabot 自动监控项目依赖（包括 GitHub Actions）的更新，创建 PR，并提供详细的发布说明和兼容性分数。这大大降低了维护开销，并确保团队能及时获知更新信息。

2.  **GitHub Actions 的依赖锁定**：使用完整的 Git commit SHA 而不是可变的标签（如 `v6`）来引用 Action，这类似于在 `package.json` 中使用确切的版本号或在 `Cargo.toml` 中避免使用通配符。它保证了 CI 流水线的确定性和可重复性。

3.  **基础设施即代码（IaC）的维护**：CI/CD 配置（如 `.yml` 文件）与应用程序代码同等重要，也需要进行版本控制和依赖管理。这个 PR 正是将这一原则应用于基础设施代码的体现。

4.  **最小化变更**：此次更新是一个点版本升级（patch version bump），根据语义化版本控制，它只包含向后兼容的错误修复。这对于核心构建工具来说是一个低风险的更新，因此可以相对较快地被审查和合并。

**影响**：合并此 PR 后，Bevy 项目的所有自动化工作流（包括 CI 测试、文档部署、发布流程等）都将基于 `actions/checkout` v6.0.2 运行。这带来了上述的 bug 修复和功能改进，确保了构建系统底层的稳定性和一致性。对于开发者来说，这个过程是无感的，但它是维持项目健康所必需的幕后工作。

## 可视化表示

```mermaid
graph TD
    subgraph “GitHub Workflow Files”
        A[ci.yml] --> C[actions/checkout]
        B[validation-jobs.yml] --> C
        D[dependencies.yml] --> C
        E[example-run.yml] --> C
        F[weekly.yml] --> C
        G[Other .yml files] --> C
    end
    C -->|Updated from| OLD[6.0.1 / 8e8c483]
    C -->|Updated to| NEW[6.0.2 / de0fac2]
    NEW -->|Provides| FIX1[标签处理修复]
    NEW -->|Provides| FIX2[Git UA 增强]
```

## 主要变更文件

该 PR 共修改了 11 个文件，均为 `.github/workflows/` 目录下的 YAML 配置文件。以下列出修改最频繁的几个文件：

### 1. `.github/workflows/ci.yml` (+18/-18)
**描述**：这是主持续集成工作流文件，定义了代码推送或拉取请求时触发的测试和构建任务。该文件中使用了 18 次 `actions/checkout`，分布在不同的 job 中（如 `ci`、`build`、`doc` 等），是使用频率最高的文件。

**关键修改**：
```yaml
# 修改前片段 (示例):
- uses: actions/checkout@8e8c483db84b4bee98b60c0593521ed34d9990e8 # v6.0.1

# 修改后片段 (示例):
- uses: actions/checkout@de0fac2e4500dabe0009e67214ff5f5447ce83dd # v6.0.2
```
**关系**：作为最核心的 CI 文件，其稳定性和正确性对项目至关重要。更新 `actions/checkout` 确保了所有 CI 任务的代码检出步骤都使用最新修复。

### 2. `.github/workflows/validation-jobs.yml` (+6/-6)
**描述**：包含额外的验证任务，如特定平台的构建检查、依赖验证等。这些 job 通常独立于主 CI 流程或在特定条件下运行。

**修改模式**：与 `ci.yml` 相同，将 6 处对 `actions/checkout` 的引用更新为新版本。

### 3. `.github/workflows/dependencies.yml` (+4/-4)
**描述**：专门用于检查项目依赖安全性和合规性的工作流，例如检查安全公告（advisories）、禁止的依赖（bans）、许可证（licenses）等。

**修改模式**：将 4 处 `actions/checkout` 引用更新为新版本。这是一个有趣的递归场景：用于检查依赖的工具，其自身的依赖也得到了更新。

### 4. `.github/workflows/example-run.yml` (+3/-3)
**描述**：用于在不同平台上（macOS, Ubuntu, Windows）运行 Bevy 示例程序的工作流。

**关系**：该工作流对于验证示例代码的跨平台兼容性很重要。更新其检出步骤确保了示例测试环境的基线一致性。

### 5. `.github/workflows/weekly.yml` (+3/-3)
**描述**：定义每周定期运行的任务，可能包括一些耗时较长或不需要在每次提交时运行的检查。

**关系**：定期任务的稳定性同样重要，更新依赖可以防止在未来某次运行中因未修复的 bug 而失败。

## 完整代码差异
PR 的完整 diff 如上文所述，展示了在 11 个 YAML 文件中统一替换 `actions/checkout` 引用 SHA 的修改。

## 延伸阅读
- [GitHub Actions 文档：`actions/checkout`](https://github.com/actions/checkout)
- [关于 Dependabot 版本更新](https://docs.github.com/en/code-security/dependabot/dependabot-version-updates/about-dependabot-version-updates)
- [在 GitHub Actions 中锁定版本的最佳实践](https://docs.github.com/en/actions/security-guides/security-hardening-for-github-actions#using-third-party-actions)
- [语义化版本控制 (SemVer)](https://semver.org/lang/zh-CN/)