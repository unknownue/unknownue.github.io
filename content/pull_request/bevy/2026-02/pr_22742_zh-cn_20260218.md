+++
title = "#22742 Update notify-debouncer-full requirement from 0.6.0 to 0.7.0"
date = "2026-02-18T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = false

[extra]
current_language = "zh-cn"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2026-02/pr-22742-en-20260218" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2026-02/pr-22742-zh-cn-20260218" }}
labels = ["C-Dependencies"]
+++

# Title

## Basic Information
- **Title**: Update notify-debouncer-full requirement from 0.6.0 to 0.7.0
- **PR Link**: https://github.com/bevyengine/bevy/pull/22742
- **Author**: app/dependabot
- **Status**: MERGED
- **Labels**: C-Dependencies
- **Created**: 2026-01-30T07:01:50Z
- **Merged**: 2026-02-18T13:15:22Z
- **Merged By**: mockersf

## Description Translation
更新 [notify-debouncer-full](https://github.com/notify-rs/notify) 的要求以允许使用最新版本。
<details>
<summary>Release notes</summary>
<p><em>Sourced from <a href="https://github.com/notify-rs/notify/releases">notify-debouncer-full's releases</a>.</em></p>
<blockquote>
<h2>notify-debouncer-full: v0.7.0</h2>
<blockquote>
<p>[!IMPORTANT]
The MSRV policy has been changed since this release.
Check out README for details.</p>
</blockquote>
<ul>
<li>FEATURE: support wasm build <a href="https://redirect.github.com/notify-rs/notify/issues/673">#673</a></li>
<li>FIX: events within the timeout were not deduplicated, causing <code>event_handler</code> to be called multiple times for events that should have been merged <a href="https://redirect.github.com/notify-rs/notify/issues/711">#711</a></li>
</ul>
<p><a href="https://redirect.github.com/notify-rs/notify/issues/673">#673</a>: <a href="https://redirect.github.com/notify-rs/notify/pull/673">notify-rs/notify#673</a>
<a href="https://redirect.github.com/notify-rs/notify/issues/711">#711</a>: <a href="https://redirect.github.com/notify-rs/notify/pull/711">notify-rs/notify#711</a></p>
</blockquote>
</details>
<details>
<summary>Commits</summary>
<ul>
<li><a href="https://github.com/notify-rs/notify/commit/e4a0ea8be037ddf5c4d901f2bd84bcad12f74fd2"><code>e4a0ea8</code></a> debouncer-full: prepare v0.7.0 release (<a href="https://redirect.github.com/notify-rs/notify/issues/762">#762</a>)</li>
<li><a href="https://github.com/notify-rs/notify/commit/1f47465f940374e0a1dae2292a10e3f2c6cb2141"><code>1f47465</code></a> chore(deps): update rust crate windows-sys to 0.61.0 (<a href="https://redirect.github.com/notify-rs/notify/issues/760">#760</a>)</li>
<li><a href="https://github.com/notify-rs/notify/commit/e268a171a9a842bd1f43054dba41a07ab3a65d7e"><code>e268a17</code></a> chore(deps): update rust crate flume to 0.12.0 (<a href="https://redirect.github.com/notify-rs/notify/issues/755">#755</a>)</li>
<li><a href="https://github.com/notify-rs/notify/commit/aa8b8c483a72ce74872043288827d351a2032d0b"><code>aa8b8c4</code></a> chore(deps): update rust crate mio to v1.1.1 (<a href="https://redirect.github.com/notify-rs/notify/issues/753">#753</a>)</li>
<li><a href="https://github.com/notify-rs/notify/commit/e817c99feea81e26a6fc09367fa5d5684bab5760"><code>e817c99</code></a> chore(deps): update rust crate insta to v1.46.1 (<a href="https://redirect.github.com/notify-rs/notify/issues/756">#756</a>)</li>
<li><a href="https://github.com/notify-rs/notify/commit/172217f525c5ab956f0a58ec9589abd8ca2c7cda"><code>172217f</code></a> chore(deps): update rust crate deser-hjson to v2.2.5 (<a href="https://redirect.github.com/notify-rs/notify/issues/750">#750</a>)</li>
<li><a href="https://github.com/notify-rs/notify/commit/42e87aec8bd43ee82c16caf6e5d40c19c405751f"><code>42e87ae</code></a> chore(deps): update rust crate serde_json to v1.0.149 (<a href="https://redirect.github.com/notify-rs/notify/issues/754">#754</a>)</li>
<li><a href="https://github.com/notify-rs/notify/commit/a3a7304baaef0f185c4d8517d5a0d01c387fb5f0"><code>a3a7304</code></a> chore(deps): update rust crate tempfile to v3.24.0 (<a href="https://redirect.github.com/notify-rs/notify/issues/759">#759</a>)</li>
<li><a href="https://github.com/notify-rs/notify/commit/cb3043e919ef4a3672ce4c071eece9ef9d9c4766"><code>cb3043e</code></a> chore(deps): update rust crate rand to 0.9.0 (<a href="https://redirect.github.com/notify-rs/notify/issues/758">#758</a>)</li>
<li><a href="https://github.com/notify-rs/notify/commit/bb30ddf3150ba2231e4663d3cd0b000da1435018"><code>bb30ddf</code></a> chore(deps): update rust crate nix to 0.30.0 (<a href="https://redirect.github.com/notify-rs/notify/issues/757">#757</a>)</li>
<li>Additional commits viewable in <a href="https://github.com/notify-rs/notify/compare/debouncer-full-0.6.0...debouncer-full-0.7.0">compare view</a></li>
</ul>
</details>
<br />

Dependabot 将在您不自行修改此 PR 的情况下解决所有冲突。您也可以通过评论 `@dependabot rebase` 手动触发 rebase。

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot commands and options</summary>
<br />

您可以通过评论此 PR 来触发 Dependabot 操作：
- `@dependabot rebase` 将 rebase 此 PR
- `@dependabot recreate` 将重新创建此 PR，覆盖已对其进行的任何编辑
- `@dependabot merge` 将在 CI 通过后合并此 PR
- `@dependabot squash and merge` 将在 CI 通过后 squash 并合并此 PR
- `@dependabot cancel merge` 将取消先前请求的合并并阻止自动合并
- `@dependabot reopen` 将重新打开此 PR（如果它已关闭）
- `@dependabot close` 将关闭此 PR 并阻止 Dependabot 重新创建它。您也可以通过手动关闭来获得相同的结果
- `@dependabot show <dependency name> ignore conditions` 将显示指定依赖项的所有忽略条件
- `@dependabot ignore this major version` 将关闭此 PR 并阻止 Dependabot 为此主要版本创建更多 PR（除非您重新打开 PR 或自行升级）
- `@dependabot ignore this minor version` 将关闭此 PR 并阻止 Dependabot 为此次要版本创建更多 PR（除非您重新打开 PR 或自行升级）
- `@dependabot ignore this dependency` 将关闭此 PR 并阻止 Dependabot 为此依赖项创建更多 PR（除非您重新打开 PR 或自行升级）

</details>

## The Story of This Pull Request

这是一个由 Dependabot 自动生成的依赖更新 PR。其核心目标是提升 Bevy 引擎 `bevy_asset` 模块中文件系统监控组件的稳定性和功能范围。`notify-debouncer-full` 这个库为 Bevy 的热重载（hot reloading）功能提供了底层文件监听支持。

**问题的核心**在于依赖版本落后。项目当时使用的是 `notify-debouncer-full` 0.6.0 版本，而上游已经发布了 0.7.0 版本，其中包含了重要的错误修复和功能增强。具体来说，根据发布说明，0.7.0 版本修复了一个关于事件去重的 bug（issue #711）。这个 bug 会导致在超时窗口内的事件未被正确合并，使得 `event_handler` 被本应合并的同一事件多次调用。对于依赖文件系统事件来触发资源热重载的 Bevy 来说，这个 bug 可能导致资源被不必要的多次重载，影响开发体验和性能。此外，新版本还增加了对 WebAssembly (Wasm) 构建的支持（issue #673），这为 Bevy 未来在浏览器等环境中实现资源热重载功能提供了可能。

**解决方案非常直接**：将依赖版本号从 `0.6.0` 更新到 `0.7.0`。这是一个遵循语义化版本（SemVer）的次要版本升级，通常意味着包含向后兼容的新功能或问题修复，正符合此情况。Dependabot 自动完成了版本号的检测和更新提议。维护者在评估后确认此次升级没有引入破坏性变更（根据 SemVer 规范，0.7.0 相对于 0.6.0 应保持公共 API 兼容），因此接受了这个 PR。

从**实现细节**上看，修改仅涉及一个文件：`crates/bevy_asset/Cargo.toml`。该文件是 Rust 项目的清单文件，定义了 `bevy_asset` crate 的元数据和依赖项。修改位于条件依赖部分，只有当构建目标**不是** `wasm32` 架构时，才会引入 `notify-debouncer-full` 依赖（因为文件系统监控在标准 Wasm 沙箱环境中通常不适用或需要特殊处理）。此次更新只是将该依赖的版本约束从 `0.6.0` 放宽至 `0.7.0`。这个改动本身虽然微小，但触发了整个依赖解析和构建过程，确保项目使用新版本的库进行编译和链接。

**技术洞察**方面，这个 PR 展示了在大型 Rust 项目中管理依赖的几个关键点：
1.  **自动化依赖更新**：使用 Dependabot 这类工具可以定期扫描并提议依赖更新，有助于项目及时获取安全补丁、性能改进和新功能，减少技术债务。
2.  **条件编译与平台特定代码**：依赖被配置在 `[target.'cfg(not(target_arch = "wasm32"))'.dependencies]` 部分，这体现了 Rust 强大的条件编译能力，允许根据目标平台智能地包含或排除某些功能，保持核心代码的简洁和可移植性。
3.  **SemVer 的实践**：维护者信任上游库遵循 SemVer，因此可以相对安全地进行次要版本更新。但发布说明中提到的 MSRV（Minimum Supported Rust Version）政策变更也提醒我们，除了 API 兼容性，构建环境的要求也可能变化，需要在集成时注意。
4.  **依赖的传递性**：`notify-debouncer-full` 0.7.0 本身也更新了其一系列子依赖（如 `windows-sys`, `flume`, `mio` 等），如提交列表所示。这次升级也间接地为 Bevy 带来了这些底层库的更新。

**本次更新的影响**是双重的。最直接的影响是修复了文件系统事件去重的逻辑错误，这应该会使 Bevy 的资源热重载行为更加精确和高效，避免因单个文件更改而触发多次冗余的重载操作。从长远来看，增加了对 Wasm 构建的支持为 Bevy 资产系统在未来实现跨平台一致的热重载体验铺平了道路，尽管在当前代码中，该依赖仍被排除在 Wasm 目标之外（条件编译 `cfg(not(target_arch = "wasm32"))`），但库本身对 Wasm 的支持是未来可能利用的基础。

## Visual Representation

```mermaid
graph TD
    subgraph "Bevy 引擎 (此 PR 上下文)"
        A[bevy_asset crate] --> B{条件编译};
        B -->|target_arch != "wasm32"| C[启用文件监控功能];
        B -->|target_arch == "wasm32"| D[禁用文件监控功能];
    end

    C --> E[依赖: notify-debouncer-full];
    E --> F[提供文件系统事件监听与去抖];
    F --> G[驱动 Bevy 资源热重载];

    subgraph "依赖更新 (PR #22742)"
        H[notify-debouncer-full v0.6.0] -- 更新至 --> I[notify-debouncer-full v0.7.0];
        I --> J[修复事件去重 Bug];
        I --> K[增加 Wasm 构建支持];
    end

    J -.->|改善| G;
    K -.->|为未来功能奠基| E;
```

## Key Files Changed

- `crates/bevy_asset/Cargo.toml` (+1/-1)

该文件是 `bevy_asset` 模块的 `Cargo.toml` 清单文件。本次 PR 的唯一更改是更新了可选依赖项 `notify-debouncer-full` 的版本号。

1.  **更改内容及原因**：将 `notify-debouncer-full` 的版本要求从 `0.6.0` 更新为 `0.7.0`。原因是上游库发布了新版本，其中包含了重要的错误修复（事件去重）和功能增强（Wasm 支持）。

2.  **代码片段**：
    ```toml
    # File: crates/bevy_asset/Cargo.toml
    # Before:
    [target.'cfg(not(target_arch = "wasm32"))'.dependencies]
    notify-debouncer-full = { version = "0.6.0", default-features = false, optional = true }

    # After:
    [target.'cfg(not(target_arch = "wasm32"))'.dependencies]
    notify-debouncer-full = { version = "0.7.0", default-features = false, optional = true }
    ```

3.  **与 PR 整体目的的关系**：这个单行修改是整个 PR 的核心。它直接实现了依赖版本升级的目标，从而使 `bevy_asset` 在后续构建时能够拉取并使用修复了 bug 并支持 Wasm 的 `notify-debouncer-full` 0.7.0 库。该依赖是 `optional`（可选）的，并与 `cfg(not(target_arch = "wasm32"))` 条件绑定，意味着它仅在非 Wasm 目标平台上且当相应功能被启用时才会被编译和链接。

## Further Reading

- **notify-rs 项目仓库**：https://github.com/notify-rs/notify - 了解文件系统通知库的详细信息、API 和使用方式。
- **Semantic Versioning (SemVer)**：https://semver.org/ - 理解语义化版本规范，这是评估依赖更新风险的基础。
- **Cargo 手册 - 指定依赖项**：https://doc.rust-lang.org/cargo/reference/specifying-dependencies.html - 学习 Rust Cargo 中依赖声明的各种语法和选项，包括条件依赖。
- **Bevy 官方文档 - 资源热重载**：查阅 Bevy 官方文档中关于资源系统和热重载的部分，以了解 `notify-debouncer-full` 在引擎中的具体应用场景。

# Full Code Diff
diff --git a/crates/bevy_asset/Cargo.toml b/crates/bevy_asset/Cargo.toml
index 9d9257413642d..d64d3ff462d10 100644
--- a/crates/bevy_asset/Cargo.toml
+++ b/crates/bevy_asset/Cargo.toml
@@ -94,7 +94,7 @@ bevy_reflect = { path = "../bevy_reflect", version = "0.19.0-dev", default-featu
 ] }
 
 [target.'cfg(not(target_arch = "wasm32"))'.dependencies]
-notify-debouncer-full = { version = "0.6.0", default-features = false, optional = true }
+notify-debouncer-full = { version = "0.7.0", default-features = false, optional = true }
 # updating ureq: while ureq is semver stable, it depends on rustls which is not, meaning unlikely but possible breaking changes on minor releases. https://github.com/bevyengine/bevy/pull/16366#issuecomment-2572890794
 ureq = { version = "3", optional = true, default-features = false }
 blocking = { version = "1.6", optional = true }