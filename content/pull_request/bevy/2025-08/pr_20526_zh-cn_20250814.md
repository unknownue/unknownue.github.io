+++
title = "#20526 Add release notes for meshlet BVH culling"
date = "2025-08-14T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = false

[extra]
current_language = "zh-cn"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2025-08/pr-20526-en-20250814" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2025-08/pr-20526-zh-cn-20250814" }}
+++

## 标题：为 Meshlet BVH 剔除添加发布说明的技术分析

### 基础信息
- **标题**: Add release notes for meshlet BVH culling
- **PR链接**: https://github.com/bevyengine/bevy/pull/20526
- **作者**: SparkyPotato
- **状态**: 已合并
- **标签**: C-Docs, A-Rendering, S-Ready-For-Final-Review
- **创建时间**: 2025-08-11T23:56:05Z
- **合并时间**: 2025-08-14T21:02:26Z
- **合并人**: alice-i-cecile

### 描述翻译
#### 目标
- 添加发布说明

#### 解决方案
- 编写发布说明

#### 测试
- 阅读说明

---
#### 效果展示
<img width="2560" height="1392" alt="meshlet-bvh-culling" src="https://github.com/user-attachments/assets/2acc2692-a3f4-43fd-8e89-bb68c6e3a94e" />
(添加图片时的示例截图)

---

### 技术背景与解决方案
本次PR的核心目标是添加新功能meshlet BVH剔除的发布说明。该功能属于Bevy引擎虚拟几何体系统的重要优化，通过引入BVH(Bounding Volume Hierarchy)层次包围体结构实现高效场景剔除。

#### 性能优化突破
BVH剔除机制使渲染成本与场景几何体数量基本解耦。在测试场景中：
1. 130,000个龙实例(总计约1150亿三角形)渲染耗时约3.5ms
2. 100万+实例(约9000亿三角形)渲染耗时约4.5ms
场景复杂度增加近8倍时，GPU时间仅增加30%，其中几何渲染时间从3.1ms增至4.1ms，材质计算保持0.4ms不变。

#### 架构改进
```markdown
# 发布说明关键变更
- 移除了2^24集群限制(约40亿三角形)
- 消除场景大小的硬编码限制
- 实际限制因素变为显存容量和每帧实例上传需求
```
对比0.16版本，1,300个实例的场景渲染时间从2.2ms降至1.3ms，证明新架构在常规场景也有显著性能提升。

### 关键文件变更
#### `release-content/release-notes/meshlet-bvh-culling.md` (新增)
```markdown
---
title: Virtual Geometry BVH culling
authors: ["@SparkyPotato", "@atlv24"]
pull_requests: [19318]
---

(TODO: Embed example screenshot here)

Bevy's virtual geometry has been greatly optimized with BVH-based culling...
[完整内容保持原样]
```

该文件包含三个技术要点：
1. **性能数据**：量化展示不同规模场景下的渲染耗时
2. **架构改进**：消除集群数量限制
3. **实际约束**：明确当前版本的显存和实例上传瓶颈

### 技术影响分析
1. **渲染扩展性**：使超大规模场景渲染变得可行
2. **资源管理**：开发者需注意显存管理和实例上传优化
3. **未来优化点**：说明中明确提到实例上传效率是后续优化方向

### 技术关系图
```mermaid
graph LR
    A[Meshlet BVH Culling] --> B[场景剔除]
    A --> C[实例管理]
    B --> D[GPU渲染管线]
    C --> E[实例数据上传]
    D --> F[最终渲染输出]
```

### 延伸阅读
1. [BVH算法原理](https://en.wikipedia.org/wiki/Bounding_volume_hierarchy)
2. [GPU驱动渲染架构](https://developer.nvidia.com/gpudrivenrendering)
3. [原始功能PR #19318](https://github.com/bevyengine/bevy/pull/19318)

### 完整代码变更
```diff
diff --git a/release-content/release-notes/meshlet-bvh-culling.md b/release-content/release-notes/meshlet-bvh-culling.md
new file mode 100644
index 0000000000000..7a3cc6adbca76
--- /dev/null
+++ b/release-content/release-notes/meshlet-bvh-culling.md
@@ -0,0 +1,22 @@
+---
+title: Virtual Geometry BVH culling
+authors: ["@SparkyPotato", "@atlv24"]
+pull_requests: [19318]
+---
+
+(TODO: Embed example screenshot here)
+
+Bevy's virtual geometry has been greatly optimized with BVH-based culling, making the cost of rendering nearly independent of scene geometry.
+Comparing the sample scene shown above with 130k dragon instances to one with over 1 million instances, total GPU rendering time only increases by 30%.
+
+This also gets rid of the previous cluster limit that limited the world to 2^24 clusters (about 4 billion triangles).
+There are now *no* hardcoded limits to scene size. In practice you will only be limited by asset VRAM usage (since streaming is not yet implemented),
+and total instance count due the current code requiring all instances to be re-uploaded to the GPU every frame.
+
+The screenshot above has 130,000 dragons in the scene, each with about 870,000 triangles, leading to over *115 billion* total triangles in the scene.
+
+Speaking of concrete GPU cost, the scene above renders in about 3.5 ms on the 4070, with \~3.1 ms being spent on the geometry render and \~0.4 ms on the material evaluation.
+After increasing the instance count to over 1 million (almost *900 billion triangles*!), the total increases to about 4.5 ms, with \~4.1 ms on geometry render and material evaluation remaining constant at ~0.4 ms.
+This is a 30% increase in GPU time for an almost 8x increase in scene complexity.
+
+Comparing GPU times to 0.16 on a much smaller scene with 1,300 instances, previously the full render took 2.2 ms, whereas now it is 1.3 ms.
```