+++
title = "#20663 Fix a comment error in example system_stepping.rs"
date = "2025-08-20T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = false

[extra]
current_language = "zh-cn"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2025-08/pr-20663-en-20250820" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2025-08/pr-20663-zh-cn-20250820" }}
+++

# Fix a comment error in example system_stepping.rs

## Basic Information
- **Title**: Fix a comment error in example system_stepping.rs
- **PR Link**: https://github.com/bevyengine/bevy/pull/20663
- **作者**: Mysvac
- **状态**: 已合并
- **标签**: D-Trivial, A-ECS, C-Examples, S-Ready-For-Final-Review
- **创建时间**: 2025-08-20T04:50:03Z
- **合并时间**: 2025-08-20T05:36:54Z
- **合并者**: alice-i-cecile

## 描述翻译
### Objective
修复 ECS 示例 system_stepping.rs 中的注释错误：

```rust
  println!(
      r#"
           ....................................
           它们形成对 update_system_one() 的链式依赖，并按
           one, two, three 的顺序运行。Stepping 会在 Update 调度中
           遇到 update_system_three() 的断点时停止系统执行。 // <------
           ................."#
  );
  let mut stepping = app.world_mut().resource_mut::<Stepping>();
  stepping.set_breakpoint(Update, update_system_two); // <------
  stepping.continue_frame();
  app.update();
  ....................
```

我认为这里应该是 "breakpoint for update_system_two()" 而不是 "breakpoint for update_system_three()"。

### Solution
在 `println!` 中将 `update_system_three` 改为 `update_system_two`。

### Testing
只修改了一个注释，未进行测试。

## 本次 Pull Request 的故事

这个 PR 解决了一个简单的文档错误，但体现了开源项目中代码注释准确性的重要性。问题出现在 Bevy 引擎的 ECS 示例文件 `system_stepping.rs` 中，该示例展示了如何使用 stepping 功能来调试系统执行流程。

问题的核心在于代码注释与实际代码逻辑的不一致。在示例的输出说明中，注释声称会在 `update_system_three` 处设置断点，但实际代码中设置的断点却是 `update_system_two`：

```rust
stepping.set_breakpoint(Update, update_system_two); // 实际设置的是 update_system_two
```

这种不一致会导致学习者在阅读示例时产生困惑，特别是对于正在学习 Bevy ECS 系统和调试功能的新开发者。注释错误可能会误导开发者对 stepping 机制的理解。

修复方案非常直接 - 只需将输出字符串中的 `update_system_three` 改为 `update_system_two` 即可保持注释与实际代码的一致性：

```rust
// 修改前：
"breakpoint for update_system_three()."

// 修改后：  
"breakpoint for update_system_two()."
```

虽然这个修改看似微不足道，但它体现了良好的软件开发实践：保持代码、注释和文档的一致性。在复杂的 ECS 系统中，准确的文档对于开发者理解系统执行流程至关重要。

这个修改不需要任何测试，因为它只影响输出字符串的内容，不影响代码的实际功能。PR 被快速合并也反映了社区对文档准确性的重视。

## 可视化表示

```mermaid
graph LR
    A[注释错误] --> B[代码分析]
    B --> C[修正注释]
    C --> D[保持一致性]
```

## 关键文件变更

- `examples/ecs/system_stepping.rs` (+1/-1)

该文件是 Bevy ECS 的一个示例，展示了如何使用 stepping 功能来控制和调试系统的执行顺序。

**变更内容：**
```rust
// 修改前：
println!(
    r#"
         ....................................
         它们形成对 update_system_one() 的链式依赖，并按
         one, two, three 的顺序运行。Stepping 会在 Update 调度中
         遇到 update_system_three() 的断点时停止系统执行。
         ................."#
);

// 修改后：
println!(
    r#"
         ....................................
         它们形成对 update_system_one() 的链式依赖，并按
         one, two, three 的顺序运行。Stepping 会在 Update 调度中
         遇到 update_system_two() 的断点时停止系统执行。
         ................."#
);
```

这个修改确保了示例中的注释描述与实际代码行为保持一致，避免了学习者的困惑。

## 延伸阅读

- [Bevy ECS 官方文档](https://bevyengine.org/learn/books/the-official-bevy-book/ecs/)
- [Bevy Stepping 功能说明](https://github.com/bevyengine/bevy/blob/main/examples/ecs/system_stepping.rs)
- [Rust 文档注释最佳实践](https://doc.rust-lang.org/rustdoc/how-to-write-documentation.html)

# 完整代码差异

```diff
diff --git a/examples/ecs/system_stepping.rs b/examples/ecs/system_stepping.rs
index 01b2f7ce71436..cf351a80b32ed 100644
--- a/examples/ecs/system_stepping.rs
+++ b/examples/ecs/system_stepping.rs
@@ -151,7 +151,7 @@ fn main() {
              they form a chained dependency on update_system_one() and run
              in order of one, two, three.  Stepping stops system execution in
              the Update schedule when it encounters the breakpoint for
-             update_system_three().
+             update_system_two().
              During the step we run update_system_two() along with the
              pre_update_system().
              During the final continue pre_update_system() and
```