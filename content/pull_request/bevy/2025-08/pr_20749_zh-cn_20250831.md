+++
title = "#20749 Bump actions/setup-java from 4 to 5"
date = "2025-08-31T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = false

[extra]
current_language = "zh-cn"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2025-08/pr-20749-en-20250831" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2025-08/pr-20749-zh-cn-20250831" }}
+++

# Bump actions/setup-java from 4 to 5

## 基本信息
- **标题**: Bump actions/setup-java from 4 to 5
- **PR链接**: https://github.com/bevyengine/bevy/pull/20749
- **作者**: app/dependabot
- **状态**: 已合并
- **标签**: D-Trivial, A-Build-System, C-Dependencies, S-Ready-For-Final-Review
- **创建时间**: 2025-08-25T13:33:37Z
- **合并时间**: 2025-08-31T07:57:52Z
- **合并者**: mockersf

## 描述翻译
将 [actions/setup-java](https://github.com/actions/setup-java) 从版本 4 升级到 5。
<details>
<summary>发布说明</summary>
<p><em>来源自 <a href="https://github.com/actions/setup-java/releases">actions/setup-java 的发布页面</a>。</em></p>
<blockquote>
<h2>v5.0.0</h2>
<h2>变更内容</h2>
<h3>破坏性变更</h3>
<ul>
<li>升级到 node 24，由 <a href="https://github.com/salmanmkc"><code>@​salmanmkc</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/888">actions/setup-java#888</a> 中提交</li>
</ul>
<p>请确保您的运行器已更新到此版本或更高版本以使用此发布。v2.327.1 <a href="https://github.com/actions/runner/releases/tag/v2.327.1">发布说明</a></p>
<h3>依赖升级</h3>
<ul>
<li>升级 Publish Immutable Action，由 <a href="https://github.com/HarithaVattikuti"><code>@​HarithaVattikuti</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/798">actions/setup-java#798</a> 中提交</li>
<li>升级 eslint-plugin-jest 从 27.9.0 到 28.11.0，由 <a href="https://github.com/dependabot"><code>@​dependabot</code></a>[bot] 在 <a href="https://redirect.github.com/actions/setup-java/pull/730">actions/setup-java#730</a> 中提交</li>
<li>升级 undici 从 5.28.5 到 5.29.0，由 <a href="https://github.com/dependabot"><code>@​dependabot</code></a>[bot] 在 <a href="https://redirect.github.com/actions/setup-java/pull/833">actions/setup-java#833</a> 中提交</li>
<li>升级 form-data 以修复关键漏洞，由 <a href="https://github.com/gowridurgad"><code>@​gowridurgad</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/887">actions/setup-java#887</a> 中提交</li>
<li>升级 actions/checkout 从 4 到 5，由 <a href="https://github.com/dependabot"><code>@​dependabot</code></a>[bot] 在 <a href="https://redirect.github.com/actions/setup-java/pull/896">actions/setup-java#896</a> 中提交</li>
</ul>
<h3>Bug 修复</h3>
<ul>
<li>防止默认安装 JetBrains 预发布版本，由 <a href="https://github.com/priyagupta108"><code>@​priyagupta108</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/859">actions/setup-java#859</a> 中提交</li>
<li>改进 Setup-Java Action 的错误处理以帮助调试间歇性故障，由 <a href="https://github.com/gowridurgad"><code>@​gowridurgad</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/848">actions/setup-java#848</a> 中提交</li>
</ul>
<h2>新贡献者</h2>
<ul>
<li><a href="https://github.com/gowridurgad"><code>@​gowridurgad</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/848">actions/setup-java#848</a> 中首次贡献</li>
<li><a href="https://github.com/salmanmkc"><code>@​salmanmkc</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/888">actions/setup-java#888</a> 中首次贡献</li>
</ul>
<p><strong>完整变更日志</strong>: <a href="https://github.com/actions/setup-java/compare/v4...v5.0.0">https://github.com/actions/setup-java/compare/v4...v5.0.0</a></p>
<h2>v4.7.1</h2>
<h2>变更内容</h2>
<h3>文档变更</h3>
<ul>
<li>添加文档建议使用 GraalVM JDK 17 版本 17.0.12 以符合 GFTC 许可条款，由 <a href="https://github.com/aparnajyothi-y"><code>@​aparnajyothi-y</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/704">actions/setup-java#704</a> 中提交</li>
<li>移除文档中重复的 GraalVM 部分，由 <a href="https://github.com/Marcono1234"><code>@​Marcono1234</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/716">actions/setup-java#716</a> 中提交</li>
</ul>
<h3>依赖更新:</h3>
<ul>
<li>升级 <code>@​action/cache</code> 从 4.0.0 到 4.0.2，由 <a href="https://github.com/aparnajyothi-y"><code>@​aparnajyothi-y</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/766">actions/setup-java#766</a> 中提交</li>
<li>升级 <code>@​actions/glob</code> 从 0.4.0 到 0.5.0，由 <a href="https://github.com/dependabot"><code>@​dependabot</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/744">actions/setup-java#744</a> 中提交</li>
<li>升级 ts-jest 从 29.1.2 到 29.2.5，由 <a href="https://github.com/dependabot"><code>@​dependabot</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/743">actions/setup-java#743</a> 中提交</li>
<li>升级 <code>@​action/cache</code> 到 4.0.3，由 <a href="https://github.com/aparnajyothi-y"><code>@​aparnajyothi-y</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/773">actions/setup-java#773</a> 中提交</li>
</ul>
<p><strong>完整变更日志</strong>: <a href="https://github.com/actions/setup-java/compare/v4...v4.7.1">https://github.com/actions/setup-java/compare/v4...v4.7.1</a></p>
<h2>v4.7.0</h2>
<h2>变更内容</h2>
<ul>
<li>配置 Dependabot 设置，由 <a href="https://github.com/HarithaVattikuti"><code>@​HarithaVattikuti</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/722">actions/setup-java#722</a> 中提交</li>
<li>README 更新：添加权限部分，由 <a href="https://github.com/benwells"><code>@​benwells</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/723">actions/setup-java#723</a> 中提交</li>
<li>升级 <code>cache</code> 从版本 3.2.4 到 4.0.0，由 <a href="https://github.com/aparnajyothi-y"><code>@​aparnajyothi-y</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/724">actions/setup-java#724</a> 中提交</li>
<li>升级 <code>@actions/http-client</code> 从 2.2.1 到 2.2.3，由 <a href="https://github.com/dependabot"><code>@​dependabot</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/728">actions/setup-java#728</a> 中提交</li>
<li>升级 <code>actions/publish-immutable-action</code> 从 0.0.3 到 0.0.4，由 <a href="https://github.com/dependabot"><code>@​dependabot</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/727">actions/setup-java#727</a> 中提交</li>
<li>升级 <code>@types/jest</code> 从 29.5.12 到 29.5.14，由 <a href="https://github.com/dependabot"><code>@​dependabot</code></a> 在 <a href="https://redirect.github.com/actions/setup-java/pull/729">actions/setup-java#729</a> 中提交</li>
</ul>
<!-- raw HTML omitted -->
</blockquote>
<p>... (截断)</p>
</details>
<details>
<summary>提交</summary>
<ul>
<li><a href="https://github.com/actions/setup-java/commit/dded0888837ed1f317902acf8a20df0ad188d165"><code>dded088</code></a> 将 actions/checkout 从 4 升级到 5 (<a href="https://redirect.github.com/actions/setup-java/issues/896">#896</a>)</li>
<li><a href="https://github.com/actions/setup-java/commit/0913e9a06eb8b69c62db76aa61f580c2b3a5b4e0"><code>0913e9a</code></a> 升级到 node 24 (<a href="https://redirect.github.com/actions/setup-java/issues/888">#888</a>)</li>
<li><a href="https://github.com/actions/setup-java/commit/e9343db97e09d87a3c50e544105d99fe912c204b"><code>e9343db</code></a> 升级 form-data (<a href="https://redirect.github.com/actions/setup-java/issues/887">#887</a>)</li>
<li><a href="https://github.com/actions/setup-java/commit/ae2b61dbc685e60e4427b2e8ed4f0135c6ea8597"><code>ae2b61d</code></a> 将 undici 从 5.28.5 升级到 5.29.0 (<a href="https://redirect.github.com/actions/setup-java/issues/833">#833</a>)</li>
<li><a href="https://github.com/actions/setup-java/commit/c190c18febcf6c040d80b10ea201a05a2c320263"><code>c190c18</code></a> 将 eslint-plugin-jest 从 27.9.0 升级到 29.0.1 (<a href="https://redirect.github.com/actions/setup-java/issues/730">#730</a>)</li>
<li><a href="https://github.com/actions/setup-java/commit/67aec007b3fcabe15ca665bfccc1e255dd52e30d"><code>67aec00</code></a> 修复：防止默认安装 JetBrains 预发布版本 (<a href="https://redirect.github.com/actions/setup-java/issues/859">#859</a>)</li>
<li><a href="https://github.com/actions/setup-java/commit/ebb356cc4e59bcf94f518203228485f5d40e4b58"><code>ebb356c</code></a> 改进 Setup-Java Action 的错误处理以帮助调试间歇性故障...</li>
<li><a href="https://github.com/actions/setup-java/commit/f4f1212c880fdec8162ea9a6493f4495191887b4"><code>f4f1212</code></a> 更新 publish-immutable-actions.yml (<a href="https://redirect.github.com/actions/setup-java/issues/798">#798</a>)</li>
<li>查看完整差异请访问 <a href="https://github.com/actions/setup-java/compare/v4...v5">比较视图</a></li>
</ul>
</details>
<br />


[![Dependabot 兼容性评分](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=actions/setup-java&package-manager=github_actions&previous-version=4&new-version=5)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

只要您不自行修改，Dependabot 将解决此 PR 的任何冲突。您也可以通过评论 `@dependabot rebase` 手动触发 rebase。

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot 命令和选项</summary>
<br />

您可以通过评论此 PR 来触发 Dependabot 操作：
- `@dependabot rebase` 将 rebase 此 PR
- `@dependabot recreate` 将重新创建此 PR，覆盖对其进行的任何编辑
- `@dependabot merge` 将在 CI 通过后合并此 PR
- `@dependabot squash and merge` 将在 CI 通过后 squash 并合并此 PR
- `@dependabot cancel merge` 将取消先前请求的合并并阻止自动合并
- `@dependabot reopen` 将在关闭时重新打开此 PR
- `@dependabot close` 将关闭此 PR 并停止 Dependabot 重新创建它。您可以通过手动关闭它来实现相同的结果
- `@dependabot show <dependency name> ignore conditions` 将显示指定依赖项的所有忽略条件
- `@dependabot ignore this major version` 将关闭此 PR 并停止 Dependabot 为此主要版本创建更多 PR（除非您重新打开 PR 或自行升级）
- `@dependabot ignore this minor version` 将关闭此 PR 并停止 Dependabot 为此次要版本创建更多 PR（除非您重新打开 PR 或自行升级）
- `@dependabot ignore this dependency` 将关闭此 PR 并停止 Dependabot 为此依赖项创建更多 PR（除非您重新打开 PR 或自行升级）


</details>

## 这个拉取请求的故事

这个 PR 是一个典型的依赖管理更新，由 GitHub 的 Dependabot 自动化工具发起。Dependabot 定期检查项目依赖项，当检测到有新版本可用时，会自动创建 PR 来更新这些依赖项。

**问题和背景**：Bevy 引擎使用 GitHub Actions 作为其持续集成(CI)系统的一部分。在 `.github/workflows/validation-jobs.yml` 文件中，有一个步骤使用 `actions/setup-java@v4` 来设置 Java 开发环境。actions/setup-java 发布了新的主要版本 v5，包含重要的安全更新、功能改进和错误修复。保持依赖项最新是维护软件安全性和稳定性的重要实践。

**解决方案方法**：这个更新采用了最直接的方法 - 将 actions/setup-java 的版本引用从 v4 改为 v5。这是一个破坏性变更（breaking change），主要涉及升级到 Node.js 24，这意味着 GitHub Actions 运行器需要更新到相应版本才能兼容。

**实施细节**：变更极其简单但重要。只需要修改一行代码：

```yaml
# 文件: .github/workflows/validation-jobs.yml
# 之前:
- uses: actions/setup-java@v4

# 之后:
- uses: actions/setup-java@v5
```

这个变更位于 CI 流水线的 "Set up JDK 17" 步骤中，确保 Java 开发环境使用最新版本的设置工具。

**技术洞察**：虽然这个变更看起来简单，但它带来了几个重要改进：
1. **安全性增强**：v5 版本修复了 form-data 库中的关键漏洞
2. **错误处理改进**：提供了更好的错误处理机制来调试间歇性故障
3. **依赖项更新**：升级了多个底层依赖，包括 Node.js 24 和相关的工具链
4. **行为修正**：防止了默认安装 JetBrains 预发布版本的问题

**影响**：这个更新确保了 Bevy 的 CI 系统使用最新、最安全的工具版本。虽然对最终用户不可见，但这种维护性工作对于项目的长期健康至关重要。它减少了潜在的安全风险，改善了 CI 流水线的可靠性，并保持了与 GitHub Actions 生态系统的兼容性。

## 可视化表示

```mermaid
graph LR
    A[GitHub Actions Workflow] --> B[actions/setup-java@v4]
    B --> C[JDK 17 Setup]
    A --> D[actions/setup-java@v5]
    D --> C
```

## 关键文件更改

- **`.github/workflows/validation-jobs.yml`** (+1/-1)
  
  这个文件包含了 Bevy 项目的 GitHub Actions 工作流配置。唯一的变更是将 `actions/setup-java` 的版本从 v4 升级到 v5：

```yaml
# 变更前:
- name: Set up JDK 17
  uses: actions/setup-java@v4
  with:
    java-version: "17"
    distribution: "temurin"

# 变更后:
- name: Set up JDK 17
  uses: actions/setup-java@v5
  with:
    java-version: "17"
    distribution: "temurin"
```

这个变更确保了 Java 环境设置步骤使用最新版本的 setup-java action，从而获得安全更新和功能改进。

## 扩展阅读

- [GitHub Actions 官方文档](https://docs.github.com/en/actions)
- [actions/setup-java 仓库](https://github.com/actions/setup-java)
- [Dependabot 文档](https://docs.github.com/en/code-security/dependabot)
- [Semantic Versioning 规范](https://semver.org/)

# 完整代码差异
```diff
diff --git a/.github/workflows/validation-jobs.yml b/.github/workflows/validation-jobs.yml
index 3e85860526561..333bf9824d642 100644
--- a/.github/workflows/validation-jobs.yml
+++ b/.github/workflows/validation-jobs.yml
@@ -64,7 +64,7 @@ jobs:
       - uses: dtolnay/rust-toolchain@stable
 
       - name: Set up JDK 17
-        uses: actions/setup-java@v4
+        uses: actions/setup-java@v5
         with:
           java-version: "17"
           distribution: "temurin"
```