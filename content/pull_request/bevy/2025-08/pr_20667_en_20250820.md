+++
title = "#20667 Fix documentation for `Rot2`"
date = "2025-08-20T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = true

[taxonomies]
list_display = ["show"]

[extra]
current_language = "en"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2025-08/pr-20667-en-20250820" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2025-08/pr-20667-zh-cn-20250820" }}
labels = ["C-Docs", "A-Math", "D-Straightforward"]
+++

# Fix documentation for `Rot2`

## Basic Information
- **Title**: Fix documentation for `Rot2`
- **PR Link**: https://github.com/bevyengine/bevy/pull/20667
- **Author**: IQuick143
- **Status**: MERGED
- **Labels**: C-Docs, S-Ready-For-Final-Review, A-Math, D-Straightforward
- **Created**: 2025-08-20T09:24:59Z
- **Merged**: 2025-08-20T17:09:03Z
- **Merged By**: alice-i-cecile

## Description Translation
# Objective

- Certain pieces of documentation on `Rot2` are imprecise or misleading
- Try to make docs more comprehensive
 
## Solution

- Rewrite a bunch of doc comment, dropping `in radians` where there's no values in radians,
- Clear up comments about "clamping" input angles by a hopefully more accurate and clear explanation.

## Testing

- CI

## The Story of This Pull Request

The PR addresses a documentation issue in Bevy's 2D rotation implementation. The `Rot2` struct, which represents 2D rotations, had several documentation problems that could mislead developers about its behavior.

The core issue was with terminology around angle handling. The original documentation incorrectly described angle inputs as being "clamped" to specific ranges, when in reality the implementation uses modular arithmetic to handle angles outside the typical ranges. This is a critical distinction because clamping would truncate values, while modular arithmetic preserves the rotational equivalence of angles that differ by full rotations.

For example, the documentation claimed that angles were clamped to `(-π, π]` for radians or `(-180°, 180°]` for degrees, but the actual implementation uses trigonometric functions that naturally handle angle wrapping through periodicity. A rotation of 3π radians is equivalent to π radians, not clamped to π.

The solution involved systematically reviewing and rewriting the documentation to:
1. Remove incorrect "clamping" descriptions and replace them with accurate explanations of angle wrapping behavior
2. Eliminate unnecessary "in radians" qualifiers where they didn't apply (like in the `sin` and `cos` field descriptions)
3. Add concrete examples demonstrating the actual behavior, including cases that show angle equivalence through full rotations
4. Improve consistency and clarity across all documentation comments

The changes ensure that developers understand that rotations are periodic and that angles larger than a full rotation wrap around correctly, rather than being clamped or truncated. This is particularly important for animation systems, physics simulations, and any code that accumulates rotations over time.

## Visual Representation

```mermaid
graph TD
    A[Rot2 Struct] --> B[Field Documentation]
    A --> C[Constructor Methods]
    A --> D[Conversion Methods]
    
    B --> B1[sin/cos fields]
    B --> B2[Constant rotations]
    
    C --> C1[radians()]
    C --> C2[degrees()]
    C --> C3[turn_fraction()]
    C --> C4[from_sin_cos()]
    
    D --> D1[as_radians()]
    D --> D2[as_degrees()]
    D --> D3[as_turn_fraction()]
    D --> D4[sin_cos()]
```

## Key Files Changed

### `crates/bevy_math/src/rotation2d.rs` (+41/-13)

This file contains the implementation of the `Rot2` struct for 2D rotations. The changes focused entirely on documentation improvements without modifying any functional code.

**Key changes:**

1. **Struct-level documentation** - Updated to clarify that rotations can be created from counterclockwise angles
2. **Field documentation** - Removed unnecessary "in radians" qualifiers since the values are trigonometric results, not angle measurements
3. **Constant documentation** - Added explanations of what each constant rotation represents in terms of turns
4. **Method documentation** - Completely rewrote the angle input methods to correctly explain the wrapping behavior instead of incorrect clamping

**Before (incorrect clamping description):**
```rust
/// Creates a [`Rot2`] from a counterclockwise angle in radians.
///
/// # Note
///
/// The input rotation will always be clamped to the range `(-π, π]` by design.
```

**After (correct wrapping behavior):**
```rust
/// Creates a [`Rot2`] from a counterclockwise angle in radians.
/// A negative argument corresponds to a clockwise rotation.
///
/// # Note
///
/// Angles larger than or equal to 2π (in either direction) loop around to smaller rotations, since a full rotation returns an object to its starting orientation.
```

**Added examples demonstrating wrapping behavior:**
```rust
// A rotation by 3π and 1π are the same
#[cfg(feature = "approx")]
assert_relative_eq!(Rot2::radians(3.0 * PI), Rot2::radians(PI));
```

The documentation now correctly explains that rotations use modular arithmetic rather than clamping, and provides clear examples showing that angles wrap around full rotations.

## Further Reading

- [Bevy Math Documentation](https://docs.rs/bevy_math/latest/bevy_math/) - Official Bevy math module documentation
- [Unit Complex Numbers](https://en.wikipedia.org/wiki/Complex_number#Unit_complex_numbers) - Wikipedia article on the mathematical representation used by Rot2
- [Angle Wrapping vs Clamping](https://stackoverflow.com/questions/2320986/easy-way-to-keeping-angles-between-179-and-180-degrees) - Discussion of angle handling techniques in game development
- [Bevy Cheatbook](https://bevy-cheatbook.github.io/) - Community-maintained Bevy reference with math section