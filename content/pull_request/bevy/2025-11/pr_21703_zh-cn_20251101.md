+++
title = "#21703 correct comment typo"
date = "2025-11-01T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = false

[extra]
current_language = "zh-cn"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2025-11/pr-21703-en-20251101" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2025-11/pr-21703-zh-cn-20251101" }}
+++

# correct comment typo

## 基本信息
- **标题**: correct comment typo
- **PR链接**: https://github.com/bevyengine/bevy/pull/21703
- **作者**: baozaolaoba-top
- **状态**: 已合并
- **标签**: C-Docs, A-ECS, S-Ready-For-Final-Review
- **创建时间**: 2025-10-31T08:41:04Z
- **合并时间**: 2025-11-01T19:15:24Z
- **合并者**: mockersf

## 描述翻译
&& -> ||

https://github.com/bevyengine/bevy/blob/906bc14d735b0f29ca4faf1c3f39aff9080da94a/crates/bevy_ecs/src/schedule/condition.rs#L1167-L1168

## 本次Pull Request的故事

这是一个关于代码注释准确性的简单但重要的修正。在Bevy引擎的ECS（Entity Component System）模块中，条件系统（condition system）的注释存在一个技术性错误，可能会误导开发者对系统行为的理解。

问题的核心在于`Nor`系统组合器的文档注释。`Nor`系统组合器在Bevy的调度系统中用于组合两个系统的输出，其逻辑应该是"非或"（NOR）操作。然而，在修改前的注释中，错误地描述了它使用的运算符。

修改前的注释写道：
```rust
/// Combines and inverts the outputs of two systems using the `&&` and `!` operators.
```

这里的问题是使用了`&&`（逻辑与）运算符的描述，但实际上`Nor`组合器应该使用`||`（逻辑或）运算符。从技术实现来看，`Nor`标记器对应的逻辑确实是`!(a || b)`，即先对两个系统的输出进行逻辑或操作，然后取反。

这个错误可能源于复制粘贴时没有正确更新注释，因为前面的`Nand`组合器确实使用`&&`运算符：
```rust
/// Combines and inverts the outputs of two systems using the `&&` and `!` operators.
pub type Nand<A, B> = CombinatorSystem<NandMarker, A, B>;
```

在Bevy的调度系统中，这些系统组合器扮演着重要角色。它们允许开发者通过逻辑组合来构建复杂的执行条件。准确的文档对于理解这些组合器的行为至关重要，特别是对于新接触代码库的开发者。

修正后的注释：
```rust
/// Combines and inverts the outputs of two systems using the `||` and `!` operators.
```

这个修改虽然只涉及一个字符的变动，但它确保了技术文档的准确性。在系统调度这样的核心模块中，即使是注释中的小错误也可能导致开发者对系统行为的误解，进而影响系统的正确使用。

从工程实践的角度看，这类修正体现了对代码质量的全方位关注。良好的文档注释不仅有助于代码维护，还能降低新贡献者的入门门槛。

## 可视化表示

```mermaid
graph TD
    A[条件系统注释] --> B{Nor组合器文档}
    B --> C[错误描述: 使用&&运算符]
    B --> D[正确描述: 使用||运算符]
    C --> E[可能导致开发者误解]
    D --> F[准确反映系统行为]
```

## 关键文件变更

**文件**: `crates/bevy_ecs/src/schedule/condition.rs` (+1/-1)

这个文件包含了Bevy ECS模块中条件系统的实现。具体修改涉及`Nor`系统组合器的文档注释修正。

**修改详情**:
```rust
// 修改前:
/// Combines and inverts the outputs of two systems using the `&&` and `!` operators.
pub type Nor<A, B> = CombinatorSystem<NorMarker, A, B>;

// 修改后:
/// Combines and inverts the outputs of two systems using the `||` and `!` operators.
pub type Nor<A, B> = CombinatorSystem<NorMarker, A, B>;
```

这个修改确保了文档准确描述了`Nor`组合器的实际行为，即使用逻辑或(`||`)运算符而非逻辑与(`&&`)运算符。

## 扩展阅读

- [Bevy ECS 文档](https://bevyengine.org/learn/book/ecs/) - 了解Bevy的实体组件系统
- [系统组合器文档](https://github.com/bevyengine/bevy/blob/main/crates/bevy_ecs/src/schedule/condition.rs) - 查看完整的系统组合器实现
- [逻辑运算符在系统调度中的应用](https://bevy-cheatbook.github.io/programming/system-sets.html) - 了解如何在Bevy中使用逻辑条件