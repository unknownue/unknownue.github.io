+++
title = "#21786 Make `WinitMonitors` public"
date = "2025-11-12T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = true

[taxonomies]
list_display = ["show"]

[extra]
current_language = "en"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2025-11/pr-21786-en-20251112" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2025-11/pr-21786-zh-cn-20251112" }}
labels = ["C-Bug", "A-Windowing"]
+++

# Make `WinitMonitors` public

## Basic Information
- **Title**: Make `WinitMonitors` public
- **PR Link**: https://github.com/bevyengine/bevy/pull/21786
- **Author**: SludgePhD
- **Status**: MERGED
- **Labels**: C-Bug, A-Windowing, S-Ready-For-Final-Review
- **Created**: 2025-11-08T23:42:59Z
- **Merged**: 2025-11-09T18:46:09Z
- **Merged By**: alice-i-cecile

## Description Translation
# Objective

- Allow third-party code to integrate with winit `MonitorHandle`s represented by bevy `Monitor` entities.

## Solution

- Reexport this resource type, just like `WinitWindows`.
- It was already part of the public API through the system types.

## The Story of This Pull Request

This PR addresses a straightforward but important consistency issue in Bevy's windowing API. The problem was that while `WinitMonitors` was technically accessible through Bevy's system types, it wasn't properly re-exported in the public API, making it difficult for third-party code to work with monitor entities.

The core issue stems from how Bevy organizes its windowing functionality. The `bevy_winit` crate bridges Bevy's ECS architecture with the platform-specific winit library. Within this crate, `WinitMonitors` serves as a resource that tracks available monitors and their corresponding Bevy entities. However, despite being part of the public-facing system API, the type itself wasn't exported from the crate's main module.

Looking at the existing codebase, we can see a clear pattern: `WinitWindows` was already properly re-exported, providing external developers with access to window management functionality. The `WinitMonitors` resource followed a similar architectural pattern but lacked the same level of API exposure.

The solution implemented here is minimal and follows established conventions. By adding a single line to re-export the `winit_monitors` module and removing the now-redundant internal import, the PR brings monitor handling into parity with window handling. This change doesn't modify any behavior - it simply makes existing functionality properly accessible.

Additionally, the PR adds documentation to two key methods on the `WinitMonitors` struct:
- `nth(&self, n: usize)` for retrieving a monitor by index
- `find_entity(&self, entity: Entity)` for finding a monitor handle associated with a specific Bevy entity

These documentation improvements help clarify the purpose of these methods, which is particularly important now that they're part of the public API.

The implementation is technically sound because `WinitMonitors` was already designed to be part of the public surface - it just wasn't properly exported. This is evidenced by the fact that it was already accessible through system parameters. The change simply makes the direct type usage as straightforward as the system parameter usage.

From an architectural perspective, this change enhances the consistency of Bevy's windowing API. Third-party developers can now directly work with monitor resources in the same way they work with window resources, enabling more sophisticated multi-monitor applications and tools.

## Visual Representation

```mermaid
graph TD
    A[bevy_winit crate] --> B[WinitWindows - public]
    A --> C[WinitMonitors - now public]
    A --> D[Other winit types - public]
    
    C --> E[MonitorHandle access]
    C --> F[Entity mapping]
    
    E --> G[nth() method]
    F --> H[find_entity() method]
```

## Key Files Changed

### `crates/bevy_winit/src/lib.rs` (+1/-1)

This file received two key changes that work together to properly expose the `WinitMonitors` type:

```rust
// File: crates/bevy_winit/src/lib.rs

// Added re-export (line 38):
pub use winit_monitors::*;

// Removed internal import (lines 42-44):
// Before:
use crate::{
    accessibility::{AccessKitPlugin, WinitActionRequestHandlers},
    state::winit_runner,
    winit_monitors::WinitMonitors,
};

// After:
use crate::{
    accessibility::{AccessKitPlugin, WinitActionRequestHandlers},
    state::winit_runner,
};
```

The re-export makes all types from the `winit_monitors` module available at the crate root, while removing the internal import eliminates redundancy since the type is now available through the public API.

### `crates/bevy_winit/src/winit_monitors.rs` (+2/-0)

This file received documentation improvements for the public methods:

```rust
// File: crates/bevy_winit/src/winit_monitors.rs

// Added method documentation:
impl WinitMonitors {
    /// Gets the [`MonitorHandle`] at index `n`.
    pub fn nth(&self, n: usize) -> Option<MonitorHandle> {
        self.monitors.get(n).map(|(monitor, _)| monitor.clone())
    }

    /// Gets the [`MonitorHandle`] associated with a `Monitor` entity.
    pub fn find_entity(&self, entity: Entity) -> Option<MonitorHandle> {
        self.monitors
            .iter()
            .find_map(|(monitor, monitor_entity)| (*monitor_entity == entity).then_some(monitor.clone()))
    }
}
```

These documentation comments clarify the purpose of each method, which is essential now that they're part of the public API that third-party developers will use.

## Further Reading

- [Bevy Window Management Documentation](https://docs.rs/bevy/latest/bevy/window/index.html)
- [winit MonitorHandle API](https://docs.rs/winit/latest/winit/monitor/struct.MonitorHandle.html)
- [Rust Module System and Visibility](https://doc.rust-lang.org/book/ch07-02-defining-modules-to-control-scope-and-privacy.html)
- [Bevy ECS Resources](https://bevy-cheatbook.github.io/programming/res.html)

# Full Code Diff
```
diff --git a/crates/bevy_winit/src/lib.rs b/crates/bevy_winit/src/lib.rs
index 6c3521b1e2708..20ec4c198680c 100644
--- a/crates/bevy_winit/src/lib.rs
+++ b/crates/bevy_winit/src/lib.rs
@@ -35,12 +35,12 @@ pub use winit::{
     window::{CustomCursor as WinitCustomCursor, CustomCursorSource},
 };
 pub use winit_config::*;
+pub use winit_monitors::*;
 pub use winit_windows::*;
 
 use crate::{
     accessibility::{AccessKitPlugin, WinitActionRequestHandlers},
     state::winit_runner,
-    winit_monitors::WinitMonitors,
 };
 
 pub mod accessibility;
diff --git a/crates/bevy_winit/src/winit_monitors.rs b/crates/bevy_winit/src/winit_monitors.rs
index 46c62038e2cd4..518c3dc394ba9 100644
--- a/crates/bevy_winit/src/winit_monitors.rs
+++ b/crates/bevy_winit/src/winit_monitors.rs
@@ -21,10 +21,12 @@ pub struct WinitMonitors {
 }
 
 impl WinitMonitors {
+    /// Gets the [`MonitorHandle`] at index `n`.
     pub fn nth(&self, n: usize) -> Option<MonitorHandle> {
         self.monitors.get(n).map(|(monitor, _)| monitor.clone())
     }
 
+    /// Gets the [`MonitorHandle`] associated with a `Monitor` entity.
     pub fn find_entity(&self, entity: Entity) -> Option<MonitorHandle> {
         self.monitors
             .iter()
```