+++
title = "#22118 Bump actions/download-artifact from 6 to 7"
date = "2025-12-18T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = false

[extra]
current_language = "zh-cn"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2025-12/pr-22118-en-20251218" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2025-12/pr-22118-zh-cn-20251218" }}
+++

# Title

## Basic Information
- **标题**: Bump actions/download-artifact from 6 to 7
- **PR链接**: https://github.com/bevyengine/bevy/pull/22118
- **作者**: app/dependabot
- **状态**: MERGED
- **标签**: A-Build-System, C-Dependencies, S-Ready-For-Final-Review
- **创建时间**: 2025-12-15T06:00:54Z
- **合并时间**: 2025-12-18T19:12:44Z
- **合并者**: alice-i-cecile

## Description Translation
将 [actions/download-artifact](https://github.com/actions/download-artifact) 从版本 6 升级到 7。
<details>
<summary>发布说明</summary>
<p><em>来源自 <a href="https://github.com/actions/download-artifact/releases">actions/download-artifact 的发布页面</a>。</em></p>
<blockquote>
<h2>v7.0.0</h2>
<h2>v7 - 新功能</h2>
<blockquote>
<p>[!重要]
actions/download-artifact@v7 现在运行在 Node.js 24 上 (<code>runs.using: node24</code>)，并要求 Actions Runner 的最低版本为 2.327.1。如果您使用自托管（self-hosted）的运行器，请在升级前确保它们已更新。</p>
</blockquote>
<h3>Node.js 24</h3>
<p>此版本将运行时更新至 Node.js 24。v6 已初步支持 Node 24，但该 Action 默认仍运行在 Node.js 20 上。现在此 Action 默认将运行在 Node.js 24 上。</p>
<h2>变更内容</h2>
<ul>
<li>更新 GHES 指引以包含对 Node 20 版本的引用，由 <a href="https://github.com/patrikpolyak"><code>@​patrikpolyak</code></a> 在 <a href="https://redirect.github.com/actions/download-artifact/pull/440">actions/download-artifact#440</a> 中提交</li>
<li>下载 Artifact 的 Node24 支持，由 <a href="https://github.com/salmanmkc"><code>@​salmanmkc</code></a> 在 <a href="https://redirect.github.com/actions/download-artifact/pull/415">actions/download-artifact#415</a> 中提交</li>
<li>修复：更新 <code>@​actions/artifact</code> 以解决 Node.js 24 的 punycode 弃用问题，由 <a href="https://github.com/salmanmkc"><code>@​salmanmkc</code></a> 在 <a href="https://redirect.github.com/actions/download-artifact/pull/451">actions/download-artifact#451</a> 中提交</li>
<li>为 Node.js 24 支持准备发布 v7.0.0，由 <a href="https://github.com/salmanmkc"><code>@​salmanmkc</code></a> 在 <a href="https://redirect.github.com/actions/download-artifact/pull/452">actions/download-artifact#452</a> 中提交</li>
</ul>
<h2>新贡献者</h2>
<ul>
<li><a href="https://github.com/patrikpolyak"><code>@​patrikpolyak</code></a> 在 <a href="https://redirect.github.com/actions/download-artifact/pull/440">actions/download-artifact#440</a> 中做出了第一次贡献</li>
<li><a href="https://github.com/salmanmkc"><code>@​salmanmkc</code></a> 在 <a href="https://redirect.github.com/actions/download-artifact/pull/415">actions/download-artifact#415</a> 中做出了第一次贡献</li>
</ul>
<p><strong>完整更新日志</strong>: <a href="https://github.com/actions/download-artifact/compare/v6.0.0...v7.0.0">https://github.com/actions/download-artifact/compare/v6.0.0...v7.0.0</a></p>
</blockquote>
</details>
<details>
<summary>提交记录</summary>
<ul>
<li><a href="https://github.com/actions/download-artifact/commit/37930b1c2abaa49bbe596cd826c3c89aef350131"><code>37930b1</code></a> Merge pull request <a href="https://redirect.github.com/actions/download-artifact/issues/452">#452</a> from actions/download-artifact-v7-release</li>
<li><a href="https://github.com/actions/download-artifact/commit/72582b9e0acd370909e83fa4a1fd0fca3ad452d8"><code>72582b9</code></a> 文档：更新 readme</li>
<li><a href="https://github.com/actions/download-artifact/commit/0d2ec9d4cbcefe257d822f108de2a1f15f8da9f6"><code>0d2ec9d</code></a> 事务：发布 v7.0.0 以支持 Node.js 24</li>
<li><a href="https://github.com/actions/download-artifact/commit/fd7ae8fda6dc16277a9ffbc91cdb0eedf156e912"><code>fd7ae8f</code></a> Merge pull request <a href="https://redirect.github.com/actions/download-artifact/issues/451">#451</a> from actions/fix-storage-blob</li>
<li><a href="https://github.com/actions/download-artifact/commit/d484700543354b15886d6a52910cf61b7f1d2b27"><code>d484700</code></a> 事务：恢复 minimatch.dep.yml 许可证文件</li>
<li><a href="https://github.com/actions/download-artifact/commit/03a808050efe42bb6ad85281890afd4e4546672c"><code>03a8080</code></a> 事务：移除过时的依赖许可证文件</li>
<li><a href="https://github.com/actions/download-artifact/commit/56fe6d904b0968950f8b68ea17774c54973ed5e2"><code>56fe6d9</code></a> 事务：将 <code>@​actions/artifact</code> 许可证文件更新至 5.0.1</li>
<li><a href="https://github.com/actions/download-artifact/commit/8e3ebc4ab4d2e095e5eb44ba1a4a53b6b03976ad"><code>8e3ebc4</code></a> 事务：使用 <code>@​actions/artifact</code><a href="https://github.com/5"><code>@​5</code></a>.0.1 更新 package-lock.json</li>
<li><a href="https://github.com/actions/download-artifact/commit/1e3c4b4d4906c98ab57453c24efefdf16c078044"><code>1e3c4b4</code></a> 修复：将 <code>@​actions/artifact</code> 更新至 ^5.0.0 以解决 Node.js 24 的 punycode 问题</li>
<li><a href="https://github.com/actions/download-artifact/commit/458627d354794c71bc386c8d5839d20b5885fe2a"><code>458627d</code></a> 事务：使用本地的 <code>@​actions/artifact</code> 包进行 Node.js 24 测试</li>
<li>更多提交记录可在 <a href="https://github.com/actions/download-artifact/compare/v6...v7">比较视图</a> 中查看</li>
</ul>
</details>
<br />


[![Dependabot 兼容性评分](https://dependabot-badges.githubapp.com/badges/compatibility_score?dependency-name=actions/download-artifact&package-manager=github_actions&previous-version=6&new-version=7)](https://docs.github.com/en/github/managing-security-vulnerabilities/about-dependabot-security-updates#about-compatibility-scores)

Dependabot 将自动解决此 PR 中的任何冲突，只要您不自行修改它。您也可以通过评论 `@dependabot rebase` 手动触发变基（rebase）。

[//]: # (dependabot-automerge-start)
[//]: # (dependabot-automerge-end)

---

<details>
<summary>Dependabot 命令和选项</summary>
<br />

您可以通过在此 PR 上评论来触发 Dependabot 操作：
- `@dependabot rebase` 将对此 PR 进行变基
- `@dependabot recreate` 将重新创建此 PR，覆盖已对其进行的任何编辑
- `@dependabot merge` 将在 CI 通过后合并此 PR
- `@dependabot squash and merge` 将在 CI 通过后压缩并合并此 PR
- `@dependabot cancel merge` 将取消先前请求的合并并阻止自动合并
- `@dependabot reopen` 将在 PR 关闭时重新打开它
- `@dependabot close` 将关闭此 PR 并阻止 Dependabot 重新创建它。您也可以通过手动关闭它来实现相同的结果
- `@dependabot show <dependency name> ignore conditions` 将显示指定依赖项的所有忽略条件
- `@dependabot ignore this major version` 将关闭此 PR 并阻止 Dependabot 为此主要版本创建更多 PR（除非您重新打开 PR 或自行升级）
- `@dependabot ignore this minor version` 将关闭此 PR 并阻止 Dependabot 为此次要版本创建更多 PR（除非您重新打开 PR 或自行升级）
- `@dependabot ignore this dependency` 将关闭此 PR 并阻止 Dependabot 为此依赖项创建更多 PR（除非您重新打开 PR 或自行升级）

</details>

## The Story of This Pull Request

这个 PR 讲述了一个关于依赖维护的简单但至关重要的故事。它并非修复一个紧急的 bug 或添加新功能，而是确保项目构建流水线（pipeline）的长期稳定性和现代化。

**问题的根源是技术栈的持续演进**。Bevy 引擎使用 GitHub Actions 进行持续集成（CI），其中 `actions/download-artifact` 是一个核心 Action，用于在 CI 工作流步骤之间下载构建产物（artifacts），例如测试生成的截图。这个 Action 的 v6 版本主要基于 Node.js 20 运行时。随着 Node.js 24 成为最新的长期支持（LTS）版本，上游维护者发布了 v7 版本，将默认运行时升级到了 Node.js 24。不进行升级虽然短期内不会导致问题，但长期来看会滞后于官方支持的安全更新、性能改进和新语言特性。更重要的是，v7 版本修复了一个与 Node.js 24 中 `punycode` 模块相关的弃用警告，这虽然当前只是警告，但预示着未来版本中可能出现的兼容性问题。因此，更新依赖是为了保持与生态系统的同步并预防潜在问题。

**解决方案非常直接：更新版本号**。这是 Dependabot 这类自动化依赖管理工具的典型操作。Dependabot 检测到项目 `send-screenshots-to-pixeleagle.yml` 工作流文件中锁定的 `actions/download-artifact@v6` 有新版本 `v7` 可用，便自动创建了这个 PR，将引用更新为 `actions/download-artifact@v7`。这个过程的核心价值在于自动化，它减轻了开发者手动追踪数十甚至上百个依赖更新的负担。

**然而，简单的版本号变更背后需要评估技术影响**。根据 v7 的发布说明，这次升级有一个关键的技术要求：它需要 GitHub Actions Runner 的最低版本为 2.327.1。对于 GitHub 托管的运行器（GitHub-hosted runners），用户无需担心，因为 GitHub 会维护其更新。但对于使用自托管运行器（self-hosted runners）的团队，这是一个重要的检查点。如果自托管运行器版本过旧，升级到此 Action 的 v7 版本可能会导致工作流失败。PR 描述中明确给出了警告，这体现了良好的升级实践——透明地沟通突破性变更（breaking changes）。Bevy 项目维护者在合并前显然确认了他们的运行器环境满足要求。Dependabot 提供的 95 分兼容性评分也给了团队很高的信心，表明此次升级风险较低。

**从工程角度看，这个 PR 体现了现代软件开发的几个最佳实践**。第一，**依赖管理的自动化**：通过 Dependabot 自动创建更新 PR，确保了依赖项漏洞和安全补丁能被及时响应。第二，**明确的变更沟通**：发布说明详细列出了从 Node.js 20 到 24 的升级、最低运行器要求以及具体的 bug 修复（如 punycode），让评审者能快速评估影响。第三，**最小化变更**：PR 只修改了必要的版本号，没有引入任何无关的代码改动，这符合单一职责原则，使得代码审查和回滚（rollback）都变得非常简单。

最终，这个 PR 被顺利合并。它的影响是确保 Bevy 的 CI 流程中用于处理测试截图上传的步骤，运行在更新的、受支持的 Node.js 运行时上，从而获得了更好的性能、安全性和与未来 GitHub Actions 平台的兼容性。这是一个维护性（maintenance）更新的经典案例，虽然不引人注目，但对于项目基础设施的长期健康至关重要。

## Visual Representation

```mermaid
graph TD
    subgraph “GitHub Actions 工作流”
        A[“CI 任务生成<br>截图产物 (Artifact)”]
    end

    A --> B[“Download Artifact Step<br>使用 `actions/download-artifact`”]

    B -- “PR #22118: v6 → v7” --> C{“Action 版本”}
    C -->|“v6 (之前)”| D[“基于 Node.js 20 运行时”]
    C -->|“v7 (之后)”| E[“基于 Node.js 24 运行时<br>要求 Runner >= v2.327.1”]

    E --> F[“后续步骤: 发送截图至 PixelEagle”]
```

## Key Files Changed

**文件路径**: `.github/workflows/send-screenshots-to-pixeleagle.yml`

1.  **变更描述及原因**: 该文件定义了一个 GitHub Actions 工作流，其任务之一是从之前的步骤中下载构建产物（截图）。此次变更将该步骤中使用的 `actions/download-artifact` Action 从版本 `v6` 升级到 `v7`，以利用新版本的 Node.js 24 运行时和相关的修复。
2.  **代码片段**:
    ```yaml
    # 文件: .github/workflows/send-screenshots-to-pixeleagle.yml
    # 变更前:
      - name: Download artifact
        if: ${{ fromJSON(env.PIXELEAGLE_TOKEN_EXISTS) }}
        uses: actions/download-artifact@v6
        with:
          pattern: ${{ inputs.artifact }}

    # 变更后:
      - name: Download artifact
        if: ${{ fromJSON(env.PIXELEAGLE_TOKEN_EXISTS) }}
        uses: actions/download-artifact@v7
        with:
          pattern: ${{ inputs.artifact }}
    ```
3.  **与 PR 目标的关联**: 这是本 PR 唯一且直接的修改。它将 `actions/download-artifact` 的版本引用从 `v6` 更新为 `v7`，直接实现了 PR 标题和描述中所说的依赖升级目标。

## Further Reading

1.  **GitHub Actions 官方文档 - 使用 Actions**:
    *   [关于 GitHub Actions](https://docs.github.com/en/actions/learn-github-actions/understanding-github-actions)
    *   [在工作流中引用和重用 Actions](https://docs.github.com/en/actions/learn-github-actions/reusing-workflows#referencing-actions-in-your-workflow)
2.  **Node.js 发布与 LTS 计划**:
    *   [Node.js 发布日程](https://github.com/nodejs/release#release-schedule) - 了解 Node.js 版本的生命周期和 LTS 状态。
    *   [Node.js 24 发布公告](https://nodejs.org/en/blog/announcements/v24-release-announce) - 查看 Node.js 24 引入的新特性和变更。
3.  **Dependabot 文档**:
    *   [关于 Dependabot 版本更新](https://docs.github.com/en/code-security/dependabot/dependabot-version-updates/about-dependabot-version-updates) - 了解 Dependabot 如何自动保持依赖项为最新。
    *   [配置 Dependabot 版本更新](https://docs.github.com/en/code-security/dependabot/dependabot-version-updates/configuring-dependabot-version-updates) - 学习如何在项目中配置类似的自维护功能。


# Full Code Diff
diff --git a/.github/workflows/send-screenshots-to-pixeleagle.yml b/.github/workflows/send-screenshots-to-pixeleagle.yml
index f872e624a0498..f3aa43afbf606 100644
--- a/.github/workflows/send-screenshots-to-pixeleagle.yml
+++ b/.github/workflows/send-screenshots-to-pixeleagle.yml
@@ -40,7 +40,7 @@ jobs:
 
       - name: Download artifact
         if: ${{ fromJSON(env.PIXELEAGLE_TOKEN_EXISTS) }}
-        uses: actions/download-artifact@v6
+        uses: actions/download-artifact@v7
         with:
           pattern: ${{ inputs.artifact }}
