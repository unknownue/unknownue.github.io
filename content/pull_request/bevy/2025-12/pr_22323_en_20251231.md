+++
title = "#22323 `bevy_dev_tools::fps_overlay` elide default font"
date = "2025-12-31T00:00:00"
draft = false
template = "pull_request_page.html"
in_search_index = true

[taxonomies]
list_display = ["show"]

[extra]
current_language = "en"
available_languages = {"en" = { name = "English", url = "/pull_request/bevy/2025-12/pr-22323-en-20251231" }, "zh-cn" = { name = "中文", url = "/pull_request/bevy/2025-12/pr-22323-zh-cn-20251231" }}
labels = ["D-Trivial", "C-Code-Quality", "A-Dev-Tools"]
+++

# Title

## Basic Information
- **Title**: `bevy_dev_tools::fps_overlay` elide default font
- **PR Link**: https://github.com/bevyengine/bevy/pull/22323
- **Author**: ickshonpe
- **Status**: MERGED
- **Labels**: D-Trivial, C-Code-Quality, S-Ready-For-Final-Review, A-Dev-Tools
- **Created**: 2025-12-31T12:09:45Z
- **Merged**: 2025-12-31T22:22:27Z
- **Merged By**: alice-i-cecile

## Description Translation
Translate the PR description to the target language, preserving:
- Technical terms in English
- All image references and links exactly as they appear
- Code blocks and formatting

Note: If the target language is English, simply include the original description exactly as-is, without any translation notes or placeholders.

# Objective

In `fps_overlay` ellide the `font` field, setting `font: Handle::<Font>::default()` explicitly is a bit weird.

## The Story of This Pull Request

This PR addresses a code quality issue in Bevy's developer tools module, specifically in the FPS overlay system. The problem centered around an unnecessarily explicit initialization pattern that could be simplified using existing API functionality.

When configuring the default FPS overlay, the code was manually constructing a `TextFont` struct with explicit default values:

```rust
text_config: TextFont {
    font: Handle::<Font>::default(),
    font_size: 32.0,
    ..Default::default()
}
```

This pattern had two notable issues. First, it was unnecessarily verbose - the explicit setting of `font: Handle::<Font>::default()` was redundant because this is already the default value for that field. Second, and more importantly, Bevy's `TextFont` struct provides a convenience method `from_font_size()` that handles this exact use case more cleanly. The existing code was essentially reimplementing behavior that was already available through the standard API.

The fix was straightforward and focused on code clarity rather than functional changes. By using `TextFont::from_font_size(32.)`, the code becomes more concise and leverages the existing API as intended. This method internally handles the font handle initialization with default values, eliminating the need for manual struct construction with explicit defaults.

Interestingly, this change also required updating the imports. The original code imported `Handle` and `Font` from `bevy_asset` and `bevy_text` respectively, but with the simplified approach, these imports were no longer needed. This demonstrates how API improvements can cascade into cleaner import statements, reducing the cognitive load when reading the code.

The technical approach here follows established Rust patterns for improving code ergonomics. The `from_font_size` method is an example of a "constructor pattern" that provides a more readable and maintainable way to create struct instances compared to manual struct literals with spread operators. This pattern is particularly valuable when dealing with complex default values or when certain fields should always be initialized together.

From an engineering perspective, this change represents a typical code quality improvement seen in mature codebases. As APIs evolve and convenience methods are added, existing code should be updated to use these improvements. This reduces maintenance burden and improves consistency across the codebase.

The impact of this change is minimal but meaningful. Functionally, the FPS overlay behaves exactly as before - the font defaults to the same handle, and the font size remains 32.0. However, the code is now cleaner, easier to understand, and better aligned with Bevy's API conventions. Future developers working on this code will encounter a more idiomatic pattern that clearly communicates intent through the `from_font_size` method name rather than requiring them to parse explicit struct initialization.

This type of change also has subtle benefits for maintainability. If the `TextFont` struct's default behavior changes in the future (for example, if the default font handle initialization logic is updated), code using `from_font_size()` will automatically inherit those improvements, while explicit struct initialization would need to be updated manually.

## Visual Representation

```mermaid
graph TD
    A[FpsOverlayConfig] --> B[text_config: TextFont]
    B --> C[Original: Manual struct initialization]
    B --> D[Updated: TextFont::from_font_size(32.)]
    C --> E[font: Handle::<Font>::default()]
    C --> F[font_size: 32.0]
    C --> G[..Default::default()]
    D --> H[Internal default font handle]
    D --> I[Explicit font_size: 32.0]
```

## Key Files Changed

### `crates/bevy_dev_tools/src/fps_overlay.rs`
This file contains the FPS overlay plugin for Bevy's developer tools. The changes simplify the default configuration initialization by using a more concise API method.

**Key changes:**
1. Removed unnecessary imports (`Handle` and `Font`) that were no longer needed after the simplification
2. Updated the `Default` implementation for `FpsOverlayConfig` to use `TextFont::from_font_size()` instead of manual struct initialization

```rust
// Before:
text_config: TextFont {
    font: Handle::<Font>::default(),
    font_size: 32.0,
    ..Default::default()
}

// After:
text_config: TextFont::from_font_size(32.)
```

The change leverages an existing constructor method that handles default font initialization internally, making the code cleaner and more maintainable.

## Further Reading

1. **Rust Constructor Patterns**: The Rust Programming Language book section on associated functions and the `new` convention for constructors
2. **Bevy Text API Documentation**: Documentation for the `TextFont` struct and its associated methods
3. **Rust Default Trait**: Understanding how `Default::default()` works and when to use it versus custom constructors
4. **Bevy ECS Plugin Architecture**: How developer tools plugins like the FPS overlay integrate into Bevy's Entity Component System